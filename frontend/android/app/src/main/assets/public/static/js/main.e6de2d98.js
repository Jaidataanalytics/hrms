/*! For license information please see main.e6de2d98.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,s){var a=s(853),n=s(43),r=s(950);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(l(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case x:return"Portal";case b:return e.displayName||"Context";case j:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return D(e(t))}catch(Bt){}}return null}var R=Array.isArray,O=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},L=[],I=-1;function z(e){return{current:e}}function B(e){0>I||(e.current=L[I],L[I]=null,I--)}function U(e,t){I++,L[I]=e.current,e.current=t}var V,H,W=z(null),q=z(null),Y=z(null),G=z(null);function K(e,t){switch(U(Y,t),U(q,e),U(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yu(t=gu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(W),U(W,e)}function $(){B(W),B(q),B(Y)}function X(e){null!==e.memoizedState&&U(G,e);var t=W.current,s=yu(t,e.type);t!==s&&(U(q,e),U(W,s))}function J(e){q.current===e&&(B(W),B(q)),G.current===e&&(B(G),uh._currentValue=F)}function Q(e){if(void 0===V)try{throw Error()}catch(Bt){var t=Bt.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",H=-1<Bt.stack.indexOf("\n    at")?" (<anonymous>)":-1<Bt.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+V+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(Bt){var a=Bt}Reflect.construct(e,[],s)}else{try{s.call()}catch(n){a=n}e.call(s.prototype)}}else{try{throw Error()}catch(r){a=r}(s=e())&&"function"===typeof s.catch&&s.catch(function(){})}}catch(l){if(l&&a&&"string"===typeof l.stack)return[l.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),l=r[0],i=r[1];if(l&&i){var o=l.split("\n"),c=i.split("\n");for(n=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(a===o.length||n===c.length)for(a=o.length-1,n=c.length-1;1<=a&&0<=n&&o[a]!==c[n];)n--;for(;1<=a&&0<=n;a--,n--)if(o[a]!==c[n]){if(1!==a||1!==n)do{if(a--,0>--n||o[a]!==c[n]){var d="\n"+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=n);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Q(s):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Q("Activity");default:return""}}function se(e){try{var t="",s=null;do{t+=te(e,s),s=e,e=e.return}while(e);return t}catch(Bt){return"\nError generating stack: "+Bt.message+"\n"+Bt.stack}}var ae=Object.prototype.hasOwnProperty,ne=a.unstable_scheduleCallback,re=a.unstable_cancelCallback,le=a.unstable_shouldYield,ie=a.unstable_requestPaint,oe=a.unstable_now,ce=a.unstable_getCurrentPriorityLevel,de=a.unstable_ImmediatePriority,ue=a.unstable_UserBlockingPriority,he=a.unstable_NormalPriority,me=a.unstable_LowPriority,pe=a.unstable_IdlePriority,fe=a.log,xe=a.unstable_setDisableYieldValue,ve=null,ge=null;function ye(e){if("function"===typeof fe&&xe(e),ge&&"function"===typeof ge.setStrictMode)try{ge.setStrictMode(ve,e)}catch(t){}}var je=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(be(e)/we|0)|0},be=Math.log,we=Math.LN2;var Ne=256,_e=262144,ke=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,s){var a=e.pendingLanes;if(0===a)return 0;var n=0,r=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var i=134217727&a;return 0!==i?0!==(a=i&~r)?n=Se(a):0!==(l&=i)?n=Se(l):s||0!==(s=i&~e)&&(n=Se(s)):0!==(i=a&~r)?n=Se(i):0!==l?n=Se(l):s||0!==(s=a&~e)&&(n=Se(s)),0===n?0:0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(s=t&-t)||32===r&&0!==(4194048&s))?t:n}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Pe(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-je(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&s}function Oe(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-je(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}function Me(e,t){var s=t&-t;return 0!==((s=0!==(42&s)?1:Fe(s))&(e.suspendedLanes|t))?0:s}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ie(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function ze(e,t){var s=M.p;try{return M.p=e,t()}finally{M.p=s}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,Ve="__reactProps$"+Be,He="__reactContainer$"+Be,We="__reactEvents$"+Be,qe="__reactListeners$"+Be,Ye="__reactHandles$"+Be,Ge="__reactResources$"+Be,Ke="__reactMarker$"+Be;function $e(e){delete e[Ue],delete e[Ve],delete e[We],delete e[qe],delete e[Ye]}function Xe(e){var t=e[Ue];if(t)return t;for(var s=e.parentNode;s;){if(t=s[He]||s[Ue]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=Lu(e);null!==e;){if(s=e[Ue])return s;e=Lu(e)}return t}s=(e=s).parentNode}return null}function Je(e){if(e=e[Ue]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ke]=!0}var tt=new Set,st={};function at(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(st[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},it={};function ot(e,t,s){if(n=t,ae.call(it,n)||!ae.call(lt,n)&&(rt.test(n)?it[n]=!0:(lt[n]=!0,0)))if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+s)}var n}function ct(e,t,s){if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+s)}}function dt(e,t,s,a){if(null===a)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(s)}e.setAttributeNS(t,s,""+a)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,s){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var n=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=ht(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var xt=/[\n"\\]/g;function vt(e){return e.replace(xt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,s,a,n,r,l,i){e.name="",null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?jt(e,l,ut(t)):null!=s?jt(e,l,ut(s)):null!=a&&e.removeAttribute("value"),null==n&&null!=r&&(e.defaultChecked=!!r),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ut(i):e.removeAttribute("name")}function yt(e,t,s,a,n,r,l,i){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=s){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return void mt(e);s=null!=s?""+ut(s):"",t=null!=t?""+ut(t):s,i||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:n)&&"symbol"!==typeof a&&!!a,e.checked=i?e.checked:!!a,e.defaultChecked=!!a,null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.name=l),mt(e)}function jt(e,t,s){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function bt(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+ut(s),t=null,n=0;n<e.length;n++){if(e[n].value===s)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function wt(e,t,s){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=s)?e.defaultValue=null!=s?""+ut(s):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,s,a){if(null==t){if(null!=a){if(null!=s)throw Error(l(92));if(R(a)){if(1<a.length)throw Error(l(93));a=a[0]}s=a}null==s&&(s=""),t=s}s=ut(t),e.defaultValue=s,(a=e.textContent)===s&&""!==a&&null!==a&&(e.value=a),mt(e)}function _t(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,s){var a=0===t.indexOf("--");null==s||"boolean"===typeof s||""===s?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,s):"number"!==typeof s||0===s||kt.has(t)?"float"===t?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Ct(e,t,s){if(null!=t&&"object"!==typeof t)throw Error(l(62));if(e=e.style,null!=s){for(var a in s)!s.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var n in t)a=t[n],t.hasOwnProperty(n)&&s[n]!==a&&St(e,n,a)}else for(var r in t)t.hasOwnProperty(r)&&St(e,r,t[r])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Rt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Ft=null;function Lt(e){var t=Je(e);if(t&&(e=t.stateNode)){var s=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=a[Ve]||null;if(!n)throw Error(l(90));gt(a,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)(a=s[t]).form===e.form&&pt(a)}break e;case"textarea":wt(e,s.value,s.defaultValue);break e;case"select":null!=(t=s.value)&&bt(e,!!s.multiple,t,!1)}}}var It=!1;function zt(e,t,s){if(It)return e(t,s);It=!0;try{return e(t)}finally{if(It=!1,(null!==Mt||null!==Ft)&&(ed(),Mt&&(t=Mt,e=Ft,Ft=Mt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var s=e.stateNode;if(null===s)return null;var a=s[Ve]||null;if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(l(231,t,typeof s));return s}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(Vt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Qh){Ht=!1}var qt=null,Yt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,s=Yt,a=s.length,n="value"in qt?qt.value:qt.textContent,r=n.length;for(e=0;e<a&&s[e]===n[e];e++);var l=a-e;for(t=1;t<=l&&s[a-t]===n[r-t];t++);return Gt=n.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Jt(){return!1}function Qt(e){function t(t,s,a,n,r){for(var l in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Xt:Jt,this.isPropagationStopped=Jt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,es,ts,ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=Qt(ss),ns=m({},ss,{view:0,detail:0}),rs=Qt(ns),ls=m({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&"mousemove"===e.type?(Zt=e.screenX-ts.screenX,es=e.screenY-ts.screenY):es=Zt=0,ts=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:es}}),is=Qt(ls),os=Qt(m({},ls,{dataTransfer:0})),cs=Qt(m({},ns,{relatedTarget:0})),ds=Qt(m({},ss,{animationName:0,elapsedTime:0,pseudoElement:0})),us=Qt(m({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hs=Qt(m({},ss,{data:0})),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xs(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fs[e])&&!!t[e]}function vs(){return xs}var gs=Qt(m({},ns,{key:function(e){if(e.key){var t=ms[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),ys=Qt(m({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),js=Qt(m({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs})),bs=Qt(m({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0})),ws=Qt(m({},ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ns=Qt(m({},ss,{newState:0,oldState:0})),_s=[9,13,27,32],ks=Vt&&"CompositionEvent"in window,Ss=null;Vt&&"documentMode"in document&&(Ss=document.documentMode);var Cs=Vt&&"TextEvent"in window&&!Ss,Es=Vt&&(!ks||Ss&&8<Ss&&11>=Ss),Ts=String.fromCharCode(32),As=!1;function Ps(e,t){switch(e){case"keyup":return-1!==_s.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ds(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rs=!1;var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Os[e.type]:"textarea"===t}function Fs(e,t,s,a){Mt?Ft?Ft.push(a):Ft=[a]:Mt=a,0<(t=nu(t,"onChange")).length&&(s=new as("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Ls=null,Is=null;function zs(e){Xd(e,0)}function Bs(e){if(pt(Qe(e)))return e}function Us(e,t){if("change"===e)return t}var Vs=!1;if(Vt){var Hs;if(Vt){var Ws="oninput"in document;if(!Ws){var qs=document.createElement("div");qs.setAttribute("oninput","return;"),Ws="function"===typeof qs.oninput}Hs=Ws}else Hs=!1;Vs=Hs&&(!document.documentMode||9<document.documentMode)}function Ys(){Ls&&(Ls.detachEvent("onpropertychange",Gs),Is=Ls=null)}function Gs(e){if("value"===e.propertyName&&Bs(Is)){var t=[];Fs(t,Is,e,Ot(e)),zt(zs,t)}}function Ks(e,t,s){"focusin"===e?(Ys(),Is=s,(Ls=t).attachEvent("onpropertychange",Gs)):"focusout"===e&&Ys()}function $s(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bs(Is)}function Xs(e,t){if("click"===e)return Bs(t)}function Js(e,t){if("input"===e||"change"===e)return Bs(t)}var Qs="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zs(e,t){if(Qs(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!ae.call(t,n)||!Qs(e[n],t[n]))return!1}return!0}function ea(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ta(e,t){var s,a=ea(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ea(a)}}function sa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function aa(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=ft((e=t.contentWindow).document)}return t}function na(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ra=Vt&&"documentMode"in document&&11>=document.documentMode,la=null,ia=null,oa=null,ca=!1;function da(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;ca||null==la||la!==ft(a)||("selectionStart"in(a=la)&&na(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},oa&&Zs(oa,a)||(oa=a,0<(a=nu(ia,"onSelect")).length&&(t=new as("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=la)))}function ua(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ha={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},ma={},pa={};function fa(e){if(ma[e])return ma[e];if(!ha[e])return e;var t,s=ha[e];for(t in s)if(s.hasOwnProperty(t)&&t in pa)return ma[e]=s[t];return e}Vt&&(pa=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);var xa=fa("animationend"),va=fa("animationiteration"),ga=fa("animationstart"),ya=fa("transitionrun"),ja=fa("transitionstart"),ba=fa("transitioncancel"),wa=fa("transitionend"),Na=new Map,_a="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(e,t){Na.set(e,t),at(t,[e])}_a.push("scrollEnd");var Sa="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ca=[],Ea=0,Ta=0;function Aa(){for(var e=Ea,t=Ta=Ea=0;t<e;){var s=Ca[t];Ca[t++]=null;var a=Ca[t];Ca[t++]=null;var n=Ca[t];Ca[t++]=null;var r=Ca[t];if(Ca[t++]=null,null!==a&&null!==n){var l=a.pending;null===l?n.next=n:(n.next=l.next,l.next=n),a.pending=n}0!==r&&Oa(s,n,r)}}function Pa(e,t,s,a){Ca[Ea++]=e,Ca[Ea++]=t,Ca[Ea++]=s,Ca[Ea++]=a,Ta|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Da(e,t,s,a){return Pa(e,t,s,a),Ma(e)}function Ra(e,t){return Pa(e,null,null,t),Ma(e)}function Oa(e,t,s){e.lanes|=s;var a=e.alternate;null!==a&&(a.lanes|=s);for(var n=!1,r=e.return;null!==r;)r.childLanes|=s,null!==(a=r.alternate)&&(a.childLanes|=s),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(n=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,n&&null!==t&&(n=31-je(s),null===(a=(e=r.hiddenUpdates)[n])?e[n]=[t]:a.push(t),t.lane=536870912|s),r):null}function Ma(e){if(50<qc)throw qc=0,Yc=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fa={};function La(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(e,t,s,a){return new La(e,t,s,a)}function za(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ba(e,t){var s=e.alternate;return null===s?((s=Ia(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=65011712&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ua(e,t){e.flags&=65011714;var s=e.alternate;return null===s?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Va(e,t,s,a,n,r){var i=0;if(a=e,"function"===typeof e)za(e)&&(i=1);else if("string"===typeof e)i=function(e,t,s){if(1===s||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,s,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Ia(31,s,t,n)).elementType=C,e.lanes=r,e;case v:return Ha(s.children,n,r,t);case g:i=8,n|=24;break;case y:return(e=Ia(12,s,t,2|n)).elementType=y,e.lanes=r,e;case N:return(e=Ia(13,s,t,n)).elementType=N,e.lanes=r,e;case _:return(e=Ia(19,s,t,n)).elementType=_,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:i=10;break e;case j:i=9;break e;case w:i=11;break e;case k:i=14;break e;case S:i=16,a=null;break e}i=29,s=Error(l(130,null===e?"null":typeof e,"")),a=null}return(t=Ia(i,s,t,n)).elementType=e,t.type=a,t.lanes=r,t}function Ha(e,t,s,a){return(e=Ia(7,e,a,t)).lanes=s,e}function Wa(e,t,s){return(e=Ia(6,e,null,t)).lanes=s,e}function qa(e){var t=Ia(18,null,null,0);return t.stateNode=e,t}function Ya(e,t,s){return(t=Ia(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ga=new WeakMap;function Ka(e,t){if("object"===typeof e&&null!==e){var s=Ga.get(e);return void 0!==s?s:(t={value:e,source:t,stack:se(t)},Ga.set(e,t),t)}return{value:e,source:t,stack:se(t)}}var $a=[],Xa=0,Ja=null,Qa=0,Za=[],en=0,tn=null,sn=1,an="";function nn(e,t){$a[Xa++]=Qa,$a[Xa++]=Ja,Ja=e,Qa=t}function rn(e,t,s){Za[en++]=sn,Za[en++]=an,Za[en++]=tn,tn=e;var a=sn;e=an;var n=32-je(a)-1;a&=~(1<<n),s+=1;var r=32-je(t)+n;if(30<r){var l=n-n%5;r=(a&(1<<l)-1).toString(32),a>>=l,n-=l,sn=1<<32-je(t)+n|s<<n|a,an=r+e}else sn=1<<r|s<<n|a,an=e}function ln(e){null!==e.return&&(nn(e,1),rn(e,1,0))}function on(e){for(;e===Ja;)Ja=$a[--Xa],$a[Xa]=null,Qa=$a[--Xa],$a[Xa]=null;for(;e===tn;)tn=Za[--en],Za[en]=null,an=Za[--en],Za[en]=null,sn=Za[--en],Za[en]=null}function cn(e,t){Za[en++]=sn,Za[en++]=an,Za[en++]=tn,sn=t.id,an=t.overflow,tn=e}var dn=null,un=null,hn=!1,mn=null,pn=!1,fn=Error(l(519));function xn(e){throw wn(Ka(Error(l(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fn}function vn(e){var t=e.stateNode,s=e.type,a=e.memoizedProps;switch(t[Ue]=e,t[Ve]=a,s){case"dialog":Jd("cancel",t),Jd("close",t);break;case"iframe":case"object":case"embed":Jd("load",t);break;case"video":case"audio":for(s=0;s<Kd.length;s++)Jd(Kd[s],t);break;case"source":Jd("error",t);break;case"img":case"image":case"link":Jd("error",t),Jd("load",t);break;case"details":Jd("toggle",t);break;case"input":Jd("invalid",t),yt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Jd("invalid",t);break;case"textarea":Jd("invalid",t),Nt(t,a.value,a.defaultValue,a.children)}"string"!==typeof(s=a.children)&&"number"!==typeof s&&"bigint"!==typeof s||t.textContent===""+s||!0===a.suppressHydrationWarning||du(t.textContent,s)?(null!=a.popover&&(Jd("beforetoggle",t),Jd("toggle",t)),null!=a.onScroll&&Jd("scroll",t),null!=a.onScrollEnd&&Jd("scrollend",t),null!=a.onClick&&(t.onclick=Dt),t=!0):t=!1,t||xn(e,!0)}function gn(e){for(dn=e.return;dn;)switch(dn.tag){case 5:case 31:case 13:return void(pn=!1);case 27:case 3:return void(pn=!0);default:dn=dn.return}}function yn(e){if(e!==dn)return!1;if(!hn)return gn(e),hn=!0,!1;var t,s=e.tag;if((t=3!==s&&27!==s)&&((t=5===s)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ju(e.type,e.memoizedProps)),t=!t),t&&un&&xn(e),gn(e),13===s){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));un=Fu(e)}else if(31===s){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));un=Fu(e)}else 27===s?(s=un,Cu(e.type)?(e=Mu,Mu=null,un=e):un=s):un=dn?Ou(e.stateNode.nextSibling):null;return!0}function jn(){un=dn=null,hn=!1}function bn(){var e=mn;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),mn=null),e}function wn(e){null===mn?mn=[e]:mn.push(e)}var Nn=z(null),_n=null,kn=null;function Sn(e,t,s){U(Nn,t._currentValue),t._currentValue=s}function Cn(e){e._currentValue=Nn.current,B(Nn)}function En(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Tn(e,t,s,a){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var r=n.dependencies;if(null!==r){var i=n.child;r=r.firstContext;e:for(;null!==r;){var o=r;r=n;for(var c=0;c<t.length;c++)if(o.context===t[c]){r.lanes|=s,null!==(o=r.alternate)&&(o.lanes|=s),En(r.return,s,e),a||(i=null);break e}r=o.next}}else if(18===n.tag){if(null===(i=n.return))throw Error(l(341));i.lanes|=s,null!==(r=i.alternate)&&(r.lanes|=s),En(i,s,e),i=null}else i=n.child;if(null!==i)i.return=n;else for(i=n;null!==i;){if(i===e){i=null;break}if(null!==(n=i.sibling)){n.return=i.return,i=n;break}i=i.return}n=i}}function An(e,t,s,a){e=null;for(var n=t,r=!1;null!==n;){if(!r)if(0!==(524288&n.flags))r=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var i=n.alternate;if(null===i)throw Error(l(387));if(null!==(i=i.memoizedProps)){var o=n.type;Qs(n.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(n===G.current){if(null===(i=n.alternate))throw Error(l(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}n=n.return}null!==e&&Tn(t,e,s,a),t.flags|=262144}function Pn(e){for(e=e.firstContext;null!==e;){if(!Qs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dn(e){_n=e,kn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Rn(e){return Mn(_n,e)}function On(e,t){return null===_n&&Dn(e),Mn(e,t)}function Mn(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},null===kn){if(null===e)throw Error(l(308));kn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kn=kn.next=t;return s}var Fn="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ln=a.unstable_scheduleCallback,In=a.unstable_NormalPriority,zn={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bn(){return{controller:new Fn,data:new Map,refCount:0}}function Un(e){e.refCount--,0===e.refCount&&Ln(In,function(){e.controller.abort()})}var Vn=null,Hn=0,Wn=0,qn=null;function Yn(){if(0===--Hn&&null!==Vn){null!==qn&&(qn.status="fulfilled");var e=Vn;Vn=null,Wn=0,qn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gn=O.S;O.S=function(e,t){Oc=oe(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Vn){var s=Vn=[];Hn=0,Wn=Hd(),qn={status:"pending",value:void 0,then:function(e){s.push(e)}}}Hn++,t.then(Yn,Yn)}(0,t),null!==Gn&&Gn(e,t)};var Kn=z(null);function $n(){var e=Kn.current;return null!==e?e:fc.pooledCache}function Xn(e,t){U(Kn,null===t?Kn.current:t.pool)}function Jn(){var e=$n();return null===e?null:{parent:zn._currentValue,pool:e}}var Qn=Error(l(460)),Zn=Error(l(474)),er=Error(l(542)),tr={then:function(){}};function sr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ar(e,t,s){switch(void 0===(s=e[s])?e.push(t):s!==t&&(t.then(Dt,Dt),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e;default:if("string"===typeof t.status)t.then(Dt,Dt);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var s=t;s.status="fulfilled",s.value=e}},function(e){if("pending"===t.status){var s=t;s.status="rejected",s.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e}throw rr=t,Qn}}function nr(e){try{return(0,e._init)(e._payload)}catch(Bt){if(null!==Bt&&"object"===typeof Bt&&"function"===typeof Bt.then)throw rr=Bt,Qn;throw Bt}}var rr=null;function lr(){if(null===rr)throw Error(l(459));var e=rr;return rr=null,e}function ir(e){if(e===Qn||e===er)throw Error(l(483))}var or=null,cr=0;function dr(e){var t=cr;return cr+=1,null===or&&(or=[]),ar(or,e,t)}function ur(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hr(e,t){if(t.$$typeof===p)throw Error(l(525));throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mr(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Ba(e,t)).index=0,e.sibling=null,e}function r(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=67108866,s):a:(t.flags|=67108866,s):(t.flags|=1048576,s)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=Wa(s,e.mode,a)).return=e,t):((t=n(t,s)).return=e,t)}function c(e,t,s,a){var r=s.type;return r===v?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&nr(r)===t.type)?(ur(t=n(t,s.props),s),t.return=e,t):(ur(t=Va(s.type,s.key,s.props,null,e.mode,a),s),t.return=e,t)}function d(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Ya(s,e.mode,a)).return=e,t):((t=n(t,s.children||[])).return=e,t)}function u(e,t,s,a,r){return null===t||7!==t.tag?((t=Ha(s,e.mode,a,r)).return=e,t):((t=n(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wa(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return ur(s=Va(t.type,t.key,t.props,null,e.mode,s),t),s.return=e,s;case x:return(t=Ya(t,e.mode,s)).return=e,t;case S:return h(e,t=nr(t),s)}if(R(t)||A(t))return(t=Ha(t,e.mode,s,null)).return=e,t;if("function"===typeof t.then)return h(e,dr(t),s);if(t.$$typeof===b)return h(e,On(e,t),s);hr(e,t)}return null}function m(e,t,s,a){var n=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return null!==n?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case f:return s.key===n?c(e,t,s,a):null;case x:return s.key===n?d(e,t,s,a):null;case S:return m(e,t,s=nr(s),a)}if(R(s)||A(s))return null!==n?null:u(e,t,s,a,null);if("function"===typeof s.then)return m(e,t,dr(s),a);if(s.$$typeof===b)return m(e,t,On(e,s),a);hr(e,s)}return null}function p(e,t,s,a,n){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return o(t,e=e.get(s)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case f:return c(t,e=e.get(null===a.key?s:a.key)||null,a,n);case x:return d(t,e=e.get(null===a.key?s:a.key)||null,a,n);case S:return p(e,t,s,a=nr(a),n)}if(R(a)||A(a))return u(t,e=e.get(s)||null,a,n,null);if("function"===typeof a.then)return p(e,t,s,dr(a),n);if(a.$$typeof===b)return p(e,t,s,On(t,a),n);hr(t,a)}return null}function g(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===v&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===v){if(7===c.tag){s(o,c.sibling),(u=n(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&nr(y)===c.type){s(o,c.sibling),ur(u=n(c,d.props),d),u.return=o,o=u;break e}s(o,c);break}t(o,c),c=c.sibling}d.type===v?((u=Ha(d.props.children,o.mode,u,d.key)).return=o,o=u):(ur(u=Va(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return i(o);case x:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){s(o,c.sibling),(u=n(c,d.children||[])).return=o,o=u;break e}s(o,c);break}t(o,c),c=c.sibling}(u=Ya(d,o.mode,u)).return=o,o=u}return i(o);case S:return g(o,c,d=nr(d),u)}if(R(d))return function(n,l,i,o){for(var c=null,d=null,u=l,f=l=0,x=null;null!==u&&f<i.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var v=m(n,u,i[f],o);if(null===v){null===u&&(u=x);break}e&&u&&null===v.alternate&&t(n,u),l=r(v,l,f),null===d?c=v:d.sibling=v,d=v,u=x}if(f===i.length)return s(n,u),hn&&nn(n,f),c;if(null===u){for(;f<i.length;f++)null!==(u=h(n,i[f],o))&&(l=r(u,l,f),null===d?c=u:d.sibling=u,d=u);return hn&&nn(n,f),c}for(u=a(u);f<i.length;f++)null!==(x=p(u,n,f,i[f],o))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),l=r(x,l,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),hn&&nn(n,f),c}(o,c,d,u);if(A(d)){if("function"!==typeof(y=A(d)))throw Error(l(150));return function(n,i,o,c){if(null==o)throw Error(l(151));for(var d=null,u=null,f=i,x=i=0,v=null,g=o.next();null!==f&&!g.done;x++,g=o.next()){f.index>x?(v=f,f=null):v=f.sibling;var y=m(n,f,g.value,c);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(n,f),i=r(y,i,x),null===u?d=y:u.sibling=y,u=y,f=v}if(g.done)return s(n,f),hn&&nn(n,x),d;if(null===f){for(;!g.done;x++,g=o.next())null!==(g=h(n,g.value,c))&&(i=r(g,i,x),null===u?d=g:u.sibling=g,u=g);return hn&&nn(n,x),d}for(f=a(f);!g.done;x++,g=o.next())null!==(g=p(f,n,x,g.value,c))&&(e&&null!==g.alternate&&f.delete(null===g.key?x:g.key),i=r(g,i,x),null===u?d=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(n,e)}),hn&&nn(n,x),d}(o,c,d=y.call(d),u)}if("function"===typeof d.then)return g(o,c,dr(d),u);if(d.$$typeof===b)return g(o,c,On(o,d),u);hr(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(s(o,c.sibling),(u=n(c,d)).return=o,o=u):(s(o,c),(u=Wa(d,o.mode,u)).return=o,o=u),i(o)):s(o,c)}return function(e,t,s,a){try{cr=0;var n=g(e,t,s,a);return or=null,n}catch(Bt){if(Bt===Qn||Bt===er)throw Bt;var r=Ia(29,Bt,null,e.mode);return r.lanes=a,r.return=e,r}}}var pr=mr(!0),fr=mr(!1),xr=!1;function vr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function jr(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&pc)){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,t=Ma(e),Oa(e,null,s),t}return Pa(e,a,t,s),Ma(e)}function br(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,Oe(e,s)}}function wr(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var n=null,r=null;if(null!==(s=s.firstBaseUpdate)){do{var l={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};null===r?n=r=l:r=r.next=l,s=s.next}while(null!==s);null===r?n=r=t:r=r.next=t}else n=r=t;return s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Nr=!1;function _r(){if(Nr){if(null!==qn)throw qn}}function kr(e,t,s,a){Nr=!1;var n=e.updateQueue;xr=!1;var r=n.firstBaseUpdate,l=n.lastBaseUpdate,i=n.shared.pending;if(null!==i){n.shared.pending=null;var o=i,c=o.next;o.next=null,null===l?r=c:l.next=c,l=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(l=0,d=c=o=null,i=r;;){var h=-536870913&i.lane,p=h!==i.lane;if(p?(vc&h)===h:(a&h)===h){0!==h&&h===Wn&&(Nr=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var f=e,x=i;h=t;var v=s;switch(x.tag){case 1:if("function"===typeof(f=x.payload)){u=f.call(v,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=x.payload)?f.call(v,u,h):f)||void 0===h)break e;u=m({},u,h);break e;case 2:xr=!0}}null!==(h=i.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=n.callbacks)?n.callbacks=[h]:p.push(h))}else p={lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,l|=h;if(null===(i=i.next)){if(null===(i=n.shared.pending))break;i=(p=i).next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null===r&&(n.shared.lanes=0),kc|=l,e.lanes=l,e.memoizedState=u}}function Sr(e,t){if("function"!==typeof e)throw Error(l(191,e));e.call(t)}function Cr(e,t){var s=e.callbacks;if(null!==s)for(e.callbacks=null,e=0;e<s.length;e++)Sr(s[e],t)}var Er=z(null),Tr=z(0);function Ar(e,t){U(Tr,e=Nc),U(Er,t),Nc=e|t.baseLanes}function Pr(){U(Tr,Nc),U(Er,Er.current)}function Dr(){Nc=Tr.current,B(Er),B(Tr)}var Rr=z(null),Or=null;function Mr(e){var t=e.alternate;U(Br,1&Br.current),U(Rr,e),null===Or&&(null===t||null!==Er.current||null!==t.memoizedState)&&(Or=e)}function Fr(e){U(Br,Br.current),U(Rr,e),null===Or&&(Or=e)}function Lr(e){22===e.tag?(U(Br,Br.current),U(Rr,e),null===Or&&(Or=e)):Ir()}function Ir(){U(Br,Br.current),U(Rr,Rr.current)}function zr(e){B(Rr),Or===e&&(Or=null),B(Br)}var Br=z(0);function Ur(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||Du(s)||Ru(s)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vr=0,Hr=null,Wr=null,qr=null,Yr=!1,Gr=!1,Kr=!1,$r=0,Xr=0,Jr=null,Qr=0;function Zr(){throw Error(l(321))}function el(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Qs(e[s],t[s]))return!1;return!0}function tl(e,t,s,a,n,r){return Vr=r,Hr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?xi:vi,Kr=!1,r=s(a,n),Kr=!1,Gr&&(r=al(t,s,a,n)),sl(e),r}function sl(e){O.H=fi;var t=null!==Wr&&null!==Wr.next;if(Vr=0,qr=Wr=Hr=null,Yr=!1,Xr=0,Jr=null,t)throw Error(l(300));null===e||Ri||null!==(e=e.dependencies)&&Pn(e)&&(Ri=!0)}function al(e,t,s,a){Hr=e;var n=0;do{if(Gr&&(Jr=null),Xr=0,Gr=!1,25<=n)throw Error(l(301));if(n+=1,qr=Wr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}O.H=gi,r=t(s,a)}while(Gr);return r}function nl(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?dl(t):t,e=e.useState()[0],(null!==Wr?Wr.memoizedState:null)!==e&&(Hr.flags|=1024),t}function rl(){var e=0!==$r;return $r=0,e}function ll(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function il(e){if(Yr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Yr=!1}Vr=0,qr=Wr=Hr=null,Gr=!1,Xr=$r=0,Jr=null}function ol(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qr?Hr.memoizedState=qr=e:qr=qr.next=e,qr}function cl(){if(null===Wr){var e=Hr.alternate;e=null!==e?e.memoizedState:null}else e=Wr.next;var t=null===qr?Hr.memoizedState:qr.next;if(null!==t)qr=t,Wr=e;else{if(null===e){if(null===Hr.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(Wr=e).memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},null===qr?Hr.memoizedState=qr=e:qr=qr.next=e}return qr}function dl(e){var t=Xr;return Xr+=1,null===Jr&&(Jr=[]),e=ar(Jr,e,t),t=Hr,null===(null===qr?t.memoizedState:qr.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?xi:vi),e}function ul(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return dl(e);if(e.$$typeof===b)return Rn(e)}throw Error(l(438,String(e)))}function hl(e){var t=null,s=Hr.updateQueue;if(null!==s&&(t=s.memoCache),null==t){var a=Hr.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===s&&(s={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=s),s.memoCache=t,void 0===(s=t.data[t.index]))for(s=t.data[t.index]=Array(e),a=0;a<e;a++)s[a]=E;return t.index++,s}function ml(e,t){return"function"===typeof t?t(e):t}function pl(e){return fl(cl(),Wr,e)}function fl(e,t,s){var a=e.queue;if(null===a)throw Error(l(311));a.lastRenderedReducer=s;var n=e.baseQueue,r=a.pending;if(null!==r){if(null!==n){var i=n.next;n.next=r.next,r.next=i}t.baseQueue=n=r,a.pending=null}if(r=e.baseState,null===n)e.memoizedState=r;else{var o=i=null,c=null,d=t=n.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(vc&h)===h:(Vr&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Wn&&(u=!0);else{if((Vr&m)===m){d=d.next,m===Wn&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,i=r):c=c.next=h,Hr.lanes|=m,kc|=m}h=d.action,Kr&&s(r,h),r=d.hasEagerState?d.eagerState:s(r,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,i=r):c=c.next=m,Hr.lanes|=h,kc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?i=r:c.next=o,!Qs(r,e.memoizedState)&&(Ri=!0,u&&null!==(s=qn)))throw s;e.memoizedState=r,e.baseState=i,e.baseQueue=c,a.lastRenderedState=r}return null===n&&(a.lanes=0),[e.memoizedState,a.dispatch]}function xl(e){var t=cl(),s=t.queue;if(null===s)throw Error(l(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,r=t.memoizedState;if(null!==n){s.pending=null;var i=n=n.next;do{r=e(r,i.action),i=i.next}while(i!==n);Qs(r,t.memoizedState)||(Ri=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),s.lastRenderedState=r}return[r,a]}function vl(e,t,s){var a=Hr,n=cl(),r=hn;if(r){if(void 0===s)throw Error(l(407));s=s()}else s=t();var i=!Qs((Wr||n).memoizedState,s);if(i&&(n.memoizedState=s,Ri=!0),n=n.queue,Vl(jl.bind(null,a,n,e),[e]),n.getSnapshot!==t||i||null!==qr&&1&qr.memoizedState.tag){if(a.flags|=2048,Ll(9,{destroy:void 0},yl.bind(null,a,n,s,t),null),null===fc)throw Error(l(349));r||0!==(127&Vr)||gl(a,t,s)}return s}function gl(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=Hr.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function yl(e,t,s,a){t.value=s,t.getSnapshot=a,bl(t)&&wl(e)}function jl(e,t,s){return s(function(){bl(t)&&wl(e)})}function bl(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Qs(e,s)}catch(a){return!0}}function wl(e){var t=Ra(e,2);null!==t&&$c(t,e,2)}function Nl(e){var t=ol();if("function"===typeof e){var s=e;if(e=s(),Kr){ye(!0);try{s()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t}function _l(e,t,s,a){return e.baseState=s,fl(e,Wr,"function"===typeof a?a:ml)}function kl(e,t,s,a,n){if(hi(e))throw Error(l(485));if(null!==(e=t.action)){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==O.T?s(!0):r.isTransition=!1,a(r),null===(s=t.pending)?(r.next=t.pending=r,Sl(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Sl(e,t){var s=t.action,a=t.payload,n=e.state;if(t.isTransition){var r=O.T,l={};O.T=l;try{var i=s(n,a),o=O.S;null!==o&&o(l,i),Cl(e,t,i)}catch(c){Tl(e,t,c)}finally{null!==r&&null!==l.types&&(r.types=l.types),O.T=r}}else try{Cl(e,t,r=s(n,a))}catch(d){Tl(e,t,d)}}function Cl(e,t,s){null!==s&&"object"===typeof s&&"function"===typeof s.then?s.then(function(s){El(e,t,s)},function(s){return Tl(e,t,s)}):El(e,t,s)}function El(e,t,s){t.status="fulfilled",t.value=s,Al(t),e.state=s,null!==(t=e.pending)&&((s=t.next)===t?e.pending=null:(s=s.next,t.next=s,Sl(e,s)))}function Tl(e,t,s){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=s,Al(t),t=t.next}while(t!==a)}e.action=null}function Al(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pl(e,t){return t}function Dl(e,t){if(hn){var s=fc.formState;if(null!==s){e:{var a=Hr;if(hn){if(un){t:{for(var n=un,r=pn;8!==n.nodeType;){if(!r){n=null;break t}if(null===(n=Ou(n.nextSibling))){n=null;break t}}n="F!"===(r=n.data)||"F"===r?n:null}if(n){un=Ou(n.nextSibling),a="F!"===n.data;break e}}xn(a)}a=!1}a&&(t=s[0])}}return(s=ol()).memoizedState=s.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:t},s.queue=a,s=ci.bind(null,Hr,a),a.dispatch=s,a=Nl(!1),r=ui.bind(null,Hr,!1,a.queue),n={state:t,dispatch:null,action:e,pending:null},(a=ol()).queue=n,s=kl.bind(null,Hr,n,r,s),n.dispatch=s,a.memoizedState=e,[t,s,!1]}function Rl(e){return Ol(cl(),Wr,e)}function Ol(e,t,s){if(t=fl(e,t,Pl)[0],e=pl(ml)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=dl(t)}catch(Bt){if(Bt===Qn)throw er;throw Bt}else a=t;var n=(t=cl()).queue,r=n.dispatch;return s!==t.memoizedState&&(Hr.flags|=2048,Ll(9,{destroy:void 0},Ml.bind(null,n,s),null)),[a,r,e]}function Ml(e,t){e.action=t}function Fl(e){var t=cl(),s=Wr;if(null!==s)return Ol(t,s,e);cl(),t=t.memoizedState;var a=(s=cl()).queue.dispatch;return s.memoizedState=e,[t,a,!1]}function Ll(e,t,s,a){return e={tag:e,create:s,deps:a,inst:t,next:null},null===(t=Hr.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t),null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function Il(){return cl().memoizedState}function zl(e,t,s,a){var n=ol();Hr.flags|=e,n.memoizedState=Ll(1|t,{destroy:void 0},s,void 0===a?null:a)}function Bl(e,t,s,a){var n=cl();a=void 0===a?null:a;var r=n.memoizedState.inst;null!==Wr&&null!==a&&el(a,Wr.memoizedState.deps)?n.memoizedState=Ll(t,r,s,a):(Hr.flags|=e,n.memoizedState=Ll(1|t,r,s,a))}function Ul(e,t){zl(8390656,8,e,t)}function Vl(e,t){Bl(2048,8,e,t)}function Hl(e){var t=cl().memoizedState;return function(e){Hr.flags|=4;var t=Hr.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t,t.events=[e];else{var s=t.events;null===s?t.events=[e]:s.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Wl(e,t){return Bl(4,2,e,t)}function ql(e,t){return Bl(4,4,e,t)}function Yl(e,t){if("function"===typeof t){e=e();var s=t(e);return function(){"function"===typeof s?s():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Gl(e,t,s){s=null!==s&&void 0!==s?s.concat([e]):null,Bl(4,4,Yl.bind(null,t,e),s)}function Kl(){}function $l(e,t){var s=cl();t=void 0===t?null:t;var a=s.memoizedState;return null!==t&&el(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Xl(e,t){var s=cl();t=void 0===t?null:t;var a=s.memoizedState;if(null!==t&&el(t,a[1]))return a[0];if(a=e(),Kr){ye(!0);try{e()}finally{ye(!1)}}return s.memoizedState=[a,t],a}function Jl(e,t,s){return void 0===s||0!==(1073741824&Vr)&&0===(261930&vc)?e.memoizedState=t:(e.memoizedState=s,e=Kc(),Hr.lanes|=e,kc|=e,s)}function Ql(e,t,s,a){return Qs(s,t)?s:null!==Er.current?(e=Jl(e,s,a),Qs(e,t)||(Ri=!0),e):0===(42&Vr)||0!==(1073741824&Vr)&&0===(261930&vc)?(Ri=!0,e.memoizedState=s):(e=Kc(),Hr.lanes|=e,kc|=e,t)}function Zl(e,t,s,a,n){var r=M.p;M.p=0!==r&&8>r?r:8;var l=O.T,i={};O.T=i,ui(e,!1,t,s);try{var o=n(),c=O.S;if(null!==c&&c(i,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)di(e,t,function(e,t){var s=[],a={status:"pending",value:null,reason:null,then:function(e){s.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<s.length;e++)(0,s[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),a}(o,a),Gc());else di(e,t,a,Gc())}catch(d){di(e,t,{then:function(){},status:"rejected",reason:d},Gc())}finally{M.p=r,null!==l&&null!==i.types&&(l.types=i.types),O.T=l}}function ei(){}function ti(e,t,s,a){if(5!==e.tag)throw Error(l(476));var n=si(e).queue;Zl(e,n,t,F,null===s?ei:function(){return ai(e),s(a)})}function si(e){var t=e.memoizedState;if(null!==t)return t;var s={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:F},next:null}).next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:s},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ai(e){var t=si(e);null===t.next&&(t=e.alternate.memoizedState),di(e,t.next.queue,{},Gc())}function ni(){return Rn(uh)}function ri(){return cl().memoizedState}function li(){return cl().memoizedState}function ii(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var s=Gc(),a=jr(t,e=yr(s),s);return null!==a&&($c(a,t,s),br(a,t,s)),t={cache:Bn()},void(e.payload=t)}t=t.return}}function oi(e,t,s){var a=Gc();s={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},hi(e)?mi(t,s):null!==(s=Da(e,t,s,a))&&($c(s,e,a),pi(s,t,a))}function ci(e,t,s){di(e,t,s,Gc())}function di(e,t,s,a){var n={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(hi(e))mi(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=r(l,s);if(n.hasEagerState=!0,n.eagerState=i,Qs(i,l))return Pa(e,t,n,0),null===fc&&Aa(),!1}catch(o){}if(null!==(s=Da(e,t,n,a)))return $c(s,e,a),pi(s,t,a),!0}return!1}function ui(e,t,s,a){if(a={lane:2,revertLane:Hd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hi(e)){if(t)throw Error(l(479))}else null!==(t=Da(e,s,a,2))&&$c(t,e,2)}function hi(e){var t=e.alternate;return e===Hr||null!==t&&t===Hr}function mi(e,t){Gr=Yr=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function pi(e,t,s){if(0!==(4194048&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,Oe(e,s)}}var fi={readContext:Rn,use:ul,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr};fi.useEffectEvent=Zr;var xi={readContext:Rn,use:ul,useCallback:function(e,t){return ol().memoizedState=[e,void 0===t?null:t],e},useContext:Rn,useEffect:Ul,useImperativeHandle:function(e,t,s){s=null!==s&&void 0!==s?s.concat([e]):null,zl(4194308,4,Yl.bind(null,t,e),s)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){zl(4,2,e,t)},useMemo:function(e,t){var s=ol();t=void 0===t?null:t;var a=e();if(Kr){ye(!0);try{e()}finally{ye(!1)}}return s.memoizedState=[a,t],a},useReducer:function(e,t,s){var a=ol();if(void 0!==s){var n=s(t);if(Kr){ye(!0);try{s(t)}finally{ye(!1)}}}else n=t;return a.memoizedState=a.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=oi.bind(null,Hr,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},ol().memoizedState=e},useState:function(e){var t=(e=Nl(e)).queue,s=ci.bind(null,Hr,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Kl,useDeferredValue:function(e,t){return Jl(ol(),e,t)},useTransition:function(){var e=Nl(!1);return e=Zl.bind(null,Hr,e.queue,!0,!1),ol().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var a=Hr,n=ol();if(hn){if(void 0===s)throw Error(l(407));s=s()}else{if(s=t(),null===fc)throw Error(l(349));0!==(127&vc)||gl(a,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,Ul(jl.bind(null,a,r,e),[e]),a.flags|=2048,Ll(9,{destroy:void 0},yl.bind(null,a,r,s,t),null),s},useId:function(){var e=ol(),t=fc.identifierPrefix;if(hn){var s=an;t="_"+t+"R_"+(s=(sn&~(1<<32-je(sn)-1)).toString(32)+s),0<(s=$r++)&&(t+="H"+s.toString(32)),t+="_"}else t="_"+t+"r_"+(s=Qr++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ni,useFormState:Dl,useActionState:Dl,useOptimistic:function(e){var t=ol();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=ui.bind(null,Hr,!0,s),s.dispatch=t,[e,t]},useMemoCache:hl,useCacheRefresh:function(){return ol().memoizedState=ii.bind(null,Hr)},useEffectEvent:function(e){var t=ol(),s={impl:e};return t.memoizedState=s,function(){if(0!==(2&pc))throw Error(l(440));return s.impl.apply(void 0,arguments)}}},vi={readContext:Rn,use:ul,useCallback:$l,useContext:Rn,useEffect:Vl,useImperativeHandle:Gl,useInsertionEffect:Wl,useLayoutEffect:ql,useMemo:Xl,useReducer:pl,useRef:Il,useState:function(){return pl(ml)},useDebugValue:Kl,useDeferredValue:function(e,t){return Ql(cl(),Wr.memoizedState,e,t)},useTransition:function(){var e=pl(ml)[0],t=cl().memoizedState;return["boolean"===typeof e?e:dl(e),t]},useSyncExternalStore:vl,useId:ri,useHostTransitionStatus:ni,useFormState:Rl,useActionState:Rl,useOptimistic:function(e,t){return _l(cl(),0,e,t)},useMemoCache:hl,useCacheRefresh:li};vi.useEffectEvent=Hl;var gi={readContext:Rn,use:ul,useCallback:$l,useContext:Rn,useEffect:Vl,useImperativeHandle:Gl,useInsertionEffect:Wl,useLayoutEffect:ql,useMemo:Xl,useReducer:xl,useRef:Il,useState:function(){return xl(ml)},useDebugValue:Kl,useDeferredValue:function(e,t){var s=cl();return null===Wr?Jl(s,e,t):Ql(s,Wr.memoizedState,e,t)},useTransition:function(){var e=xl(ml)[0],t=cl().memoizedState;return["boolean"===typeof e?e:dl(e),t]},useSyncExternalStore:vl,useId:ri,useHostTransitionStatus:ni,useFormState:Fl,useActionState:Fl,useOptimistic:function(e,t){var s=cl();return null!==Wr?_l(s,0,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:hl,useCacheRefresh:li};function yi(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:m({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}gi.useEffectEvent=Hl;var ji={enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Gc(),n=yr(a);n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=jr(e,n,a))&&($c(t,e,a),br(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Gc(),n=yr(a);n.tag=1,n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=jr(e,n,a))&&($c(t,e,a),br(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Gc(),a=yr(s);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=jr(e,a,s))&&($c(t,e,s),br(t,e,s))}};function bi(e,t,s,a,n,r,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,l):!t.prototype||!t.prototype.isPureReactComponent||(!Zs(s,a)||!Zs(n,r))}function wi(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Ni(e,t){var s=t;if("ref"in t)for(var a in s={},t)"ref"!==a&&(s[a]=t[a]);if(e=e.defaultProps)for(var n in s===t&&(s=m({},s)),e)void 0===s[n]&&(s[n]=e[n]);return s}function _i(e){Sa(e)}function ki(e){console.error(e)}function Si(e){Sa(e)}function Ci(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Ei(e,t,s){try{(0,e.onCaughtError)(s.value,{componentStack:s.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Ti(e,t,s){return(s=yr(s)).tag=3,s.payload={element:null},s.callback=function(){Ci(e,t)},s}function Ai(e){return(e=yr(e)).tag=3,e}function Pi(e,t,s,a){var n=s.type.getDerivedStateFromError;if("function"===typeof n){var r=a.value;e.payload=function(){return n(r)},e.callback=function(){Ei(t,s,a)}}var l=s.stateNode;null!==l&&"function"===typeof l.componentDidCatch&&(e.callback=function(){Ei(t,s,a),"function"!==typeof n&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Di=Error(l(461)),Ri=!1;function Oi(e,t,s,a){t.child=null===e?fr(t,null,s,a):pr(t,e.child,s,a)}function Mi(e,t,s,a,n){s=s.render;var r=t.ref;if("ref"in a){var l={};for(var i in a)"ref"!==i&&(l[i]=a[i])}else l=a;return Dn(t),a=tl(e,t,s,l,r,n),i=rl(),null===e||Ri?(hn&&i&&ln(t),t.flags|=1,Oi(e,t,a,n),t.child):(ll(e,t,n),no(e,t,n))}function Fi(e,t,s,a,n){if(null===e){var r=s.type;return"function"!==typeof r||za(r)||void 0!==r.defaultProps||null!==s.compare?((e=Va(s.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Li(e,t,r,a,n))}if(r=e.child,!ro(e,n)){var l=r.memoizedProps;if((s=null!==(s=s.compare)?s:Zs)(l,a)&&e.ref===t.ref)return no(e,t,n)}return t.flags|=1,(e=Ba(r,a)).ref=t.ref,e.return=t,t.child=e}function Li(e,t,s,a,n){if(null!==e){var r=e.memoizedProps;if(Zs(r,a)&&e.ref===t.ref){if(Ri=!1,t.pendingProps=a=r,!ro(e,n))return t.lanes=e.lanes,no(e,t,n);0!==(131072&e.flags)&&(Ri=!0)}}return Wi(e,t,s,a,n)}function Ii(e,t,s,a){var n=a.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===a.mode){if(0!==(128&t.flags)){if(r=null!==r?r.baseLanes|s:s,null!==e){for(a=t.child=e.child,n=0;null!==a;)n=n|a.lanes|a.childLanes,a=a.sibling;a=n&~r}else a=0,t.child=null;return Bi(e,t,r,s,a)}if(0===(536870912&s))return a=t.lanes=536870912,Bi(e,t,null!==r?r.baseLanes|s:s,s,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xn(0,null!==r?r.cachePool:null),null!==r?Ar(t,r):Pr(),Lr(t)}else null!==r?(Xn(0,r.cachePool),Ar(t,r),Ir(),t.memoizedState=null):(null!==e&&Xn(0,null),Pr(),Ir());return Oi(e,t,n,s),t.child}function zi(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bi(e,t,s,a,n){var r=$n();return r=null===r?null:{parent:zn._currentValue,pool:r},t.memoizedState={baseLanes:s,cachePool:r},null!==e&&Xn(0,null),Pr(),Lr(t),null!==e&&An(e,t,a,!0),t.childLanes=n,null}function Ui(e,t){return(t=Zi({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vi(e,t,s){return pr(t,e.child,null,s),(e=Ui(t,t.pendingProps)).flags|=2,zr(t),t.memoizedState=null,e}function Hi(e,t){var s=t.ref;if(null===s)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof s&&"object"!==typeof s)throw Error(l(284));null!==e&&e.ref===s||(t.flags|=4194816)}}function Wi(e,t,s,a,n){return Dn(t),s=tl(e,t,s,a,void 0,n),a=rl(),null===e||Ri?(hn&&a&&ln(t),t.flags|=1,Oi(e,t,s,n),t.child):(ll(e,t,n),no(e,t,n))}function qi(e,t,s,a,n,r){return Dn(t),t.updateQueue=null,s=al(t,a,s,n),sl(e),a=rl(),null===e||Ri?(hn&&a&&ln(t),t.flags|=1,Oi(e,t,s,r),t.child):(ll(e,t,r),no(e,t,r))}function Yi(e,t,s,a,n){if(Dn(t),null===t.stateNode){var r=Fa,l=s.contextType;"object"===typeof l&&null!==l&&(r=Rn(l)),r=new s(a,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=ji,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=a,r.state=t.memoizedState,r.refs={},vr(t),l=s.contextType,r.context="object"===typeof l&&null!==l?Rn(l):Fa,r.state=t.memoizedState,"function"===typeof(l=s.getDerivedStateFromProps)&&(yi(t,s,l,a),r.state=t.memoizedState),"function"===typeof s.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(l=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),l!==r.state&&ji.enqueueReplaceState(r,r.state,null),kr(t,a,r,n),_r(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){r=t.stateNode;var i=t.memoizedProps,o=Ni(s,i);r.props=o;var c=r.context,d=s.contextType;l=Fa,"object"===typeof d&&null!==d&&(l=Rn(d));var u=s.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,i=t.pendingProps!==i,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(i||c!==l)&&wi(t,r,a,l),xr=!1;var h=t.memoizedState;r.state=h,kr(t,a,r,n),_r(),c=t.memoizedState,i||h!==c||xr?("function"===typeof u&&(yi(t,s,u,a),c=t.memoizedState),(o=xr||bi(t,s,o,a,h,c,l))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=l,a=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,gr(e,t),d=Ni(s,l=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=s.contextType,o=Fa,"object"===typeof c&&null!==c&&(o=Rn(c)),(c="function"===typeof(i=s.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(l!==u||h!==o)&&wi(t,r,a,o),xr=!1,h=t.memoizedState,r.state=h,kr(t,a,r,n),_r();var m=t.memoizedState;l!==u||h!==m||xr||null!==e&&null!==e.dependencies&&Pn(e.dependencies)?("function"===typeof i&&(yi(t,s,i,a),m=t.memoizedState),(d=xr||bi(t,s,d,a,h,m,o)||null!==e&&null!==e.dependencies&&Pn(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(a,m,o),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(a,m,o)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=o,a=d):("function"!==typeof r.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Hi(e,t),a=0!==(128&t.flags),r||a?(r=t.stateNode,s=a&&"function"!==typeof s.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&a?(t.child=pr(t,e.child,null,n),t.child=pr(t,null,s,n)):Oi(e,t,s,n),t.memoizedState=r.state,e=t.child):e=no(e,t,n),e}function Gi(e,t,s,a){return jn(),t.flags|=256,Oi(e,t,s,a),t.child}var Ki={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $i(e){return{baseLanes:e,cachePool:Jn()}}function Xi(e,t,s){return e=null!==e?e.childLanes&~s:0,t&&(e|=Ec),e}function Ji(e,t,s){var a,n=t.pendingProps,r=!1,i=0!==(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&0!==(2&Br.current)),a&&(r=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(hn){if(r?Mr(t):Ir(),(e=un)?null!==(e=null!==(e=Pu(e,pn))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tn?{id:sn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},(s=qa(e)).return=t,t.child=s,dn=t,un=null):e=null,null===e)throw xn(t);return Ru(e)?t.lanes=32:t.lanes=536870912,null}var o=n.children;return n=n.fallback,r?(Ir(),o=Zi({mode:"hidden",children:o},r=t.mode),n=Ha(n,r,s,null),o.return=t,n.return=t,o.sibling=n,t.child=o,(n=t.child).memoizedState=$i(s),n.childLanes=Xi(e,a,s),t.memoizedState=Ki,zi(null,n)):(Mr(t),Qi(t,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(i)256&t.flags?(Mr(t),t.flags&=-257,t=eo(e,t,s)):null!==t.memoizedState?(Ir(),t.child=e.child,t.flags|=128,t=null):(Ir(),o=n.fallback,r=t.mode,n=Zi({mode:"visible",children:n.children},r),(o=Ha(o,r,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,pr(t,e.child,null,s),(n=t.child).memoizedState=$i(s),n.childLanes=Xi(e,a,s),t.memoizedState=Ki,t=zi(null,n));else if(Mr(t),Ru(o)){if(a=o.nextSibling&&o.nextSibling.dataset)var d=a.dgst;a=d,(n=Error(l(419))).stack="",n.digest=a,wn({value:n,source:null,stack:null}),t=eo(e,t,s)}else if(Ri||An(e,t,s,!1),a=0!==(s&e.childLanes),Ri||a){if(null!==(a=fc)&&(0!==(n=Me(a,s))&&n!==c.retryLane))throw c.retryLane=n,Ra(e,n),$c(a,e,n),Di;Du(o)||id(),t=eo(e,t,s)}else Du(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,un=Ou(o.nextSibling),dn=t,hn=!0,mn=null,pn=!1,null!==e&&cn(t,e),(t=Qi(t,n.children)).flags|=4096);return t}return r?(Ir(),o=n.fallback,r=t.mode,d=(c=e.child).sibling,(n=Ba(c,{mode:"hidden",children:n.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=Ba(d,o):(o=Ha(o,r,s,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,zi(null,n),n=t.child,null===(o=e.child.memoizedState)?o=$i(s):(null!==(r=o.cachePool)?(c=zn._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=Jn(),o={baseLanes:o.baseLanes|s,cachePool:r}),n.memoizedState=o,n.childLanes=Xi(e,a,s),t.memoizedState=Ki,zi(e.child,n)):(Mr(t),e=(s=e.child).sibling,(s=Ba(s,{mode:"visible",children:n.children})).return=t,s.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=s,t.memoizedState=null,s)}function Qi(e,t){return(t=Zi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zi(e,t){return(e=Ia(22,e,null,t)).lanes=0,e}function eo(e,t,s){return pr(t,e.child,null,s),(e=Qi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),En(e.return,t,s)}function so(e,t,s,a,n,r){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n,treeForkCount:r}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=n,l.treeForkCount=r)}function ao(e,t,s){var a=t.pendingProps,n=a.revealOrder,r=a.tail;a=a.children;var l=Br.current,i=0!==(2&l);if(i?(l=1&l|2,t.flags|=128):l&=1,U(Br,l),Oi(e,t,a,s),a=hn?Qa:0,!i&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,s,t);else if(19===e.tag)to(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(s=t.child,n=null;null!==s;)null!==(e=s.alternate)&&null===Ur(e)&&(n=s),s=s.sibling;null===(s=n)?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),so(t,!1,n,s,r,a);break;case"backwards":case"unstable_legacy-backwards":for(s=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Ur(e)){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}so(t,!0,s,null,r,a);break;case"together":so(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function no(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),kc|=t.lanes,0===(s&t.childLanes)){if(null===e)return null;if(An(e,t,s,!1),0===(s&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(s=Ba(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Ba(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function ro(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pn(e))}function lo(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ri=!0;else{if(!ro(e,s)&&0===(128&t.flags))return Ri=!1,function(e,t,s){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),Sn(0,zn,e.memoizedState.cache),jn();break;case 27:case 5:X(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:Sn(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Fr(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Mr(t),t.flags|=128,null):0!==(s&t.child.childLanes)?Ji(e,t,s):(Mr(t),null!==(e=no(e,t,s))?e.sibling:null);Mr(t);break;case 19:var n=0!==(128&e.flags);if((a=0!==(s&t.childLanes))||(An(e,t,s,!1),a=0!==(s&t.childLanes)),n){if(a)return ao(e,t,s);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),U(Br,Br.current),a)break;return null;case 22:return t.lanes=0,Ii(e,t,s,t.pendingProps);case 24:Sn(0,zn,e.memoizedState.cache)}return no(e,t,s)}(e,t,s);Ri=0!==(131072&e.flags)}else Ri=!1,hn&&0!==(1048576&t.flags)&&rn(t,Qa,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=nr(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var n=e.$$typeof;if(n===w){t.tag=11,t=Mi(null,t,e,a,s);break e}if(n===k){t.tag=14,t=Fi(null,t,e,a,s);break e}}throw t=D(e)||e,Error(l(306,t,""))}za(e)?(a=Ni(e,a),t.tag=1,t=Yi(null,t,e,a,s)):(t.tag=0,t=Wi(null,t,e,a,s))}return t;case 0:return Wi(e,t,t.type,t.pendingProps,s);case 1:return Yi(e,t,a=t.type,n=Ni(a,t.pendingProps),s);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(l(387));a=t.pendingProps;var r=t.memoizedState;n=r.element,gr(e,t),kr(t,a,null,s);var i=t.memoizedState;if(a=i.cache,Sn(0,zn,a),a!==r.cache&&Tn(t,[zn],s,!0),_r(),a=i.element,r.isDehydrated){if(r={element:a,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Gi(e,t,a,s);break e}if(a!==n){wn(n=Ka(Error(l(424)),t)),t=Gi(e,t,a,s);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(un=Ou(e.firstChild),dn=t,hn=!0,mn=null,pn=!0,s=fr(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(jn(),a===n){t=no(e,t,s);break e}Oi(e,t,a,s)}t=t.child}return t;case 26:return Hi(e,t),null===e?(s=Yu(t.type,null,t.pendingProps,null))?t.memoizedState=s:hn||(s=t.type,e=t.pendingProps,(a=vu(Y.current).createElement(s))[Ue]=t,a[Ve]=e,mu(a,s,e),et(a),t.stateNode=a):t.memoizedState=Yu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&hn&&(a=t.stateNode=Iu(t.type,t.pendingProps,Y.current),dn=t,pn=!0,n=un,Cu(t.type)?(Mu=n,un=Ou(a.firstChild)):un=n),Oi(e,t,t.pendingProps.children,s),Hi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hn&&((n=a=un)&&(null!==(a=function(e,t,s,a){for(;1===e.nodeType;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===r)return e}if(null===(e=Ou(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,pn))?(t.stateNode=a,dn=t,un=Ou(a.firstChild),pn=!1,n=!0):n=!1),n||xn(t)),X(t),n=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,a=r.children,ju(n,r)?a=null:null!==i&&ju(n,i)&&(t.flags|=32),null!==t.memoizedState&&(n=tl(e,t,nl,null,null,s),uh._currentValue=n),Hi(e,t),Oi(e,t,a,s),t.child;case 6:return null===e&&hn&&((e=s=un)&&(null!==(s=function(e,t,s){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!s)return null;if(null===(e=Ou(e.nextSibling)))return null}return e}(s,t.pendingProps,pn))?(t.stateNode=s,dn=t,un=null,e=!0):e=!1),e||xn(t)),null;case 13:return Ji(e,t,s);case 4:return K(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=pr(t,null,a,s):Oi(e,t,a,s),t.child;case 11:return Mi(e,t,t.type,t.pendingProps,s);case 7:return Oi(e,t,t.pendingProps,s),t.child;case 8:case 12:return Oi(e,t,t.pendingProps.children,s),t.child;case 10:return a=t.pendingProps,Sn(0,t.type,a.value),Oi(e,t,a.children,s),t.child;case 9:return n=t.type._context,a=t.pendingProps.children,Dn(t),a=a(n=Rn(n)),t.flags|=1,Oi(e,t,a,s),t.child;case 14:return Fi(e,t,t.type,t.pendingProps,s);case 15:return Li(e,t,t.type,t.pendingProps,s);case 19:return ao(e,t,s);case 31:return function(e,t,s){var a=t.pendingProps,n=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hn){if("hidden"===a.mode)return e=Ui(t,a),t.lanes=536870912,zi(null,e);if(Fr(t),(e=un)?null!==(e=null!==(e=Pu(e,pn))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tn?{id:sn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},(s=qa(e)).return=t,t.child=s,dn=t,un=null):e=null,null===e)throw xn(t);return t.lanes=536870912,null}return Ui(t,a)}var r=e.memoizedState;if(null!==r){var i=r.dehydrated;if(Fr(t),n)if(256&t.flags)t.flags&=-257,t=Vi(e,t,s);else{if(null===t.memoizedState)throw Error(l(558));t.child=e.child,t.flags|=128,t=null}else if(Ri||An(e,t,s,!1),n=0!==(s&e.childLanes),Ri||n){if(null!==(a=fc)&&0!==(i=Me(a,s))&&i!==r.retryLane)throw r.retryLane=i,Ra(e,i),$c(a,e,i),Di;id(),t=Vi(e,t,s)}else e=r.treeContext,un=Ou(i.nextSibling),dn=t,hn=!0,mn=null,pn=!1,null!==e&&cn(t,e),(t=Ui(t,a)).flags|=4096;return t}return(e=Ba(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,s);case 22:return Ii(e,t,s,t.pendingProps);case 24:return Dn(t),a=Rn(zn),null===e?(null===(n=$n())&&(n=fc,r=Bn(),n.pooledCache=r,r.refCount++,null!==r&&(n.pooledCacheLanes|=s),n=r),t.memoizedState={parent:a,cache:n},vr(t),Sn(0,zn,n)):(0!==(e.lanes&s)&&(gr(e,t),kr(t,null,null,s),_r()),n=e.memoizedState,r=t.memoizedState,n.parent!==a?(n={parent:a,cache:a},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),Sn(0,zn,a)):(a=r.cache,Sn(0,zn,a),a!==n.cache&&Tn(t,[zn],s,!0))),Oi(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function io(e){e.flags|=4}function oo(e,t,s,a,n){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&n)===n)if(e.stateNode.complete)e.flags|=8192;else{if(!nd())throw rr=tr,Zn;e.flags|=8192}}else e.flags&=-16777217}function co(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rh(t)){if(!nd())throw rr=tr,Zn;e.flags|=8192}}function uo(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Tc|=t)}function ho(e,t){if(!hn)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function mo(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=65011712&n.subtreeFlags,a|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function po(e,t,s){var a=t.pendingProps;switch(on(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return mo(t),null;case 3:return s=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Cn(zn),$(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(yn(t)?io(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bn())),mo(t),null;case 26:var n=t.type,r=t.memoizedState;return null===e?(io(t),null!==r?(mo(t),co(t,r)):(mo(t),oo(t,n,0,0,s))):r?r!==e.memoizedState?(io(t),mo(t),co(t,r)):(mo(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&io(t),mo(t),oo(t,n,0,0,s)),null;case 27:if(J(t),s=Y.current,n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return mo(t),null}e=W.current,yn(t)?vn(t):(e=Iu(n,a,s),t.stateNode=e,io(t))}return mo(t),null;case 5:if(J(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return mo(t),null}if(r=W.current,yn(t))vn(t);else{var i=vu(Y.current);switch(r){case 1:r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(r=i.createElement("div")).innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r="string"===typeof a.is?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r="string"===typeof a.is?i.createElement(n,{is:a.is}):i.createElement(n)}}r[Ue]=t,r[Ve]=a;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)r.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=r;e:switch(mu(r,n,a),n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&io(t)}}return mo(t),oo(t,t.type,null===e||e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(l(166));if(e=Y.current,yn(t)){if(e=t.stateNode,s=t.memoizedProps,a=null,null!==(n=dn))switch(n.tag){case 27:case 5:a=n.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===s||null!==a&&!0===a.suppressHydrationWarning||du(e.nodeValue,s)))||xn(t,!0)}else(e=vu(e).createTextNode(a))[Ue]=t,t.stateNode=e}return mo(t),null;case 31:if(s=t.memoizedState,null===e||null!==e.memoizedState){if(a=yn(t),null!==s){if(null===e){if(!a)throw Error(l(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(l(557));e[Ue]=t}else jn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mo(t),e=!1}else s=bn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return 256&t.flags?(zr(t),t):(zr(t),null);if(0!==(128&t.flags))throw Error(l(558))}return mo(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=yn(t),null!==a&&null!==a.dehydrated){if(null===e){if(!n)throw Error(l(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(l(317));n[Ue]=t}else jn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mo(t),n=!1}else n=bn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(zr(t),t):(zr(t),null)}return zr(t),0!==(128&t.flags)?(t.lanes=s,t):(s=null!==a,e=null!==e&&null!==e.memoizedState,s&&(n=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(n=a.alternate.memoizedState.cachePool.pool),r=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(r=a.memoizedState.cachePool.pool),r!==n&&(a.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),uo(t,t.updateQueue),mo(t),null);case 4:return $(),null===e&&eu(t.stateNode.containerInfo),mo(t),null;case 10:return Cn(t.type),mo(t),null;case 19:if(B(Br),null===(a=t.memoizedState))return mo(t),null;if(n=0!==(128&t.flags),null===(r=a.rendering))if(n)ho(a,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Ur(e))){for(t.flags|=128,ho(a,!1),e=r.updateQueue,t.updateQueue=e,uo(t,e),t.subtreeFlags=0,e=s,s=t.child;null!==s;)Ua(s,e),s=s.sibling;return U(Br,1&Br.current|2),hn&&nn(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&oe()>Mc&&(t.flags|=128,n=!0,ho(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Ur(r))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,uo(t,e),ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!r.alternate&&!hn)return mo(t),null}else 2*oe()-a.renderingStartTime>Mc&&536870912!==s&&(t.flags|=128,n=!0,ho(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=a.last)?e.sibling=r:t.child=r,a.last=r)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=oe(),e.sibling=null,s=Br.current,U(Br,n?1&s|2:1&s),hn&&nn(t,a.treeForkCount),e):(mo(t),null);case 22:case 23:return zr(t),Dr(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&s)&&0===(128&t.flags)&&(mo(t),6&t.subtreeFlags&&(t.flags|=8192)):mo(t),null!==(s=t.updateQueue)&&uo(t,s.retryQueue),s=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==s&&(t.flags|=2048),null!==e&&B(Kn),null;case 24:return s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Cn(zn),mo(t),null;case 25:case 30:return null}throw Error(l(156,t.tag))}function fo(e,t){switch(on(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cn(zn),$(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(zr(t),null===t.alternate)throw Error(l(340));jn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zr(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));jn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Br),null;case 4:return $(),null;case 10:return Cn(t.type),null;case 22:case 23:return zr(t),Dr(),null!==e&&B(Kn),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cn(zn),null;default:return null}}function xo(e,t){switch(on(t),t.tag){case 3:Cn(zn),$();break;case 26:case 27:case 5:J(t);break;case 4:$();break;case 31:null!==t.memoizedState&&zr(t);break;case 13:zr(t);break;case 19:B(Br);break;case 10:Cn(t.type);break;case 22:case 23:zr(t),Dr(),null!==e&&B(Kn);break;case 24:Cn(zn)}}function vo(e,t){try{var s=t.updateQueue,a=null!==s?s.lastEffect:null;if(null!==a){var n=a.next;s=n;do{if((s.tag&e)===e){a=void 0;var r=s.create,l=s.inst;a=r(),l.destroy=a}s=s.next}while(s!==n)}}catch(i){_d(t,t.return,i)}}function go(e,t,s){try{var a=t.updateQueue,n=null!==a?a.lastEffect:null;if(null!==n){var r=n.next;a=r;do{if((a.tag&e)===e){var l=a.inst,i=l.destroy;if(void 0!==i){l.destroy=void 0,n=t;var o=s,c=i;try{c()}catch(d){_d(n,o,d)}}}a=a.next}while(a!==r)}}catch(d){_d(t,t.return,d)}}function yo(e){var t=e.updateQueue;if(null!==t){var s=e.stateNode;try{Cr(t,s)}catch(a){_d(e,e.return,a)}}}function jo(e,t,s){s.props=Ni(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){_d(e,t,a)}}function bo(e,t){try{var s=e.ref;if(null!==s){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof s?e.refCleanup=s(a):s.current=a}}catch(n){_d(e,t,n)}}function wo(e,t){var s=e.ref,a=e.refCleanup;if(null!==s)if("function"===typeof a)try{a()}catch(n){_d(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof s)try{s(null)}catch(r){_d(e,t,r)}else s.current=null}function No(e){var t=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(n){_d(e,e.return,n)}}function _o(e,t,s){try{var a=e.stateNode;!function(e,t,s,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,i=null,o=null,c=null,d=null,u=null;for(p in s){var h=s[p];if(s.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||uu(e,t,p,null,a,h)}}for(var m in a){var p=a[m];if(h=s[m],a.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":n=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":i=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:p!==h&&uu(e,t,m,p,a,h)}}return void gt(e,i,o,c,d,u,r,n);case"select":for(r in p=i=o=m=null,s)if(c=s[r],s.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(r)||uu(e,t,r,null,a,c)}for(n in a)if(r=a[n],c=s[n],a.hasOwnProperty(n)&&(null!=r||null!=c))switch(n){case"value":m=r;break;case"defaultValue":o=r;break;case"multiple":i=r;default:r!==c&&uu(e,t,n,r,a,c)}return t=o,s=i,a=p,void(null!=m?bt(e,!!s,m,!1):!!a!==!!s&&(null!=t?bt(e,!!s,t,!0):bt(e,!!s,s?[]:"",!1)));case"textarea":for(o in p=m=null,s)if(n=s[o],s.hasOwnProperty(o)&&null!=n&&!a.hasOwnProperty(o))switch(o){case"value":case"children":break;default:uu(e,t,o,null,a,n)}for(i in a)if(n=a[i],r=s[i],a.hasOwnProperty(i)&&(null!=n||null!=r))switch(i){case"value":m=n;break;case"defaultValue":p=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(l(91));break;default:n!==r&&uu(e,t,i,n,a,r)}return void wt(e,m,p);case"option":for(var f in s)if(m=s[f],s.hasOwnProperty(f)&&null!=m&&!a.hasOwnProperty(f))if("selected"===f)e.selected=!1;else uu(e,t,f,null,a,m);for(c in a)if(m=a[c],p=s[c],a.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else uu(e,t,c,m,a,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in s)m=s[x],s.hasOwnProperty(x)&&null!=m&&!a.hasOwnProperty(x)&&uu(e,t,x,null,a,m);for(d in a)if(m=a[d],p=s[d],a.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(l(137,t));break;default:uu(e,t,d,m,a,p)}return;default:if(Et(t)){for(var v in s)m=s[v],s.hasOwnProperty(v)&&void 0!==m&&!a.hasOwnProperty(v)&&hu(e,t,v,void 0,a,m);for(u in a)m=a[u],p=s[u],!a.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||hu(e,t,u,m,a,p);return}}for(var g in s)m=s[g],s.hasOwnProperty(g)&&null!=m&&!a.hasOwnProperty(g)&&uu(e,t,g,null,a,m);for(h in a)m=a[h],p=s[h],!a.hasOwnProperty(h)||m===p||null==m&&null==p||uu(e,t,h,m,a,p)}(a,e.type,s,t),a[Ve]=t}catch(n){_d(e,e.return,n)}}function ko(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cu(e.type)||4===e.tag}function So(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ko(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Co(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).insertBefore(e,t):((t=9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Dt));else if(4!==a&&(27===a&&Cu(e.type)&&(s=e.stateNode,t=null),null!==(e=e.child)))for(Co(e,t,s),e=e.sibling;null!==e;)Co(e,t,s),e=e.sibling}function Eo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&(27===a&&Cu(e.type)&&(s=e.stateNode),null!==(e=e.child)))for(Eo(e,t,s),e=e.sibling;null!==e;)Eo(e,t,s),e=e.sibling}function To(e){var t=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);mu(t,a,s),t[Ue]=e,t[Ve]=s}catch(r){_d(e,e.return,r)}}var Ao=!1,Po=!1,Do=!1,Ro="function"===typeof WeakSet?WeakSet:Set,Oo=null;function Mo(e,t,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:$o(e,s),4&a&&vo(5,s);break;case 1:if($o(e,s),4&a)if(e=s.stateNode,null===t)try{e.componentDidMount()}catch(l){_d(s,s.return,l)}else{var n=Ni(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){_d(s,s.return,i)}}64&a&&yo(s),512&a&&bo(s,s.return);break;case 3:if($o(e,s),64&a&&null!==(e=s.updateQueue)){if(t=null,null!==s.child)switch(s.child.tag){case 27:case 5:case 1:t=s.child.stateNode}try{Cr(e,t)}catch(l){_d(s,s.return,l)}}break;case 27:null===t&&4&a&&To(s);case 26:case 5:$o(e,s),null===t&&4&a&&No(s),512&a&&bo(s,s.return);break;case 12:$o(e,s);break;case 31:$o(e,s),4&a&&Uo(e,s);break;case 13:$o(e,s),4&a&&Vo(e,s),64&a&&(null!==(e=s.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var s=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==s.readyState)t();else{var a=function(){t(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,s=Ed.bind(null,s))));break;case 22:if(!(a=null!==s.memoizedState||Ao)){t=null!==t&&null!==t.memoizedState||Po,n=Ao;var r=Po;Ao=a,(Po=t)&&!r?Jo(e,s,0!==(8772&s.subtreeFlags)):$o(e,s),Ao=n,Po=r}break;case 30:break;default:$o(e,s)}}function Fo(e){var t=e.alternate;null!==t&&(e.alternate=null,Fo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&$e(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lo=null,Io=!1;function zo(e,t,s){for(s=s.child;null!==s;)Bo(e,t,s),s=s.sibling}function Bo(e,t,s){if(ge&&"function"===typeof ge.onCommitFiberUnmount)try{ge.onCommitFiberUnmount(ve,s)}catch(r){}switch(s.tag){case 26:Po||wo(s,t),zo(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode).parentNode.removeChild(s);break;case 27:Po||wo(s,t);var a=Lo,n=Io;Cu(s.type)&&(Lo=s.stateNode,Io=!1),zo(e,t,s),zu(s.stateNode),Lo=a,Io=n;break;case 5:Po||wo(s,t);case 6:if(a=Lo,n=Io,Lo=null,zo(e,t,s),Io=n,null!==(Lo=a))if(Io)try{(9===Lo.nodeType?Lo.body:"HTML"===Lo.nodeName?Lo.ownerDocument.body:Lo).removeChild(s.stateNode)}catch(l){_d(s,t,l)}else try{Lo.removeChild(s.stateNode)}catch(l){_d(s,t,l)}break;case 18:null!==Lo&&(Io?(Eu(9===(e=Lo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,s.stateNode),qh(e)):Eu(Lo,s.stateNode));break;case 4:a=Lo,n=Io,Lo=s.stateNode.containerInfo,Io=!0,zo(e,t,s),Lo=a,Io=n;break;case 0:case 11:case 14:case 15:go(2,s,t),Po||go(4,s,t),zo(e,t,s);break;case 1:Po||(wo(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount&&jo(s,t,a)),zo(e,t,s);break;case 21:zo(e,t,s);break;case 22:Po=(a=Po)||null!==s.memoizedState,zo(e,t,s),Po=a;break;default:zo(e,t,s)}}function Uo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qh(e)}catch(s){_d(t,t.return,s)}}}function Vo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qh(e)}catch(s){_d(t,t.return,s)}}function Ho(e,t){var s=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ro),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ro),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){if(!s.has(t)){s.add(t);var a=Td.bind(null,e,t);t.then(a,a)}})}function Wo(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var n=s[a],r=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(Cu(o.type)){Lo=o.stateNode,Io=!1;break e}break;case 5:Lo=o.stateNode,Io=!1;break e;case 3:case 4:Lo=o.stateNode.containerInfo,Io=!0;break e}o=o.return}if(null===Lo)throw Error(l(160));Bo(r,i,n),Lo=null,Io=!1,null!==(r=n.alternate)&&(r.return=null),n.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Yo(t,e),t=t.sibling}var qo=null;function Yo(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wo(t,e),Go(e),4&a&&(go(3,e,e.return),vo(3,e),go(5,e,e.return));break;case 1:Wo(t,e),Go(e),512&a&&(Po||null===s||wo(s,s.return)),64&a&&Ao&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===s?a:s.concat(a))));break;case 26:var n=qo;if(Wo(t,e),Go(e),512&a&&(Po||null===s||wo(s,s.return)),4&a){var r=null!==s?s.memoizedState:null;if(a=e.memoizedState,null===s)if(null===a)if(null===e.stateNode){e:{a=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(a){case"title":(!(r=n.getElementsByTagName("title")[0])||r[Ke]||r[Ue]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=n.createElement(a),n.head.insertBefore(r,n.querySelector("head > title"))),mu(r,a,s),r[Ue]=e,et(r),a=r;break e;case"link":var i=ah("link","href",n).get(a+(s.href||""));if(i)for(var o=0;o<i.length;o++)if((r=i[o]).getAttribute("href")===(null==s.href||""===s.href?null:s.href)&&r.getAttribute("rel")===(null==s.rel?null:s.rel)&&r.getAttribute("title")===(null==s.title?null:s.title)&&r.getAttribute("crossorigin")===(null==s.crossOrigin?null:s.crossOrigin)){i.splice(o,1);break t}mu(r=n.createElement(a),a,s),n.head.appendChild(r);break;case"meta":if(i=ah("meta","content",n).get(a+(s.content||"")))for(o=0;o<i.length;o++)if((r=i[o]).getAttribute("content")===(null==s.content?null:""+s.content)&&r.getAttribute("name")===(null==s.name?null:s.name)&&r.getAttribute("property")===(null==s.property?null:s.property)&&r.getAttribute("http-equiv")===(null==s.httpEquiv?null:s.httpEquiv)&&r.getAttribute("charset")===(null==s.charSet?null:s.charSet)){i.splice(o,1);break t}mu(r=n.createElement(a),a,s),n.head.appendChild(r);break;default:throw Error(l(468,a))}r[Ue]=e,et(r),a=r}e.stateNode=a}else nh(n,e.type,e.stateNode);else e.stateNode=Qu(n,a,e.memoizedProps);else r!==a?(null===r?null!==s.stateNode&&(s=s.stateNode).parentNode.removeChild(s):r.count--,null===a?nh(n,e.type,e.stateNode):Qu(n,a,e.memoizedProps)):null===a&&null!==e.stateNode&&_o(e,e.memoizedProps,s.memoizedProps)}break;case 27:Wo(t,e),Go(e),512&a&&(Po||null===s||wo(s,s.return)),null!==s&&4&a&&_o(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Wo(t,e),Go(e),512&a&&(Po||null===s||wo(s,s.return)),32&e.flags){n=e.stateNode;try{_t(n,"")}catch(f){_d(e,e.return,f)}}4&a&&null!=e.stateNode&&_o(e,n=e.memoizedProps,null!==s?s.memoizedProps:n),1024&a&&(Do=!0);break;case 6:if(Wo(t,e),Go(e),4&a){if(null===e.stateNode)throw Error(l(162));a=e.memoizedProps,s=e.stateNode;try{s.nodeValue=a}catch(f){_d(e,e.return,f)}}break;case 3:if(sh=null,n=qo,qo=Vu(t.containerInfo),Wo(t,e),qo=n,Go(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{qh(t.containerInfo)}catch(f){_d(e,e.return,f)}Do&&(Do=!1,Ko(e));break;case 4:a=qo,qo=Vu(e.stateNode.containerInfo),Wo(t,e),Go(e),qo=a;break;case 12:default:Wo(t,e),Go(e);break;case 31:case 19:Wo(t,e),Go(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ho(e,a)));break;case 13:Wo(t,e),Go(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==s&&null!==s.memoizedState)&&(Rc=oe()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ho(e,a)));break;case 22:n=null!==e.memoizedState;var c=null!==s&&null!==s.memoizedState,d=Ao,u=Po;if(Ao=d||n,Po=u||c,Wo(t,e),Po=u,Ao=d,Go(e),8192&a)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===s||c||Ao||Po||Xo(e)),s=null,t=e;;){if(5===t.tag||26===t.tag){if(null===s){c=s=t;try{if(r=c.stateNode,n)"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;o.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){_d(c,c.return,f)}}}else if(6===t.tag){if(null===s){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(f){_d(c,c.return,f)}}}else if(18===t.tag){if(null===s){c=t;try{var p=c.stateNode;n?Tu(p,!0):Tu(c.stateNode,!1)}catch(f){_d(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(s=a.retryQueue)&&(a.retryQueue=null,Ho(e,s))));case 30:case 21:}}function Go(e){var t=e.flags;if(2&t){try{for(var s,a=e.return;null!==a;){if(ko(a)){s=a;break}a=a.return}if(null==s)throw Error(l(160));switch(s.tag){case 27:var n=s.stateNode;Eo(e,So(e),n);break;case 5:var r=s.stateNode;32&s.flags&&(_t(r,""),s.flags&=-33),Eo(e,So(e),r);break;case 3:case 4:var i=s.stateNode.containerInfo;Co(e,So(e),i);break;default:throw Error(l(161))}}catch(o){_d(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ko(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ko(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $o(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Mo(e,t.alternate,t),t=t.sibling}function Xo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:go(4,t,t.return),Xo(t);break;case 1:wo(t,t.return);var s=t.stateNode;"function"===typeof s.componentWillUnmount&&jo(t,t.return,s),Xo(t);break;case 27:zu(t.stateNode);case 26:case 5:wo(t,t.return),Xo(t);break;case 22:null===t.memoizedState&&Xo(t);break;default:Xo(t)}e=e.sibling}}function Jo(e,t,s){for(s=s&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,n=e,r=t,l=r.flags;switch(r.tag){case 0:case 11:case 15:Jo(n,r,s),vo(4,r);break;case 1:if(Jo(n,r,s),"function"===typeof(n=(a=r).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){_d(a,a.return,c)}if(null!==(n=(a=r).updateQueue)){var i=a.stateNode;try{var o=n.shared.hiddenCallbacks;if(null!==o)for(n.shared.hiddenCallbacks=null,n=0;n<o.length;n++)Sr(o[n],i)}catch(c){_d(a,a.return,c)}}s&&64&l&&yo(r),bo(r,r.return);break;case 27:To(r);case 26:case 5:Jo(n,r,s),s&&null===a&&4&l&&No(r),bo(r,r.return);break;case 12:Jo(n,r,s);break;case 31:Jo(n,r,s),s&&4&l&&Uo(n,r);break;case 13:Jo(n,r,s),s&&4&l&&Vo(n,r);break;case 22:null===r.memoizedState&&Jo(n,r,s),bo(r,r.return);break;case 30:break;default:Jo(n,r,s)}t=t.sibling}}function Qo(e,t){var s=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==s&&(null!=e&&e.refCount++,null!=s&&Un(s))}function Zo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e))}function ec(e,t,s,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,s,a),t=t.sibling}function tc(e,t,s,a){var n=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,s,a),2048&n&&vo(9,t);break;case 1:case 31:case 13:default:ec(e,t,s,a);break;case 3:ec(e,t,s,a),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e)));break;case 12:if(2048&n){ec(e,t,s,a),e=t.stateNode;try{var r=t.memoizedProps,l=r.id,i=r.onPostCommit;"function"===typeof i&&i(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){_d(t,t.return,o)}}else ec(e,t,s,a);break;case 23:break;case 22:r=t.stateNode,l=t.alternate,null!==t.memoizedState?2&r._visibility?ec(e,t,s,a):ac(e,t):2&r._visibility?ec(e,t,s,a):(r._visibility|=2,sc(e,t,s,a,0!==(10256&t.subtreeFlags)||!1)),2048&n&&Qo(l,t);break;case 24:ec(e,t,s,a),2048&n&&Zo(t.alternate,t)}}function sc(e,t,s,a,n){for(n=n&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,l=t,i=s,o=a,c=l.flags;switch(l.tag){case 0:case 11:case 15:sc(r,l,i,o,n),vo(8,l);break;case 23:break;case 22:var d=l.stateNode;null!==l.memoizedState?2&d._visibility?sc(r,l,i,o,n):ac(r,l):(d._visibility|=2,sc(r,l,i,o,n)),n&&2048&c&&Qo(l.alternate,l);break;case 24:sc(r,l,i,o,n),n&&2048&c&&Zo(l.alternate,l);break;default:sc(r,l,i,o,n)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var s=e,a=t,n=a.flags;switch(a.tag){case 22:ac(s,a),2048&n&&Qo(a.alternate,a);break;case 24:ac(s,a),2048&n&&Zo(a.alternate,a);break;default:ac(s,a)}t=t.sibling}}var nc=8192;function rc(e,t,s){if(e.subtreeFlags&nc)for(e=e.child;null!==e;)lc(e,t,s),e=e.sibling}function lc(e,t,s){switch(e.tag){case 26:rc(e,t,s),e.flags&nc&&null!==e.memoizedState&&function(e,t,s,a){if("stylesheet"===s.type&&("string"!==typeof a.media||!1!==matchMedia(a.media).matches)&&0===(4&s.state.loading)){if(null===s.instance){var n=Gu(a.href),r=t.querySelector(Ku(n));if(r)return null!==(t=r._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ih.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=r,void et(r);r=t.ownerDocument||t,a=$u(a),(n=Bu.get(n))&&eh(a,n),et(r=r.createElement("link"));var l=r;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),mu(r,"link",a),s.instance=r}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&0===(3&s.state.loading)&&(e.count++,s=ih.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}(s,qo,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,s);break;case 3:case 4:var a=qo;qo=Vu(e.stateNode.containerInfo),rc(e,t,s),qo=a;break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=nc,nc=16777216,rc(e,t,s),nc=a):rc(e,t,s))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];Oo=a,uc(a,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&go(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dc(e)):oc(e)}}function dc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];Oo=a,uc(a,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:go(8,t,t.return),dc(t);break;case 22:2&(s=t.stateNode)._visibility&&(s._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function uc(e,t){for(;null!==Oo;){var s=Oo;switch(s.tag){case 0:case 11:case 15:go(8,s,t);break;case 23:case 22:if(null!==s.memoizedState&&null!==s.memoizedState.cachePool){var a=s.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Un(s.memoizedState.cache)}if(null!==(a=s.child))a.return=s,Oo=a;else e:for(s=e;null!==Oo;){var n=(a=Oo).sibling,r=a.return;if(Fo(a),a===s){Oo=null;break e}if(null!==n){n.return=r,Oo=n;break e}Oo=r}}}var hc={getCacheForType:function(e){var t=Rn(zn),s=t.data.get(e);return void 0===s&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Rn(zn).controller.signal}},mc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,xc=null,vc=0,gc=0,yc=null,jc=!1,bc=!1,wc=!1,Nc=0,_c=0,kc=0,Sc=0,Cc=0,Ec=0,Tc=0,Ac=null,Pc=null,Dc=!1,Rc=0,Oc=0,Mc=1/0,Fc=null,Lc=null,Ic=0,zc=null,Bc=null,Uc=0,Vc=0,Hc=null,Wc=null,qc=0,Yc=null;function Gc(){return 0!==(2&pc)&&0!==vc?vc&-vc:null!==O.T?Hd():Ie()}function Kc(){if(0===Ec)if(0===(536870912&vc)||hn){var e=_e;0===(3932160&(_e<<=1))&&(_e=262144),Ec=e}else Ec=536870912;return null!==(e=Rr.current)&&(e.flags|=32),Ec}function $c(e,t,s){(e!==fc||2!==gc&&9!==gc)&&null===e.cancelPendingCommit||(sd(e,0),Zc(e,vc,Ec,!1)),De(e,s),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Sc|=s),4===_c&&Zc(e,vc,Ec,!1)),Fd(e))}function Xc(e,t,s){if(0!==(6&pc))throw Error(l(327));for(var a=!s&&0===(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),n=a?function(e,t){var s=pc;pc|=2;var a=rd(),n=ld();fc!==e||vc!==t?(Fc=null,Mc=oe()+500,sd(e,t)):bc=Ee(e,t);e:for(;;)try{if(0!==gc&&null!==xc){t=xc;var r=yc;t:switch(gc){case 1:gc=0,yc=null,md(e,t,r,1);break;case 2:case 9:if(sr(r)){gc=0,yc=null,hd(t);break}t=function(){2!==gc&&9!==gc||fc!==e||(gc=7),Fd(e)},r.then(t,t);break e;case 3:gc=7;break e;case 4:gc=5;break e;case 7:sr(r)?(gc=0,yc=null,hd(t)):(gc=0,yc=null,md(e,t,r,7));break;case 5:var i=null;switch(xc.tag){case 26:i=xc.memoizedState;case 5:case 27:var o=xc;if(i?rh(i):o.stateNode.complete){gc=0,yc=null;var c=o.sibling;if(null!==c)xc=c;else{var d=o.return;null!==d?(xc=d,pd(d)):xc=null}break t}}gc=0,yc=null,md(e,t,r,5);break;case 6:gc=0,yc=null,md(e,t,r,6);break;case 8:td(),_c=6;break e;default:throw Error(l(462))}}dd();break}catch(u){ad(e,u)}return kn=_n=null,O.H=a,O.A=n,pc=s,null!==xc?0:(fc=null,vc=0,Aa(),_c)}(e,t):od(e,t,!0),r=a;;){if(0===n){bc&&!a&&Zc(e,t,0,!1);break}if(s=e.current.alternate,!r||Qc(s)){if(2===n){if(r=t,e.errorRecoveryDisabledLanes&r)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var o=e;n=Ac;var c=o.current.memoizedState.isDehydrated;if(c&&(sd(o,i).flags|=256),2!==(i=od(o,i,!1))){if(wc&&!c){o.errorRecoveryDisabledLanes|=r,Sc|=r,n=4;break e}r=Pc,Pc=n,null!==r&&(null===Pc?Pc=r:Pc.push.apply(Pc,r))}n=i}if(r=!1,2!==n)continue}}if(1===n){sd(e,0),Zc(e,t,0,!0);break}e:{switch(a=e,r=n){case 0:case 1:throw Error(l(345));case 4:if((4194048&t)!==t)break;case 6:Zc(a,t,Ec,!jc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(l(329))}if((62914560&t)===t&&10<(n=Rc+300-oe())){if(Zc(a,t,Ec,!jc),0!==Ce(a,0,!0))break e;Uc=t,a.timeoutHandle=wu(Jc.bind(null,a,s,Pc,Fc,Dc,t,Ec,Sc,Tc,jc,r,"Throttled",-0,0),n)}else Jc(a,s,Pc,Fc,Dc,t,Ec,Sc,Tc,jc,r,null,-0,0)}break}n=od(e,t,!1),r=!1}Fd(e)}function Jc(e,t,s,a,n,r,l,i,o,c,d,u,h,m){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){lc(t,r,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var p=(62914560&r)===r?Rc-oe():(4194048&r)===r?Oc-oe():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var a=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===lh&&(lh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,s=performance.getEntriesByType("resource"),a=0;a<s.length;a++){var n=s[a],r=n.transferSize,l=n.initiatorType,i=n.duration;if(r&&i&&pu(l)){for(l=0,i=n.responseEnd,a+=1;a<s.length;a++){var o=s[a],c=o.startTime;if(c>i)break;var d=o.transferSize,u=o.initiatorType;d&&pu(u)&&(l+=d*((o=o.responseEnd)<i?1:(i-c)/(o-c)))}if(--a,t+=8*(r+l)/(n.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var n=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>lh?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(n)}}:null}(u,p),null!==p)return Uc=r,e.cancelPendingCommit=p(xd.bind(null,e,t,r,s,a,n,l,i,o,d,u,null,h,m)),void Zc(e,r,l,!c)}xd(e,t,r,s,a,n,l,i,o)}function Qc(e){for(var t=e;;){var s=t.tag;if((0===s||11===s||15===s)&&16384&t.flags&&(null!==(s=t.updateQueue)&&null!==(s=s.stores)))for(var a=0;a<s.length;a++){var n=s[a],r=n.getSnapshot;n=n.value;try{if(!Qs(r(),n))return!1}catch(l){return!1}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,s,a){t&=~Cc,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var n=t;0<n;){var r=31-je(n),l=1<<r;a[r]=-1,n&=~l}0!==s&&Re(e,s,t)}function ed(){return 0!==(6&pc)||(Ld(0,!1),!1)}function td(){if(null!==xc){if(0===gc)var e=xc.return;else kn=_n=null,il(e=xc),or=null,cr=0,e=xc;for(;null!==e;)xo(e.alternate,e),e=e.return;xc=null}}function sd(e,t){var s=e.timeoutHandle;-1!==s&&(e.timeoutHandle=-1,Nu(s)),null!==(s=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,s()),Uc=0,td(),fc=e,xc=s=Ba(e.current,null),vc=t,gc=0,yc=null,jc=!1,bc=Ee(e,t),wc=!1,Tc=Ec=Cc=Sc=kc=_c=0,Pc=Ac=null,Dc=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var n=31-je(a),r=1<<n;t|=e[n],a&=~r}return Nc=t,Aa(),s}function ad(e,t){Hr=null,O.H=fi,t===Qn||t===er?(t=lr(),gc=3):t===Zn?(t=lr(),gc=4):gc=t===Di?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===xc&&(_c=1,Ci(e,Ka(t,e.current)))}function nd(){var e=Rr.current;return null===e||((4194048&vc)===vc?null===Or:((62914560&vc)===vc||0!==(536870912&vc))&&e===Or)}function rd(){var e=O.H;return O.H=fi,null===e?fi:e}function ld(){var e=O.A;return O.A=hc,e}function id(){_c=4,jc||(4194048&vc)!==vc&&null!==Rr.current||(bc=!0),0===(134217727&kc)&&0===(134217727&Sc)||null===fc||Zc(fc,vc,Ec,!1)}function od(e,t,s){var a=pc;pc|=2;var n=rd(),r=ld();fc===e&&vc===t||(Fc=null,sd(e,t)),t=!1;var l=_c;e:for(;;)try{if(0!==gc&&null!==xc){var i=xc,o=yc;switch(gc){case 8:td(),l=6;break e;case 3:case 2:case 9:case 6:null===Rr.current&&(t=!0);var c=gc;if(gc=0,yc=null,md(e,i,o,c),s&&bc){l=0;break e}break;default:c=gc,gc=0,yc=null,md(e,i,o,c)}}cd(),l=_c;break}catch(d){ad(e,d)}return t&&e.shellSuspendCounter++,kn=_n=null,pc=a,O.H=n,O.A=r,null===xc&&(fc=null,vc=0,Aa()),l}function cd(){for(;null!==xc;)ud(xc)}function dd(){for(;null!==xc&&!le();)ud(xc)}function ud(e){var t=lo(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?pd(e):xc=t}function hd(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=qi(s,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=qi(s,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:il(t);default:xo(s,t),t=lo(s,t=xc=Ua(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?pd(e):xc=t}function md(e,t,s,a){kn=_n=null,il(t),or=null,cr=0;var n=t.return;try{if(function(e,t,s,a,n){if(s.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=s.alternate)&&An(t,s,n,!0),null!==(s=Rr.current)){switch(s.tag){case 31:case 13:return null===Or?id():null===s.alternate&&0===_c&&(_c=3),s.flags&=-257,s.flags|=65536,s.lanes=n,a===tr?s.flags|=16384:(null===(t=s.updateQueue)?s.updateQueue=new Set([a]):t.add(a),kd(e,a,n)),!1;case 22:return s.flags|=65536,a===tr?s.flags|=16384:(null===(t=s.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},s.updateQueue=t):null===(s=t.retryQueue)?t.retryQueue=new Set([a]):s.add(a),kd(e,a,n)),!1}throw Error(l(435,s.tag))}return kd(e,a,n),id(),!1}if(hn)return null!==(t=Rr.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,a!==fn&&wn(Ka(e=Error(l(422),{cause:a}),s))):(a!==fn&&wn(Ka(t=Error(l(423),{cause:a}),s)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,a=Ka(a,s),wr(e,n=Ti(e.stateNode,a,n)),4!==_c&&(_c=2)),!1;var r=Error(l(520),{cause:a});if(r=Ka(r,s),null===Ac?Ac=[r]:Ac.push(r),4!==_c&&(_c=2),null===t)return!0;a=Ka(a,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,wr(s,e=Ti(s.stateNode,a,e)),!1;case 1:if(t=s.type,r=s.stateNode,0===(128&s.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,Pi(n=Ai(n),e,s,a),wr(s,n),!1}s=s.return}while(null!==s);return!1}(e,n,t,s,vc))return _c=1,Ci(e,Ka(s,e.current)),void(xc=null)}catch(r){if(null!==n)throw xc=n,r;return _c=1,Ci(e,Ka(s,e.current)),void(xc=null)}32768&t.flags?(hn||1===a?e=!0:bc||0!==(536870912&vc)?e=!1:(jc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Rr.current)&&13===a.tag&&(a.flags|=16384))),fd(t,e)):pd(t)}function pd(e){var t=e;do{if(0!==(32768&t.flags))return void fd(t,jc);e=t.return;var s=po(t.alternate,t,Nc);if(null!==s)return void(xc=s);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===_c&&(_c=5)}function fd(e,t){do{var s=fo(e.alternate,e);if(null!==s)return s.flags&=32767,void(xc=s);if(null!==(s=e.return)&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&null!==(e=e.sibling))return void(xc=e);xc=e=s}while(null!==e);_c=6,xc=null}function xd(e,t,s,a,n,r,i,o,c){e.cancelPendingCommit=null;do{bd()}while(0!==Ic);if(0!==(6&pc))throw Error(l(327));if(null!==t){if(t===e.current)throw Error(l(177));if(r=t.lanes|t.childLanes,function(e,t,s,a,n,r){var l=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var i=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(s=l&~s;0<s;){var d=31-je(s),u=1<<d;i[d]=0,o[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}s&=~u}0!==a&&Re(e,a,0),0!==r&&0===n&&0!==e.tag&&(e.suspendedLanes|=r&~(l&~t))}(e,s,r|=Ta,i,o,c),e===fc&&(xc=fc=null,vc=0),Bc=t,zc=e,Uc=s,Vc=r,Hc=n,Wc=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ne(he,function(){return wd(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=O.T,O.T=null,n=M.p,M.p=2,i=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fu=jh,na(e=aa(e))){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var n=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{s.nodeType,r.nodeType}catch(x){s=null;break e}var i=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==n&&3!==h.nodeType||(o=i+n),h!==r||0!==a&&3!==h.nodeType||(c=i+a),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===n&&(o=i),m===r&&++u===a&&(c=i),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(xu={focusedElem:e,selectionRange:s},jh=!1,Oo=t;null!==Oo;)if(e=(t=Oo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Oo=e;else for(;null!==Oo;){switch(r=(t=Oo).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(s=0;s<e.length;s++)(n=e[s]).ref.impl=n.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,s=t,n=r.memoizedProps,r=r.memoizedState,a=s.stateNode;try{var f=Ni(s.type,n);e=a.getSnapshotBeforeUpdate(f,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(v){_d(s,s.return,v)}}break;case 3:if(0!==(1024&e))if(9===(s=(e=t.stateNode.containerInfo).nodeType))Au(e);else if(1===s)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,Oo=e;break}Oo=t.return}}(e,t)}finally{pc=i,M.p=n,O.T=a}}Ic=1,vd(),gd(),yd()}}function vd(){if(1===Ic){Ic=0;var e=zc,t=Bc,s=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||s){s=O.T,O.T=null;var a=M.p;M.p=2;var n=pc;pc|=4;try{Yo(t,e);var r=xu,l=aa(e.containerInfo),i=r.focusedElem,o=r.selectionRange;if(l!==i&&i&&i.ownerDocument&&sa(i.ownerDocument.documentElement,i)){if(null!==o&&na(i)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(d,i.value.length);else{var u=i.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=i.textContent.length,f=Math.min(o.start,p),x=void 0===o.end?f:Math.min(o.end,p);!m.extend&&f>x&&(l=x,x=f,f=l);var v=ta(i,f),g=ta(i,x);if(v&&g&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var y=u.createRange();y.setStart(v.node,v.offset),m.removeAllRanges(),f>x?(m.addRange(y),m.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),m.addRange(y))}}}}for(u=[],m=i;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var j=u[i];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}jh=!!fu,xu=fu=null}finally{pc=n,M.p=a,O.T=s}}e.current=t,Ic=2}}function gd(){if(2===Ic){Ic=0;var e=zc,t=Bc,s=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||s){s=O.T,O.T=null;var a=M.p;M.p=2;var n=pc;pc|=4;try{Mo(e,t.alternate,t)}finally{pc=n,M.p=a,O.T=s}}Ic=3}}function yd(){if(4===Ic||3===Ic){Ic=0,ie();var e=zc,t=Bc,s=Uc,a=Wc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ic=5:(Ic=0,Bc=zc=null,jd(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Lc=null),Le(s),t=t.stateNode,ge&&"function"===typeof ge.onCommitFiberRoot)try{ge.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==a){t=O.T,n=M.p,M.p=2,O.T=null;try{for(var r=e.onRecoverableError,l=0;l<a.length;l++){var i=a[l];r(i.value,{componentStack:i.stack})}}finally{O.T=t,M.p=n}}0!==(3&Uc)&&bd(),Fd(e),n=e.pendingLanes,0!==(261930&s)&&0!==(42&n)?e===Yc?qc++:(qc=0,Yc=e):qc=0,Ld(0,!1)}}function jd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Un(t)))}function bd(){return vd(),gd(),yd(),wd()}function wd(){if(5!==Ic)return!1;var e=zc,t=Vc;Vc=0;var s=Le(Uc),a=O.T,n=M.p;try{M.p=32>s?32:s,O.T=null,s=Hc,Hc=null;var r=zc,i=Uc;if(Ic=0,Bc=zc=null,Uc=0,0!==(6&pc))throw Error(l(331));var o=pc;if(pc|=4,cc(r.current),tc(r,r.current,i,s),pc=o,Ld(0,!1),ge&&"function"===typeof ge.onPostCommitFiberRoot)try{ge.onPostCommitFiberRoot(ve,r)}catch(c){}return!0}finally{M.p=n,O.T=a,jd(e,t)}}function Nd(e,t,s){t=Ka(s,t),null!==(e=jr(e,t=Ti(e.stateNode,t,2),2))&&(De(e,2),Fd(e))}function _d(e,t,s){if(3===e.tag)Nd(e,e,s);else for(;null!==t;){if(3===t.tag){Nd(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Lc||!Lc.has(a))){e=Ka(s,e),null!==(a=jr(t,s=Ai(2),2))&&(Pi(s,a,t,e),De(a,2),Fd(a));break}}t=t.return}}function kd(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new mc;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(s)||(wc=!0,n.add(s),e=Sd.bind(null,e,t,s),t.then(e,e))}function Sd(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,fc===e&&(vc&s)===s&&(4===_c||3===_c&&(62914560&vc)===vc&&300>oe()-Rc?0===(2&pc)&&sd(e,0):Cc|=s,Tc===vc&&(Tc=0)),Fd(e)}function Cd(e,t){0===t&&(t=Ae()),null!==(e=Ra(e,t))&&(De(e,t),Fd(e))}function Ed(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Cd(e,s)}function Td(e,t){var s=0;switch(e.tag){case 31:case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==a&&a.delete(t),Cd(e,s)}var Ad=null,Pd=null,Dd=!1,Rd=!1,Od=!1,Md=0;function Fd(e){e!==Pd&&null===e.next&&(null===Pd?Ad=Pd=e:Pd=Pd.next=e),Rd=!0,Dd||(Dd=!0,ku(function(){0!==(6&pc)?ne(de,Id):zd()}))}function Ld(e,t){if(!Od&&Rd){Od=!0;do{for(var s=!1,a=Ad;null!==a;){if(!t)if(0!==e){var n=a.pendingLanes;if(0===n)var r=0;else{var l=a.suspendedLanes,i=a.pingedLanes;r=(1<<31-je(42|e)+1)-1,r=201326741&(r&=n&~(l&~i))?201326741&r|1:r?2|r:0}0!==r&&(s=!0,Vd(a,r))}else r=vc,0===(3&(r=Ce(a,a===fc?r:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||Ee(a,r)||(s=!0,Vd(a,r));a=a.next}}while(s);Od=!1}}function Id(){zd()}function zd(){Rd=Dd=!1;var e=0;0!==Md&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bu&&(bu=e,!0);return bu=null,!1}()&&(e=Md);for(var t=oe(),s=null,a=Ad;null!==a;){var n=a.next,r=Bd(a,t);0===r?(a.next=null,null===s?Ad=n:s.next=n,null===n&&(Pd=s)):(s=a,(0!==e||0!==(3&r))&&(Rd=!0)),a=n}0!==Ic&&5!==Ic||Ld(e,!1),0!==Md&&(Md=0)}function Bd(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var l=31-je(r),i=1<<l,o=n[l];-1===o?0!==(i&s)&&0===(i&a)||(n[l]=Te(i,t)):o<=t&&(e.expiredLanes|=i),r&=~i}if(s=vc,s=Ce(e,e===(t=fc)?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===s||e===t&&(2===gc||9===gc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&re(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&s)||Ee(e,s)){if((t=s&-s)===e.callbackPriority)return t;switch(null!==a&&re(a),Le(s)){case 2:case 8:s=ue;break;case 32:default:s=he;break;case 268435456:s=pe}return a=Ud.bind(null,e),s=ne(s,a),e.callbackPriority=t,e.callbackNode=s,t}return null!==a&&null!==a&&re(a),e.callbackPriority=2,e.callbackNode=null,2}function Ud(e,t){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(bd()&&e.callbackNode!==s)return null;var a=vc;return 0===(a=Ce(e,e===fc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,a,t),Bd(e,oe()),null!=e.callbackNode&&e.callbackNode===s?Ud.bind(null,e):null)}function Vd(e,t){if(bd())return null;Xc(e,t,!0)}function Hd(){if(0===Md){var e=Wn;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Md=e}return Md}function Wd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function qd(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}for(var Yd=0;Yd<_a.length;Yd++){var Gd=_a[Yd];ka(Gd.toLowerCase(),"on"+(Gd[0].toUpperCase()+Gd.slice(1)))}ka(xa,"onAnimationEnd"),ka(va,"onAnimationIteration"),ka(ga,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(ya,"onTransitionRun"),ka(ja,"onTransitionStart"),ka(ba,"onTransitionCancel"),ka(wa,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$d=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kd));function Xd(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var l=a.length-1;0<=l;l--){var i=a[l],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==r&&n.isPropagationStopped())break e;r=i,n.currentTarget=c;try{r(n)}catch(d){Sa(d)}n.currentTarget=null,r=o}else for(l=0;l<a.length;l++){if(o=(i=a[l]).instance,c=i.currentTarget,i=i.listener,o!==r&&n.isPropagationStopped())break e;r=i,n.currentTarget=c;try{r(n)}catch(d){Sa(d)}n.currentTarget=null,r=o}}}}function Jd(e,t){var s=t[We];void 0===s&&(s=t[We]=new Set);var a=e+"__bubble";s.has(a)||(tu(t,e,2,!1),s.add(a))}function Qd(e,t,s){var a=0;t&&(a|=4),tu(s,e,a,t)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Zd]){e[Zd]=!0,tt.forEach(function(t){"selectionchange"!==t&&($d.has(t)||Qd(t,!1,e),Qd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zd]||(t[Zd]=!0,Qd("selectionchange",!1,t))}}function tu(e,t,s,a){switch(Ch(t)){case 2:var n=bh;break;case 8:n=wh;break;default:n=Nh}s=n.bind(null,t,s,e),n=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):void 0!==n?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function su(e,t,s,a,n){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var l=a.tag;if(3===l||4===l){var i=a.stateNode.containerInfo;if(i===n)break;if(4===l)for(l=a.return;null!==l;){var c=l.tag;if((3===c||4===c)&&l.stateNode.containerInfo===n)return;l=l.return}for(;null!==i;){if(null===(l=Xe(i)))return;if(5===(c=l.tag)||6===c||26===c||27===c){a=r=l;continue e}i=i.parentNode}}a=a.return}zt(function(){var a=r,n=Ot(s),l=[];e:{var i=Na.get(e);if(void 0!==i){var c=as,d=e;switch(e){case"keypress":if(0===$t(s))break e;case"keydown":case"keyup":c=gs;break;case"focusin":d="focus",c=cs;break;case"focusout":d="blur",c=cs;break;case"beforeblur":case"afterblur":c=cs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=os;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=js;break;case xa:case va:case ga:c=ds;break;case wa:c=bs;break;case"scroll":case"scrollend":c=rs;break;case"wheel":c=ws;break;case"copy":case"cut":case"paste":c=us;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=ys;break;case"toggle":case"beforetoggle":c=Ns}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==i?i+"Capture":null:i;u=[];for(var p,f=a;null!==f;){var x=f;if(p=x.stateNode,5!==(x=x.tag)&&26!==x&&27!==x||null===p||null===m||null!=(x=Ut(f,m))&&u.push(au(f,x,p)),h)break;f=f.return}0<u.length&&(i=new c(i,d,null,s,n),l.push({event:i,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===Rt||!(d=s.relatedTarget||s.fromElement)||!Xe(d)&&!d[He])&&(c||i)&&(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=a,null!==(d=(d=s.relatedTarget||s.toElement)?Xe(d):null)&&(h=o(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=a),c!==d)){if(u=is,x="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=ys,x="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?i:Qe(c),p=null==d?i:Qe(d),(i=new u(x,f+"leave",c,s,n)).target=h,i.relatedTarget=p,x=null,Xe(n)===a&&((u=new u(m,f+"enter",d,s,n)).target=p,u.relatedTarget=h,x=u),h=x,c&&d)e:{for(u=ru,f=d,p=0,x=m=c;x;x=u(x))p++;x=0;for(var v=f;v;v=u(v))x++;for(;0<p-x;)m=u(m),p--;for(;0<x-p;)f=u(f),x--;for(;p--;){if(m===f||null!==f&&m===f.alternate){u=m;break e}m=u(m),f=u(f)}u=null}else u=null;null!==c&&lu(l,i,c,u,!1),null!==d&&null!==h&&lu(l,h,d,u,!0)}if("select"===(c=(i=a?Qe(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var g=Us;else if(Ms(i))if(Vs)g=Js;else{g=$s;var y=Ks}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?a&&Et(a.elementType)&&(g=Us):g=Xs;switch(g&&(g=g(e,a))?Fs(l,g,s,n):(y&&y(e,i,a),"focusout"===e&&a&&"number"===i.type&&null!=a.memoizedProps.value&&jt(i,"number",i.value)),y=a?Qe(a):window,e){case"focusin":(Ms(y)||"true"===y.contentEditable)&&(la=y,ia=a,oa=null);break;case"focusout":oa=ia=la=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,da(l,s,n);break;case"selectionchange":if(ra)break;case"keydown":case"keyup":da(l,s,n)}var j;if(ks)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rs?Ps(e,s)&&(b="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(b="onCompositionStart");b&&(Es&&"ko"!==s.locale&&(Rs||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rs&&(j=Kt()):(Yt="value"in(qt=n)?qt.value:qt.textContent,Rs=!0)),0<(y=nu(a,b)).length&&(b=new hs(b,e,null,s,n),l.push({event:b,listeners:y}),j?b.data=j:null!==(j=Ds(s))&&(b.data=j))),(j=Cs?function(e,t){switch(e){case"compositionend":return Ds(t);case"keypress":return 32!==t.which?null:(As=!0,Ts);case"textInput":return(e=t.data)===Ts&&As?null:e;default:return null}}(e,s):function(e,t){if(Rs)return"compositionend"===e||!ks&&Ps(e,t)?(e=Kt(),Gt=Yt=qt=null,Rs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Es&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(b=nu(a,"onBeforeInput")).length&&(y=new hs("onBeforeInput","beforeinput",null,s,n),l.push({event:y,listeners:b}),y.data=j)),function(e,t,s,a,n){if("submit"===t&&s&&s.stateNode===n){var r=Wd((n[Ve]||null).action),l=a.submitter;l&&null!==(t=(t=l[Ve]||null)?Wd(t.formAction):l.getAttribute("formAction"))&&(r=t,l=null);var i=new as("action","action",null,a,n);e.push({event:i,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Md){var e=l?qd(n,l):new FormData(n);ti(s,{pending:!0,data:e,method:n.method,action:r},null,e)}}else"function"===typeof r&&(i.preventDefault(),e=l?qd(n,l):new FormData(n),ti(s,{pending:!0,data:e,method:n.method,action:r},r,e))},currentTarget:n}]})}}(l,e,a,s,n)}Xd(l,t)})}function au(e,t,s){return{instance:e,listener:t,currentTarget:s}}function nu(e,t){for(var s=t+"Capture",a=[];null!==e;){var n=e,r=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===r||(null!=(n=Ut(e,s))&&a.unshift(au(e,n,r)),null!=(n=Ut(e,t))&&a.push(au(e,n,r))),3===e.tag)return a;e=e.return}return[]}function ru(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function lu(e,t,s,a,n){for(var r=t._reactName,l=[];null!==s&&s!==a;){var i=s,o=i.alternate,c=i.stateNode;if(i=i.tag,null!==o&&o===a)break;5!==i&&26!==i&&27!==i||null===c||(o=c,n?null!=(c=Ut(s,r))&&l.unshift(au(s,c,o)):n||null!=(c=Ut(s,r))&&l.push(au(s,c,o))),s=s.return}0!==l.length&&e.push({event:t,listeners:l})}var iu=/\r\n?/g,ou=/\u0000|\uFFFD/g;function cu(e){return("string"===typeof e?e:""+e).replace(iu,"\n").replace(ou,"")}function du(e,t){return t=cu(t),cu(e)===t}function uu(e,t,s,a,n,r){switch(s){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||_t(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&_t(e,""+a);break;case"className":ct(e,"class",a);break;case"tabIndex":ct(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,s,a);break;case"style":Ct(e,a,r);break;case"data":if("object"!==t){ct(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==s)){e.removeAttribute(s);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(s);break}a=Pt(""+a),e.setAttribute(s,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===s?("input"!==t&&uu(e,t,"name",n.name,n,null),uu(e,t,"formEncType",n.formEncType,n,null),uu(e,t,"formMethod",n.formMethod,n,null),uu(e,t,"formTarget",n.formTarget,n,null)):(uu(e,t,"encType",n.encType,n,null),uu(e,t,"method",n.method,n,null),uu(e,t,"target",n.target,n,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(s);break}a=Pt(""+a),e.setAttribute(s,a);break;case"onClick":null!=a&&(e.onclick=Dt);break;case"onScroll":null!=a&&Jd("scroll",e);break;case"onScrollEnd":null!=a&&Jd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(l(61));if(null!=(s=a.__html)){if(null!=n.children)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}s=Pt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(s,""+a):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":!0===a?e.setAttribute(s,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(s,a):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(s,a):e.removeAttribute(s);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(s):e.setAttribute(s,a);break;case"popover":Jd("beforetoggle",e),Jd("toggle",e),ot(e,"popover",a);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ot(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<s.length)||"o"!==s[0]&&"O"!==s[0]||"n"!==s[1]&&"N"!==s[1])&&ot(e,s=Tt.get(s)||s,a)}}function hu(e,t,s,a,n,r){switch(s){case"style":Ct(e,a,r);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(l(61));if(null!=(s=a.__html)){if(null!=n.children)throw Error(l(60));e.innerHTML=s}}break;case"children":"string"===typeof a?_t(e,a):("number"===typeof a||"bigint"===typeof a)&&_t(e,""+a);break;case"onScroll":null!=a&&Jd("scroll",e);break;case"onScrollEnd":null!=a&&Jd("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:st.hasOwnProperty(s)||("o"!==s[0]||"n"!==s[1]||(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),"function"===typeof(r=null!=(r=e[Ve]||null)?r[s]:null)&&e.removeEventListener(t,r,n),"function"!==typeof a)?s in e?e[s]=a:!0===a?e.setAttribute(s,""):ot(e,s,a):("function"!==typeof r&&null!==r&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,a,n)))}}function mu(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jd("error",e),Jd("load",e);var a,n=!1,r=!1;for(a in s)if(s.hasOwnProperty(a)){var i=s[a];if(null!=i)switch(a){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:uu(e,t,a,i,s,null)}}return r&&uu(e,t,"srcSet",s.srcSet,s,null),void(n&&uu(e,t,"src",s.src,s,null));case"input":Jd("invalid",e);var o=a=i=r=null,c=null,d=null;for(n in s)if(s.hasOwnProperty(n)){var u=s[n];if(null!=u)switch(n){case"name":r=u;break;case"type":i=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(l(137,t));break;default:uu(e,t,n,u,s,null)}}return void yt(e,a,o,c,d,i,r,!1);case"select":for(r in Jd("invalid",e),n=i=a=null,s)if(s.hasOwnProperty(r)&&null!=(o=s[r]))switch(r){case"value":a=o;break;case"defaultValue":i=o;break;case"multiple":n=o;default:uu(e,t,r,o,s,null)}return t=a,s=i,e.multiple=!!n,void(null!=t?bt(e,!!n,t,!1):null!=s&&bt(e,!!n,s,!0));case"textarea":for(i in Jd("invalid",e),a=r=n=null,s)if(s.hasOwnProperty(i)&&null!=(o=s[i]))switch(i){case"value":n=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(l(91));break;default:uu(e,t,i,o,s,null)}return void Nt(e,n,r,a);case"option":for(c in s)if(s.hasOwnProperty(c)&&null!=(n=s[c]))if("selected"===c)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else uu(e,t,c,n,s,null);return;case"dialog":Jd("beforetoggle",e),Jd("toggle",e),Jd("cancel",e),Jd("close",e);break;case"iframe":case"object":Jd("load",e);break;case"video":case"audio":for(n=0;n<Kd.length;n++)Jd(Kd[n],e);break;case"image":Jd("error",e),Jd("load",e);break;case"details":Jd("toggle",e);break;case"embed":case"source":case"link":Jd("error",e),Jd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in s)if(s.hasOwnProperty(d)&&null!=(n=s[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:uu(e,t,d,n,s,null)}return;default:if(Et(t)){for(u in s)s.hasOwnProperty(u)&&(void 0!==(n=s[u])&&hu(e,t,u,n,s,void 0));return}}for(o in s)s.hasOwnProperty(o)&&(null!=(n=s[o])&&uu(e,t,o,n,s,null))}function pu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fu=null,xu=null;function vu(e){return 9===e.nodeType?e:e.ownerDocument}function gu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ju(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bu=null;var wu="function"===typeof setTimeout?setTimeout:void 0,Nu="function"===typeof clearTimeout?clearTimeout:void 0,_u="function"===typeof Promise?Promise:void 0,ku="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _u?function(e){return _u.resolve(null).then(e).catch(Su)}:wu;function Su(e){setTimeout(function(){throw e})}function Cu(e){return"head"===e}function Eu(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)||"/&"===s){if(0===a)return e.removeChild(n),void qh(t);a--}else if("$"===s||"$?"===s||"$~"===s||"$!"===s||"&"===s)a++;else if("html"===s)zu(e.ownerDocument.documentElement);else if("head"===s){zu(s=e.ownerDocument.head);for(var r=s.firstChild;r;){var l=r.nextSibling,i=r.nodeName;r[Ke]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===r.rel.toLowerCase()||s.removeChild(r),r=l}}else"body"===s&&zu(e.ownerDocument.body);s=n}while(s);qh(t)}function Tu(e,t){var s=e;e=0;do{var a=s.nextSibling;if(1===s.nodeType?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",""===s.getAttribute("style")&&s.removeAttribute("style")):3===s.nodeType&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),a&&8===a.nodeType)if("/$"===(s=a.data)){if(0===e)break;e--}else"$"!==s&&"$?"!==s&&"$~"!==s&&"$!"!==s||e++;s=a}while(s)}function Au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Au(s),$e(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===s.rel.toLowerCase())continue}e.removeChild(s)}}function Pu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ou(e.nextSibling)))return null}return e}function Du(e){return"$?"===e.data||"$~"===e.data}function Ru(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ou(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Mu=null;function Fu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s||"/&"===s){if(0===t)return Ou(e.nextSibling);t--}else"$"!==s&&"$!"!==s&&"$?"!==s&&"$~"!==s&&"&"!==s||t++}e=e.nextSibling}return null}function Lu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s||"$~"===s||"&"===s){if(0===t)return e;t--}else"/$"!==s&&"/&"!==s||t++}e=e.previousSibling}return null}function Iu(e,t,s){switch(t=vu(s),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}function zu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var Bu=new Map,Uu=new Set;function Vu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hu=M.d;M.d={f:function(){var e=Hu.f(),t=ed();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ai(t):Hu.r(e)},D:function(e){Hu.D(e),qu("dns-prefetch",e,null)},C:function(e,t){Hu.C(e,t),qu("preconnect",e,t)},L:function(e,t,s){Hu.L(e,t,s);var a=Wu;if(a&&e&&t){var n='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&s&&s.imageSrcSet?(n+='[imagesrcset="'+vt(s.imageSrcSet)+'"]',"string"===typeof s.imageSizes&&(n+='[imagesizes="'+vt(s.imageSizes)+'"]')):n+='[href="'+vt(e)+'"]';var r=n;switch(t){case"style":r=Gu(e);break;case"script":r=Xu(e)}Bu.has(r)||(e=m({rel:"preload",href:"image"===t&&s&&s.imageSrcSet?void 0:e,as:t},s),Bu.set(r,e),null!==a.querySelector(n)||"style"===t&&a.querySelector(Ku(r))||"script"===t&&a.querySelector(Ju(r))||(mu(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}},m:function(e,t){Hu.m(e,t);var s=Wu;if(s&&e){var a=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+vt(a)+'"][href="'+vt(e)+'"]',r=n;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Xu(e)}if(!Bu.has(r)&&(e=m({rel:"modulepreload",href:e},t),Bu.set(r,e),null===s.querySelector(n))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ju(r)))return}mu(a=s.createElement("link"),"link",e),et(a),s.head.appendChild(a)}}},X:function(e,t){Hu.X(e,t);var s=Wu;if(s&&e){var a=Ze(s).hoistableScripts,n=Xu(e),r=a.get(n);r||((r=s.querySelector(Ju(n)))||(e=m({src:e,async:!0},t),(t=Bu.get(n))&&th(e,t),et(r=s.createElement("script")),mu(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(n,r))}},S:function(e,t,s){Hu.S(e,t,s);var a=Wu;if(a&&e){var n=Ze(a).hoistableStyles,r=Gu(e);t=t||"default";var l=n.get(r);if(!l){var i={loading:0,preload:null};if(l=a.querySelector(Ku(r)))i.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Bu.get(r))&&eh(e,s);var o=l=a.createElement("link");et(o),mu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){i.loading|=1}),o.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Zu(l,t,a)}l={type:"stylesheet",instance:l,count:1,state:i},n.set(r,l)}}},M:function(e,t){Hu.M(e,t);var s=Wu;if(s&&e){var a=Ze(s).hoistableScripts,n=Xu(e),r=a.get(n);r||((r=s.querySelector(Ju(n)))||(e=m({src:e,async:!0,type:"module"},t),(t=Bu.get(n))&&th(e,t),et(r=s.createElement("script")),mu(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(n,r))}}};var Wu="undefined"===typeof document?null:document;function qu(e,t,s){var a=Wu;if(a&&"string"===typeof t&&t){var n=vt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof s&&(n+='[crossorigin="'+s+'"]'),Uu.has(n)||(Uu.add(n),e={rel:e,crossOrigin:s,href:t},null===a.querySelector(n)&&(mu(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}}function Yu(e,t,s,a){var n,r,i,o,c=(c=Y.current)?Vu(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof s.precedence&&"string"===typeof s.href?(t=Gu(s.href),(a=(s=Ze(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===s.rel&&"string"===typeof s.href&&"string"===typeof s.precedence){e=Gu(s.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Ku(e)))&&!d._p&&(u.instance=d,u.state.loading=5),Bu.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Bu.set(e,s),d||(n=c,r=e,i=s,o=u.state,n.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=n.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),mu(r,"link",i),et(r),n.head.appendChild(r))))),t&&null===a)throw Error(l(528,""));return u}if(t&&null!==a)throw Error(l(529,""));return null;case"script":return t=s.async,"string"===typeof(s=s.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xu(s),(a=(s=Ze(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Gu(e){return'href="'+vt(e)+'"'}function Ku(e){return'link[rel="stylesheet"]['+e+"]"}function $u(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+vt(e)+'"]'}function Ju(e){return"script[async]"+e}function Qu(e,t,s){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+vt(s.href)+'"]');if(a)return t.instance=a,et(a),a;var n=m({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return et(a=(e.ownerDocument||e).createElement("style")),mu(a,"style",n),Zu(a,s.precedence,e),t.instance=a;case"stylesheet":n=Gu(s.href);var r=e.querySelector(Ku(n));if(r)return t.state.loading|=4,t.instance=r,et(r),r;a=$u(s),(n=Bu.get(n))&&eh(a,n),et(r=(e.ownerDocument||e).createElement("link"));var i=r;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),mu(r,"link",a),t.state.loading|=4,Zu(r,s.precedence,e),t.instance=r;case"script":return r=Xu(s.src),(n=e.querySelector(Ju(r)))?(t.instance=n,et(n),n):(a=s,(n=Bu.get(r))&&th(a=m({},s),n),et(n=(e=e.ownerDocument||e).createElement("script")),mu(n,"link",a),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,Zu(a,s.precedence,e));return t.instance}function Zu(e,t,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=a.length?a[a.length-1]:null,r=n,l=0;l<a.length;l++){var i=a[l];if(i.dataset.precedence===t)r=i;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===s.nodeType?s.head:s).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var sh=null;function ah(e,t,s){if(null===sh){var a=new Map,n=sh=new Map;n.set(s,a)}else(a=(n=sh).get(s))||(a=new Map,n.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[Ke]||r[Ue]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var l=r.getAttribute(t)||"";l=e+l;var i=a.get(l);i?i.push(r):a.set(l,[r])}}return a}function nh(e,t,s){(e=e.ownerDocument||e).head.insertBefore(s,"title"===t?e.querySelector("head > title"):null)}function rh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var lh=0;function ih(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(dh,e),oh=null,ih.call(e))}function dh(e,t){if(!(4&t.state.loading)){var s=oh.get(e);if(s)var a=s.get(null);else{s=new Map,oh.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var l=n[r];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(s.set(l.dataset.precedence,l),a=l)}a&&s.set(null,a)}l=(n=t.instance).getAttribute("data-precedence"),(r=s.get(l)||a)===a&&s.set(null,n),s.set(l,n),this.count++,a=ih.bind(this),n.addEventListener("load",a),n.addEventListener("error",a),r?r.parentNode.insertBefore(n,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var uh={$$typeof:b,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function hh(e,t,s,a,n,r,l,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=a,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function mh(e,t,s,a,n,r,l,i,o,c,d,u){return e=new hh(e,t,s,l,o,c,d,u,i),t=1,!0===r&&(t|=24),r=Ia(3,null,null,t),e.current=r,r.stateNode=e,(t=Bn()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:s,cache:t},vr(r),e}function ph(e){return e?e=Fa:Fa}function fh(e,t,s,a,n,r){n=ph(n),null===a.context?a.context=n:a.pendingContext=n,(a=yr(t)).payload={element:s},null!==(r=void 0===r?null:r)&&(a.callback=r),null!==(s=jr(e,a,t))&&($c(s,0,t),br(s,e,t))}function xh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function vh(e,t){xh(e,t),(e=e.alternate)&&xh(e,t)}function gh(e){if(13===e.tag||31===e.tag){var t=Ra(e,67108864);null!==t&&$c(t,0,67108864),vh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=Gc(),s=Ra(e,t=Fe(t));null!==s&&$c(s,0,t),vh(e,t)}}var jh=!0;function bh(e,t,s,a){var n=O.T;O.T=null;var r=M.p;try{M.p=2,Nh(e,t,s,a)}finally{M.p=r,O.T=n}}function wh(e,t,s,a){var n=O.T;O.T=null;var r=M.p;try{M.p=8,Nh(e,t,s,a)}finally{M.p=r,O.T=n}}function Nh(e,t,s,a){if(jh){var n=_h(a);if(null===n)su(e,t,a,kh,s),Fh(e,a);else if(function(e,t,s,a,n){switch(t){case"focusin":return Th=Lh(Th,e,t,s,a,n),!0;case"dragenter":return Ah=Lh(Ah,e,t,s,a,n),!0;case"mouseover":return Ph=Lh(Ph,e,t,s,a,n),!0;case"pointerover":var r=n.pointerId;return Dh.set(r,Lh(Dh.get(r)||null,e,t,s,a,n)),!0;case"gotpointercapture":return r=n.pointerId,Rh.set(r,Lh(Rh.get(r)||null,e,t,s,a,n)),!0}return!1}(n,e,t,s,a))a.stopPropagation();else if(Fh(e,a),4&t&&-1<Mh.indexOf(e)){for(;null!==n;){var r=Je(n);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var l=Se(r.pendingLanes);if(0!==l){var i=r;for(i.pendingLanes|=2,i.entangledLanes|=2;l;){var o=1<<31-je(l);i.entanglements[1]|=o,l&=~o}Fd(r),0===(6&pc)&&(Mc=oe()+500,Ld(0,!1))}}break;case 31:case 13:null!==(i=Ra(r,2))&&$c(i,0,2),ed(),vh(r,2)}if(null===(r=_h(a))&&su(e,t,a,kh,s),r===n)break;n=r}null!==n&&a.stopPropagation()}else su(e,t,a,null,s)}}function _h(e){return Sh(e=Ot(e))}var kh=null;function Sh(e){if(kh=null,null!==(e=Xe(e))){var t=o(e);if(null===t)e=null;else{var s=t.tag;if(13===s){if(null!==(e=c(t)))return e;e=null}else if(31===s){if(null!==(e=d(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case he:case me:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Eh=!1,Th=null,Ah=null,Ph=null,Dh=new Map,Rh=new Map,Oh=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Ph=null;break;case"pointerover":case"pointerout":Dh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Lh(e,t,s,a,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=Je(t))&&gh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Ih(e){var t=Xe(e.target);if(null!==t){var s=o(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=c(s)))return e.blockedOn=t,void ze(e.priority,function(){yh(s)})}else if(31===t){if(null!==(t=d(s)))return e.blockedOn=t,void ze(e.priority,function(){yh(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=_h(e.nativeEvent);if(null!==s)return null!==(t=Je(s))&&gh(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);Rt=a,s.target.dispatchEvent(a),Rt=null,t.shift()}return!0}function Bh(e,t,s){zh(e)&&s.delete(t)}function Uh(){Eh=!1,null!==Th&&zh(Th)&&(Th=null),null!==Ah&&zh(Ah)&&(Ah=null),null!==Ph&&zh(Ph)&&(Ph=null),Dh.forEach(Bh),Rh.forEach(Bh)}function Vh(e,t){e.blockedOn===t&&(e.blockedOn=null,Eh||(Eh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Uh)))}var Hh=null;function Wh(e){Hh!==e&&(Hh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var s=e[t],a=e[t+1],n=e[t+2];if("function"!==typeof a){if(null===Sh(a||s))continue;break}var r=Je(s);null!==r&&(e.splice(t,3),t-=3,ti(r,{pending:!0,data:n,method:s.method,action:a},a,n))}}))}function qh(e){function t(t){return Vh(t,e)}null!==Th&&Vh(Th,e),null!==Ah&&Vh(Ah,e),null!==Ph&&Vh(Ph,e),Dh.forEach(t),Rh.forEach(t);for(var s=0;s<Oh.length;s++){var a=Oh[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Oh.length&&null===(s=Oh[0]).blockedOn;)Ih(s),null===s.blockedOn&&Oh.shift();if(null!=(s=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<s.length;a+=3){var n=s[a],r=s[a+1],l=n[Ve]||null;if("function"===typeof r)l||Wh(s);else if(l){var i=null;if(r&&r.hasAttribute("formAction")){if(n=r,l=r[Ve]||null)i=l.formAction;else if(null!==Sh(n))continue}else i=l.action;"function"===typeof i?s[a+1]=i:(s.splice(a,3),a-=3),Wh(s)}}}function Yh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return n=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==n&&(n(),n=null),a||setTimeout(s,20)}function s(){if(!a&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var a=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==n&&(n(),n=null)}}}function Gh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));fh(t.current,Gc(),e,t,null,null)},Kh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),ed(),t[He]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Oh.length&&0!==t&&t<Oh[s].priority;s++);Oh.splice(s,0,e),0===s&&Ih(e)}};var $h=n.version;if("19.2.3"!==$h)throw Error(l(527,$h,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(l(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(null===n)break;var r=n.alternate;if(null===r){if(null!==(a=n.return)){s=a;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return u(n),e;if(r===a)return u(n),t;r=r.sibling}throw Error(l(188))}if(s.return!==a.return)s=n,a=r;else{for(var i=!1,c=n.child;c;){if(c===s){i=!0,s=n,a=r;break}if(c===a){i=!0,a=n,s=r;break}c=c.sibling}if(!i){for(c=r.child;c;){if(c===s){i=!0,s=r,a=n;break}if(c===a){i=!0,a=r,s=n;break}c=c.sibling}if(!i)throw Error(l(189))}}if(s.alternate!==a)throw Error(l(190))}if(3!==s.tag)throw Error(l(188));return s.stateNode.current===s?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{ve=Jh.inject(Xh),ge=Jh}catch(Zh){}}t.createRoot=function(e,t){if(!i(e))throw Error(l(299));var s=!1,a="",n=_i,r=ki,o=Si;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=mh(e,1,!1,null,0,s,a,null,n,r,o,Yh),e[He]=t.current,eu(e),new Gh(t)},t.hydrateRoot=function(e,t,s){if(!i(e))throw Error(l(299));var a=!1,n="",r=_i,o=ki,c=Si,d=null;return null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(a=!0),void 0!==s.identifierPrefix&&(n=s.identifierPrefix),void 0!==s.onUncaughtError&&(r=s.onUncaughtError),void 0!==s.onCaughtError&&(o=s.onCaughtError),void 0!==s.onRecoverableError&&(c=s.onRecoverableError),void 0!==s.formState&&(d=s.formState)),(t=mh(e,1,!0,t,0,a,n,d,r,o,c,Yh)).context=ph(null),s=t.current,(n=yr(a=Fe(a=Gc()))).callback=null,jr(s,n,a),s=a,t.current.lanes=s,De(t,s),Fd(t),e[He]=t.current,eu(e),new Kh(t)},t.version="19.2.3"},43(e,t,s){e.exports=s(288)},238(e,t,s){s.d(t,{utils:()=>Vi,writeFile:()=>Ai});var a={version:"0.18.5"},n=1200,r=1252,l=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],i={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},o=function(e){-1!=l.indexOf(e)&&(r=i[0]=e)};var c=function(e){n=e,o(e)};function d(){c(1200),o(1252)}function u(e){for(var t=[],s=0;s<e.length>>1;++s)t[s]=String.fromCharCode(e.charCodeAt(2*s+1)+(e.charCodeAt(2*s)<<8));return t.join("")}var h,m=function(e){return String.fromCharCode(e)},p=function(e){return String.fromCharCode(e)};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function x(e){for(var t="",s=0,a=0,n=0,r=0,l=0,i=0,o=0,c=0;c<e.length;)r=(s=e.charCodeAt(c++))>>2,l=(3&s)<<4|(a=e.charCodeAt(c++))>>4,i=(15&a)<<2|(n=e.charCodeAt(c++))>>6,o=63&n,isNaN(a)?i=o=64:isNaN(n)&&(o=64),t+=f.charAt(r)+f.charAt(l)+f.charAt(i)+f.charAt(o);return t}function v(e){var t="",s=0,a=0,n=0,r=0,l=0,i=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var o=0;o<e.length;)s=f.indexOf(e.charAt(o++))<<2|(r=f.indexOf(e.charAt(o++)))>>4,t+=String.fromCharCode(s),a=(15&r)<<4|(l=f.indexOf(e.charAt(o++)))>>2,64!==l&&(t+=String.fromCharCode(a)),n=(3&l)<<6|(i=f.indexOf(e.charAt(o++))),64!==i&&(t+=String.fromCharCode(n));return t}var g=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),y=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(t){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function j(e){return g?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function b(e){return g?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var w=function(e){return g?y(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function N(e){if("undefined"===typeof ArrayBuffer)return w(e);for(var t=new ArrayBuffer(e.length),s=new Uint8Array(t),a=0;a!=e.length;++a)s[a]=255&e.charCodeAt(a);return t}function _(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],s=0;s<e.length;++s)t[s]=String.fromCharCode(e[s]);return t.join("")}var k=g?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:y(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,s=0;for(t=0;t<e.length;++t)s+=e[t].length;var a=new Uint8Array(s),n=0;for(t=0,s=0;t<e.length;s+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],s);else{if("string"==typeof e[t])throw"wtf";a.set(new Uint8Array(e[t]),s)}return a}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var S=/\u0000/g,C=/[\u0001-\u0006]/g;function E(e){for(var t="",s=e.length-1;s>=0;)t+=e.charAt(s--);return t}function T(e,t){var s=""+e;return s.length>=t?s:Ve("0",t-s.length)+s}function A(e,t){var s=""+e;return s.length>=t?s:Ve(" ",t-s.length)+s}function P(e,t){var s=""+e;return s.length>=t?s:s+Ve(" ",t-s.length)}var D=Math.pow(2,32);function R(e,t){return e>D||e<-D?function(e,t){var s=""+Math.round(e);return s.length>=t?s:Ve("0",t-s.length)+s}(e,t):function(e,t){var s=""+e;return s.length>=t?s:Ve("0",t-s.length)+s}(Math.round(e),t)}function O(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var M=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],F=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var L={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},I={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},z={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function B(e,t,s){for(var a=e<0?-1:1,n=e*a,r=0,l=1,i=0,o=1,c=0,d=0,u=Math.floor(n);c<t&&(i=(u=Math.floor(n))*l+r,d=u*c+o,!(n-u<5e-8));)n=1/(n-u),r=l,l=i,o=c,c=d;if(d>t&&(c>t?(d=o,i=r):(d=c,i=l)),!s)return[0,a*i,d];var h=Math.floor(a*i/d);return[h,a*i-h*d,d]}function U(e,t,s){if(e>2958465||e<0)return null;var a=0|e,n=Math.floor(86400*(e-a)),r=0,l=[],i={D:a,T:n,u:86400*(e-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(i.u)<1e-6&&(i.u=0),t&&t.date1904&&(a+=1462),i.u>.9999&&(i.u=0,86400==++n&&(i.T=n=0,++a,++i.D)),60===a)l=s?[1317,10,29]:[1900,2,29],r=3;else if(0===a)l=s?[1317,8,29]:[1900,1,0],r=6;else{a>60&&--a;var o=new Date(1900,0,1);o.setDate(o.getDate()+a-1),l=[o.getFullYear(),o.getMonth()+1,o.getDate()],r=o.getDay(),a<60&&(r=(r+6)%7),s&&(r=function(e,t){t[0]-=581;var s=e.getDay();e<60&&(s=(s+6)%7);return s}(o,l))}return i.y=l[0],i.m=l[1],i.d=l[2],i.S=n%60,n=Math.floor(n/60),i.M=n%60,n=Math.floor(n/60),i.H=n,i.q=r,i}var V=new Date(1899,11,31,0,0,0),H=V.getTime(),W=new Date(1900,2,1,0,0,0);function q(e,t){var s=e.getTime();return t?s-=1262304e5:e>=W&&(s+=864e5),(s-(H+6e4*(e.getTimezoneOffset()-V.getTimezoneOffset())))/864e5}function Y(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function G(e){var t,s=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=s>=-4&&s<=-1?e.toPrecision(10+s):Math.abs(s)<=9?function(e){var t=e<0?12:11,s=Y(e.toFixed(12));return s.length<=t||(s=e.toPrecision(10)).length<=t?s:e.toExponential(5)}(e):10===s?e.toFixed(10).substr(0,12):function(e){var t=Y(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Y(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function K(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):G(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return xe(14,q(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function X(e,t,s,a){var n,r="",l=0,i=0,o=s.y,c=0;switch(e){case 98:o=s.y+543;case 121:switch(t.length){case 1:case 2:n=o%100,c=2;break;default:n=o%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:n=s.m,c=t.length;break;case 3:return F[s.m-1][1];case 5:return F[s.m-1][0];default:return F[s.m-1][2]}break;case 100:switch(t.length){case 1:case 2:n=s.d,c=t.length;break;case 3:return M[s.q][0];default:return M[s.q][1]}break;case 104:switch(t.length){case 1:case 2:n=1+(s.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:n=s.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:n=s.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==s.u||"s"!=t&&"ss"!=t?(i=a>=2?3===a?1e3:100:1===a?10:1,(l=Math.round(i*(s.S+s.u)))>=60*i&&(l=0),"s"===t?0===l?"0":""+l/i:(r=T(l,2+a),"ss"===t?r.substr(0,2):"."+r.substr(2,t.length-1))):T(s.S,t.length);case 90:switch(t){case"[h]":case"[hh]":n=24*s.D+s.H;break;case"[m]":case"[mm]":n=60*(24*s.D+s.H)+s.M;break;case"[s]":case"[ss]":n=60*(60*(24*s.D+s.H)+s.M)+Math.round(s.S+s.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:n=o,c=1}return c>0?T(n,c):""}function J(e){if(e.length<=3)return e;for(var t=e.length%3,s=e.substr(0,t);t!=e.length;t+=3)s+=(s.length>0?",":"")+e.substr(t,3);return s}var Q=/%/g;function Z(e,t){var s,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Z(e,-t);var n=e.indexOf(".");-1===n&&(n=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%n;if(r<0&&(r+=n),-1===(s=(t/Math.pow(10,r)).toPrecision(a+1+(n+r)%n)).indexOf("e")){var l=Math.floor(Math.log(t)*Math.LOG10E);for(-1===s.indexOf(".")?s=s.charAt(0)+"."+s.substr(1)+"E+"+(l-s.length+r):s+="E+"+(l-r);"0."===s.substr(0,2);)s=(s=s.charAt(0)+s.substr(2,n)+"."+s.substr(2+n)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");s=s.replace(/\+-/,"-")}s=s.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,s,a){return t+s+a.substr(0,(n+r)%n)+"."+a.substr(r)+"E"})}else s=t.toExponential(a);return e.match(/E\+00$/)&&s.match(/e[+-]\d$/)&&(s=s.substr(0,s.length-1)+"0"+s.charAt(s.length-1)),e.match(/E\-/)&&s.match(/e\+/)&&(s=s.replace(/e\+/,"e")),s.replace("e","E")}var ee=/# (\?+)( ?)\/( ?)(\d+)/;var te=/^#*0*\.([0#]+)/,se=/\).*[0#]/,ae=/\(###\) ###\\?-####/;function ne(e){for(var t,s="",a=0;a!=e.length;++a)switch(t=e.charCodeAt(a)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(t)}return s}function re(e,t){var s=Math.pow(10,t);return""+Math.round(e*s)/s}function le(e,t){var s=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(s*a)).length?0:Math.round(s*a)}function ie(e,t,s){if(40===e.charCodeAt(0)&&!t.match(se)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return s>=0?ie("n",a,s):"("+ie("n",a,-s)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,s){for(var a=t.length-1;44===t.charCodeAt(a-1);)--a;return de(e,t.substr(0,a),s/Math.pow(10,3*(t.length-a)))}(e,t,s);if(-1!==t.indexOf("%"))return function(e,t,s){var a=t.replace(Q,""),n=t.length-a.length;return de(e,a,s*Math.pow(10,2*n))+Ve("%",n)}(e,t,s);if(-1!==t.indexOf("E"))return Z(t,s);if(36===t.charCodeAt(0))return"$"+ie(e,t.substr(" "==t.charAt(1)?2:1),s);var n,r,l,i,o=Math.abs(s),c=s<0?"-":"";if(t.match(/^00+$/))return c+R(o,t.length);if(t.match(/^[#?]+$/))return"0"===(n=R(s,0))&&(n=""),n.length>t.length?n:ne(t.substr(0,t.length-n.length))+n;if(r=t.match(ee))return function(e,t,s){var a=parseInt(e[4],10),n=Math.round(t*a),r=Math.floor(n/a),l=n-r*a,i=a;return s+(0===r?"":""+r)+" "+(0===l?Ve(" ",e[1].length+1+e[4].length):A(l,e[1].length)+e[2]+"/"+e[3]+T(i,e[4].length))}(r,o,c);if(t.match(/^#+0+$/))return c+R(o,t.length-t.indexOf("0"));if(r=t.match(te))return n=re(s,r[1].length).replace(/^([^\.]+)$/,"$1."+ne(r[1])).replace(/\.$/,"."+ne(r[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+Ve("0",ne(r[1]).length-t.length)}),-1!==t.indexOf("0.")?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+re(o,r[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+J(R(o,0));if(r=t.match(/^#,##0\.([#0]*0)$/))return s<0?"-"+ie(e,t,-s):J(""+(Math.floor(s)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(s,r[1].length)))+"."+T(le(s,r[1].length),r[1].length);if(r=t.match(/^#,#*,#0/))return ie(e,t.replace(/^#,#*,/,""),s);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=E(ie(e,t.replace(/[\\-]/g,""),s)),l=0,E(E(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return l<n.length?n.charAt(l++):"0"===e?"0":""}));if(t.match(ae))return"("+(n=ie(e,"##########",s)).substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(r[4].length,7),i=B(o,Math.pow(10,l)-1,!1),n=""+c," "==(d=de("n",r[1],i[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),n+=d+r[2]+"/"+r[3],(d=P(i[2],l)).length<r[4].length&&(d=ne(r[4].substr(r[4].length-d.length))+d),n+=d;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(r[1].length,r[4].length),7),c+((i=B(o,Math.pow(10,l)-1,!0))[0]||(i[1]?"":"0"))+" "+(i[1]?A(i[1],l)+r[2]+"/"+r[3]+P(i[2],l):Ve(" ",2*l+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return n=R(s,0),t.length<=n.length?n:ne(t.substr(0,t.length-n.length))+n;if(r=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+s.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var u=t.indexOf(".")-l,h=t.length-n.length-u;return ne(t.substr(0,u)+n+t.substr(t.length-h))}if(r=t.match(/^00,000\.([#0]*0)$/))return l=le(s,r[1].length),s<0?"-"+ie(e,t,-s):J(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(s)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?T(0,3-e.length):"")+e})+"."+T(l,r[1].length);switch(t){case"###,##0.00":return ie(e,"#,##0.00",s);case"###,###":case"##,###":case"#,###":var m=J(R(o,0));return"0"!==m?c+m:"";case"###,###.00":return ie(e,"###,##0.00",s).replace(/^0\./,".");case"#,###.00":return ie(e,"#,##0.00",s).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function oe(e,t){var s,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+oe(e,-t);var n=e.indexOf(".");-1===n&&(n=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%n;if(r<0&&(r+=n),!(s=(t/Math.pow(10,r)).toPrecision(a+1+(n+r)%n)).match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);-1===s.indexOf(".")?s=s.charAt(0)+"."+s.substr(1)+"E+"+(l-s.length+r):s+="E+"+(l-r),s=s.replace(/\+-/,"-")}s=s.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,s,a){return t+s+a.substr(0,(n+r)%n)+"."+a.substr(r)+"E"})}else s=t.toExponential(a);return e.match(/E\+00$/)&&s.match(/e[+-]\d$/)&&(s=s.substr(0,s.length-1)+"0"+s.charAt(s.length-1)),e.match(/E\-/)&&s.match(/e\+/)&&(s=s.replace(/e\+/,"e")),s.replace("e","E")}function ce(e,t,s){if(40===e.charCodeAt(0)&&!t.match(se)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return s>=0?ce("n",a,s):"("+ce("n",a,-s)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,s){for(var a=t.length-1;44===t.charCodeAt(a-1);)--a;return de(e,t.substr(0,a),s/Math.pow(10,3*(t.length-a)))}(e,t,s);if(-1!==t.indexOf("%"))return function(e,t,s){var a=t.replace(Q,""),n=t.length-a.length;return de(e,a,s*Math.pow(10,2*n))+Ve("%",n)}(e,t,s);if(-1!==t.indexOf("E"))return oe(t,s);if(36===t.charCodeAt(0))return"$"+ce(e,t.substr(" "==t.charAt(1)?2:1),s);var n,r,l,i,o=Math.abs(s),c=s<0?"-":"";if(t.match(/^00+$/))return c+T(o,t.length);if(t.match(/^[#?]+$/))return n=""+s,0===s&&(n=""),n.length>t.length?n:ne(t.substr(0,t.length-n.length))+n;if(r=t.match(ee))return function(e,t,s){return s+(0===t?"":""+t)+Ve(" ",e[1].length+2+e[4].length)}(r,o,c);if(t.match(/^#+0+$/))return c+T(o,t.length-t.indexOf("0"));if(r=t.match(te))return n=(n=(""+s).replace(/^([^\.]+)$/,"$1."+ne(r[1])).replace(/\.$/,"."+ne(r[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+Ve("0",ne(r[1]).length-t.length)}),-1!==t.indexOf("0.")?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+(""+o).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+J(""+o);if(r=t.match(/^#,##0\.([#0]*0)$/))return s<0?"-"+ce(e,t,-s):J(""+s)+"."+Ve("0",r[1].length);if(r=t.match(/^#,#*,#0/))return ce(e,t.replace(/^#,#*,/,""),s);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=E(ce(e,t.replace(/[\\-]/g,""),s)),l=0,E(E(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return l<n.length?n.charAt(l++):"0"===e?"0":""}));if(t.match(ae))return"("+(n=ce(e,"##########",s)).substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(r[4].length,7),i=B(o,Math.pow(10,l)-1,!1),n=""+c," "==(d=de("n",r[1],i[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),n+=d+r[2]+"/"+r[3],(d=P(i[2],l)).length<r[4].length&&(d=ne(r[4].substr(r[4].length-d.length))+d),n+=d;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(r[1].length,r[4].length),7),c+((i=B(o,Math.pow(10,l)-1,!0))[0]||(i[1]?"":"0"))+" "+(i[1]?A(i[1],l)+r[2]+"/"+r[3]+P(i[2],l):Ve(" ",2*l+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return n=""+s,t.length<=n.length?n:ne(t.substr(0,t.length-n.length))+n;if(r=t.match(/^([#0]+)\.([#0]+)$/)){n=""+s.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var u=t.indexOf(".")-l,h=t.length-n.length-u;return ne(t.substr(0,u)+n+t.substr(t.length-h))}if(r=t.match(/^00,000\.([#0]*0)$/))return s<0?"-"+ce(e,t,-s):J(""+s).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?T(0,3-e.length):"")+e})+"."+T(0,r[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=J(""+o);return"0"!==m?c+m:"";default:if(t.match(/\.[0#?]*$/))return ce(e,t.slice(0,t.lastIndexOf(".")),s)+ne(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function de(e,t,s){return(0|s)===s?ce(e,t,s):ie(e,t,s)}var ue=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function he(e){for(var t=0,s="",a="";t<e.length;)switch(s=e.charAt(t)){case"G":O(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(a=s;"]"!==e.charAt(t++)&&t<e.length;)a+=e.charAt(t);if(a.match(ue))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(s=e.charAt(++t))>-1||"\\"==s&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===s;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var me=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pe(e,t){if(null==t)return!1;var s=parseFloat(t[2]);switch(t[1]){case"=":if(e==s)return!0;break;case">":if(e>s)return!0;break;case"<":if(e<s)return!0;break;case"<>":if(e!=s)return!0;break;case">=":if(e>=s)return!0;break;case"<=":if(e<=s)return!0}return!1}function fe(e,t){var s=function(e){for(var t=[],s=!1,a=0,n=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:s=!s;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(n,a-n),n=a+1}if(t[t.length]=e.substr(n),!0===s)throw new Error("Format |"+e+"| unterminated string ");return t}(e),a=s.length,n=s[a-1].indexOf("@");if(a<4&&n>-1&&--a,s.length>4)throw new Error("cannot find right format for |"+s.join("|")+"|");if("number"!==typeof t)return[4,4===s.length||n>-1?s[s.length-1]:"@"];switch(s.length){case 1:s=n>-1?["General","General","General",s[0]]:[s[0],s[0],s[0],"@"];break;case 2:s=n>-1?[s[0],s[0],s[0],s[1]]:[s[0],s[1],s[0],"@"];break;case 3:s=n>-1?[s[0],s[1],s[0],s[2]]:[s[0],s[1],s[2],"@"]}var r=t>0?s[0]:t<0?s[1]:s[2];if(-1===s[0].indexOf("[")&&-1===s[1].indexOf("["))return[a,r];if(null!=s[0].match(/\[[=<>]/)||null!=s[1].match(/\[[=<>]/)){var l=s[0].match(me),i=s[1].match(me);return pe(t,l)?[a,s[0]]:pe(t,i)?[a,s[1]]:[a,s[null!=l&&null!=i?2:1]]}return[a,r]}function xe(e,t,s){null==s&&(s={});var a="";switch(typeof e){case"string":a="m/d/yy"==e&&s.dateNF?s.dateNF:e;break;case"number":null==(a=14==e&&s.dateNF?s.dateNF:(null!=s.table?s.table:L)[e])&&(a=s.table&&s.table[I[e]]||L[I[e]]),null==a&&(a=z[e]||"General")}if(O(a,0))return K(t,s);t instanceof Date&&(t=q(t,s.date1904));var n=fe(a,t);if(O(n[1]))return K(t,s);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,s,a){for(var n,r,l,i=[],o="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!O(e,c))throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";34!==(l=e.charCodeAt(++c))&&c<e.length;)o+=String.fromCharCode(l);i[i.length]={t:"t",v:o},++c;break;case"\\":var m=e.charAt(++c),p="("===m||")"===m?m:"t";i[i.length]={t:p,v:m},++c;break;case"_":i[i.length]={t:"t",v:" "},c+=2;break;case"@":i[i.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==n&&null==(n=U(t,s,"2"===e.charAt(c+1))))return"";i[i.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==n&&null==(n=U(t,s)))return"";for(o=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)o+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),i[i.length]={t:d,v:o},u=d;break;case"A":case"a":case"\u4e0a":var f={t:d,v:d};if(null==n&&(n=U(t,s)),"A/P"===e.substr(c,3).toUpperCase()?(null!=n&&(f.v=n.H>=12?"P":"A"),f.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=n&&(f.v=n.H>=12?"PM":"AM"),f.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=n&&(f.v=n.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),f.t="T",c+=5,h="h"):(f.t="t",++c),null==n&&"T"===f.t)return"";i[i.length]=f,u=d;break;case"[":for(o=d;"]"!==e.charAt(c++)&&c<e.length;)o+=e.charAt(c);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(ue)){if(null==n&&null==(n=U(t,s)))return"";i[i.length]={t:"Z",v:o.toLowerCase()},u=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",he(e)||(i[i.length]={t:"t",v:o}));break;case".":if(null!=n){for(o=d;++c<e.length&&"0"===(d=e.charAt(c));)o+=d;i[i.length]={t:"s",v:o};break}case"0":case"#":for(o=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)o+=d;i[i.length]={t:"n",v:o};break;case"?":for(o=d;e.charAt(++c)===d;)o+=d;i[i.length]={t:d,v:o},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":i[i.length]={t:1===a?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)o+=e.charAt(c);i[i.length]={t:"D",v:o};break;case" ":i[i.length]={t:d,v:d},++c;break;case"$":i[i.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"t",v:d},++c}var x,v=0,g=0;for(c=i.length-1,u="t";c>=0;--c)switch(i[c].t){case"h":case"H":i[c].t=h,u="h",v<1&&(v=1);break;case"s":(x=i[c].v.match(/\.0+$/))&&(g=Math.max(g,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":u=i[c].t;break;case"m":"s"===u&&(i[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&i[c].v.match(/[Hh]/)&&(v=1),v<2&&i[c].v.match(/[Mm]/)&&(v=2),v<3&&i[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:n.u>=.5&&(n.u=0,++n.S),n.S>=60&&(n.S=0,++n.M),n.M>=60&&(n.M=0,++n.H);break;case 2:n.u>=.5&&(n.u=0,++n.S),n.S>=60&&(n.S=0,++n.M)}var y,j="";for(c=0;c<i.length;++c)switch(i[c].t){case"t":case"T":case" ":case"D":break;case"X":i[c].v="",i[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[c].v=X(i[c].t.charCodeAt(0),i[c].v,n,g),i[c].t="t";break;case"n":case"?":for(y=c+1;null!=i[y]&&("?"===(d=i[y].t)||"D"===d||(" "===d||"t"===d)&&null!=i[y+1]&&("?"===i[y+1].t||"t"===i[y+1].t&&"/"===i[y+1].v)||"("===i[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===i[y].v||" "===i[y].v&&null!=i[y+1]&&"?"==i[y+1].t));)i[c].v+=i[y].v,i[y]={v:"",t:";"},++y;j+=i[c].v,c=y-1;break;case"G":i[c].t="t",i[c].v=K(t,s)}var b,w,N="";if(j.length>0){40==j.charCodeAt(0)?(b=t<0&&45===j.charCodeAt(0)?-t:t,w=de("n",j,b)):(w=de("n",j,b=t<0&&a>1?-t:t),b<0&&i[0]&&"t"==i[0].t&&(w=w.substr(1),i[0].v="-"+i[0].v)),y=w.length-1;var _=i.length;for(c=0;c<i.length;++c)if(null!=i[c]&&"t"!=i[c].t&&i[c].v.indexOf(".")>-1){_=c;break}var k=i.length;if(_===i.length&&-1===w.indexOf("E")){for(c=i.length-1;c>=0;--c)null!=i[c]&&-1!=="n?".indexOf(i[c].t)&&(y>=i[c].v.length-1?(y-=i[c].v.length,i[c].v=w.substr(y+1,i[c].v.length)):y<0?i[c].v="":(i[c].v=w.substr(0,y+1),y=-1),i[c].t="t",k=c);y>=0&&k<i.length&&(i[k].v=w.substr(0,y+1)+i[k].v)}else if(_!==i.length&&-1===w.indexOf("E")){for(y=w.indexOf(".")-1,c=_;c>=0;--c)if(null!=i[c]&&-1!=="n?".indexOf(i[c].t)){for(r=i[c].v.indexOf(".")>-1&&c===_?i[c].v.indexOf(".")-1:i[c].v.length-1,N=i[c].v.substr(r+1);r>=0;--r)y>=0&&("0"===i[c].v.charAt(r)||"#"===i[c].v.charAt(r))&&(N=w.charAt(y--)+N);i[c].v=N,i[c].t="t",k=c}for(y>=0&&k<i.length&&(i[k].v=w.substr(0,y+1)+i[k].v),y=w.indexOf(".")+1,c=_;c<i.length;++c)if(null!=i[c]&&(-1!=="n?(".indexOf(i[c].t)||c===_)){for(r=i[c].v.indexOf(".")>-1&&c===_?i[c].v.indexOf(".")+1:0,N=i[c].v.substr(0,r);r<i[c].v.length;++r)y<w.length&&(N+=w.charAt(y++));i[c].v=N,i[c].t="t",k=c}}}for(c=0;c<i.length;++c)null!=i[c]&&"n?".indexOf(i[c].t)>-1&&(b=a>1&&t<0&&c>0&&"-"===i[c-1].v?-t:t,i[c].v=de(i[c].t,i[c].v,b),i[c].t="t");var S="";for(c=0;c!==i.length;++c)null!=i[c]&&(S+=i[c].v);return S}(n[1],t,s,n[0])}function ve(e,t){if("number"!=typeof t){t=+t||-1;for(var s=0;s<392;++s)if(void 0!=L[s]){if(L[s]==e){t=s;break}}else t<0&&(t=s);t<0&&(t=391)}return L[t]=e,t}function ge(e){for(var t=0;392!=t;++t)void 0!==e[t]&&ve(e[t],t)}function ye(){L=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var je=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var be=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),s=0;256!=s;++s)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=s)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[s]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var s=function(e){var t=0,s=0,a=0,n="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(a=0;256!=a;++a)n[a]=e[a];for(a=0;256!=a;++a)for(s=e[a],t=256+a;t<4096;t+=256)s=n[t]=s>>>8^e[255&s];var r=[];for(a=1;16!=a;++a)r[a-1]="undefined"!==typeof Int32Array?n.subarray(256*a,256*a+256):n.slice(256*a,256*a+256);return r}(t),a=s[0],n=s[1],r=s[2],l=s[3],i=s[4],o=s[5],c=s[6],d=s[7],u=s[8],h=s[9],m=s[10],p=s[11],f=s[12],x=s[13],v=s[14];return e.table=t,e.bstr=function(e,s){for(var a=-1^s,n=0,r=e.length;n<r;)a=a>>>8^t[255&(a^e.charCodeAt(n++))];return~a},e.buf=function(e,s){for(var g=-1^s,y=e.length-15,j=0;j<y;)g=v[e[j++]^255&g]^x[e[j++]^g>>8&255]^f[e[j++]^g>>16&255]^p[e[j++]^g>>>24]^m[e[j++]]^h[e[j++]]^u[e[j++]]^d[e[j++]]^c[e[j++]]^o[e[j++]]^i[e[j++]]^l[e[j++]]^r[e[j++]]^n[e[j++]]^a[e[j++]]^t[e[j++]];for(y+=15;j<y;)g=g>>>8^t[255&(g^e[j++])];return~g},e.str=function(e,s){for(var a=-1^s,n=0,r=e.length,l=0,i=0;n<r;)(l=e.charCodeAt(n++))<128?a=a>>>8^t[255&(a^l)]:l<2048?a=(a=a>>>8^t[255&(a^(192|l>>6&31))])>>>8^t[255&(a^(128|63&l))]:l>=55296&&l<57344?(l=64+(1023&l),i=1023&e.charCodeAt(n++),a=(a=(a=(a=a>>>8^t[255&(a^(240|l>>8&7))])>>>8^t[255&(a^(128|l>>2&63))])>>>8^t[255&(a^(128|i>>6&15|(3&l)<<4))])>>>8^t[255&(a^(128|63&i))]):a=(a=(a=a>>>8^t[255&(a^(224|l>>12&15))])>>>8^t[255&(a^(128|l>>6&63))])>>>8^t[255&(a^(128|63&l))];return~a},e}(),we=function(){var e,t={};function s(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:s(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function a(e){if("/"==e.charAt(e.length-1))return a(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function n(e,t){"string"===typeof t&&(t=new Date(t));var s=t.getHours();s=(s=s<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,s);var a=t.getFullYear()-1980;a=(a=a<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,a)}function r(e){fs(e,0);for(var t={},s=0;e.l<=e.length-4;){var a=e.read_shift(2),n=e.read_shift(2),r=e.l+n,l={};if(21589===a)1&(s=e.read_shift(1))&&(l.mtime=e.read_shift(4)),n>5&&(2&s&&(l.atime=e.read_shift(4)),4&s&&(l.ctime=e.read_shift(4))),l.mtime&&(l.mt=new Date(1e3*l.mtime));e.l=r,t[a]=l}return t}function l(){return e||(e={})}function i(e,t){if(80==e[0]&&75==e[1])return me(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=D(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var s=t&&t.root||"",a=(g&&Buffer.isBuffer(e)?e.toString("binary"):D(e)).split("\r\n"),n=0,r="";for(n=0;n<a.length;++n)if(r=a[n],/^Content-Location:/i.test(r)&&(r=r.slice(r.indexOf("file")),s||(s=r.slice(0,r.lastIndexOf("/")+1)),r.slice(0,s.length)!=s))for(;s.length>0&&(s=(s=s.slice(0,s.length-1)).slice(0,s.lastIndexOf("/")+1),r.slice(0,s.length)!=s););var l=(a[1]||"").match(/boundary="(.*?)"/);if(!l)throw new Error("MAD cannot find boundary");var i="--"+(l[1]||""),o=[],c=[],d={FileIndex:o,FullPaths:c};h(d);var u,m=0;for(n=0;n<a.length;++n){var p=a[n];p!==i&&p!==i+"--"||(m++&&ye(d,a.slice(u,n),s),u=n)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var s,a,n,r,l,i,m=512,p=[],f=e.slice(0,512);fs(f,0);var x=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(E,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(f);switch(s=x[0]){case 3:m=512;break;case 4:m=4096;break;case 0:if(0==x[1])return me(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+s)}512!==m&&fs(f=e.slice(0,m),28);var v=e.slice(0,m);!function(e,t){var s=9;switch(e.l+=2,s=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+s);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+s);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+s)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(f,s);var y=f.read_shift(4,"i");if(3===s&&0!==y)throw new Error("# Directory Sectors: Expected 0 saw "+y);f.l+=4,r=f.read_shift(4,"i"),f.l+=4,f.chk("00100000","Mini Stream Cutoff Size: "),l=f.read_shift(4,"i"),a=f.read_shift(4,"i"),i=f.read_shift(4,"i"),n=f.read_shift(4,"i");for(var j=-1,b=0;b<109&&!((j=f.read_shift(4,"i"))<0);++b)p[b]=j;var w=function(e,t){for(var s=Math.ceil(e.length/t)-1,a=[],n=1;n<s;++n)a[n-1]=e.slice(n*t,(n+1)*t);return a[s-1]=e.slice(s*t),a}(e,m);c(i,n,w,m,p);var N=function(e,t,s,a){var n=e.length,r=[],l=[],i=[],o=[],c=a-1,d=0,u=0,h=0,m=0;for(d=0;d<n;++d)if(i=[],(h=d+t)>=n&&(h-=n),!l[h]){o=[];var p=[];for(u=h;u>=0;){p[u]=!0,l[u]=!0,i[i.length]=u,o.push(e[u]);var f=s[Math.floor(4*u/a)];if(a<4+(m=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+a);if(!e[f])break;if(p[u=cs(e[f],m)])break}r[h]={nodes:i,data:It([o])}}return r}(w,r,p,m);N[r].name="!Directory",a>0&&l!==_&&(N[l].name="!MiniFAT"),N[p[0]].name="!FAT",N.fat_addrs=p,N.ssz=m;var k=[],S=[],C=[];!function(e,t,s,a,n,r,l,i){for(var c,h=0,m=a.length?2:0,p=t[e].data,f=0,x=0;f<p.length;f+=128){var v=p.slice(f,f+128);fs(v,64),x=v.read_shift(2),c=Bt(v,0,x-m),a.push(c);var g={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(g.ct=u(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(g.mt=u(v,v.l-8)),g.start=v.read_shift(4,"i"),g.size=v.read_shift(4,"i"),g.size<0&&g.start<0&&(g.size=g.type=0,g.start=_,g.name=""),5===g.type?(h=g.start,n>0&&h!==_&&(t[h].name="!StreamData")):g.size>=4096?(g.storage="fat",void 0===t[g.start]&&(t[g.start]=d(s,g.start,t.fat_addrs,t.ssz)),t[g.start].name=g.name,g.content=t[g.start].data.slice(0,g.size)):(g.storage="minifat",g.size<0?g.size=0:h!==_&&g.start!==_&&t[h]&&(g.content=o(g,t[h].data,(t[i]||{}).data))),g.content&&fs(g.content,0),r[c]=g,l.push(g)}}(r,N,w,k,a,{},S,l),function(e,t,s){for(var a=0,n=0,r=0,l=0,i=0,o=s.length,c=[],d=[];a<o;++a)c[a]=d[a]=a,t[a]=s[a];for(;i<d.length;++i)n=e[a=d[i]].L,r=e[a].R,l=e[a].C,c[a]===a&&(-1!==n&&c[n]!==n&&(c[a]=c[n]),-1!==r&&c[r]!==r&&(c[a]=c[r])),-1!==l&&(c[l]=a),-1!==n&&a!=c[a]&&(c[n]=c[a],d.lastIndexOf(n)<i&&d.push(n)),-1!==r&&a!=c[a]&&(c[r]=c[a],d.lastIndexOf(r)<i&&d.push(r));for(a=1;a<o;++a)c[a]===a&&(-1!==r&&c[r]!==r?c[a]=c[r]:-1!==n&&c[n]!==n&&(c[a]=c[n]));for(a=1;a<o;++a)if(0!==e[a].type){if((i=a)!=c[i])do{i=c[i],t[a]=t[i]+"/"+t[a]}while(0!==i&&-1!==c[i]&&i!=c[i]);c[a]=-1}for(t[0]+="/",a=1;a<o;++a)2!==e[a].type&&(t[a]+="/")}(S,C,k),k.shift();var T={FileIndex:S,FullPaths:C};return t&&t.raw&&(T.raw={header:v,sectors:w}),T}function o(e,t,s){for(var a=e.start,n=e.size,r=[],l=a;s&&n>0&&l>=0;)r.push(t.slice(l*N,l*N+N)),n-=N,l=cs(s,4*l);return 0===r.length?vs(0):k(r).slice(0,e.size)}function c(e,t,s,a,n){var r=_;if(e===_){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var l=s[e],i=(a>>>2)-1;if(!l)return;for(var o=0;o<i&&(r=cs(l,4*o))!==_;++o)n.push(r);c(cs(l,a-4),t-1,s,a,n)}}function d(e,t,s,a,n){var r=[],l=[];n||(n=[]);var i=a-1,o=0,c=0;for(o=t;o>=0;){n[o]=!0,r[r.length]=o,l.push(e[o]);var d=s[Math.floor(4*o/a)];if(a<4+(c=4*o&i))throw new Error("FAT boundary crossed: "+o+" 4 "+a);if(!e[d])break;o=cs(e[d],c)}return{nodes:r,data:It([l])}}function u(e,t){return new Date(1e3*(os(e,t+4)/1e7*Math.pow(2,32)+os(e,t)/1e7-11644473600))}function h(e,t){var s=t||{},a=s.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=a+"/",e.FileIndex[0]={name:a,type:5}),s.CLSID&&(e.FileIndex[0].clsid=s.CLSID),function(e){var t="\x01Sh33tJ5";if(we.find(e,"/"+t))return;var s=vs(4);s[0]=55,s[1]=s[3]=50,s[2]=54,e.FileIndex.push({name:t,type:2,content:s,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),m(e)}(e)}function m(e,t){h(e);for(var n=!1,r=!1,l=e.FullPaths.length-1;l>=0;--l){var i=e.FileIndex[l];switch(i.type){case 0:r?n=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:r=!0,isNaN(i.R*i.L*i.C)&&(n=!0),i.R>-1&&i.L>-1&&i.R==i.L&&(n=!0);break;default:n=!0}}if(n||t){var o=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(l=0;l<e.FullPaths.length;++l)d[e.FullPaths[l]]=!0,0!==e.FileIndex[l].type&&u.push([e.FullPaths[l],e.FileIndex[l]]);for(l=0;l<u.length;++l){var m=s(u[l][0]);(r=d[m])||(u.push([m,{name:a(m).replace("/",""),type:1,clsid:A,ct:o,mt:o,content:null}]),d[m]=!0)}for(u.sort(function(e,t){return function(e,t){for(var s=e.split("/"),a=t.split("/"),n=0,r=0,l=Math.min(s.length,a.length);n<l;++n){if(r=s[n].length-a[n].length)return r;if(s[n]!=a[n])return s[n]<a[n]?-1:1}return s.length-a.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],l=0;l<u.length;++l)e.FullPaths[l]=u[l][0],e.FileIndex[l]=u[l][1];for(l=0;l<u.length;++l){var p=e.FileIndex[l],f=e.FullPaths[l];if(p.name=a(f).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||A,0===l)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==f.slice(-1)){for(c=l+1;c<u.length&&s(e.FullPaths[c])!=f;++c);for(p.C=c>=u.length?-1:c,c=l+1;c<u.length&&s(e.FullPaths[c])!=s(f);++c);p.R=c>=u.length?-1:c,p.type=1}else s(e.FullPaths[l+1]||"")==s(f)&&(p.R=l+1),p.type=2}}}function p(e,t){var s=t||{};if("mad"==s.fileType)return function(e,t){for(var s=t||{},a=s.boundary||"SheetJS",n=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(a="------="+a).slice(2)+'"',"","",""],r=e.FullPaths[0],l=r,i=e.FileIndex[0],o=1;o<e.FullPaths.length;++o)if(l=e.FullPaths[o].slice(r.length),(i=e.FileIndex[o]).size&&i.content&&"\x01Sh33tJ5"!=l){l=l.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=i.content,d=g&&Buffer.isBuffer(c)?c.toString("binary"):D(c),u=0,h=Math.min(1024,d.length),m=0,p=0;p<=h;++p)(m=d.charCodeAt(p))>=32&&m<128&&++u;var f=u>=4*h/5;n.push(a),n.push("Content-Location: "+(s.root||"file:///C:/SheetJS/")+l),n.push("Content-Transfer-Encoding: "+(f?"quoted-printable":"base64")),n.push("Content-Type: "+xe(i,l)),n.push(""),n.push(f?ge(d):ve(d))}return n.push(a+"--\r\n"),n.join("\r\n")}(e,s);if(m(e),"zip"===s.fileType)return function(e,t){var s=t||{},a=[],r=[],l=vs(1),i=s.compression?8:0,o=0;0;var c=0,d=0,u=0,h=0,m=e.FullPaths[0],p=m,f=e.FileIndex[0],x=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(m.length),(f=e.FileIndex[c]).size&&f.content&&"\x01Sh33tJ5"!=p){var g=u,y=vs(p.length);for(d=0;d<p.length;++d)y.write_shift(1,127&p.charCodeAt(d));y=y.slice(0,y.l),x[h]=be.buf(f.content,0);var j=f.content;8==i&&(j=R(j)),(l=vs(30)).write_shift(4,67324752),l.write_shift(2,20),l.write_shift(2,o),l.write_shift(2,i),f.mt?n(l,f.mt):l.write_shift(4,0),l.write_shift(-4,8&o?0:x[h]),l.write_shift(4,8&o?0:j.length),l.write_shift(4,8&o?0:f.content.length),l.write_shift(2,y.length),l.write_shift(2,0),u+=l.length,a.push(l),u+=y.length,a.push(y),u+=j.length,a.push(j),8&o&&((l=vs(12)).write_shift(-4,x[h]),l.write_shift(4,j.length),l.write_shift(4,f.content.length),u+=l.l,a.push(l)),(l=vs(46)).write_shift(4,33639248),l.write_shift(2,0),l.write_shift(2,20),l.write_shift(2,o),l.write_shift(2,i),l.write_shift(4,0),l.write_shift(-4,x[h]),l.write_shift(4,j.length),l.write_shift(4,f.content.length),l.write_shift(2,y.length),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(4,0),l.write_shift(4,g),v+=l.l,r.push(l),v+=y.length,r.push(y),++h}return l=vs(22),l.write_shift(4,101010256),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,h),l.write_shift(2,h),l.write_shift(4,v),l.write_shift(4,u),l.write_shift(2,0),k([k(a),k(r),l])}(e,s);var a=function(e){for(var t=0,s=0,a=0;a<e.FileIndex.length;++a){var n=e.FileIndex[a];if(n.content){var r=n.content.length;r>0&&(r<4096?t+=r+63>>6:s+=r+511>>9)}}for(var l=e.FullPaths.length+3>>2,i=t+127>>7,o=(t+7>>3)+s+l+i,c=o+127>>7,d=c<=109?0:Math.ceil((c-109)/127);o+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,i,l,s,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),r=vs(a[7]<<9),l=0,i=0;for(l=0;l<8;++l)r.write_shift(1,T[l]);for(l=0;l<8;++l)r.write_shift(2,0);for(r.write_shift(2,62),r.write_shift(2,3),r.write_shift(2,65534),r.write_shift(2,9),r.write_shift(2,6),l=0;l<3;++l)r.write_shift(2,0);for(r.write_shift(4,0),r.write_shift(4,a[2]),r.write_shift(4,a[0]+a[1]+a[2]+a[3]-1),r.write_shift(4,0),r.write_shift(4,4096),r.write_shift(4,a[3]?a[0]+a[1]+a[2]-1:_),r.write_shift(4,a[3]),r.write_shift(-4,a[1]?a[0]-1:_),r.write_shift(4,a[1]),l=0;l<109;++l)r.write_shift(-4,l<a[2]?a[1]+l:-1);if(a[1])for(i=0;i<a[1];++i){for(;l<236+127*i;++l)r.write_shift(-4,l<a[2]?a[1]+l:-1);r.write_shift(-4,i===a[1]-1?_:i+1)}var o=function(e){for(i+=e;l<i-1;++l)r.write_shift(-4,l+1);e&&(++l,r.write_shift(-4,_))};for(i=l=0,i+=a[1];l<i;++l)r.write_shift(-4,P.DIFSECT);for(i+=a[2];l<i;++l)r.write_shift(-4,P.FATSECT);o(a[3]),o(a[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=i,o(d+511>>9)));for(o(a[6]+7>>3);511&r.l;)r.write_shift(-4,P.ENDOFCHAIN);for(i=l=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=i,o(d+63>>6)));for(;511&r.l;)r.write_shift(-4,P.ENDOFCHAIN);for(l=0;l<a[4]<<2;++l){var h=e.FullPaths[l];if(h&&0!==h.length){u=e.FileIndex[l],0===l&&(u.start=u.size?u.start-1:_);var p=0===l&&s.root||u.name;if(d=2*(p.length+1),r.write_shift(64,p,"utf16le"),r.write_shift(2,d),r.write_shift(1,u.type),r.write_shift(1,u.color),r.write_shift(-4,u.L),r.write_shift(-4,u.R),r.write_shift(-4,u.C),u.clsid)r.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)r.write_shift(4,0);r.write_shift(4,u.state||0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,u.start),r.write_shift(4,u.size),r.write_shift(4,0)}else{for(c=0;c<17;++c)r.write_shift(4,0);for(c=0;c<3;++c)r.write_shift(4,-1);for(c=0;c<12;++c)r.write_shift(4,0)}}for(l=1;l<e.FileIndex.length;++l)if((u=e.FileIndex[l]).size>=4096)if(r.l=u.start+1<<9,g&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;511&c;++c)r.write_shift(1,0)}for(l=1;l<e.FileIndex.length;++l)if((u=e.FileIndex[l]).size>0&&u.size<4096)if(g&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;63&c;++c)r.write_shift(1,0)}if(g)r.l=r.length;else for(;r.l<r.length;)r.write_shift(1,0);return r}t.version="1.2.1";var f,N=64,_=-2,E="d0cf11e0a1b11ae1",T=[208,207,17,224,161,177,26,225],A="00000000000000000000000000000000",P={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:_,FREESECT:-1,HEADER_SIGNATURE:E,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:A,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function D(e){for(var t=new Array(e.length),s=0;s<e.length;++s)t[s]=String.fromCharCode(e[s]);return t.join("")}function R(e){return f?f.deflateRawSync(e):ne(e)}var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function L(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var I="undefined"!==typeof Uint8Array,z=I?new Uint8Array(256):[],B=0;B<256;++B)z[B]=L(B);function U(e,t){var s=z[255&e];return t<=8?s>>>8-t:(s=s<<8|z[e>>8&255],t<=16?s>>>16-t:(s=s<<8|z[e>>16&255])>>>24-t)}function V(e,t){var s=7&t,a=t>>>3;return(e[a]|(s<=6?0:e[a+1]<<8))>>>s&3}function H(e,t){var s=7&t,a=t>>>3;return(e[a]|(s<=5?0:e[a+1]<<8))>>>s&7}function W(e,t){var s=7&t,a=t>>>3;return(e[a]|(s<=3?0:e[a+1]<<8))>>>s&31}function q(e,t){var s=7&t,a=t>>>3;return(e[a]|(s<=1?0:e[a+1]<<8))>>>s&127}function Y(e,t,s){var a=7&t,n=t>>>3,r=(1<<s)-1,l=e[n]>>>a;return s<8-a?l&r:(l|=e[n+1]<<8-a,s<16-a?l&r:(l|=e[n+2]<<16-a,s<24-a?l&r:(l|=e[n+3]<<24-a)&r))}function G(e,t,s){var a=7&t,n=t>>>3;return a<=5?e[n]|=(7&s)<<a:(e[n]|=s<<a&255,e[n+1]=(7&s)>>8-a),t+3}function K(e,t,s){return s=(1&s)<<(7&t),e[t>>>3]|=s,t+1}function $(e,t,s){var a=t>>>3;return s<<=7&t,e[a]|=255&s,s>>>=8,e[a+1]=s,t+8}function X(e,t,s){var a=t>>>3;return s<<=7&t,e[a]|=255&s,s>>>=8,e[a+1]=255&s,e[a+2]=s>>>8,t+16}function J(e,t){var s=e.length,a=2*s>t?2*s:t+5,n=0;if(s>=t)return e;if(g){var r=b(a);if(e.copy)e.copy(r);else for(;n<e.length;++n)r[n]=e[n];return r}if(I){var l=new Uint8Array(a);if(l.set)l.set(e);else for(;n<s;++n)l[n]=e[n];return l}return e.length=a,e}function Q(e){for(var t=new Array(e),s=0;s<e;++s)t[s]=0;return t}function Z(e,t,s){var a=1,n=0,r=0,l=0,i=0,o=e.length,c=I?new Uint16Array(32):Q(32);for(r=0;r<32;++r)c[r]=0;for(r=o;r<s;++r)e[r]=0;o=e.length;var d=I?new Uint16Array(o):Q(o);for(r=0;r<o;++r)c[n=e[r]]++,a<n&&(a=n),d[r]=0;for(c[0]=0,r=1;r<=a;++r)c[r+16]=i=i+c[r-1]<<1;for(r=0;r<o;++r)0!=(i=e[r])&&(d[r]=c[i+16]++);var u=0;for(r=0;r<o;++r)if(0!=(u=e[r]))for(i=U(d[r],a)>>a-u,l=(1<<a+4-u)-1;l>=0;--l)t[i|l<<u]=15&u|r<<4;return a}var ee=I?new Uint16Array(512):Q(512),te=I?new Uint16Array(32):Q(32);if(!I){for(var se=0;se<512;++se)ee[se]=0;for(se=0;se<32;++se)te[se]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);Z(e,te,32);var s=[];for(t=0;t<=143;t++)s.push(8);for(;t<=255;t++)s.push(9);for(;t<=279;t++)s.push(7);for(;t<=287;t++)s.push(8);Z(s,ee,288)}();var ae=function(){for(var e=I?new Uint8Array(32768):[],t=0,s=0;t<F.length-1;++t)for(;s<F[t+1];++s)e[s]=t;for(;s<32768;++s)e[s]=29;var a=I?new Uint8Array(259):[];for(t=0,s=0;t<M.length-1;++t)for(;s<M[t+1];++s)a[s]=t;return function(t,s){return t.length<8?function(e,t){for(var s=0;s<e.length;){var a=Math.min(65535,e.length-s),n=s+a==e.length;for(t.write_shift(1,+n),t.write_shift(2,a),t.write_shift(2,65535&~a);a-- >0;)t[t.l++]=e[s++]}return t.l}(t,s):function(t,s){for(var n=0,r=0,l=I?new Uint16Array(32768):[];r<t.length;){var i=Math.min(65535,t.length-r);if(i<10){for(7&(n=G(s,n,+!(r+i!=t.length)))&&(n+=8-(7&n)),s.l=n/8|0,s.write_shift(2,i),s.write_shift(2,65535&~i);i-- >0;)s[s.l++]=t[r++];n=8*s.l}else{n=G(s,n,+!(r+i!=t.length)+2);for(var o=0;i-- >0;){var c=t[r],d=-1,u=0;if((d=l[o=32767&(o<<5^c)])&&((d|=-32768&r)>r&&(d-=32768),d<r))for(;t[d+u]==t[r+u]&&u<250;)++u;if(u>2){(c=a[u])<=22?n=$(s,n,z[c+1]>>1)-1:($(s,n,3),$(s,n+=5,z[c-23]>>5),n+=3);var h=c<8?0:c-4>>2;h>0&&(X(s,n,u-M[c]),n+=h),c=e[r-d],n=$(s,n,z[c]>>3),n-=3;var m=c<4?0:c-2>>1;m>0&&(X(s,n,r-d-F[c]),n+=m);for(var p=0;p<u;++p)l[o]=32767&r,o=32767&(o<<5^t[r]),++r;i-=u-1}else c<=143?c+=48:n=K(s,n,1),n=$(s,n,z[c]),l[o]=32767&r,++r}n=$(s,n,0)-1}}return s.l=(n+7)/8|0,s.l}(t,s)}}();function ne(e){var t=vs(50+Math.floor(1.1*e.length)),s=ae(e,t);return t.slice(0,s)}var re=I?new Uint16Array(32768):Q(32768),le=I?new Uint16Array(32768):Q(32768),ie=I?new Uint16Array(128):Q(128),oe=1,ce=1;function de(e,t){var s=W(e,t)+257,a=W(e,t+=5)+1,n=function(e,t){var s=7&t,a=t>>>3;return(e[a]|(s<=4?0:e[a+1]<<8))>>>s&15}(e,t+=5)+4;t+=4;for(var r=0,l=I?new Uint8Array(19):Q(19),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=1,c=I?new Uint8Array(8):Q(8),d=I?new Uint8Array(8):Q(8),u=l.length,h=0;h<n;++h)l[O[h]]=r=H(e,t),o<r&&(o=r),c[r]++,t+=3;var m=0;for(c[0]=0,h=1;h<=o;++h)d[h]=m=m+c[h-1]<<1;for(h=0;h<u;++h)0!=(m=l[h])&&(i[h]=d[m]++);var p=0;for(h=0;h<u;++h)if(0!=(p=l[h])){m=z[i[h]]>>8-p;for(var f=(1<<7-p)-1;f>=0;--f)ie[m|f<<p]=7&p|h<<3}var x=[];for(o=1;x.length<s+a;)switch(t+=7&(m=ie[q(e,t)]),m>>>=3){case 16:for(r=3+V(e,t),t+=2,m=x[x.length-1];r-- >0;)x.push(m);break;case 17:for(r=3+H(e,t),t+=3;r-- >0;)x.push(0);break;case 18:for(r=11+q(e,t),t+=7;r-- >0;)x.push(0);break;default:x.push(m),o<m&&(o=m)}var v=x.slice(0,s),g=x.slice(s);for(h=s;h<286;++h)v[h]=0;for(h=a;h<30;++h)g[h]=0;return oe=Z(v,re,286),ce=Z(g,le,30),t}function ue(e,t){var s=function(e,t){if(3==e[0]&&!(3&e[1]))return[j(t),2];for(var s=0,a=0,n=b(t||1<<18),r=0,l=n.length>>>0,i=0,o=0;0==(1&a);)if(a=H(e,s),s+=3,a>>>1!=0)for(a>>1==1?(i=9,o=5):(s=de(e,s),i=oe,o=ce);;){!t&&l<r+32767&&(l=(n=J(n,r+32767)).length);var c=Y(e,s,i),d=a>>>1==1?ee[c]:re[c];if(s+=15&d,0===((d>>>=4)>>>8&255))n[r++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=r+M[d];u>0&&(h+=Y(e,s,u),s+=u),c=Y(e,s,o),s+=15&(d=a>>>1==1?te[c]:le[c]);var m=(d>>>=4)<4?0:d-2>>1,p=F[d];for(m>0&&(p+=Y(e,s,m),s+=m),!t&&l<h&&(l=(n=J(n,h+100)).length);r<h;)n[r]=n[r-p],++r}}else{7&s&&(s+=8-(7&s));var f=e[s>>>3]|e[(s>>>3)+1]<<8;if(s+=32,f>0)for(!t&&l<r+f&&(l=(n=J(n,r+f)).length);f-- >0;)n[r++]=e[s>>>3],s+=8}return t?[n,s+7>>>3]:[n.slice(0,r),s+7>>>3]}(e.slice(e.l||0),t);return e.l+=s[1],s[0]}function he(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function me(e,t){var s=e;fs(s,0);var a={FileIndex:[],FullPaths:[]};h(a,{root:t.root});for(var n=s.length-4;(80!=s[n]||75!=s[n+1]||5!=s[n+2]||6!=s[n+3])&&n>=0;)--n;s.l=n+4,s.l+=4;var l=s.read_shift(2);s.l+=6;var i=s.read_shift(4);for(s.l=i,n=0;n<l;++n){s.l+=20;var o=s.read_shift(4),c=s.read_shift(4),d=s.read_shift(2),u=s.read_shift(2),m=s.read_shift(2);s.l+=8;var p=s.read_shift(4),f=r(s.slice(s.l+d,s.l+d+u));s.l+=d+u+m;var x=s.l;s.l=p+4,pe(s,o,c,a,f),s.l=x}return a}function pe(e,t,s,a,n){e.l+=2;var l=e.read_shift(2),i=e.read_shift(2),o=function(e){var t=65535&e.read_shift(2),s=65535&e.read_shift(2),a=new Date,n=31&s,r=15&(s>>>=5);s>>>=4,a.setMilliseconds(0),a.setFullYear(s+1980),a.setMonth(r-1),a.setDate(n);var l=31&t,i=63&(t>>>=5);return t>>>=6,a.setHours(t),a.setMinutes(i),a.setSeconds(l<<1),a}(e);if(8257&l)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),m="",p=0;p<u;++p)m+=String.fromCharCode(e[e.l++]);if(h){var x=r(e.slice(e.l,e.l+h));(x[21589]||{}).mt&&(o=x[21589].mt),((n||{})[21589]||{}).mt&&(o=n[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(i){case 8:v=function(e,t){if(!f)return ue(e,t);var s=new(0,f.InflateRaw),a=s._processChunk(e.slice(e.l),s._finishFlushFlag);return e.l+=s.bytesRead,a}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+i)}var g=!1;8&l&&(134695760==e.read_shift(4)&&(e.read_shift(4),g=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&he(g,"Bad compressed size: "+t+" != "+c),d!=s&&he(g,"Bad uncompressed size: "+s+" != "+d),je(a,m,v,{unsafe:!0,mt:o})}var fe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function xe(e,t){if(e.ctype)return e.ctype;var s=e.name||"",a=s.match(/\.([^\.]+)$/);return a&&fe[a[1]]||t&&(a=(s=t).match(/[\.\\]([^\.\\])+$/))&&fe[a[1]]?fe[a[1]]:"application/octet-stream"}function ve(e){for(var t=x(e),s=[],a=0;a<t.length;a+=76)s.push(t.slice(a,a+76));return s.join("\r\n")+"\r\n"}function ge(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var s=[],a=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),n=0;n<a.length;++n){var r=a[n];if(0!=r.length)for(var l=0;l<r.length;){var i=76,o=r.slice(l,l+i);"="==o.charAt(i-1)?i--:"="==o.charAt(i-2)?i-=2:"="==o.charAt(i-3)&&(i-=3),o=r.slice(l,l+i),(l+=i)<r.length&&(o+="="),s.push(o)}else s.push("")}return s.join("\r\n")}function ye(e,t,s){for(var a,n="",r="",l="",i=0;i<10;++i){var o=t[i];if(!o||o.match(/^\s*$/))break;var c=o.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":n=c[2].trim();break;case"content-type":l=c[2].trim();break;case"content-transfer-encoding":r=c[2].trim()}}switch(++i,r.toLowerCase()){case"base64":a=w(v(t.slice(i).join("")));break;case"quoted-printable":a=function(e){for(var t=[],s=0;s<e.length;++s){for(var a=e[s];s<=e.length&&"="==a.charAt(a.length-1);)a=a.slice(0,a.length-1)+e[++s];t.push(a)}for(var n=0;n<t.length;++n)t[n]=t[n].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return w(t.join("\r\n"))}(t.slice(i));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+r)}var d=je(e,n.slice(s.length),a,{unsafe:!0});l&&(d.ctype=l)}function je(e,t,s,n){var r=n&&n.unsafe;r||h(e);var l=!r&&we.find(e,t);if(!l){var i=e.FullPaths[0];t.slice(0,i.length)==i?i=t:("/"!=i.slice(-1)&&(i+="/"),i=(i+t).replace("//","/")),l={name:a(t),type:2},e.FileIndex.push(l),e.FullPaths.push(i),r||we.utils.cfb_gc(e)}return l.content=s,l.size=s?s.length:0,n&&(n.CLSID&&(l.clsid=n.CLSID),n.mt&&(l.mt=n.mt),n.ct&&(l.ct=n.ct)),l}return t.find=function(e,t){var s=e.FullPaths.map(function(e){return e.toUpperCase()}),a=s.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),n=!1;47===t.charCodeAt(0)?(n=!0,t=s[0].slice(0,-1)+t):n=-1!==t.indexOf("/");var r=t.toUpperCase(),l=!0===n?s.indexOf(r):a.indexOf(r);if(-1!==l)return e.FileIndex[l];var i=!r.match(C);for(r=r.replace(S,""),i&&(r=r.replace(C,"!")),l=0;l<s.length;++l){if((i?s[l].replace(C,"!"):s[l]).replace(S,"")==r)return e.FileIndex[l];if((i?a[l].replace(C,"!"):a[l]).replace(S,"")==r)return e.FileIndex[l]}return null},t.read=function(t,s){var a=s&&s.type;switch(a||g&&Buffer.isBuffer(t)&&(a="buffer"),a||"base64"){case"file":return function(t,s){return l(),i(e.readFileSync(t),s)}(t,s);case"base64":return i(w(v(t)),s);case"binary":return i(w(t),s)}return i(t,s)},t.parse=i,t.write=function(t,s){var a=p(t,s);switch(s&&s.type||"buffer"){case"file":return l(),e.writeFileSync(s.filename,a),a;case"binary":return"string"==typeof a?a:D(a);case"base64":return x("string"==typeof a?a:D(a));case"buffer":if(g)return Buffer.isBuffer(a)?a:y(a);case"array":return"string"==typeof a?w(a):a}return a},t.writeFile=function(t,s,a){l();var n=p(t,a);e.writeFileSync(s,n)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:je,cfb_del:function(e,t){h(e);var s=we.find(e,t);if(s)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==s)return e.FileIndex.splice(a,1),e.FullPaths.splice(a,1),!0;return!1},cfb_mov:function(e,t,s){h(e);var n=we.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex[r].name=a(s),e.FullPaths[r]=s,!0;return!1},cfb_gc:function(e){m(e,!0)},ReadShift:us,CheckField:ps,prep_blob:fs,bconcat:k,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");f=e}catch(s){console.error("cannot use native zlib: "+(s.message||s))}},_deflateRaw:ne,_inflateRaw:ue,consts:P},t}();let Ne;function _e(e){return"string"===typeof e?N(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function ke(e,t,s){if("undefined"!==typeof Ne&&Ne.writeFileSync)return s?Ne.writeFileSync(e,t,s):Ne.writeFileSync(e,t);if("undefined"!==typeof Deno){if(s&&"string"==typeof t)switch(s){case"utf8":t=new TextEncoder(s).encode(t);break;case"binary":t=N(t);break;default:throw new Error("Unsupported encoding "+s)}return Deno.writeFileSync(e,t)}var a="utf8"==s?ct(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(a,e);if("undefined"!==typeof Blob){var n=new Blob([_e(a)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if("undefined"!==typeof saveAs)return saveAs(n,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var r=URL.createObjectURL(n);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(r)},6e4),chrome.downloads.download({url:r,filename:e,saveAs:!0});var l=document.createElement("a");if(null!=l.download)return l.download=e,l.href=r,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(r)},6e4),r}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var i=File(e);return i.open("w"),i.encoding="binary",Array.isArray(t)&&(t=_(t)),i.write(t),i.close(),t}catch(o){if(!o.message||!o.message.match(/onstruct/))throw o}throw new Error("cannot save file "+e)}function Se(e){for(var t=Object.keys(e),s=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&s.push(t[a]);return s}function Ce(e,t){for(var s=[],a=Se(e),n=0;n!==a.length;++n)null==s[e[a[n]][t]]&&(s[e[a[n]][t]]=a[n]);return s}function Ee(e){for(var t=[],s=Se(e),a=0;a!==s.length;++a)t[e[s[a]]]=s[a];return t}function Te(e){for(var t=[],s=Se(e),a=0;a!==s.length;++a)t[e[s[a]]]=parseInt(s[a],10);return t}var Ae=new Date(1899,11,30,0,0,0);function Pe(e,t){var s=e.getTime();return t&&(s-=1263168e5),(s-(Ae.getTime()+6e4*(e.getTimezoneOffset()-Ae.getTimezoneOffset())))/864e5}var De=new Date,Re=Ae.getTime()+6e4*(De.getTimezoneOffset()-Ae.getTimezoneOffset()),Oe=De.getTimezoneOffset();function Me(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Re),t.getTimezoneOffset()!==Oe&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Oe)),t}var Fe=new Date("2017-02-19T19:06:09.000Z"),Le=isNaN(Fe.getFullYear())?new Date("2/19/17"):Fe,Ie=2017==Le.getFullYear();function ze(e,t){var s=new Date(e);if(Ie)return t>0?s.setTime(s.getTime()+60*s.getTimezoneOffset()*1e3):t<0&&s.setTime(s.getTime()-60*s.getTimezoneOffset()*1e3),s;if(e instanceof Date)return e;if(1917==Le.getFullYear()&&!isNaN(s.getFullYear())){var a=s.getFullYear();return e.indexOf(""+a)>-1||s.setFullYear(s.getFullYear()+100),s}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],r=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(r=new Date(r.getTime()-60*r.getTimezoneOffset()*1e3)),r}function Be(e,t){if(g&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return ct(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return ct(u(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return ct(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return ct(new TextDecoder("utf-16be").decode(e.slice(2)))}var s={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return s[e]||e})}catch(r){}for(var a=[],n=0;n!=e.length;++n)a.push(String.fromCharCode(e[n]));return a.join("")}function Ue(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=Ue(e[s]));return t}function Ve(e,t){for(var s="";s.length<t;)s+=e;return s}function He(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var s=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return s*=100,""});return isNaN(t=Number(a))?(a=a.replace(/[(](.*)[)]/,function(e,t){return s=-s,t}),isNaN(t=Number(a))?t:t/s):t/s}var We=["january","february","march","april","may","june","july","august","september","october","november","december"];function qe(e){var t=new Date(e),s=new Date(NaN),a=t.getYear(),n=t.getMonth(),r=t.getDate();if(isNaN(r))return s;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==We.indexOf(l))return s}else if(l.match(/[a-z]/))return s;return a<0||a>8099?s:(n>0||r>1)&&101!=a?t:e.match(/[^-0-9:,\/\\]/)?s:t}function Ye(e,t,s){if(e.FullPaths){var a;if("string"==typeof s)return a=g?y(s):function(e){for(var t=[],s=0,a=e.length+250,n=j(e.length+255),r=0;r<e.length;++r){var l=e.charCodeAt(r);if(l<128)n[s++]=l;else if(l<2048)n[s++]=192|l>>6&31,n[s++]=128|63&l;else if(l>=55296&&l<57344){l=64+(1023&l);var i=1023&e.charCodeAt(++r);n[s++]=240|l>>8&7,n[s++]=128|l>>2&63,n[s++]=128|i>>6&15|(3&l)<<4,n[s++]=128|63&i}else n[s++]=224|l>>12&15,n[s++]=128|l>>6&63,n[s++]=128|63&l;s>a&&(t.push(n.slice(0,s)),s=0,n=j(65535),a=65530)}return t.push(n.slice(0,s)),k(t)}(s),we.utils.cfb_add(e,t,a);we.utils.cfb_add(e,t,s)}else e.file(t,s)}function Ge(){return we.utils.cfb_new()}var Ke='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var $e={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Xe=Ee($e),Je=/[&<>'"]/g,Qe=/[\u0000-\u0008\u000b-\u001f]/g;function Ze(e){return(e+"").replace(Je,function(e){return Xe[e]}).replace(Qe,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function et(e){return Ze(e).replace(/ /g,"_x0020_")}var tt=/[\u0000-\u001f]/g;function st(e){return(e+"").replace(Je,function(e){return Xe[e]}).replace(/\n/g,"<br/>").replace(tt,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function at(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function nt(e){for(var t="",s=0,a=0,n=0,r=0,l=0,i=0;s<e.length;)(a=e.charCodeAt(s++))<128?t+=String.fromCharCode(a):(n=e.charCodeAt(s++),a>191&&a<224?(l=(31&a)<<6,l|=63&n,t+=String.fromCharCode(l)):(r=e.charCodeAt(s++),a<240?t+=String.fromCharCode((15&a)<<12|(63&n)<<6|63&r):(i=((7&a)<<18|(63&n)<<12|(63&r)<<6|63&(l=e.charCodeAt(s++)))-65536,t+=String.fromCharCode(55296+(i>>>10&1023)),t+=String.fromCharCode(56320+(1023&i)))));return t}function rt(e){var t,s,a,n=j(2*e.length),r=1,l=0,i=0;for(s=0;s<e.length;s+=r)r=1,(a=e.charCodeAt(s))<128?t=a:a<224?(t=64*(31&a)+(63&e.charCodeAt(s+1)),r=2):a<240?(t=4096*(15&a)+64*(63&e.charCodeAt(s+1))+(63&e.charCodeAt(s+2)),r=3):(r=4,t=262144*(7&a)+4096*(63&e.charCodeAt(s+1))+64*(63&e.charCodeAt(s+2))+(63&e.charCodeAt(s+3)),i=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==i&&(n[l++]=255&i,n[l++]=i>>>8,i=0),n[l++]=t%256,n[l++]=t>>>8;return n.slice(0,l).toString("ucs2")}function lt(e){return y(e,"binary").toString("utf8")}var it="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",ot=g&&(lt(it)==nt(it)&&lt||rt(it)==nt(it)&&rt)||nt,ct=g?function(e){return y(e,"utf8").toString("binary")}:function(e){for(var t=[],s=0,a=0,n=0;s<e.length;)switch(a=e.charCodeAt(s++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(63&a)));break;case a>=55296&&a<57344:a-=55296,n=e.charCodeAt(s++)-56320+(a<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)))}return t.join("")},dt=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var s=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),a=0;a<e.length;++a)s=s.replace(e[a][0],e[a][1]);return s}}();var ut=/(^\s|\s$|\n)/;function ht(e,t){return"<"+e+(t.match(ut)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function mt(e){return Se(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function pt(e,t,s){return"<"+e+(null!=s?mt(s):"")+(null!=t?(t.match(ut)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function ft(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(s){if(t)throw s}return""}var xt="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",vt="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",gt="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",yt="http://schemas.openxmlformats.org/package/2006/content-types",jt="http://schemas.openxmlformats.org/package/2006/relationships",bt="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",wt="http://purl.org/dc/elements/1.1/",Nt="http://purl.org/dc/terms/",_t="http://purl.org/dc/dcmitype/",kt="http://schemas.openxmlformats.org/officeDocument/2006/relationships",St="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Ct="http://www.w3.org/2001/XMLSchema-instance",Et="http://www.w3.org/2001/XMLSchema",Tt=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],At="urn:schemas-microsoft-com:office:office",Pt="urn:schemas-microsoft-com:office:excel",Dt="urn:schemas-microsoft-com:office:spreadsheet",Rt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Ot="http://macVmlSchemaUri",Mt="urn:schemas-microsoft-com:vml",Ft="http://www.w3.org/TR/REC-html40";var Lt=function(e){for(var t=[],s=0;s<e[0].length;++s)if(e[0][s])for(var a=0,n=e[0][s].length;a<n;a+=10240)t.push.apply(t,e[0][s].slice(a,a+10240));return t},It=g?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:y(e)})):Lt(e)}:Lt,zt=function(e,t,s){for(var a=[],n=t;n<s;n+=2)a.push(String.fromCharCode(ls(e,n)));return a.join("").replace(S,"")},Bt=g?function(e,t,s){return Buffer.isBuffer(e)?e.toString("utf16le",t,s).replace(S,""):zt(e,t,s)}:zt,Ut=function(e,t,s){for(var a=[],n=t;n<t+s;++n)a.push(("0"+e[n].toString(16)).slice(-2));return a.join("")},Vt=g?function(e,t,s){return Buffer.isBuffer(e)?e.toString("hex",t,t+s):Ut(e,t,s)}:Ut,Ht=function(e,t,s){for(var a=[],n=t;n<s;n++)a.push(String.fromCharCode(rs(e,n)));return a.join("")},Wt=g?function(e,t,s){return Buffer.isBuffer(e)?e.toString("utf8",t,s):Ht(e,t,s)}:Ht,qt=function(e,t){var s=os(e,t);return s>0?Wt(e,t+4,t+4+s-1):""},Yt=qt,Gt=function(e,t){var s=os(e,t);return s>0?Wt(e,t+4,t+4+s-1):""},Kt=Gt,$t=function(e,t){var s=2*os(e,t);return s>0?Wt(e,t+4,t+4+s-1):""},Xt=$t,Jt=function(e,t){var s=os(e,t);return s>0?Bt(e,t+4,t+4+s):""},Qt=Jt,Zt=function(e,t){var s=os(e,t);return s>0?Wt(e,t+4,t+4+s):""},es=Zt,ts=function(e,t){return function(e,t){for(var s=1-2*(e[t+7]>>>7),a=((127&e[t+7])<<4)+(e[t+6]>>>4&15),n=15&e[t+6],r=5;r>=0;--r)n=256*n+e[t+r];return 2047==a?0==n?s*(1/0):NaN:(0==a?a=-1022:(a-=1023,n+=Math.pow(2,52)),s*Math.pow(2,a-52)*n)}(e,t)},ss=ts,as=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function ns(){Bt=function(e,t,s){return h.utils.decode(1200,e.slice(t,s)).replace(S,"")},Wt=function(e,t,s){return h.utils.decode(65001,e.slice(t,s))},Yt=function(e,t){var s=os(e,t);return s>0?h.utils.decode(r,e.slice(t+4,t+4+s-1)):""},Kt=function(e,t){var s=os(e,t);return s>0?h.utils.decode(n,e.slice(t+4,t+4+s-1)):""},Xt=function(e,t){var s=2*os(e,t);return s>0?h.utils.decode(1200,e.slice(t+4,t+4+s-1)):""},Qt=function(e,t){var s=os(e,t);return s>0?h.utils.decode(1200,e.slice(t+4,t+4+s)):""},es=function(e,t){var s=os(e,t);return s>0?h.utils.decode(65001,e.slice(t+4,t+4+s)):""}}g&&(Yt=function(e,t){if(!Buffer.isBuffer(e))return qt(e,t);var s=e.readUInt32LE(t);return s>0?e.toString("utf8",t+4,t+4+s-1):""},Kt=function(e,t){if(!Buffer.isBuffer(e))return Gt(e,t);var s=e.readUInt32LE(t);return s>0?e.toString("utf8",t+4,t+4+s-1):""},Xt=function(e,t){if(!Buffer.isBuffer(e))return $t(e,t);var s=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+s-1)},Qt=function(e,t){if(!Buffer.isBuffer(e))return Jt(e,t);var s=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+s)},es=function(e,t){if(!Buffer.isBuffer(e))return Zt(e,t);var s=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+s)},ss=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):ts(e,t)},as=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof h&&ns();var rs=function(e,t){return e[t]},ls=function(e,t){return 256*e[t+1]+e[t]},is=function(e,t){var s=256*e[t+1]+e[t];return s<32768?s:-1*(65535-s+1)},os=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},cs=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},ds=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function us(e,t){var s,a,r,l,i,o,c="",d=[];switch(t){case"dbcs":if(o=this.l,g&&Buffer.isBuffer(this))c=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)c+=String.fromCharCode(ls(this,o)),o+=2;e*=2;break;case"utf8":c=Wt(this,this.l,this.l+e);break;case"utf16le":e*=2,c=Bt(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof h)return us.call(this,e,"dbcs");c=h.utils.decode(n,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":c=Yt(this,this.l),e=4+os(this,this.l);break;case"lpstr-cp":c=Kt(this,this.l),e=4+os(this,this.l);break;case"lpwstr":c=Xt(this,this.l),e=4+2*os(this,this.l);break;case"lpp4":e=4+os(this,this.l),c=Qt(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+os(this,this.l),c=es(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,c="";0!==(r=rs(this,this.l+e++));)d.push(m(r));c=d.join("");break;case"_wstr":for(e=0,c="";0!==(r=ls(this,this.l+e));)d.push(m(r)),e+=2;e+=2,c=d.join("");break;case"dbcs-cont":for(c="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return r=rs(this,o),this.l=o+1,l=us.call(this,e-i,r?"dbcs-cont":"sbcs-cont"),d.join("")+l;d.push(m(ls(this,o))),o+=2}c=d.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof h){c=h.utils.decode(n,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(c="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return r=rs(this,o),this.l=o+1,l=us.call(this,e-i,r?"dbcs-cont":"sbcs-cont"),d.join("")+l;d.push(m(rs(this,o))),o+=1}c=d.join("");break;default:switch(e){case 1:return s=rs(this,this.l),this.l++,s;case 2:return s=("i"===t?is:ls)(this,this.l),this.l+=2,s;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(s=(e>0?cs:ds)(this,this.l),this.l+=4,s):(a=os(this,this.l),this.l+=4,a);case 8:case-8:if("f"===t)return a=8==e?ss(this,this.l):ss([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:c=Vt(this,this.l,e)}}return this.l+=e,c}var hs=function(e,t,s){e[s]=255&t,e[s+1]=t>>>8&255};function ms(e,t,s){var a=0,n=0;if("dbcs"===s){for(n=0;n!=t.length;++n)hs(this,t.charCodeAt(n),this.l+2*n);a=2*t.length}else if("sbcs"===s){if("undefined"!==typeof h&&874==r)for(n=0;n!=t.length;++n){var l=h.utils.encode(r,t.charAt(n));this[this.l+n]=l[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=255&t.charCodeAt(n);a=t.length}else{if("hex"===s){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}if("utf16le"===s){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var o=t.charCodeAt(n);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:a=1,this[this.l]=255&t;break;case 2:a=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:a=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:a=4,function(e,t,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24&255}(this,t,this.l);break;case 8:if(a=8,"f"===s){!function(e,t,s){var a=(t<0||1/t==-1/0?1:0)<<7,n=0,r=0,l=a?-t:t;isFinite(l)?0==l?n=r=0:(n=Math.floor(Math.log(l)/Math.LN2),r=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(r)||r<Math.pow(2,52))?n=-1022:(r-=Math.pow(2,52),n+=1023)):(n=2047,r=isNaN(t)?26985:0);for(var i=0;i<=5;++i,r/=256)e[s+i]=255&r;e[s+6]=(15&n)<<4|15&r,e[s+7]=n>>4|a}(this,t,this.l);break}case 16:break;case-4:a=4,function(e,t,s){e[s]=255&t,e[s+1]=t>>8&255,e[s+2]=t>>16&255,e[s+3]=t>>24&255}(this,t,this.l)}}return this.l+=a,this}function ps(e,t){var s=Vt(this,this.l,e.length>>1);if(s!==e)throw new Error(t+"Expected "+e+" saw "+s);this.l+=e.length>>1}function fs(e,t){e.l=t,e.read_shift=us,e.chk=ps,e.write_shift=ms}function xs(e,t){e.l+=t}function vs(e){var t=j(e);return fs(t,0),t}function gs(){var e=[],t=g?256:2048,s=function(e){var t=vs(e);return fs(t,0),t},a=s(t),n=function(){a&&(a.length>a.l&&((a=a.slice(0,a.l)).l=a.length),a.length>0&&e.push(a),a=null)},r=function(e){return a&&e<a.length-a.l?a:(n(),a=s(Math.max(e+1,t)))};return{next:r,push:function(e){n(),null==(a=e).l&&(a.l=a.length),r(t)},end:function(){return n(),k(e)},_bufs:e}}function ys(e,t,s,a){var n,r=+t;if(!isNaN(r)){a||(a=Ol[r].p||(s||[]).length||0),n=1+(r>=128?1:0)+1,a>=128&&++n,a>=16384&&++n,a>=2097152&&++n;var l=e.next(n);r<=127?l.write_shift(1,r):(l.write_shift(1,128+(127&r)),l.write_shift(1,r>>7));for(var i=0;4!=i;++i){if(!(a>=128)){l.write_shift(1,a);break}l.write_shift(1,128+(127&a)),a>>=7}a>0&&as(s)&&e.push(s)}}function js(e,t,s){var a=Ue(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!s||s.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function bs(e,t,s){var a=Ue(e);return a.s=js(a.s,t.s,s),a.e=js(a.e,t.s,s),a}function ws(e,t){if(e.cRel&&e.c<0)for(e=Ue(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ue(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var s=Ts(e);return e.cRel||null==e.cRel||(s=s.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(s=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(s)),s}function Ns(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?ws(e.s,t.biff)+":"+ws(e.e,t.biff):(e.s.rRel?"":"$")+ks(e.s.r)+":"+(e.e.rRel?"":"$")+ks(e.e.r):(e.s.cRel?"":"$")+Cs(e.s.c)+":"+(e.e.cRel?"":"$")+Cs(e.e.c)}function _s(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function ks(e){return""+(e+1)}function Ss(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),s=0,a=0;a!==t.length;++a)s=26*s+t.charCodeAt(a)-64;return s-1}function Cs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Es(e){for(var t=0,s=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(s=26*s+(n-64))}return{c:s-1,r:t-1}}function Ts(e){for(var t=e.c+1,s="";t;t=(t-1)/26|0)s=String.fromCharCode((t-1)%26+65)+s;return s+(e.r+1)}function As(e){var t=e.indexOf(":");return-1==t?{s:Es(e),e:Es(e)}:{s:Es(e.slice(0,t)),e:Es(e.slice(t+1))}}function Ps(e,t){return"undefined"===typeof t||"number"===typeof t?Ps(e.s,e.e):("string"!==typeof e&&(e=Ts(e)),"string"!==typeof t&&(t=Ts(t)),e==t?e:e+":"+t)}function Ds(e){var t={s:{c:0,r:0},e:{c:0,r:0}},s=0,a=0,n=0,r=e.length;for(s=0;a<r&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)s=26*s+n;for(t.s.c=--s,s=0;a<r&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)s=10*s+n;if(t.s.r=--s,a===r||10!=n)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,s=0;a!=r&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)s=26*s+n;for(t.e.c=--s,s=0;a!=r&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)s=10*s+n;return t.e.r=--s,t}function Rs(e,t){var s="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=xe(e.z,s?Pe(t):t)}catch(a){}try{return e.w=xe((e.XF||{}).numFmtId||(s?14:0),s?Pe(t):t)}catch(a){return""+t}}function Os(e,t,s){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&s&&s.dateNF&&(e.z=s.dateNF),"e"==e.t?fa[e.v]||e.v:Rs(e,void 0==t?e.v:t))}function Ms(e,t){var s=t&&t.sheet?t.sheet:"Sheet1",a={};return a[s]=e,{SheetNames:[s],Sheets:a}}function Fs(e,t,s){var a=s||{},n=e?Array.isArray(e):a.dense;var r=e||(n?[]:{}),l=0,i=0;if(r&&null!=a.origin){if("number"==typeof a.origin)l=a.origin;else{var o="string"==typeof a.origin?Es(a.origin):a.origin;l=o.r,i=o.c}r["!ref"]||(r["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(r["!ref"]){var d=Ds(r["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==l&&(c.e.r=l=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var m={v:t[u][h]},p=l+u,f=i+h;if(c.s.r>p&&(c.s.r=p),c.s.c>f&&(c.s.c=f),c.e.r<p&&(c.e.r=p),c.e.c<f&&(c.e.c=f),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(m.v)&&(m.f=t[u][h][1],m.v=m.v[0]),null===m.v)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else{if(!a.sheetStubs)continue;m.t="z"}else"number"===typeof m.v?m.t="n":"boolean"===typeof m.v?m.t="b":m.v instanceof Date?(m.z=a.dateNF||L[14],a.cellDates?(m.t="d",m.w=xe(m.z,Pe(m.v))):(m.t="n",m.v=Pe(m.v),m.w=xe(m.z,m.v))):m.t="s";else m=t[u][h];if(n)r[p]||(r[p]=[]),r[p][f]&&r[p][f].z&&(m.z=r[p][f].z),r[p][f]=m;else{var x=Ts({c:f,r:p});r[x]&&r[x].z&&(m.z=r[x].z),r[x]=m}}}return c.s.c<1e7&&(r["!ref"]=Ps(c)),r}function Ls(e,t){return Fs(null,e,t)}function Is(e,t){return t||(t=vs(4)),t.write_shift(4,e),t}function zs(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Bs(e,t){var s=!1;return null==t&&(s=!0,t=vs(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),s?t.slice(0,t.l):t}function Us(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Vs(e,t){var s=e.l,a=e.read_shift(1),n=zs(e),r=[],l={t:n,h:n};if(0!==(1&a)){for(var i=e.read_shift(4),o=0;o!=i;++o)r.push(Us(e));l.r=r}else l.r=[{ich:0,ifnt:0}];return e.l=s+t,l}var Hs=Vs;function Ws(e,t){var s=!1;return null==t&&(s=!0,t=vs(23+4*e.t.length)),t.write_shift(1,1),Bs(e.t,t),t.write_shift(4,1),function(e,t){t||(t=vs(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),s?t.slice(0,t.l):t}function qs(e){var t=e.read_shift(4),s=e.read_shift(2);return s+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:s}}function Ys(e,t){return null==t&&(t=vs(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Gs(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Ks(e,t){return null==t&&(t=vs(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var $s=zs,Xs=Bs;function Js(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Qs(e,t){var s=!1;return null==t&&(s=!0,t=vs(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),s?t.slice(0,t.l):t}var Zs=zs,ea=Js,ta=Qs;function sa(e){var t=e.slice(e.l,e.l+4),s=1&t[0],a=2&t[0];e.l+=4;var n=0===a?ss([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):cs(t,0)>>2;return s?n/100:n}function aa(e,t){null==t&&(t=vs(4));var s=0,a=0,n=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?a=1:n==(0|n)&&n>=-(1<<29)&&n<1<<29&&(a=1,s=1),!a)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((s?n:e)<<2)+(s+2))}function na(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var ra=na,la=function(e,t){return t||(t=vs(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function ia(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function oa(e,t){return(t||vs(8)).write_shift(8,e,"f")}function ca(e,t){if(t||(t=vs(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var s=e.tint||0;if(s>0?s*=32767:s<0&&(s*=32768),t.write_shift(2,s),e.rgb&&null==e.theme){var a=e.rgb||"FFFFFF";"number"==typeof a&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var da=80,ua={1:{n:"CodePage",t:2},2:{n:"Category",t:da},3:{n:"PresentationFormat",t:da},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:da},15:{n:"Company",t:da},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:da},27:{n:"ContentStatus",t:da},28:{n:"Language",t:da},29:{n:"Version",t:da},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},ha={1:{n:"CodePage",t:2},2:{n:"Title",t:da},3:{n:"Subject",t:da},4:{n:"Author",t:da},5:{n:"Keywords",t:da},6:{n:"Comments",t:da},7:{n:"Template",t:da},8:{n:"LastAuthor",t:da},9:{n:"RevNumber",t:da},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:da},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function ma(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var pa=Ue(ma([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),fa={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xa={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},va={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function ga(e,t){var s,a=function(e){for(var t=[],s=Se(e),a=0;a!==s.length;++a)null==t[e[s[a]]]&&(t[e[s[a]]]=[]),t[e[s[a]]].push(s[a]);return t}(xa),n=[];n[n.length]=Ke,n[n.length]=pt("Types",null,{xmlns:yt,"xmlns:xsd":Et,"xmlns:xsi":Ct}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return pt("Default",null,{Extension:e[0],ContentType:e[1]})}));var r=function(a){e[a]&&e[a].length>0&&(s=e[a][0],n[n.length]=pt("Override",null,{PartName:("/"==s[0]?"":"/")+s,ContentType:va[a][t.bookType]||va[a].xlsx}))},l=function(s){(e[s]||[]).forEach(function(e){n[n.length]=pt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:va[s][t.bookType]||va[s].xlsx})})},i=function(t){(e[t]||[]).forEach(function(e){n[n.length]=pt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:a[t][0]})})};return r("workbooks"),l("sheets"),l("charts"),i("themes"),["strs","styles"].forEach(r),["coreprops","extprops","custprops"].forEach(i),i("vba"),i("comments"),i("threadedcomments"),i("drawings"),l("metadata"),i("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ya={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ja(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ba(e){var t=[Ke,pt("Relationships",null,{xmlns:jt})];return Se(e["!id"]).forEach(function(s){t[t.length]=pt("Relationship",null,e["!id"][s])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function wa(e,t,s,a,n,r){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,n.Id="rId"+t,n.Type=a,n.Target=s,r?n.TargetMode=r:[ya.HLINK,ya.XPATH,ya.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,t}function Na(e,t,s){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(s||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function _a(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function ka(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+a.version+"</meta:generator></office:meta></office:document-meta>"}var Sa=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ca(e,t,s,a,n){null==n[e]&&null!=t&&""!==t&&(n[e]=t,t=Ze(t),a[a.length]=s?pt(e,t,s):ht(e,t))}function Ea(e,t){var s=t||{},a=[Ke,pt("cp:coreProperties",null,{"xmlns:cp":xt,"xmlns:dc":wt,"xmlns:dcterms":Nt,"xmlns:dcmitype":_t,"xmlns:xsi":Ct})],n={};if(!e&&!s.Props)return a.join("");e&&(null!=e.CreatedDate&&Ca("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:ft(e.CreatedDate,s.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n),null!=e.ModifiedDate&&Ca("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:ft(e.ModifiedDate,s.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n));for(var r=0;r!=Sa.length;++r){var l=Sa[r],i=s.Props&&null!=s.Props[l[1]]?s.Props[l[1]]:e?e[l[1]]:null;!0===i?i="1":!1===i?i="0":"number"==typeof i&&(i=String(i)),null!=i&&Ca(l[0],i,null,a,n)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var Ta=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Aa=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Pa(e){var t=[],s=pt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ke,t[t.length]=pt("Properties",null,{xmlns:gt,"xmlns:vt":St}),Ta.forEach(function(a){if(void 0!==e[a[1]]){var n;switch(a[2]){case"string":n=Ze(String(e[a[1]]));break;case"bool":n=e[a[1]]?"true":"false"}void 0!==n&&(t[t.length]=s(a[0],n))}}),t[t.length]=s("HeadingPairs",s("vt:vector",s("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+s("vt:variant",s("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=s("TitlesOfParts",s("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Ze(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Da(e){var t=[Ke,pt("Properties",null,{xmlns:vt,"xmlns:vt":St})];if(!e)return t.join("");var s=1;return Se(e).forEach(function(a){++s,t[t.length]=pt("property",function(e,t){switch(typeof e){case"string":var s=pt("vt:lpwstr",Ze(e));return t&&(s=s.replace(/&quot;/g,"_x0022_")),s;case"number":return pt((0|e)==e?"vt:i4":"vt:r8",Ze(String(e)));case"boolean":return pt("vt:bool",e?"true":"false")}if(e instanceof Date)return pt("vt:filetime",ft(e));throw new Error("Unable to serialize "+e)}(e[a],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:s,name:Ze(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Ra={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Oa(e,t){var s=vs(4),a=vs(4);switch(s.write_shift(4,80==e?31:e),e){case 3:a.write_shift(-4,t);break;case 5:(a=vs(8)).write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,s=t%Math.pow(2,32),a=(t-s)/Math.pow(2,32);a*=1e7;var n=(s*=1e7)/Math.pow(2,32)|0;n>0&&(s%=Math.pow(2,32),a+=n);var r=vs(8);return r.write_shift(4,s),r.write_shift(4,a),r}(t);break;case 31:case 80:for((a=vs(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return k([s,a])}var Ma=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Fa(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function La(e,t,s){var a=vs(8),n=[],r=[],l=8,i=0,o=vs(8),c=vs(8);if(o.write_shift(4,2),o.write_shift(4,1200),c.write_shift(4,1),r.push(o),n.push(c),l+=8+o.length,!t){(c=vs(8)).write_shift(4,0),n.unshift(c);var d=[vs(4)];for(d[0].write_shift(4,e.length),i=0;i<e.length;++i){var u=e[i][0];for((o=vs(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,i+2),o.write_shift(4,u.length+1),o.write_shift(0,u,"dbcs");o.l!=o.length;)o.write_shift(1,0);d.push(o)}o=k(d),r.unshift(o),l+=8+o.length}for(i=0;i<e.length;++i)if((!t||t[e[i][0]])&&!(Ma.indexOf(e[i][0])>-1||Aa.indexOf(e[i][0])>-1)&&null!=e[i][1]){var h=e[i][1],m=0;if(t){var p=s[m=+t[e[i][0]]];if("version"==p.p&&"string"==typeof h){var f=h.split(".");h=(+f[0]<<16)+(+f[1]||0)}o=Oa(p.t,h)}else{var x=Fa(h);-1==x&&(x=31,h=String(h)),o=Oa(x,h)}r.push(o),(c=vs(8)).write_shift(4,t?m:2+i),n.push(c),l+=8+o.length}var v=8*(r.length+1);for(i=0;i<r.length;++i)n[i].write_shift(4,v),v+=r[i].length;return a.write_shift(4,l),a.write_shift(4,r.length),k([a].concat(n).concat(r))}function Ia(e,t,s,a,n,r){var l=vs(n?68:48),i=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,we.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,n?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,n?68:48);var o=La(e,s,a);if(i.push(o),n){var c=La(n,null,null);l.write_shift(16,r,"hex"),l.write_shift(4,68+o.length),i.push(c)}return k(i)}function za(e,t){return 1===e.read_shift(t)}function Ba(e,t){return t||(t=vs(2)),t.write_shift(2,+!!e),t}function Ua(e){return e.read_shift(2,"u")}function Va(e,t){return t||(t=vs(2)),t.write_shift(2,e),t}function Ha(e,t,s){return s||(s=vs(2)),s.write_shift(1,"e"==t?+e:+!!e),s.write_shift(1,"e"==t?1:0),s}function Wa(e,t,s){var a=e.read_shift(s&&s.biff>=12?2:1),r="sbcs-cont",l=n;(s&&s.biff>=8&&(n=1200),s&&8!=s.biff)?12==s.biff&&(r="wstr"):e.read_shift(1)&&(r="dbcs-cont");s.biff>=2&&s.biff<=5&&(r="cpstr");var i=a?e.read_shift(a,r):"";return n=l,i}function qa(e){var t=e.t||"",s=vs(3);s.write_shift(2,t.length),s.write_shift(1,1);var a=vs(2*t.length);return a.write_shift(2*t.length,t,"utf16le"),k([s,a])}function Ya(e,t,s){if(s){if(s.biff>=2&&s.biff<=5)return e.read_shift(t,"cpstr");if(s.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Ga(e,t,s){var a=e.read_shift(s&&2==s.biff?1:2);return 0===a?(e.l++,""):Ya(e,a,s)}function Ka(e,t,s){if(s.biff>5)return Ga(e,0,s);var a=e.read_shift(1);return 0===a?(e.l++,""):e.read_shift(a,s.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function $a(e,t,s){return s||(s=vs(3+2*e.length)),s.write_shift(2,e.length),s.write_shift(1,1),s.write_shift(31,e,"utf16le"),s}function Xa(e,t){t||(t=vs(6+2*e.length)),t.write_shift(4,1+e.length);for(var s=0;s<e.length;++s)t.write_shift(2,e.charCodeAt(s));return t.write_shift(2,0),t}function Ja(e){var t=vs(512),s=0,a=e.Target;"file://"==a.slice(0,7)&&(a=a.slice(7));var n=a.indexOf("#"),r=n>-1?31:23;switch(a.charAt(0)){case"#":r=28;break;case".":r&=-3}t.write_shift(4,2),t.write_shift(4,r);var l=[8,6815827,6619237,4849780,83];for(s=0;s<l.length;++s)t.write_shift(4,l[s]);if(28==r)Xa(a=a.slice(1),t);else if(2&r){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<l.length;++s)t.write_shift(1,parseInt(l[s],16));var i=n>-1?a.slice(0,n):a;for(t.write_shift(4,2*(i.length+1)),s=0;s<i.length;++s)t.write_shift(2,i.charCodeAt(s));t.write_shift(2,0),8&r&&Xa(n>-1?a.slice(n+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),s=0;s<l.length;++s)t.write_shift(1,parseInt(l[s],16));for(var o=0;"../"==a.slice(3*o,3*o+3)||"..\\"==a.slice(3*o,3*o+3);)++o;for(t.write_shift(2,o),t.write_shift(4,a.length-3*o+1),s=0;s<a.length-3*o;++s)t.write_shift(1,255&a.charCodeAt(s+3*o));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),s=0;s<6;++s)t.write_shift(4,0)}return t.slice(0,t.l)}function Qa(e,t,s,a){return a||(a=vs(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,s||0),a}function Za(e,t,s){var a=s.biff>8?4:2;return[e.read_shift(a),e.read_shift(a,"i"),e.read_shift(a,"i")]}function en(e){var t=e.read_shift(2),s=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:s}}}function tn(e,t){return t||(t=vs(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function sn(e,t,s){var a=1536,n=16;switch(s.bookType){case"biff8":case"xla":break;case"biff5":a=1280,n=8;break;case"biff4":a=4,n=6;break;case"biff3":a=3,n=6;break;case"biff2":a=2,n=4;break;default:throw new Error("unsupported BIFF version")}var r=vs(n);return r.write_shift(2,a),r.write_shift(2,t),n>4&&r.write_shift(2,29282),n>6&&r.write_shift(2,1997),n>8&&(r.write_shift(2,49161),r.write_shift(2,1),r.write_shift(2,1798),r.write_shift(2,0)),r}function an(e,t){var s=!t||t.biff>=8?2:1,a=vs(8+s*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(s*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);return n.l=a.l,n}function nn(e,t,s,a){var n=s&&5==s.biff;a||(a=vs(n?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(n?1:2,t.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le");var r=a.length>a.l?a.slice(0,a.l):a;return null==r.l&&(r.l=r.length),r}function rn(e,t,s,a){var n=s&&5==s.biff;a||(a=vs(n?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var r=0;return e.numFmtId>0&&n&&(r|=1024),a.write_shift(4,r),a.write_shift(4,0),n||a.write_shift(4,0),a.write_shift(2,0),a}function ln(e,t,s){if(s.biff<8)return function(e,t,s){3==e[e.l+1]&&e[e.l]++;var a=Wa(e,0,s);return 3==a.charCodeAt(0)?a.slice(1):a}(e,0,s);for(var a=[],n=e.l+t,r=e.read_shift(s.biff>8?4:2);0!==r--;)a.push(Za(e,s.biff,s));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return a}function on(e){var t=vs(24),s=Es(e[0]);t.write_shift(2,s.r),t.write_shift(2,s.r),t.write_shift(2,s.c),t.write_shift(2,s.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)t.write_shift(1,parseInt(a[n],16));return k([t,Ja(e[1])])}function cn(e){var t=e[1].Tooltip,s=vs(10+2*(t.length+1));s.write_shift(2,2048);var a=Es(e[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var n=0;n<t.length;++n)s.write_shift(2,t.charCodeAt(n));return s.write_shift(2,0),s}function dn(e,t,s){if(!s.cellStyles)return xs(e,t);var a=s&&s.biff>=12?4:2,n=e.read_shift(a),r=e.read_shift(a),l=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2);2==a&&(e.l+=2);var c={s:n,e:r,w:l,ixfe:i,flags:o};return(s.biff>=5||!s.biff)&&(c.level=o>>8&7),c}var un=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Ee({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function s(t,s){var a=s||{};a.dateNF||(a.dateNF="yyyymmdd");var n=Ls(function(t,s){var a=[],n=j(1);switch(s.type){case"base64":n=w(v(t));break;case"binary":n=w(t);break;case"buffer":case"array":n=t}fs(n,0);var r=n.read_shift(1),l=!!(136&r),i=!1,o=!1;switch(r){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:i=!0,l=!0;break;case 140:o=!0;break;default:throw new Error("DBF Unsupported Version: "+r.toString(16))}var c=0,d=521;2==r&&(c=n.read_shift(2)),n.l+=3,2!=r&&(c=n.read_shift(4)),c>1048576&&(c=1e6),2!=r&&(d=n.read_shift(2));var u=n.read_shift(2),m=s.codepage||1252;2!=r&&(n.l+=16,n.read_shift(1),0!==n[n.l]&&(m=e[n[n.l]]),n.l+=1,n.l+=2),o&&(n.l+=36);for(var p=[],f={},x=Math.min(n.length,2==r?521:d-10-(i?264:0)),g=o?32:11;n.l<x&&13!=n[n.l];)switch((f={}).name=h.utils.decode(m,n.slice(n.l,n.l+g)).replace(/[\u0000\r\n].*$/g,""),n.l+=g,f.type=String.fromCharCode(n.read_shift(1)),2==r||o||(f.offset=n.read_shift(4)),f.len=n.read_shift(1),2==r&&(f.offset=n.read_shift(2)),f.dec=n.read_shift(1),f.name.length&&p.push(f),2!=r&&(n.l+=o?13:14),f.type){case"B":i&&8==f.len||!s.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":s.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==n[n.l]&&(n.l=d-1),13!==n.read_shift(1))throw new Error("DBF Terminator not found "+n.l+" "+n[n.l]);n.l=d;var y=0,b=0;for(a[0]=[],b=0;b!=p.length;++b)a[0][b]=p[b].name;for(;c-- >0;)if(42!==n[n.l])for(++n.l,a[++y]=[],b=0,b=0;b!=p.length;++b){var N=n.slice(n.l,n.l+p[b].len);n.l+=p[b].len,fs(N,0);var _=h.utils.decode(m,N);switch(p[b].type){case"C":_.trim().length&&(a[y][b]=_.replace(/\s+$/,""));break;case"D":8===_.length?a[y][b]=new Date(+_.slice(0,4),+_.slice(4,6)-1,+_.slice(6,8)):a[y][b]=_;break;case"F":a[y][b]=parseFloat(_.trim());break;case"+":case"I":a[y][b]=o?2147483648^N.read_shift(-4,"i"):N.read_shift(4,"i");break;case"L":switch(_.trim().toUpperCase()){case"Y":case"T":a[y][b]=!0;break;case"N":case"F":a[y][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+_+"|")}break;case"M":if(!l)throw new Error("DBF Unexpected MEMO for type "+r.toString(16));a[y][b]="##MEMO##"+(o?parseInt(_.trim(),10):N.read_shift(4));break;case"N":(_=_.replace(/\u0000/g,"").trim())&&"."!=_&&(a[y][b]=+_||0);break;case"@":a[y][b]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":a[y][b]=new Date(864e5*(N.read_shift(4)-2440588)+N.read_shift(4));break;case"Y":a[y][b]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":a[y][b]=-N.read_shift(-8,"f");break;case"B":if(i&&8==p[b].len){a[y][b]=N.read_shift(8,"f");break}case"G":case"P":N.l+=p[b].len;break;case"0":if("_NullFlags"===p[b].name)break;default:throw new Error("DBF Unsupported data type "+p[b].type)}}else n.l+=u;if(2!=r&&n.l<n.length&&26!=n[n.l++])throw new Error("DBF EOF Marker missing "+(n.l-1)+" of "+n.length+" "+n[n.l-1].toString(16));return s&&s.sheetRows&&(a=a.slice(0,s.sheetRows)),s.DBF=p,a}(t,a),a);return n["!cols"]=a.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete a.DBF,n}var a={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Ms(s(e,t),t)}catch(a){if(t&&t.WTF)throw a}return{SheetNames:[],Sheets:{}}},to_sheet:s,from_sheet:function(e,s){var n=s||{};if(+n.codepage>=0&&c(+n.codepage),"string"==n.type)throw new Error("Cannot write DBF to JS string");var l=gs(),i=Di(e,{header:1,raw:!0,cellDates:!0}),o=i[0],d=i.slice(1),u=e["!cols"]||[],h=0,m=0,p=0,f=1;for(h=0;h<o.length;++h)if(((u[h]||{}).DBF||{}).name)o[h]=u[h].DBF.name,++p;else if(null!=o[h]){if(++p,"number"===typeof o[h]&&(o[h]=o[h].toString(10)),"string"!==typeof o[h])throw new Error("DBF Invalid column name "+o[h]+" |"+typeof o[h]+"|");if(o.indexOf(o[h])!==h)for(m=0;m<1024;++m)if(-1==o.indexOf(o[h]+"_"+m)){o[h]+="_"+m;break}}var x=Ds(e["!ref"]),v=[],g=[],y=[];for(h=0;h<=x.e.c-x.s.c;++h){var j="",b="",w=0,N=[];for(m=0;m<d.length;++m)null!=d[m][h]&&N.push(d[m][h]);if(0!=N.length&&null!=o[h]){for(m=0;m<N.length;++m){switch(typeof N[m]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=N[m]instanceof Date?"D":"C"}w=Math.max(w,String(N[m]).length),j=j&&j!=b?"C":b}w>250&&(w=250),"C"==(b=((u[h]||{}).DBF||{}).type)&&u[h].DBF.len>w&&(w=u[h].DBF.len),"B"==j&&"N"==b&&(j="N",y[h]=u[h].DBF.dec,w=u[h].DBF.len),g[h]="C"==j||"N"==b?w:a[j]||0,f+=g[h],v[h]=j}else v[h]="?"}var _=l.next(32);for(_.write_shift(4,318902576),_.write_shift(4,d.length),_.write_shift(2,296+32*p),_.write_shift(2,f),h=0;h<4;++h)_.write_shift(4,0);for(_.write_shift(4,(+t[r]||3)<<8),h=0,m=0;h<o.length;++h)if(null!=o[h]){var k=l.next(32),S=(o[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,S,"sbcs"),k.write_shift(1,"?"==v[h]?"C":v[h],"sbcs"),k.write_shift(4,m),k.write_shift(1,g[h]||a[v[h]]||0),k.write_shift(1,y[h]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),m+=g[h]||a[v[h]]||0}var C=l.next(264);for(C.write_shift(4,13),h=0;h<65;++h)C.write_shift(4,0);for(h=0;h<d.length;++h){var E=l.next(f);for(E.write_shift(1,0),m=0;m<o.length;++m)if(null!=o[m])switch(v[m]){case"L":E.write_shift(1,null==d[h][m]?63:d[h][m]?84:70);break;case"B":E.write_shift(8,d[h][m]||0,"f");break;case"N":var T="0";for("number"==typeof d[h][m]&&(T=d[h][m].toFixed(y[m]||0)),p=0;p<g[m]-T.length;++p)E.write_shift(1,32);E.write_shift(1,T,"sbcs");break;case"D":d[h][m]?(E.write_shift(4,("0000"+d[h][m].getFullYear()).slice(-4),"sbcs"),E.write_shift(2,("00"+(d[h][m].getMonth()+1)).slice(-2),"sbcs"),E.write_shift(2,("00"+d[h][m].getDate()).slice(-2),"sbcs")):E.write_shift(8,"00000000","sbcs");break;case"C":var A=String(null!=d[h][m]?d[h][m]:"").slice(0,g[m]);for(E.write_shift(1,A,"sbcs"),p=0;p<g[m]-A.length;++p)E.write_shift(1,32)}}return l.next(1).write_shift(1,26),l.end()}}}(),hn=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+Se(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),s=function(t,s){var a=e[s];return"number"==typeof a?p(a):a},a=function(e,t,s){var a=t.charCodeAt(0)-32<<4|s.charCodeAt(0)-48;return 59==a?e:p(a)};function n(e,n){var r,l=e.split(/[\n\r]+/),i=-1,o=-1,d=0,u=0,m=[],p=[],f=null,x={},v=[],g=[],y=[],j=0;for(+n.codepage>=0&&c(+n.codepage);d!==l.length;++d){j=0;var b,w=l[d].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,s),N=w.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),_=N[0];if(w.length>0)switch(_){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==N[1].charAt(0)&&p.push(w.slice(3).replace(/;;/g,";"));break;case"C":var k=!1,S=!1,C=!1,E=!1,T=-1,A=-1;for(u=1;u<N.length;++u)switch(N[u].charAt(0)){case"A":case"G":break;case"X":o=parseInt(N[u].slice(1))-1,S=!0;break;case"Y":for(i=parseInt(N[u].slice(1))-1,S||(o=0),r=m.length;r<=i;++r)m[r]=[];break;case"K":'"'===(b=N[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(He(b))?isNaN(qe(b).getDate())||(b=ze(b)):(b=He(b),null!==f&&he(f)&&(b=Me(b))),"undefined"!==typeof h&&"string"==typeof b&&"string"!=(n||{}).type&&(n||{}).codepage&&(b=h.utils.decode(n.codepage,b)),k=!0;break;case"E":E=!0;var P=sr(N[u].slice(1),{r:i,c:o});m[i][o]=[m[i][o],P];break;case"S":C=!0,m[i][o]=[m[i][o],"S5S"];break;case"R":T=parseInt(N[u].slice(1))-1;break;case"C":A=parseInt(N[u].slice(1))-1;break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+w)}if(k&&(m[i][o]&&2==m[i][o].length?m[i][o][0]=b:m[i][o]=b,f=null),C){if(E)throw new Error("SYLK shared formula cannot have own formula");var D=T>-1&&m[T][A];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");m[i][o][1]=rr(D[1],{r:i-T,c:o-A})}break;case"F":var R=0;for(u=1;u<N.length;++u)switch(N[u].charAt(0)){case"X":o=parseInt(N[u].slice(1))-1,++R;break;case"Y":for(i=parseInt(N[u].slice(1))-1,r=m.length;r<=i;++r)m[r]=[];break;case"M":j=parseInt(N[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=p[parseInt(N[u].slice(1))];break;case"W":for(y=N[u].slice(1).split(" "),r=parseInt(y[0],10);r<=parseInt(y[1],10);++r)j=parseInt(y[2],10),g[r-1]=0===j?{hidden:!0}:{wch:j},Tn(g[r-1]);break;case"C":g[o=parseInt(N[u].slice(1))-1]||(g[o]={});break;case"R":v[i=parseInt(N[u].slice(1))-1]||(v[i]={}),j>0?(v[i].hpt=j,v[i].hpx=Pn(j)):0===j&&(v[i].hidden=!0);break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+w)}R<1&&(f=null);break;default:if(n&&n.WTF)throw new Error("SYLK bad record "+w)}}return v.length>0&&(x["!rows"]=v),g.length>0&&(x["!cols"]=g),n&&n.sheetRows&&(m=m.slice(0,n.sheetRows)),[m,x]}function r(e,t){var s=function(e,t){switch(t.type){case"base64":return n(v(e),t);case"binary":return n(e,t);case"buffer":return n(g&&Buffer.isBuffer(e)?e.toString("binary"):_(e),t);case"array":return n(Be(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),a=s[0],r=s[1],l=Ls(a,t);return Se(r).forEach(function(e){l[e]=r[e]}),l}function l(e,t,s,a){var n="C;Y"+(s+1)+";X"+(a+1)+";K";switch(e.t){case"n":n+=e.v||0,e.f&&!e.F&&(n+=";E"+nr(e.f,{r:s,c:a}));break;case"b":n+=e.v?"TRUE":"FALSE";break;case"e":n+=e.w||e.v;break;case"d":n+='"'+(e.w||e.v)+'"';break;case"s":n+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return n}return e["|"]=254,{to_workbook:function(e,t){return Ms(r(e,t),t)},to_sheet:r,from_sheet:function(e,t){var s,a,n=["ID;PWXL;N;E"],r=[],i=Ds(e["!ref"]),o=Array.isArray(e),c="\r\n";n.push("P;PGeneral"),n.push("F;P0;DG0G8;M255"),e["!cols"]&&(a=n,e["!cols"].forEach(function(e,t){var s="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?s+="0":("number"!=typeof e.width||e.wpx||(e.wpx=Sn(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Cn(e.wpx)),"number"==typeof e.wch&&(s+=Math.round(e.wch)))," "!=s.charAt(s.length-1)&&a.push(s)})),e["!rows"]&&function(e,t){t.forEach(function(t,s){var a="F;";t.hidden?a+="M0;":t.hpt?a+="M"+20*t.hpt+";":t.hpx&&(a+="M"+20*An(t.hpx)+";"),a.length>2&&e.push(a+"R"+(s+1))})}(n,e["!rows"]),n.push("B;Y"+(i.e.r-i.s.r+1)+";X"+(i.e.c-i.s.c+1)+";D"+[i.s.c,i.s.r,i.e.c,i.e.r].join(" "));for(var d=i.s.r;d<=i.e.r;++d)for(var u=i.s.c;u<=i.e.c;++u){var h=Ts({r:d,c:u});(s=o?(e[d]||[])[u]:e[h])&&(null!=s.v||s.f&&!s.F)&&r.push(l(s,0,d,u))}return n.join(c)+c+r.join(c)+c+"E"+c}}}(),mn=function(){function e(e,t){for(var s=e.split("\n"),a=-1,n=-1,r=0,l=[];r!==s.length;++r)if("BOT"!==s[r].trim()){if(!(a<0)){for(var i=s[r].trim().split(","),o=i[0],c=i[1],d=s[++r]||"";1&(d.match(/["]/g)||[]).length&&r<s.length-1;)d+="\n"+s[++r];switch(d=d.trim(),+o){case-1:if("BOT"===d){l[++a]=[],n=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?l[a][n]=!0:"FALSE"===d?l[a][n]=!1:isNaN(He(c))?isNaN(qe(c).getDate())?l[a][n]=c:l[a][n]=ze(c):l[a][n]=He(c),++n;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),l[a][n++]=""!==d?d:null}if("EOD"===d)break}}else l[++a]=[],n=0;return t&&t.sheetRows&&(l=l.slice(0,t.sheetRows)),l}function t(t,s){return Ls(function(t,s){switch(s.type){case"base64":return e(v(t),s);case"binary":return e(t,s);case"buffer":return e(g&&Buffer.isBuffer(t)?t.toString("binary"):_(t),s);case"array":return e(Be(t),s)}throw new Error("Unrecognized type "+s.type)}(t,s),s)}var s=function(){var e=function(e,t,s,a,n){e.push(t),e.push(s+","+a),e.push('"'+n.replace(/"/g,'""')+'"')},t=function(e,t,s,a){e.push(t+","+s),e.push(1==t?'"'+a.replace(/"/g,'""')+'"':a)};return function(s){var a,n=[],r=Ds(s["!ref"]),l=Array.isArray(s);e(n,"TABLE",0,1,"sheetjs"),e(n,"VECTORS",0,r.e.r-r.s.r+1,""),e(n,"TUPLES",0,r.e.c-r.s.c+1,""),e(n,"DATA",0,0,"");for(var i=r.s.r;i<=r.e.r;++i){t(n,-1,0,"BOT");for(var o=r.s.c;o<=r.e.c;++o){var c=Ts({r:i,c:o});if(a=l?(s[i]||[])[o]:s[c])switch(a.t){case"n":var d=a.w;d||null==a.v||(d=a.v),null==d?a.f&&!a.F?t(n,1,0,"="+a.f):t(n,1,0,""):t(n,0,d,"V");break;case"b":t(n,0,a.v?1:0,a.v?"TRUE":"FALSE");break;case"s":t(n,1,0,isNaN(a.v)?a.v:'="'+a.v+'"');break;case"d":a.w||(a.w=xe(a.z||L[14],Pe(ze(a.v)))),t(n,0,a.w,"V");break;default:t(n,1,0,"")}else t(n,1,0,"")}}t(n,-1,0,"EOD");return n.join("\r\n")}}();return{to_workbook:function(e,s){return Ms(t(e,s),s)},to_sheet:t,from_sheet:s}}(),pn=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function s(t,s){return Ls(function(t,s){for(var a=t.split("\n"),n=-1,r=-1,l=0,i=[];l!==a.length;++l){var o=a[l].trim().split(":");if("cell"===o[0]){var c=Es(o[1]);if(i.length<=c.r)for(n=i.length;n<=c.r;++n)i[n]||(i[n]=[]);switch(n=c.r,r=c.c,o[2]){case"t":i[n][r]=e(o[3]);break;case"v":i[n][r]=+o[3];break;case"vtf":var d=o[o.length-1];case"vtc":"nl"===o[3]?i[n][r]=!!+o[4]:i[n][r]=+o[4],"vtf"==o[2]&&(i[n][r]=[i[n][r],d])}}}return s&&s.sheetRows&&(i=i.slice(0,s.sheetRows)),i}(t,s),s)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),n=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",r=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),l="--SocialCalcSpreadsheetControlSave--";function i(e){if(!e||!e["!ref"])return"";for(var s,a=[],n=[],r="",l=As(e["!ref"]),i=Array.isArray(e),o=l.s.r;o<=l.e.r;++o)for(var c=l.s.c;c<=l.e.c;++c)if(r=Ts({r:o,c:c}),(s=i?(e[o]||[])[c]:e[r])&&null!=s.v&&"z"!==s.t){switch(n=["cell",r,"t"],s.t){case"s":case"str":n.push(t(s.v));break;case"n":s.f?(n[2]="vtf",n[3]="n",n[4]=s.v,n[5]=t(s.f)):(n[2]="v",n[3]=s.v);break;case"b":n[2]="vt"+(s.f?"f":"c"),n[3]="nl",n[4]=s.v?"1":"0",n[5]=t(s.f||(s.v?"TRUE":"FALSE"));break;case"d":var d=Pe(ze(s.v));n[2]="vtc",n[3]="nd",n[4]=""+d,n[5]=s.w||xe(s.z||L[14],d);break;case"e":continue}a.push(n.join(":"))}return a.push("sheet:c:"+(l.e.c-l.s.c+1)+":r:"+(l.e.r-l.s.r+1)+":tvf:1"),a.push("valueformat:1:text-wiki"),a.join("\n")}return{to_workbook:function(e,t){return Ms(s(e,t),t)},to_sheet:s,from_sheet:function(e){return[a,n,r,n,i(e),l].join("\n")}}}(),fn=function(){function e(e,t,s,a,n){n.raw?t[s][a]=e:""===e||("TRUE"===e?t[s][a]=!0:"FALSE"===e?t[s][a]=!1:isNaN(He(e))?isNaN(qe(e).getDate())?t[s][a]=e:t[s][a]=ze(e):t[s][a]=He(e))}var t={44:",",9:"\t",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function a(e){for(var a={},n=!1,r=0,l=0;r<e.length;++r)34==(l=e.charCodeAt(r))?n=!n:!n&&l in t&&(a[l]=(a[l]||0)+1);for(r in l=[],a)Object.prototype.hasOwnProperty.call(a,r)&&l.push([a[r],r]);if(!l.length)for(r in a=s)Object.prototype.hasOwnProperty.call(a,r)&&l.push([a[r],r]);return l.sort(function(e,t){return e[0]-t[0]||s[e[1]]-s[t[1]]}),t[l.pop()[1]]||44}function n(e,t){var s=t||{},n="";var r=s.dense?[]:{},l={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(n=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(n=e.charAt(4),e=e.slice(6)):n=a(e.slice(0,1024)):n=s&&s.FS?s.FS:a(e.slice(0,1024));var i=0,o=0,c=0,d=0,u=0,h=n.charCodeAt(0),m=!1,p=0,f=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var x=null!=s.dateNF?function(e){var t="number"==typeof e?L[e]:e;return t=t.replace(je,"(\\d+)"),new RegExp("^"+t+"$")}(s.dateNF):null;function v(){var t=e.slice(d,u),a={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)a.t="z";else if(s.raw)a.t="s",a.v=t;else if(0===t.trim().length)a.t="s",a.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(a.t="s",a.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(a.t="n",a.f=t.slice(1)):(a.t="s",a.v=t);else if("TRUE"==t)a.t="b",a.v=!0;else if("FALSE"==t)a.t="b",a.v=!1;else if(isNaN(c=He(t)))if(!isNaN(qe(t).getDate())||x&&t.match(x)){a.z=s.dateNF||L[14];var n=0;x&&t.match(x)&&(t=function(e,t,s){var a=-1,n=-1,r=-1,l=-1,i=-1,o=-1;(t.match(je)||[]).forEach(function(e,t){var c=parseInt(s[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":a=c;break;case"d":r=c;break;case"h":l=c;break;case"s":o=c;break;case"m":l>=0?i=c:n=c}}),o>=0&&-1==i&&n>=0&&(i=n,n=-1);var c=(""+(a>=0?a:(new Date).getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(r>=1?r:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2);return-1==l&&-1==i&&-1==o?c:-1==a&&-1==n&&-1==r?d:c+"T"+d}(0,s.dateNF,t.match(x)||[]),n=1),s.cellDates?(a.t="d",a.v=ze(t,n)):(a.t="n",a.v=Pe(ze(t,n))),!1!==s.cellText&&(a.w=xe(a.z,a.v instanceof Date?Pe(a.v):a.v)),s.cellNF||delete a.z}else a.t="s",a.v=t;else a.t="n",!1!==s.cellText&&(a.w=t),a.v=c;if("z"==a.t||(s.dense?(r[i]||(r[i]=[]),r[i][o]=a):r[Ts({c:o,r:i})]=a),d=u+1,f=e.charCodeAt(d),l.e.c<o&&(l.e.c=o),l.e.r<i&&(l.e.r=i),p==h)++o;else if(o=0,++i,s.sheetRows&&s.sheetRows<=i)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===f&&(m=!m);break;case h:case 10:case 13:if(!m&&v())break e}return u-d>0&&v(),r["!ref"]=Ps(l),r}function r(t,s){return s&&s.PRN?s.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?n(t,s):Ls(function(t,s){var a=s||{},n=[];if(!t||0===t.length)return n;for(var r=t.split(/[\r\n]/),l=r.length-1;l>=0&&0===r[l].length;)--l;for(var i=10,o=0,c=0;c<=l;++c)-1==(o=r[c].indexOf(" "))?o=r[c].length:o++,i=Math.max(i,o);for(c=0;c<=l;++c){n[c]=[];var d=0;for(e(r[c].slice(0,i).trim(),n,c,d,a),d=1;d<=(r[c].length-i)/10+1;++d)e(r[c].slice(i+10*(d-1),i+10*d).trim(),n,c,d,a)}return a.sheetRows&&(n=n.slice(0,a.sheetRows)),n}(t,s),s):n(t,s)}function l(e,t){var s="",a="string"==t.type?[0,0,0,0]:Ni(e,t);switch(t.type){case"base64":s=v(e);break;case"binary":case"string":s=e;break;case"buffer":s=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof h?h.utils.decode(t.codepage,e):g&&Buffer.isBuffer(e)?e.toString("binary"):_(e);break;case"array":s=Be(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==a[0]&&187==a[1]&&191==a[2]?s=ot(s.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?s=ot(s):"binary"==t.type&&"undefined"!==typeof h&&t.codepage&&(s=h.utils.decode(t.codepage,h.utils.encode(28591,s))),"socialcalc:version:"==s.slice(0,19)?pn.to_sheet("string"==t.type?s:ot(s),t):r(s,t)}return{to_workbook:function(e,t){return Ms(l(e,t),t)},to_sheet:l,from_sheet:function(e){for(var t,s=[],a=Ds(e["!ref"]),n=Array.isArray(e),r=a.s.r;r<=a.e.r;++r){for(var l=[],i=a.s.c;i<=a.e.c;++i){var o=Ts({r:r,c:i});if((t=n?(e[r]||[])[i]:e[o])&&null!=t.v){for(var c=(t.w||(Os(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";l.push(c+(0===i?" ":""))}else l.push("          ")}s.push(l.join(""))}return s.join("\n")}}}();var xn=function(){function e(e,t,s){if(e){fs(e,e.l||0);for(var a=s.Enum||y;e.l<e.length;){var n=e.read_shift(2),r=a[n]||a[65535],l=e.read_shift(2),i=e.l+l,o=r.f&&r.f(e,l,s);if(e.l=i,t(o,r,n))return}}}function t(t,s){if(!t)return t;var a=s||{};var n=a.dense?[]:{},r="Sheet1",l="",i=0,o={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=a.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])a.Enum=y,e(t,function(e,t,s){switch(s){case 0:a.vers=e,e>=4096&&(a.qpro=!0);break;case 6:u=e;break;case 204:e&&(l=e);break;case 222:l=e;break;case 15:case 51:a.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==s&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=a.dateNF||L[14],a.cellDates&&(e[1].t="d",e[1].v=Me(e[1].v))),a.qpro&&e[3]>i&&(n["!ref"]=Ps(u),o[r]=n,c.push(r),n=a.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},i=e[3],r=l||"Sheet"+(i+1),l="");var d=a.dense?(n[e[0].r]||[])[e[0].c]:n[Ts(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}a.dense?(n[e[0].r]||(n[e[0].r]=[]),n[e[0].r][e[0].c]=e[1]):n[Ts(e[0])]=e[1]}},a);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);a.Enum=j,14==t[2]&&(a.qpro=!0,t.l=0),e(t,function(e,t,s){switch(s){case 204:r=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>i&&(n["!ref"]=Ps(u),o[r]=n,c.push(r),n=a.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},i=e[3],r="Sheet"+(i+1)),h>0&&e[0].r>=h)break;a.dense?(n[e[0].r]||(n[e[0].r]=[]),n[e[0].r][e[0].c]=e[1]):n[Ts(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==i&&(r=e[1])}},a)}if(n["!ref"]=Ps(u),o[l||r]=n,c.push(l||r),!d.length)return{SheetNames:c,Sheets:o};for(var m={},p=[],f=0;f<d.length;++f)o[c[f]]?(p.push(d[f]||c[f]),m[d[f]]=o[d[f]]||o[c[f]]):(p.push(d[f]),m[d[f]]={"!ref":"A1"});return{SheetNames:p,Sheets:m}}function s(e,t,s){var a=[{c:0,r:0},{t:"n",v:0},0,0];return s.qpro&&20768!=s.vers?(a[0].c=e.read_shift(1),a[3]=e.read_shift(1),a[0].r=e.read_shift(2),e.l+=2):(a[2]=e.read_shift(1),a[0].c=e.read_shift(2),a[0].r=e.read_shift(2)),a}function a(e,t,a){var n=e.l+t,r=s(e,0,a);if(r[1].t="s",20768==a.vers){e.l++;var l=e.read_shift(1);return r[1].v=e.read_shift(l,"utf8"),r}return a.qpro&&e.l++,r[1].v=e.read_shift(n-e.l,"cstr"),r}function n(e,t,s){var a=vs(7+s.length);a.write_shift(1,255),a.write_shift(2,t),a.write_shift(2,e),a.write_shift(1,39);for(var n=0;n<a.length;++n){var r=s.charCodeAt(n);a.write_shift(1,r>=128?95:r)}return a.write_shift(1,0),a}function r(e,t,s){var a=vs(7);return a.write_shift(1,255),a.write_shift(2,t),a.write_shift(2,e),a.write_shift(2,s,"i"),a}function l(e,t,s){var a=vs(13);return a.write_shift(1,255),a.write_shift(2,t),a.write_shift(2,e),a.write_shift(8,s,"f"),a}function i(e,t,s){var a=32768&t;return t=(a?e:0)+((t&=-32769)>=8192?t-16384:t),(a?"":"$")+(s?Cs(t):ks(t))}var o={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},d=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function h(e,t,s,a){var n=vs(6+a.length);n.write_shift(2,e),n.write_shift(1,s),n.write_shift(1,t),n.write_shift(1,39);for(var r=0;r<a.length;++r){var l=a.charCodeAt(r);n.write_shift(1,l>=128?95:l)}return n.write_shift(1,0),n}function m(e,t){var s=u(e),a=e.read_shift(4),n=e.read_shift(4),r=e.read_shift(2);if(65535==r)return 0===a&&3221225472===n?(s[1].t="e",s[1].v=15):0===a&&3489660928===n?(s[1].t="e",s[1].v=42):s[1].v=0,s;var l=32768&r;return r=(32767&r)-16446,s[1].v=(1-2*l)*(n*Math.pow(2,r+32)+a*Math.pow(2,r)),s}function p(e,t,s,a){var n=vs(14);if(n.write_shift(2,e),n.write_shift(1,s),n.write_shift(1,t),0==a)return n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,65535),n;var r,l=0,i=0,o=0;return a<0&&(l=1,a=-a),i=0|Math.log2(a),0==(2147483648&(o=(a/=Math.pow(2,i-31))>>>0))&&(++i,o=(a/=2)>>>0),a-=o,o|=2147483648,o>>>=0,r=(a*=Math.pow(2,32))>>>0,n.write_shift(4,r),n.write_shift(4,o),i+=16383+(l?32768:0),n.write_shift(2,i),n}function f(e,t){var s=u(e),a=e.read_shift(8,"f");return s[1].v=a,s}function x(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var s=vs(5+e.length);s.write_shift(2,14e3),s.write_shift(2,t);for(var a=0;a<e.length;++a){var n=e.charCodeAt(a);s[s.l++]=n>127?95:n}return s[s.l++]=0,s}var y={0:{n:"BOF",f:Ua},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,s){var a={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&s.qpro?(a.s.c=e.read_shift(1),e.l++,a.s.r=e.read_shift(2),a.e.c=e.read_shift(1),e.l++,a.e.r=e.read_shift(2),a):(a.s.c=e.read_shift(2),a.s.r=e.read_shift(2),12==t&&s.qpro&&(e.l+=2),a.e.c=e.read_shift(2),a.e.r=e.read_shift(2),12==t&&s.qpro&&(e.l+=2),65535==a.s.c&&(a.s.c=a.e.c=a.s.r=a.e.r=0),a)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,a){var n=s(e,0,a);return n[1].v=e.read_shift(2,"i"),n}},14:{n:"NUMBER",f:function(e,t,a){var n=s(e,0,a);return n[1].v=e.read_shift(8,"f"),n}},15:{n:"LABEL",f:a},16:{n:"FORMULA",f:function(e,t,a){var n=e.l+t,r=s(e,0,a);if(r[1].v=e.read_shift(8,"f"),a.qpro)e.l=n;else{var l=e.read_shift(2);!function(e,t){fs(e,0);var s=[],a=0,n="",r="",l="",c="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:s.push(e.read_shift(8,"f"));break;case 1:r=i(t[0].c,e.read_shift(2),!0),n=i(t[0].r,e.read_shift(2),!1),s.push(r+n);break;case 2:var h=i(t[0].c,e.read_shift(2),!0),m=i(t[0].r,e.read_shift(2),!1);r=i(t[0].c,e.read_shift(2),!0),n=i(t[0].r,e.read_shift(2),!1),s.push(h+m+":"+r+n);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:s.push("("+s.pop()+")");break;case 5:s.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);s.push('"'+p.replace(/"/g,'""')+'"');break;case 8:s.push("-"+s.pop());break;case 23:s.push("+"+s.pop());break;case 22:s.push("NOT("+s.pop()+")");break;case 20:case 21:c=s.pop(),l=s.pop(),s.push(["AND","OR"][u-20]+"("+l+","+c+")");break;default:if(u<32&&d[u])c=s.pop(),l=s.pop(),s.push(l+d[u]+c);else{if(!o[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(a=o[u][1])&&(a=e[e.l++]),a>s.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+s.join("|")+"|");var f=s.slice(-a);s.length-=a,s.push(o[u][0]+"("+f.join(",")+")")}}}1==s.length?t[1].f=""+s[0]:console.error("WK1 bad formula parse |"+s.join("|")+"|")}(e.slice(e.l,e.l+l),r),e.l+=l}return r}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:a},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:x},222:{n:"SHEETNAMELP",f:function(e,t){var s=e[e.l++];s>t-1&&(s=t-1);for(var a="";a.length<s;)a+=String.fromCharCode(e[e.l++]);return a}},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var s=u(e);return s[1].t="s",s[1].v=e.read_shift(t-4,"cstr"),s}},23:{n:"NUMBER17",f:m},24:{n:"NUMBER18",f:function(e,t){var s=u(e);s[1].v=e.read_shift(2);var a=s[1].v>>1;if(1&s[1].v)switch(7&a){case 0:a=5e3*(a>>3);break;case 1:a=500*(a>>3);break;case 2:a=(a>>3)/20;break;case 3:a=(a>>3)/200;break;case 4:a=(a>>3)/2e3;break;case 5:a=(a>>3)/2e4;break;case 6:a=(a>>3)/16;break;case 7:a=(a>>3)/64}return s[1].v=a,s}},25:{n:"FORMULA19",f:function(e,t){var s=m(e);return e.l+=t-14,s}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var s={},a=e.l+t;e.l<a;){var n=e.read_shift(2);if(14e3==n){for(s[n]=[0,""],s[n][0]=e.read_shift(2);e[e.l];)s[n][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return s}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var s=u(e),a=e.read_shift(4);return s[1].v=a>>6,s}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var s=f(e);return e.l+=t-10,s}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:x},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,s){if(s.qpro&&!(t<21)){var a=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[a,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var s=t||{};if(+s.codepage>=0&&c(+s.codepage),"string"==s.type)throw new Error("Cannot write WK1 to JS string");var a=gs(),i=Ds(e["!ref"]),o=Array.isArray(e),d=[];Ml(a,0,function(e){var t=vs(2);return t.write_shift(2,e),t}(1030)),Ml(a,6,function(e){var t=vs(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(i));for(var u=Math.min(i.e.r,8191),h=i.s.r;h<=u;++h)for(var m=ks(h),p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(d[p]=Cs(p));var f=d[p]+m,x=o?(e[h]||[])[p]:e[f];if(x&&"z"!=x.t)if("n"==x.t)(0|x.v)==x.v&&x.v>=-32768&&x.v<=32767?Ml(a,13,r(h,p,x.v)):Ml(a,14,l(h,p,x.v));else Ml(a,15,n(h,p,Os(x).slice(0,239)))}return Ml(a,1),a.end()},book_to_wk3:function(e,t){var s=t||{};if(+s.codepage>=0&&c(+s.codepage),"string"==s.type)throw new Error("Cannot write WK3 to JS string");var a=gs();Ml(a,0,function(e){var t=vs(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var s=0,a=0,n=0,r=0;r<e.SheetNames.length;++r){var l=e.SheetNames[r],i=e.Sheets[l];if(i&&i["!ref"]){++n;var o=As(i["!ref"]);s<o.e.r&&(s=o.e.r),a<o.e.c&&(a=o.e.c)}}s>8191&&(s=8191);return t.write_shift(2,s),t.write_shift(1,n),t.write_shift(1,a),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var n=0,r=0;n<e.SheetNames.length;++n)(e.Sheets[e.SheetNames[n]]||{})["!ref"]&&Ml(a,27,g(e.SheetNames[n],r++));var l=0;for(n=0;n<e.SheetNames.length;++n){var i=e.Sheets[e.SheetNames[n]];if(i&&i["!ref"]){for(var o=Ds(i["!ref"]),d=Array.isArray(i),u=[],m=Math.min(o.e.r,8191),f=o.s.r;f<=m;++f)for(var x=ks(f),v=o.s.c;v<=o.e.c;++v){f===o.s.r&&(u[v]=Cs(v));var y=u[v]+x,j=d?(i[f]||[])[v]:i[y];if(j&&"z"!=j.t)if("n"==j.t)Ml(a,23,p(f,v,l,j.v));else Ml(a,22,h(f,v,l,Os(j).slice(0,239)))}++l}}return Ml(a,1),a.end()},to_workbook:function(e,s){switch(s.type){case"base64":return t(w(v(e)),s);case"binary":return t(w(e),s);case"buffer":case"array":return t(e,s)}throw"Unsupported type "+s.type}}}();var vn=/^\s|\s$|[\t\n\r]/;function gn(e,t){if(!t.bookSST)return"";var s=[Ke];s[s.length]=pt("sst",null,{xmlns:Tt[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(null!=e[a]){var n=e[a],r="<si>";n.r?r+=n.r:(r+="<t",n.t||(n.t=""),n.t.match(vn)&&(r+=' xml:space="preserve"'),r+=">"+Ze(n.t)+"</t>"),r+="</si>",s[s.length]=r}return s.length>2&&(s[s.length]="</sst>",s[1]=s[1].replace("/>",">")),s.join("")}var yn=function(e,t){var s=!1;return null==t&&(s=!0,t=vs(15+4*e.t.length)),t.write_shift(1,0),Bs(e.t,t),s?t.slice(0,t.l):t};function jn(e){var t=gs();ys(t,159,function(e,t){return t||(t=vs(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var s=0;s<e.length;++s)ys(t,19,yn(e[s]));return ys(t,160),t.end()}function bn(e){if("undefined"!==typeof h)return h.utils.encode(r,e);for(var t=[],s=e.split(""),a=0;a<s.length;++a)t[a]=s[a].charCodeAt(0);return t}function wn(e){var t,s,a=0,n=bn(e),r=n.length+1;for((t=j(r))[0]=n.length,s=1;s!=r;++s)t[s]=n[s-1];for(s=r-1;s>=0;--s)a=((0===(16384&a)?0:1)|a<<1&32767)^t[s];return 52811^a}var Nn=function(){function e(e,s){switch(s.type){case"base64":return t(v(e),s);case"binary":return t(e,s);case"buffer":return t(g&&Buffer.isBuffer(e)?e.toString("binary"):_(e),s);case"array":return t(Be(e),s)}throw new Error("Unrecognized type "+s.type)}function t(e,t){var s=(t||{}).dense?[]:{},a=e.match(/\\trowd.*?\\row\b/g);if(!a.length)throw new Error("RTF missing table");var n={s:{c:0,r:0},e:{c:0,r:a.length-1}};return a.forEach(function(e,t){Array.isArray(s)&&(s[t]=[]);for(var a,r=/\\\w+\b/g,l=0,i=-1;a=r.exec(e);){if("\\cell"===a[0]){var o=e.slice(l,r.lastIndex-a[0].length);if(" "==o[0]&&(o=o.slice(1)),++i,o.length){var c={v:o,t:"s"};Array.isArray(s)?s[t][i]=c:s[Ts({r:t,c:i})]=c}}l=r.lastIndex}i>n.e.c&&(n.e.c=i)}),s["!ref"]=Ps(n),s}return{to_workbook:function(t,s){return Ms(e(t,s),s)},to_sheet:e,from_sheet:function(e){for(var t,s=["{\\rtf1\\ansi"],a=Ds(e["!ref"]),n=Array.isArray(e),r=a.s.r;r<=a.e.r;++r){s.push("\\trowd\\trautofit1");for(var l=a.s.c;l<=a.e.c;++l)s.push("\\cellx"+(l+1));for(s.push("\\pard\\intbl"),l=a.s.c;l<=a.e.c;++l){var i=Ts({r:r,c:l});(t=n?(e[r]||[])[l]:e[i])&&(null!=t.v||t.f&&!t.F)&&(s.push(" "+(t.w||(Os(t),t.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}}}();function _n(e){for(var t=0,s=1;3!=t;++t)s=256*s+(e[t]>255?255:e[t]<0?0:e[t]);return s.toString(16).toUpperCase().slice(1)}var kn=6;function Sn(e){return Math.floor((e+Math.round(128/kn)/256)*kn)}function Cn(e){return Math.floor((e-5)/kn*100+.5)/100}function En(e){return Math.round((e*kn+5)/kn*256)/256}function Tn(e){e.width?(e.wpx=Sn(e.width),e.wch=Cn(e.wpx),e.MDW=kn):e.wpx?(e.wch=Cn(e.wpx),e.width=En(e.wch),e.MDW=kn):"number"==typeof e.wch&&(e.width=En(e.wch),e.wpx=Sn(e.width),e.MDW=kn),e.customWidth&&delete e.customWidth}function An(e){return 96*e/96}function Pn(e){return 96*e/96}function Dn(e,t){var s,a=[Ke,pt("styleSheet",null,{xmlns:Tt[0],"xmlns:vt":St})];return e.SSF&&null!=(s=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)null!=e[a]&&(t[t.length]=pt("numFmt",null,{numFmtId:a,formatCode:Ze(e[a])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=pt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(a[a.length]=s),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=function(e){var t=[];return t[t.length]=pt("cellXfs",null),e.forEach(function(e){t[t.length]=pt("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=pt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(a[a.length]=s),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Rn(e,t,s){s||(s=vs(6+4*t.length)),s.write_shift(2,e),Bs(t,s);var a=s.length>s.l?s.slice(0,s.l):s;return null==s.l&&(s.l=s.length),a}function On(e,t){t||(t=vs(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=vs(2));var s=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,s),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var s=0;"superscript"==e.vertAlign?s=1:"subscript"==e.vertAlign&&(s=2),t.write_shift(2,s),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),ca(e.color,t);var a=0;return"major"==e.scheme&&(a=1),"minor"==e.scheme&&(a=2),t.write_shift(1,a),Bs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Mn,Fn=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ln=xs;function In(e,t){t||(t=vs(84)),Mn||(Mn=Ee(Fn));var s=Mn[e.patternType];null==s&&(s=40),t.write_shift(4,s);var a=0;if(40!=s)for(ca({auto:1},t),ca({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function zn(e,t,s){s||(s=vs(16)),s.write_shift(2,t||0),s.write_shift(2,e.numFmtId||0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);return s.write_shift(1,0),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(1,0),s}function Bn(e,t){return t||(t=vs(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Un=xs;function Vn(e){var t;ys(e,613,Is(1)),ys(e,46,(t||(t=vs(51)),t.write_shift(1,0),Bn(0,t),Bn(0,t),Bn(0,t),Bn(0,t),Bn(0,t),t.length>t.l?t.slice(0,t.l):t)),ys(e,614)}function Hn(e){var t,s;ys(e,619,Is(1)),ys(e,48,(t={xfId:0,builtinId:0,name:"Normal"},s||(s=vs(52)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,+t.builtinId),s.write_shift(1,0),Qs(t.name||"",s),s.length>s.l?s.slice(0,s.l):s)),ys(e,620)}function Wn(e){ys(e,508,function(e,t,s){var a=vs(2052);return a.write_shift(4,e),Qs(t,a),Qs(s,a),a.length>a.l?a.slice(0,a.l):a}(0,"TableStyleMedium9","PivotStyleMedium4")),ys(e,509)}function qn(e,t){var s=gs();return ys(s,278),function(e,t){if(t){var s=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var a=e[0];a<=e[1];++a)null!=t[a]&&++s}),0!=s&&(ys(e,615,Is(s)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var a=s[0];a<=s[1];++a)null!=t[a]&&ys(e,44,Rn(a,t[a]))}),ys(e,616))}}(s,e.SSF),function(e){ys(e,611,Is(1)),ys(e,43,On({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),ys(e,612)}(s),function(e){ys(e,603,Is(2)),ys(e,45,In({patternType:"none"})),ys(e,45,In({patternType:"gray125"})),ys(e,604)}(s),Vn(s),function(e){ys(e,626,Is(1)),ys(e,47,zn({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),ys(e,627)}(s),function(e,t){ys(e,617,Is(t.length)),t.forEach(function(t){ys(e,47,zn(t,0))}),ys(e,618)}(s,t.cellXfs),Hn(s),function(e){ys(e,505,Is(0)),ys(e,506)}(s),Wn(s),ys(s,279),s.end()}function Yn(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var s=[Ke];return s[s.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',s[s.length]="<a:themeElements>",s[s.length]='<a:clrScheme name="Office">',s[s.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',s[s.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',s[s.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',s[s.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',s[s.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',s[s.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',s[s.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',s[s.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',s[s.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',s[s.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',s[s.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',s[s.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',s[s.length]="</a:clrScheme>",s[s.length]='<a:fontScheme name="Office">',s[s.length]="<a:majorFont>",s[s.length]='<a:latin typeface="Cambria"/>',s[s.length]='<a:ea typeface=""/>',s[s.length]='<a:cs typeface=""/>',s[s.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',s[s.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',s[s.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',s[s.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',s[s.length]='<a:font script="Arab" typeface="Times New Roman"/>',s[s.length]='<a:font script="Hebr" typeface="Times New Roman"/>',s[s.length]='<a:font script="Thai" typeface="Tahoma"/>',s[s.length]='<a:font script="Ethi" typeface="Nyala"/>',s[s.length]='<a:font script="Beng" typeface="Vrinda"/>',s[s.length]='<a:font script="Gujr" typeface="Shruti"/>',s[s.length]='<a:font script="Khmr" typeface="MoolBoran"/>',s[s.length]='<a:font script="Knda" typeface="Tunga"/>',s[s.length]='<a:font script="Guru" typeface="Raavi"/>',s[s.length]='<a:font script="Cans" typeface="Euphemia"/>',s[s.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',s[s.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',s[s.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',s[s.length]='<a:font script="Thaa" typeface="MV Boli"/>',s[s.length]='<a:font script="Deva" typeface="Mangal"/>',s[s.length]='<a:font script="Telu" typeface="Gautami"/>',s[s.length]='<a:font script="Taml" typeface="Latha"/>',s[s.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',s[s.length]='<a:font script="Orya" typeface="Kalinga"/>',s[s.length]='<a:font script="Mlym" typeface="Kartika"/>',s[s.length]='<a:font script="Laoo" typeface="DokChampa"/>',s[s.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',s[s.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',s[s.length]='<a:font script="Viet" typeface="Times New Roman"/>',s[s.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',s[s.length]='<a:font script="Geor" typeface="Sylfaen"/>',s[s.length]="</a:majorFont>",s[s.length]="<a:minorFont>",s[s.length]='<a:latin typeface="Calibri"/>',s[s.length]='<a:ea typeface=""/>',s[s.length]='<a:cs typeface=""/>',s[s.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',s[s.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',s[s.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',s[s.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',s[s.length]='<a:font script="Arab" typeface="Arial"/>',s[s.length]='<a:font script="Hebr" typeface="Arial"/>',s[s.length]='<a:font script="Thai" typeface="Tahoma"/>',s[s.length]='<a:font script="Ethi" typeface="Nyala"/>',s[s.length]='<a:font script="Beng" typeface="Vrinda"/>',s[s.length]='<a:font script="Gujr" typeface="Shruti"/>',s[s.length]='<a:font script="Khmr" typeface="DaunPenh"/>',s[s.length]='<a:font script="Knda" typeface="Tunga"/>',s[s.length]='<a:font script="Guru" typeface="Raavi"/>',s[s.length]='<a:font script="Cans" typeface="Euphemia"/>',s[s.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',s[s.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',s[s.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',s[s.length]='<a:font script="Thaa" typeface="MV Boli"/>',s[s.length]='<a:font script="Deva" typeface="Mangal"/>',s[s.length]='<a:font script="Telu" typeface="Gautami"/>',s[s.length]='<a:font script="Taml" typeface="Latha"/>',s[s.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',s[s.length]='<a:font script="Orya" typeface="Kalinga"/>',s[s.length]='<a:font script="Mlym" typeface="Kartika"/>',s[s.length]='<a:font script="Laoo" typeface="DokChampa"/>',s[s.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',s[s.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',s[s.length]='<a:font script="Viet" typeface="Arial"/>',s[s.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',s[s.length]='<a:font script="Geor" typeface="Sylfaen"/>',s[s.length]="</a:minorFont>",s[s.length]="</a:fontScheme>",s[s.length]='<a:fmtScheme name="Office">',s[s.length]="<a:fillStyleLst>",s[s.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',s[s.length]='<a:gradFill rotWithShape="1">',s[s.length]="<a:gsLst>",s[s.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',s[s.length]="</a:gsLst>",s[s.length]='<a:lin ang="16200000" scaled="1"/>',s[s.length]="</a:gradFill>",s[s.length]='<a:gradFill rotWithShape="1">',s[s.length]="<a:gsLst>",s[s.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',s[s.length]="</a:gsLst>",s[s.length]='<a:lin ang="16200000" scaled="0"/>',s[s.length]="</a:gradFill>",s[s.length]="</a:fillStyleLst>",s[s.length]="<a:lnStyleLst>",s[s.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',s[s.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',s[s.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',s[s.length]="</a:lnStyleLst>",s[s.length]="<a:effectStyleLst>",s[s.length]="<a:effectStyle>",s[s.length]="<a:effectLst>",s[s.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',s[s.length]="</a:effectLst>",s[s.length]="</a:effectStyle>",s[s.length]="<a:effectStyle>",s[s.length]="<a:effectLst>",s[s.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',s[s.length]="</a:effectLst>",s[s.length]="</a:effectStyle>",s[s.length]="<a:effectStyle>",s[s.length]="<a:effectLst>",s[s.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',s[s.length]="</a:effectLst>",s[s.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',s[s.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',s[s.length]="</a:effectStyle>",s[s.length]="</a:effectStyleLst>",s[s.length]="<a:bgFillStyleLst>",s[s.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',s[s.length]='<a:gradFill rotWithShape="1">',s[s.length]="<a:gsLst>",s[s.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',s[s.length]="</a:gsLst>",s[s.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',s[s.length]="</a:gradFill>",s[s.length]='<a:gradFill rotWithShape="1">',s[s.length]="<a:gsLst>",s[s.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',s[s.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',s[s.length]="</a:gsLst>",s[s.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',s[s.length]="</a:gradFill>",s[s.length]="</a:bgFillStyleLst>",s[s.length]="</a:fmtScheme>",s[s.length]="</a:themeElements>",s[s.length]="<a:objectDefaults>",s[s.length]="<a:spDef>",s[s.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',s[s.length]="</a:spDef>",s[s.length]="<a:lnDef>",s[s.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',s[s.length]="</a:lnDef>",s[s.length]="</a:objectDefaults>",s[s.length]="<a:extraClrSchemeLst/>",s[s.length]="</a:theme>",s.join("")}function Gn(){var e=gs();return ys(e,332),ys(e,334,Is(1)),ys(e,335,function(e){var t=vs(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Bs(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),ys(e,336),ys(e,339,function(e,t){var s=vs(8+2*t.length);return s.write_shift(4,e),Bs(t,s),s.slice(0,s.l)}(1,"XLDAPR")),ys(e,52),ys(e,35,Is(514)),ys(e,4096,Is(0)),ys(e,4097,Va(1)),ys(e,36),ys(e,53),ys(e,340),ys(e,337,function(e,t){var s=vs(8);return s.write_shift(4,e),s.write_shift(4,t?1:0),s}(1,!0)),ys(e,51,function(e){var t=vs(4+8*e.length);t.write_shift(4,e.length);for(var s=0;s<e.length;++s)t.write_shift(4,e[s][0]),t.write_shift(4,e[s][1]);return t}([[1,0]])),ys(e,338),ys(e,333),e.end()}function Kn(){var e=[Ke];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var $n=1024;function Xn(e,t){for(var s=[21600,21600],a=["m0,0l0",s[1],s[0],s[1],s[0],"0xe"].join(","),n=[pt("xml",null,{"xmlns:v":Mt,"xmlns:o":At,"xmlns:x":Pt,"xmlns:mv":Ot}).replace(/\/>/,">"),pt("o:shapelayout",pt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),pt("v:shapetype",[pt("v:stroke",null,{joinstyle:"miter"}),pt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:s.join(","),path:a})];$n<1e3*e;)$n+=1e3;return t.forEach(function(e){var t=Es(e[0]),s={color2:"#BEFF82",type:"gradient"};"gradient"==s.type&&(s.angle="-180");var a="gradient"==s.type?pt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,r=pt("v:fill",a,s);++$n,n=n.concat(["<v:shape"+mt({id:"_x0000_s"+$n,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",r,pt("v:shadow",null,{on:"t",obscured:"t"}),pt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ht("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),ht("x:AutoFill","False"),ht("x:Row",String(t.r)),ht("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function Jn(e){var t=[Ke,pt("comments",null,{xmlns:Tt[0]})],s=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var a=Ze(e.a);-1==s.indexOf(a)&&(s.push(a),t.push("<author>"+a+"</author>")),e.T&&e.ID&&-1==s.indexOf("tc="+e.ID)&&(s.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==s.length&&(s.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var a=0,n=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?a=s.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(a=s.indexOf(Ze(e.a))),n.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+a+'"><text>'),n.length<=1)t.push(ht("t",Ze(n[0]||"")));else{for(var r="Comment:\n    "+n[0]+"\n",l=1;l<n.length;++l)r+="Reply:\n    "+n[l]+"\n";t.push(ht("t",Ze(r)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Qn(e,t,s){var a=[Ke,pt("ThreadedComments",null,{xmlns:bt}).replace(/[\/]>/,">")];return e.forEach(function(e){var n="";(e[1]||[]).forEach(function(r,l){if(r.T){r.a&&-1==t.indexOf(r.a)&&t.push(r.a);var i={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+s.tcid++).slice(-12)+"}"};0==l?n=i.id:i.parentId=n,r.ID=i.id,r.a&&(i.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(r.a)).slice(-12)+"}"),a.push(pt("threadedComment",ht("text",r.t||""),i))}else delete r.ID})}),a.push("</ThreadedComments>"),a.join("")}var Zn=zs;function er(e){var t=gs(),s=[];return ys(t,628),ys(t,630),e.forEach(function(e){e[1].forEach(function(e){s.indexOf(e.a)>-1||(s.push(e.a.slice(0,54)),ys(t,632,function(e){return Bs(e.slice(0,54))}(e.a)))})}),ys(t,631),ys(t,633),e.forEach(function(e){e[1].forEach(function(a){a.iauthor=s.indexOf(a.a);var n={s:Es(e[0]),e:Es(e[0])};ys(t,635,function(e,t){return null==t&&(t=vs(36)),t.write_shift(4,e[1].iauthor),la(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([n,a])),a.t&&a.t.length>0&&ys(t,637,Ws(a)),ys(t,636),delete a.iauthor})}),ys(t,634),ys(t,629),t.end()}var tr=["xlsb","xlsm","xlam","biff8","xla"];var sr=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function s(e,s,a,n){var r=!1,l=!1;0==a.length?l=!0:"["==a.charAt(0)&&(l=!0,a=a.slice(1,-1)),0==n.length?r=!0:"["==n.charAt(0)&&(r=!0,n=n.slice(1,-1));var i=a.length>0?0|parseInt(a,10):0,o=n.length>0?0|parseInt(n,10):0;return r?o+=t.c:--o,l?i+=t.r:--i,s+(r?"":"$")+Cs(o)+(l?"":"$")+ks(i)}return function(a,n){return t=n,a.replace(e,s)}}(),ar=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,nr=function(){return function(e,t){return e.replace(ar,function(e,s,a,n,r,l){var i=Ss(n)-(a?0:t.c),o=_s(l)-(r?0:t.r);return s+"R"+(0==o?"":r?o+1:"["+o+"]")+"C"+(0==i?"":a?i+1:"["+i+"]")})}}();function rr(e,t){return e.replace(ar,function(e,s,a,n,r,l){return s+("$"==a?a+n:Cs(Ss(n)+t.c))+("$"==r?r+l:ks(_s(l)+t.r))})}function lr(e){e.l+=1}function ir(e,t){var s=e.read_shift(1==t?1:2);return[16383&s,s>>14&1,s>>15&1]}function or(e,t,s){var a=2;if(s){if(s.biff>=2&&s.biff<=5)return cr(e);12==s.biff&&(a=4)}var n=e.read_shift(a),r=e.read_shift(a),l=ir(e,2),i=ir(e,2);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:r,c:i[0],cRel:i[1],rRel:i[2]}}}function cr(e){var t=ir(e,2),s=ir(e,2),a=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:s[0],c:n,cRel:s[1],rRel:s[2]}}}function dr(e,t,s){if(s&&s.biff>=2&&s.biff<=5)return function(e){var t=ir(e,2),s=e.read_shift(1);return{r:t[0],c:s,cRel:t[1],rRel:t[2]}}(e);var a=e.read_shift(s&&12==s.biff?4:2),n=ir(e,2);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function ur(e){var t=e.read_shift(2),s=e.read_shift(2);return{r:t,c:255&s,fQuoted:!!(16384&s),cRel:s>>15,rRel:s>>15}}function hr(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function mr(e){return[e.read_shift(1),e.read_shift(1)]}function pr(e,t){var s=[e.read_shift(1)];if(12==t)switch(s[0]){case 2:s[0]=4;break;case 4:s[0]=16;break;case 0:s[0]=1;break;case 1:s[0]=2}switch(s[0]){case 4:s[1]=za(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:s[1]=fa[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:s[1]=ia(e);break;case 2:s[1]=Ka(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+s[0])}return s}function fr(e,t,s){for(var a=e.read_shift(12==s.biff?4:2),n=[],r=0;r!=a;++r)n.push((12==s.biff?ra:en)(e,8));return n}function xr(e,t,s){var a=0,n=0;12==s.biff?(a=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),a=1+e.read_shift(2)),s.biff>=2&&s.biff<8&&(--a,0==--n&&(n=256));for(var r=0,l=[];r!=a&&(l[r]=[]);++r)for(var i=0;i!=n;++i)l[r][i]=pr(e,s.biff);return l}function vr(e,t,s){return e.l+=2,[ur(e)]}function gr(e){return e.l+=6,[]}function yr(e){return e.l+=2,[Ua(e),1&e.read_shift(2)]}var jr=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var br={1:{n:"PtgExp",f:function(e,t,s){return e.l++,s&&12==s.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(s&&2==s.biff?1:2)]}},2:{n:"PtgTbl",f:xs},3:{n:"PtgAdd",f:lr},4:{n:"PtgSub",f:lr},5:{n:"PtgMul",f:lr},6:{n:"PtgDiv",f:lr},7:{n:"PtgPower",f:lr},8:{n:"PtgConcat",f:lr},9:{n:"PtgLt",f:lr},10:{n:"PtgLe",f:lr},11:{n:"PtgEq",f:lr},12:{n:"PtgGe",f:lr},13:{n:"PtgGt",f:lr},14:{n:"PtgNe",f:lr},15:{n:"PtgIsect",f:lr},16:{n:"PtgUnion",f:lr},17:{n:"PtgRange",f:lr},18:{n:"PtgUplus",f:lr},19:{n:"PtgUminus",f:lr},20:{n:"PtgPercent",f:lr},21:{n:"PtgParen",f:lr},22:{n:"PtgMissArg",f:lr},23:{n:"PtgStr",f:function(e,t,s){return e.l++,Wa(e,0,s)}},26:{n:"PtgSheet",f:function(e,t,s){return e.l+=5,e.l+=2,e.l+=2==s.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,s){return e.l+=2==s.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,fa[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,ia(e)}},32:{n:"PtgArray",f:function(e,t,s){var a=(96&e[e.l++])>>5;return e.l+=2==s.biff?6:12==s.biff?14:7,[a]}},33:{n:"PtgFunc",f:function(e,t,s){var a=(96&e[e.l])>>5;e.l+=1;var n=e.read_shift(s&&s.biff<=3?1:2);return[Br[n],zr[n],a]}},34:{n:"PtgFuncVar",f:function(e,t,s){var a=e[e.l++],n=e.read_shift(1),r=s&&s.biff<=3?[88==a?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[n,(0===r[0]?zr:Ir)[r[1]]]}},35:{n:"PtgName",f:function(e,t,s){var a=e.read_shift(1)>>>5&3,n=!s||s.biff>=8?4:2,r=e.read_shift(n);switch(s.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[a,0,r]}},36:{n:"PtgRef",f:function(e,t,s){var a=(96&e[e.l])>>5;return e.l+=1,[a,dr(e,0,s)]}},37:{n:"PtgArea",f:function(e,t,s){return[(96&e[e.l++])>>5,or(e,s.biff>=2&&s.biff,s)]}},38:{n:"PtgMemArea",f:function(e,t,s){var a=e.read_shift(1)>>>5&3;return e.l+=s&&2==s.biff?3:4,[a,e.read_shift(s&&2==s.biff?1:2)]}},39:{n:"PtgMemErr",f:xs},40:{n:"PtgMemNoMem",f:xs},41:{n:"PtgMemFunc",f:function(e,t,s){return[e.read_shift(1)>>>5&3,e.read_shift(s&&2==s.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,s){var a=e.read_shift(1)>>>5&3;return e.l+=4,s.biff<8&&e.l--,12==s.biff&&(e.l+=2),[a]}},43:{n:"PtgAreaErr",f:function(e,t,s){var a=(96&e[e.l++])>>5;return e.l+=s&&s.biff>8?12:s.biff<8?6:8,[a]}},44:{n:"PtgRefN",f:function(e,t,s){var a=(96&e[e.l])>>5;e.l+=1;var n=function(e,t,s){var a=s&&s.biff?s.biff:8;if(a>=2&&a<=5)return function(e){var t=e.read_shift(2),s=e.read_shift(1),a=(32768&t)>>15,n=(16384&t)>>14;return t&=16383,1==a&&t>=8192&&(t-=16384),1==n&&s>=128&&(s-=256),{r:t,c:s,cRel:n,rRel:a}}(e);var n=e.read_shift(a>=12?4:2),r=e.read_shift(2),l=(16384&r)>>14,i=(32768&r)>>15;if(r&=16383,1==i)for(;n>524287;)n-=1048576;if(1==l)for(;r>8191;)r-=16384;return{r:n,c:r,cRel:l,rRel:i}}(e,0,s);return[a,n]}},45:{n:"PtgAreaN",f:function(e,t,s){var a=(96&e[e.l++])>>5,n=function(e,t,s){if(s.biff<8)return cr(e);var a=e.read_shift(12==s.biff?4:2),n=e.read_shift(12==s.biff?4:2),r=ir(e,2),l=ir(e,2);return{s:{r:a,c:r[0],cRel:r[1],rRel:r[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}(e,0,s);return[a,n]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,s){return 5==s.biff?function(e){var t=e.read_shift(1)>>>5&3,s=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,s,a]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,s){var a=(96&e[e.l])>>5;e.l+=1;var n=e.read_shift(2);return s&&5==s.biff&&(e.l+=12),[a,n,dr(e,0,s)]}},59:{n:"PtgArea3d",f:function(e,t,s){var a=(96&e[e.l++])>>5,n=e.read_shift(2,"i");if(s)switch(s.biff){case 5:e.l+=12;break;case 12:0}return[a,n,or(e,0,s)]}},60:{n:"PtgRefErr3d",f:function(e,t,s){var a=(96&e[e.l++])>>5,n=e.read_shift(2),r=4;if(s)switch(s.biff){case 5:r=15;break;case 12:r=6}return e.l+=r,[a,n]}},61:{n:"PtgAreaErr3d",f:function(e,t,s){var a=(96&e[e.l++])>>5,n=e.read_shift(2),r=8;if(s)switch(s.biff){case 5:e.l+=12,r=6;break;case 12:r=12}return e.l+=r,[a,n]}},255:{}},wr={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Nr={1:{n:"PtgElfLel",f:yr},2:{n:"PtgElfRw",f:vr},3:{n:"PtgElfCol",f:vr},6:{n:"PtgElfRwV",f:vr},7:{n:"PtgElfColV",f:vr},10:{n:"PtgElfRadical",f:vr},11:{n:"PtgElfRadicalS",f:gr},13:{n:"PtgElfColS",f:gr},15:{n:"PtgElfColSV",f:gr},16:{n:"PtgElfRadicalLel",f:yr},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(4),n=e.read_shift(2),r=e.read_shift(2);return{ixti:t,coltype:3&s,rt:jr[s>>2&31],idx:a,c:n,C:r}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},_r={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,s){var a=255&e[e.l+1]?1:0;return e.l+=s&&2==s.biff?3:4,[a]}},2:{n:"PtgAttrIf",f:function(e,t,s){var a=255&e[e.l+1]?1:0;return e.l+=2,[a,e.read_shift(s&&2==s.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,s){e.l+=2;for(var a=e.read_shift(s&&2==s.biff?1:2),n=[],r=0;r<=a;++r)n.push(e.read_shift(s&&2==s.biff?1:2));return n}},8:{n:"PtgAttrGoto",f:function(e,t,s){var a=255&e[e.l+1]?1:0;return e.l+=2,[a,e.read_shift(s&&2==s.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,s){e.l+=s&&2==s.biff?3:4}},32:{n:"PtgAttrBaxcel",f:hr},33:{n:"PtgAttrBaxcel",f:hr},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),mr(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),mr(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function kr(e,t,s,a){if(a.biff<8)return xs(e,t);for(var n=e.l+t,r=[],l=0;l!==s.length;++l)switch(s[l][0]){case"PtgArray":s[l][1]=xr(e,0,a),r.push(s[l][1]);break;case"PtgMemArea":s[l][2]=fr(e,s[l][1],a),r.push(s[l][2]);break;case"PtgExp":a&&12==a.biff&&(s[l][1][1]=e.read_shift(4),r.push(s[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+s[l][0]}return 0!==(t=n-e.l)&&r.push(xs(e,t)),r}function Sr(e,t,s){for(var a,n,r=e.l+t,l=[];r!=e.l;)t=r-e.l,n=e[e.l],a=br[n]||br[wr[n]],24!==n&&25!==n||(a=(24===n?Nr:_r)[e[e.l+1]]),a&&a.f?l.push([a.n,a.f(e,t,s)]):xs(e,t);return l}function Cr(e){for(var t=[],s=0;s<e.length;++s){for(var a=e[s],n=[],r=0;r<a.length;++r){var l=a[r];if(l)if(2===l[0])n.push('"'+l[1].replace(/"/g,'""')+'"');else n.push(l[1]);else n.push("")}t.push(n.join(","))}return t.join(";")}var Er={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Tr(e,t,s){if(!e)return"SH33TJSERR0";if(s.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(s.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var n="";if(s.biff>8)switch(e[a[0]][0]){case 357:return n=-1==a[1]?"#REF":e.SheetNames[a[1]],a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 358:return null!=s.SID?e.SheetNames[s.SID]:"SH33TJSSAME"+e[a[0]][0];default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return n=-1==a[1]?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[a[0]][0][3]?(n=-1==a[1]?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function Ar(e,t,s){var a=Tr(e,t,s);return"#REF"==a?a:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(a,s)}function Pr(e,t,s,a,n){var r,l,i,o,c=n&&n.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,m=0,p="";if(!e[0]||!e[0][0])return"";for(var f=-1,x="",v=0,g=e[0].length;v<g;++v){var y=e[0][v];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(r=u.pop(),l=u.pop(),f>=0){switch(e[0][f][1][0]){case 0:x=Ve(" ",e[0][f][1][1]);break;case 1:x=Ve("\r",e[0][f][1][1]);break;default:if(x="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}l+=x,f=-1}u.push(l+Er[y[0]]+r);break;case"PtgIsect":r=u.pop(),l=u.pop(),u.push(l+" "+r);break;case"PtgUnion":r=u.pop(),l=u.pop(),u.push(l+","+r);break;case"PtgRange":r=u.pop(),l=u.pop(),u.push(l+":"+r);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":i=js(y[1][1],d,n),u.push(ws(i,c));break;case"PtgRefN":i=s?js(y[1][1],s,n):y[1][1],u.push(ws(i,c));break;case"PtgRef3d":h=y[1][1],i=js(y[1][2],d,n);p=Ar(a,h,n);u.push(p+"!"+ws(i,c));break;case"PtgFunc":case"PtgFuncVar":var j=y[1][0],b=y[1][1];j||(j=0);var w=0==(j&=127)?[]:u.slice(-j);u.length-=j,"User"===b&&(b=w.shift()),u.push(b+"("+w.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":o=bs(y[1][1],s?{s:s}:d,n),u.push(Ns(o,n));break;case"PtgArea":o=bs(y[1][1],d,n),u.push(Ns(o,n));break;case"PtgArea3d":h=y[1][1],o=y[1][2],p=Ar(a,h,n),u.push(p+"!"+Ns(o,n));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":m=y[1][2];var N=(a.names||[])[m-1]||(a[0]||[])[m],_=N?N.Name:"SH33TJSNAME"+String(m);_&&"_xlfn."==_.slice(0,6)&&!n.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var k,S=y[1][1];if(m=y[1][2],!(n.biff<=5)){var C="";if(14849==((a[S]||[])[0]||[])[0]||(1025==((a[S]||[])[0]||[])[0]?a[S][m]&&a[S][m].itab>0&&(C=a.SheetNames[a[S][m].itab-1]+"!"):C=a.SheetNames[m-1]+"!"),a[S]&&a[S][m])C+=a[S][m].Name;else if(a[0]&&a[0][m])C+=a[0][m].Name;else{var E=(Tr(a,S,n)||"").split(";;");E[m-1]?C=E[m-1]:C+="SH33TJSERRX"}u.push(C);break}S<0&&(S=-S),a[S]&&(k=a[S][m]),k||(k={Name:"SH33TJSERRY"}),u.push(k.Name);break;case"PtgParen":var T="(",A=")";if(f>=0){switch(x="",e[0][f][1][0]){case 2:T=Ve(" ",e[0][f][1][1])+T;break;case 3:T=Ve("\r",e[0][f][1][1])+T;break;case 4:A=Ve(" ",e[0][f][1][1])+A;break;case 5:A=Ve("\r",e[0][f][1][1])+A;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}f=-1}u.push(T+u.pop()+A);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":i={c:y[1][1],r:y[1][0]};var P={c:s.c,r:s.r};if(a.sharedf[Ts(i)]){var D=a.sharedf[Ts(i)];u.push(Pr(D,d,P,a,n))}else{var R=!1;for(r=0;r!=a.arrayf.length;++r)if(l=a.arrayf[r],!(i.c<l[0].s.c||i.c>l[0].e.c)&&!(i.r<l[0].s.r||i.r>l[0].e.r)){u.push(Pr(l[1],d,P,a,n)),R=!0;break}R||u.push(y[1])}break;case"PtgArray":u.push("{"+Cr(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=v;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=n.biff&&f>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var O=!0;switch((y=e[0][f])[1][0]){case 4:O=!1;case 0:x=Ve(" ",y[1][1]);break;case 5:O=!1;case 1:x=Ve("\r",y[1][1]);break;default:if(x="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((O?x:"")+u.pop()+(O?"":x)),f=-1}}if(u.length>1&&n.WTF)throw new Error("bad formula stack");return u[0]}function Dr(e,t,s,a,n){var r=Qa(t,s,n),l=function(e){if(null==e){var t=vs(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return oa("number"==typeof e?e:0)}(e.v),i=vs(6);i.write_shift(2,33),i.write_shift(4,0);for(var o=vs(e.bf.length),c=0;c<e.bf.length;++c)o[c]=e.bf[c];return k([r,l,i,o])}function Rr(e,t,s){var a=e.read_shift(4),n=Sr(e,a,s),r=e.read_shift(4);return[n,r>0?kr(e,r,n,s):null]}var Or=Rr,Mr=Rr,Fr=Rr,Lr=Rr,Ir={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zr={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Br={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Ur(e){return("of:="+e.replace(ar,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function Vr(e){return e.replace(/\./,"!")}var Hr="undefined"!==typeof Map;function Wr(e,t,s){var a=0,n=e.length;if(s){if(Hr?s.has(t):Object.prototype.hasOwnProperty.call(s,t))for(var r=Hr?s.get(t):s[t];a<r.length;++a)if(e[r[a]].t===t)return e.Count++,r[a]}else for(;a<n;++a)if(e[a].t===t)return e.Count++,a;return e[n]={t:t},e.Count++,e.Unique++,s&&(Hr?(s.has(t)||s.set(t,[]),s.get(t).push(n)):(Object.prototype.hasOwnProperty.call(s,t)||(s[t]=[]),s[t].push(n))),n}function qr(e,t){var s={min:e+1,max:e+1},a=-1;return t.MDW&&(kn=t.MDW),null!=t.width?s.customWidth=1:null!=t.wpx?a=Cn(t.wpx):null!=t.wch&&(a=t.wch),a>-1?(s.width=En(a),s.customWidth=1):null!=t.width&&(s.width=t.width),t.hidden&&(s.hidden=!0),null!=t.level&&(s.outlineLevel=s.level=t.level),s}function Yr(e,t){if(e){var s=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(s=[1,1,1,1,.5,.5]),null==e.left&&(e.left=s[0]),null==e.right&&(e.right=s[1]),null==e.top&&(e.top=s[2]),null==e.bottom&&(e.bottom=s[3]),null==e.header&&(e.header=s[4]),null==e.footer&&(e.footer=s[5])}}function Gr(e,t,s){var a=s.revssf[null!=t.z?t.z:"General"],n=60,r=e.length;if(null==a&&s.ssf)for(;n<392;++n)if(null==s.ssf[n]){ve(t.z,n),s.ssf[n]=t.z,s.revssf[t.z]=a=n;break}for(n=0;n!=r;++n)if(e[n].numFmtId===a)return n;return e[r]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},r}function Kr(e,t,s){if(e&&e["!ref"]){var a=Ds(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+s+"): "+e["!ref"])}}var $r=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Xr=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Jr(e,t,s,a){if(e.c&&s["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var n="",r=e.t,l=e.v;if("z"!==e.t)switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=fa[e.v];break;case"d":a&&a.cellDates?n=ze(e.v,-1).toISOString():((e=Ue(e)).t="n",n=""+(e.v=Pe(ze(e.v)))),"undefined"===typeof e.z&&(e.z=L[14]);break;default:n=e.v}var i=ht("v",Ze(n)),o={r:t},c=Gr(a.cellXfs,e,a);switch(0!==c&&(o.s=c),e.t){case"n":case"z":break;case"d":o.t="d";break;case"b":o.t="b";break;case"e":o.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){i=ht("v",""+Wr(a.Strings,e.v,a.revStrings)),o.t="s";break}o.t="str"}if(e.t!=r&&(e.t=r,e.v=l),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;i=pt("f",Ze(e.f),d)+(null!=e.v?i:"")}return e.l&&s["!links"].push([t,e.l]),e.D&&(o.cm=1),pt("c",i,o)}function Qr(e,t,s,a){var n,r=[Ke,pt("worksheet",null,{xmlns:Tt[0],"xmlns:r":kt})],l=s.SheetNames[e],i="",o=s.Sheets[l];null==o&&(o={});var c=o["!ref"]||"A1",d=Ds(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Ps(d)}a||(a={}),o["!comments"]=[];var u=[];!function(e,t,s,a,n){var r=!1,l={},i=null;if("xlsx"!==a.bookType&&t.vbaraw){var o=t.SheetNames[s];try{t.Workbook&&(o=t.Workbook.Sheets[s].CodeName||o)}catch(d){}r=!0,l.codeName=ct(Ze(o))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),i=(i||"")+pt("outlinePr",null,c)}(r||i)&&(n[n.length]=pt("sheetPr",i,l))}(o,s,e,t,r),r[r.length]=pt("dimension",null,{ref:c}),r[r.length]=function(e,t,s,a){var n={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),pt("sheetViews",pt("sheetView",null,n),{})}(0,0,0,s),t.sheetFormat&&(r[r.length]=pt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=o["!cols"]&&o["!cols"].length>0&&(r[r.length]=function(e,t){for(var s,a=["<cols>"],n=0;n!=t.length;++n)(s=t[n])&&(a[a.length]=pt("col",null,qr(n,s)));return a[a.length]="</cols>",a.join("")}(0,o["!cols"])),r[n=r.length]="<sheetData/>",o["!links"]=[],null!=o["!ref"]&&(i=function(e,t){var s,a,n=[],r=[],l=Ds(e["!ref"]),i="",o="",c=[],d=0,u=0,h=e["!rows"],m=Array.isArray(e),p={r:o},f=-1;for(u=l.s.c;u<=l.e.c;++u)c[u]=Cs(u);for(d=l.s.r;d<=l.e.r;++d){for(r=[],o=ks(d),u=l.s.c;u<=l.e.c;++u){s=c[u]+o;var x=m?(e[d]||[])[u]:e[s];void 0!==x&&null!=(i=Jr(x,s,e,t))&&r.push(i)}(r.length>0||h&&h[d])&&(p={r:o},h&&h[d]&&((a=h[d]).hidden&&(p.hidden=1),f=-1,a.hpx?f=An(a.hpx):a.hpt&&(f=a.hpt),f>-1&&(p.ht=f,p.customHeight=1),a.level&&(p.outlineLevel=a.level)),n[n.length]=pt("row",r.join(""),p))}if(h)for(;d<h.length;++d)h&&h[d]&&(p={r:d+1},(a=h[d]).hidden&&(p.hidden=1),f=-1,a.hpx?f=An(a.hpx):a.hpt&&(f=a.hpt),f>-1&&(p.ht=f,p.customHeight=1),a.level&&(p.outlineLevel=a.level),n[n.length]=pt("row","",p));return n.join("")}(o,t,0,0),i.length>0&&(r[r.length]=i)),r.length>n+1&&(r[r.length]="</sheetData>",r[n]=r[n].replace("/>",">")),o["!protect"]&&(r[r.length]=function(e){var t={sheet:1};return $r.forEach(function(s){null!=e[s]&&e[s]&&(t[s]="1")}),Xr.forEach(function(s){null==e[s]||e[s]||(t[s]="0")}),e.password&&(t.password=wn(e.password).toString(16).toUpperCase()),pt("sheetProtection",null,t)}(o["!protect"])),null!=o["!autofilter"]&&(r[r.length]=function(e,t,s,a){var n="string"==typeof e.ref?e.ref:Ps(e.ref);s.Workbook||(s.Workbook={Sheets:[]}),s.Workbook.Names||(s.Workbook.Names=[]);var r=s.Workbook.Names,l=As(n);l.s.r==l.e.r&&(l.e.r=As(t["!ref"]).e.r,n=Ps(l));for(var i=0;i<r.length;++i){var o=r[i];if("_xlnm._FilterDatabase"==o.Name&&o.Sheet==a){o.Ref="'"+s.SheetNames[a]+"'!"+n;break}}return i==r.length&&r.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+s.SheetNames[a]+"'!"+n}),pt("autoFilter",null,{ref:n})}(o["!autofilter"],o,s,e)),null!=o["!merges"]&&o["!merges"].length>0&&(r[r.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',s=0;s!=e.length;++s)t+='<mergeCell ref="'+Ps(e[s])+'"/>';return t+"</mergeCells>"}(o["!merges"]));var h,m,p=-1,f=-1;return o["!links"].length>0&&(r[r.length]="<hyperlinks>",o["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(f=wa(a,-1,Ze(e[1].Target).replace(/#.*$/,""),ya.HLINK),h["r:id"]="rId"+f),(p=e[1].Target.indexOf("#"))>-1&&(h.location=Ze(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=Ze(e[1].Tooltip)),r[r.length]=pt("hyperlink",null,h))}),r[r.length]="</hyperlinks>"),delete o["!links"],null!=o["!margins"]&&(r[r.length]=(Yr(m=o["!margins"]),pt("pageMargins",null,m))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(r[r.length]=ht("ignoredErrors",pt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(f=wa(a,-1,"../drawings/drawing"+(e+1)+".xml",ya.DRAW),r[r.length]=pt("drawing",null,{"r:id":"rId"+f}),o["!drawing"]=u),o["!comments"].length>0&&(f=wa(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ya.VML),r[r.length]=pt("legacyDrawing",null,{"r:id":"rId"+f}),o["!legacy"]=f),r.length>1&&(r[r.length]="</worksheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Zr(e,t,s,a){var n=function(e,t,s){var a=vs(145),n=(s["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var r=320;n.hpx?r=20*An(n.hpx):n.hpt&&(r=20*n.hpt),a.write_shift(2,r),a.write_shift(1,0);var l=0;n.level&&(l|=n.level),n.hidden&&(l|=16),(n.hpx||n.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var i=0,o=a.l;a.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,m=d<<10;m<d+1<<10;++m)c.c=m,(Array.isArray(s)?(s[c.r]||[])[c.c]:s[Ts(c)])&&(u<0&&(u=m),h=m);u<0||(++i,a.write_shift(4,u),a.write_shift(4,h))}var p=a.l;return a.l=o,a.write_shift(4,i),a.l=p,a.length>a.l?a.slice(0,a.l):a}(a,s,t);(n.length>17||(t["!rows"]||[])[a])&&ys(e,0,n)}var el=ra,tl=la;function sl(e){return[Gs(e),ia(e),"n"]}var al=ra,nl=la;var rl=["left","right","top","bottom","header","footer"];function ll(e,t,s,a,n,r,l){if(void 0===t.v)return!1;var i="";switch(t.t){case"b":i=t.v?"1":"0";break;case"d":(t=Ue(t)).z=t.z||L[14],t.v=Pe(ze(t.v)),t.t="n";break;case"n":case"e":i=""+t.v;break;default:i=t.v}var o={r:s,c:a};switch(o.s=Gr(n.cellXfs,t,n),t.l&&r["!links"].push([Ts(o),t.l]),t.c&&r["!comments"].push([Ts(o),t.c]),t.t){case"s":case"str":return n.bookSST?(i=Wr(n.Strings,t.v,n.revStrings),o.t="s",o.v=i,l?ys(e,18,function(e,t,s){return null==s&&(s=vs(8)),Ks(t,s),s.write_shift(4,t.v),s}(0,o)):ys(e,7,function(e,t,s){return null==s&&(s=vs(12)),Ys(t,s),s.write_shift(4,t.v),s}(0,o))):(o.t="str",l?ys(e,17,function(e,t,s){return null==s&&(s=vs(8+4*e.v.length)),Ks(t,s),Bs(e.v,s),s.length>s.l?s.slice(0,s.l):s}(t,o)):ys(e,6,function(e,t,s){return null==s&&(s=vs(12+4*e.v.length)),Ys(t,s),Bs(e.v,s),s.length>s.l?s.slice(0,s.l):s}(t,o))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?l?ys(e,13,function(e,t,s){return null==s&&(s=vs(8)),Ks(t,s),aa(e.v,s),s}(t,o)):ys(e,2,function(e,t,s){return null==s&&(s=vs(12)),Ys(t,s),aa(e.v,s),s}(t,o)):l?ys(e,16,function(e,t,s){return null==s&&(s=vs(12)),Ks(t,s),oa(e.v,s),s}(t,o)):ys(e,5,function(e,t,s){return null==s&&(s=vs(16)),Ys(t,s),oa(e.v,s),s}(t,o)),!0;case"b":return o.t="b",l?ys(e,15,function(e,t,s){return null==s&&(s=vs(5)),Ks(t,s),s.write_shift(1,e.v?1:0),s}(t,o)):ys(e,4,function(e,t,s){return null==s&&(s=vs(9)),Ys(t,s),s.write_shift(1,e.v?1:0),s}(t,o)),!0;case"e":return o.t="e",l?ys(e,14,function(e,t,s){return null==s&&(s=vs(8)),Ks(t,s),s.write_shift(1,e.v),s.write_shift(2,0),s.write_shift(1,0),s}(t,o)):ys(e,3,function(e,t,s){return null==s&&(s=vs(9)),Ys(t,s),s.write_shift(1,e.v),s}(t,o)),!0}return l?ys(e,12,function(e,t,s){return null==s&&(s=vs(4)),Ks(t,s)}(0,o)):ys(e,1,function(e,t,s){return null==s&&(s=vs(8)),Ys(t,s)}(0,o)),!0}function il(e,t){var s,a;t&&t["!merges"]&&(ys(e,177,(s=t["!merges"].length,null==a&&(a=vs(4)),a.write_shift(4,s),a)),t["!merges"].forEach(function(t){ys(e,176,nl(t))}),ys(e,178))}function ol(e,t){t&&t["!cols"]&&(ys(e,390),t["!cols"].forEach(function(t,s){t&&ys(e,60,function(e,t,s){null==s&&(s=vs(18));var a=qr(e,t);s.write_shift(-4,e),s.write_shift(-4,e),s.write_shift(4,256*(a.width||10)),s.write_shift(4,0);var n=0;return t.hidden&&(n|=1),"number"==typeof a.width&&(n|=2),t.level&&(n|=t.level<<8),s.write_shift(2,n),s}(s,t))}),ys(e,391))}function cl(e,t){t&&t["!ref"]&&(ys(e,648),ys(e,649,function(e){var t=vs(24);return t.write_shift(4,4),t.write_shift(4,1),la(e,t),t}(Ds(t["!ref"]))),ys(e,650))}function dl(e,t,s){t["!links"].forEach(function(t){if(t[1].Target){var a=wa(s,-1,t[1].Target.replace(/#.*$/,""),ya.HLINK);ys(e,494,function(e,t){var s=vs(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));la({s:Es(e[0]),e:Es(e[0])},s),ta("rId"+t,s);var a=e[1].Target.indexOf("#");return Bs((-1==a?"":e[1].Target.slice(a+1))||"",s),Bs(e[1].Tooltip||"",s),Bs("",s),s.slice(0,s.l)}(t,a))}}),delete t["!links"]}function ul(e,t,s){ys(e,133),ys(e,137,function(e,t,s){null==s&&(s=vs(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,100),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(4,0),s}(0,s)),ys(e,138),ys(e,134)}function hl(e,t){var s,a;t["!protect"]&&ys(e,535,(s=t["!protect"],null==a&&(a=vs(66)),a.write_shift(2,s.password?wn(s.password):0),a.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?a.write_shift(4,null==s[e[0]]||s[e[0]]?0:1):a.write_shift(4,null!=s[e[0]]&&s[e[0]]?0:1)}),a))}function ml(e,t,s,a){var n=gs(),r=s.SheetNames[e],l=s.Sheets[r]||{},i=r;try{s&&s.Workbook&&(i=s.Workbook.Sheets[e].CodeName||i)}catch(u){}var o,c,d=Ds(l["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],ys(n,129),(s.vbaraw||l["!outline"])&&ys(n,147,function(e,t,s){null==s&&(s=vs(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),s.write_shift(1,a);for(var n=1;n<3;++n)s.write_shift(1,0);return ca({auto:1},s),s.write_shift(-4,-1),s.write_shift(-4,-1),Xs(e,s),s.slice(0,s.l)}(i,l["!outline"])),ys(n,148,tl(d)),ul(n,0,s.Workbook),ol(n,l),function(e,t,s,a){var n,r=Ds(t["!ref"]||"A1"),l="",i=[];ys(e,145);var o=Array.isArray(t),c=r.e.r;t["!rows"]&&(c=Math.max(r.e.r,t["!rows"].length-1));for(var d=r.s.r;d<=c;++d){l=ks(d),Zr(e,t,r,d);var u=!1;if(d<=r.e.r)for(var h=r.s.c;h<=r.e.c;++h){d===r.s.r&&(i[h]=Cs(h)),n=i[h]+l;var m=o?(t[d]||[])[h]:t[n];u=!!m&&ll(e,m,d,h,a,t,u)}}ys(e,146)}(n,l,0,t),hl(n,l),function(e,t,s,a){if(t["!autofilter"]){var n=t["!autofilter"],r="string"===typeof n.ref?n.ref:Ps(n.ref);s.Workbook||(s.Workbook={Sheets:[]}),s.Workbook.Names||(s.Workbook.Names=[]);var l=s.Workbook.Names,i=As(r);i.s.r==i.e.r&&(i.e.r=As(t["!ref"]).e.r,r=Ps(i));for(var o=0;o<l.length;++o){var c=l[o];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==a){c.Ref="'"+s.SheetNames[a]+"'!"+r;break}}o==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+s.SheetNames[a]+"'!"+r}),ys(e,161,la(Ds(r))),ys(e,162)}}(n,l,s,e),il(n,l),dl(n,l,a),l["!margins"]&&ys(n,476,(o=l["!margins"],null==c&&(c=vs(48)),Yr(o),rl.forEach(function(e){oa(o[e],c)}),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||cl(n,l),function(e,t,s,a){if(t["!comments"].length>0){var n=wa(a,-1,"../drawings/vmlDrawing"+(s+1)+".vml",ya.VML);ys(e,551,ta("rId"+n)),t["!legacy"]=n}}(n,l,e,a),ys(n,130),n.end()}var pl=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var fl="][*?/\\".split("");function xl(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var s=!0;return fl.forEach(function(a){if(-1!=e.indexOf(a)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");s=!1}}),s}function vl(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,s){e.forEach(function(a,n){xl(a);for(var r=0;r<n;++r)if(a==e[r])throw new Error("Duplicate Sheet Name: "+a);if(s){var l=t&&t[n]&&t[n].CodeName||a;if(95==l.charCodeAt(0)&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}(e.SheetNames,t,!!e.vbaraw);for(var s=0;s<e.SheetNames.length;++s)Kr(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function gl(e){var t=[Ke];t[t.length]=pt("workbook",null,{xmlns:Tt[0],"xmlns:r":kt});var s=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(pl.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(a[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=pt("workbookPr",null,a);var n=e.Workbook&&e.Workbook.Sheets||[],r=0;if(n&&n[0]&&n[0].Hidden){for(t[t.length]="<bookViews>",r=0;r!=e.SheetNames.length&&n[r]&&n[r].Hidden;++r);r==e.SheetNames.length&&(r=0),t[t.length]='<workbookView firstSheet="'+r+'" activeTab="'+r+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",r=0;r!=e.SheetNames.length;++r){var l={name:Ze(e.SheetNames[r].slice(0,31))};if(l.sheetId=""+(r+1),l["r:id"]="rId"+(r+1),n[r])switch(n[r].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden"}t[t.length]=pt("sheet",null,l)}return t[t.length]="</sheets>",s&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var s={name:e.Name};e.Comment&&(s.comment=e.Comment),null!=e.Sheet&&(s.localSheetId=""+e.Sheet),e.Hidden&&(s.hidden="1"),e.Ref&&(t[t.length]=pt("definedName",Ze(e.Ref),s))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function yl(e,t){return t||(t=vs(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ta(e.strRelID,t),Bs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function jl(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var s,a,n=t.Workbook.Sheets,r=0,l=-1,i=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==l?l=r:1==n[r].Hidden&&-1==i&&(i=r);if(!(i>l))ys(e,135),ys(e,158,(s=l,a||(a=vs(29)),a.write_shift(-4,0),a.write_shift(-4,460),a.write_shift(4,28800),a.write_shift(4,17600),a.write_shift(4,500),a.write_shift(4,s),a.write_shift(4,s),a.write_shift(1,120),a.length>a.l?a.slice(0,a.l):a)),ys(e,136)}}function bl(e,t){var s=gs();return ys(s,131),ys(s,128,function(e,t){t||(t=vs(127));for(var s=0;4!=s;++s)t.write_shift(4,0);return Bs("SheetJS",t),Bs(a.version,t),Bs(a.version,t),Bs("7262",t),t.length>t.l?t.slice(0,t.l):t}()),ys(s,153,function(e,t){t||(t=vs(72));var s=0;return e&&e.filterPrivacy&&(s|=8),t.write_shift(4,s),t.write_shift(4,0),Xs(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),jl(s,e),function(e,t){ys(e,143);for(var s=0;s!=t.SheetNames.length;++s)ys(e,156,yl({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[s]&&t.Workbook.Sheets[s].Hidden||0,iTabID:s+1,strRelID:"rId"+(s+1),name:t.SheetNames[s]}));ys(e,144)}(s,e),ys(s,132),s.end()}function wl(e,t,s,a,n){return(".bin"===t.slice(-4)?ml:Qr)(e,s,a,n)}function Nl(e,t,s){return(".bin"===t.slice(-4)?er:Jn)(e,s)}function _l(e,t){var s=[];return e.Props&&s.push(function(e,t){var s=[];return Se(Ra).map(function(e){for(var t=0;t<Sa.length;++t)if(Sa[t][1]==e)return Sa[t];for(t=0;t<Ta.length;++t)if(Ta[t][1]==e)return Ta[t];throw e}).forEach(function(a){if(null!=e[a[1]]){var n=t&&t.Props&&null!=t.Props[a[1]]?t.Props[a[1]]:e[a[1]];"date"===a[2]&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof n?n=String(n):!0===n||!1===n?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),s.push(ht(Ra[a[1]]||a[1],n))}}),pt("DocumentProperties",s.join(""),{xmlns:At})}(e.Props,t)),e.Custprops&&s.push(function(e,t){var s=["Worksheets","SheetNames"],a="CustomDocumentProperties",n=[];return e&&Se(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var a=0;a<Sa.length;++a)if(t==Sa[a][1])return;for(a=0;a<Ta.length;++a)if(t==Ta[a][1])return;for(a=0;a<s.length;++a)if(t==s[a])return;var r=e[t],l="string";"number"==typeof r?(l="float",r=String(r)):!0===r||!1===r?(l="boolean",r=r?"1":"0"):r=String(r),n.push(pt(et(t),r,{"dt:dt":l}))}}),t&&Se(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&(!e||!Object.prototype.hasOwnProperty.call(e,s))){var a=t[s],r="string";"number"==typeof a?(r="float",a=String(a)):!0===a||!1===a?(r="boolean",a=a?"1":"0"):a instanceof Date?(r="dateTime.tz",a=a.toISOString()):a=String(a),n.push(pt(et(s),a,{"dt:dt":r}))}}),"<"+a+' xmlns="'+At+'">'+n.join("")+"</"+a+">"}(e.Props,e.Custprops)),s.join("")}function kl(e){return pt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+nr(e.Ref,{r:0,c:0})})}function Sl(e,t,s,a,n,r,l){if(!e||void 0==e.v&&void 0==e.f)return"";var i={};if(e.f&&(i["ss:Formula"]="="+Ze(nr(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var o=Es(e.F.slice(t.length+1));i["ss:ArrayRange"]="RC:R"+(o.r==l.r?"":"["+(o.r-l.r)+"]")+"C"+(o.c==l.c?"":"["+(o.c-l.c)+"]")}if(e.l&&e.l.Target&&(i["ss:HRef"]=Ze(e.l.Target),e.l.Tooltip&&(i["x:HRefScreenTip"]=Ze(e.l.Tooltip))),s["!merges"])for(var c=s["!merges"],d=0;d!=c.length;++d)c[d].s.c==l.c&&c[d].s.r==l.r&&(c[d].e.c>c[d].s.c&&(i["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(i["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=fa[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||L[14]);break;case"s":u="String",h=((e.v||"")+"").replace(Je,function(e){return Xe[e]}).replace(tt,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var m=Gr(a.cellXfs,e,a);i["ss:StyleID"]="s"+(21+m),i["ss:Index"]=l.c+1;var p=null!=e.v?h:"",f="z"==e.t?"":'<Data ss:Type="'+u+'">'+p+"</Data>";return(e.c||[]).length>0&&(f+=e.c.map(function(e){var t=pt("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return pt("Comment",t,{"ss:Author":e.a})}).join("")),pt("Cell",f,i)}function Cl(e,t){var s='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Pn(t.hpt)),t.hpx&&(s+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(s+=' ss:Hidden="1"')),s+">"}function El(e,t,s){var a=[],n=s.SheetNames[e],r=s.Sheets[n],l=r?function(e,t,s,a){if(!e)return"";if(!((a||{}).Workbook||{}).Names)return"";for(var n=a.Workbook.Names,r=[],l=0;l<n.length;++l){var i=n[l];i.Sheet==s&&(i.Name.match(/^_xlfn\./)||r.push(kl(i)))}return r.join("")}(r,0,e,s):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=r?function(e,t){if(!e["!ref"])return"";var s=Ds(e["!ref"]),a=e["!merges"]||[],n=0,r=[];e["!cols"]&&e["!cols"].forEach(function(e,t){Tn(e);var s=!!e.width,a=qr(t,e),n={"ss:Index":t+1};s&&(n["ss:Width"]=Sn(a.width)),e.hidden&&(n["ss:Hidden"]="1"),r.push(pt("Column",null,n))});for(var l=Array.isArray(e),i=s.s.r;i<=s.e.r;++i){for(var o=[Cl(i,(e["!rows"]||[])[i])],c=s.s.c;c<=s.e.c;++c){var d=!1;for(n=0;n!=a.length;++n)if(!(a[n].s.c>c)&&!(a[n].s.r>i)&&!(a[n].e.c<c)&&!(a[n].e.r<i)){a[n].s.c==c&&a[n].s.r==i||(d=!0);break}if(!d){var u={r:i,c:c},h=Ts(u),m=l?(e[i]||[])[c]:e[h];o.push(Sl(m,h,e,t,0,0,u))}}o.push("</Row>"),o.length>2&&r.push(o.join(""))}return r.join("")}(r,t):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(function(e,t,s,a){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(pt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(pt("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(pt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[s])if(a.Workbook.Sheets[s].Hidden)n.push(pt("Visible",1==a.Workbook.Sheets[s].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var r=0;r<s&&(!a.Workbook.Sheets[r]||a.Workbook.Sheets[r].Hidden);++r);r==s&&n.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(ht("ProtectContents","True")),e["!protect"].objects&&n.push(ht("ProtectObjects","True")),e["!protect"].scenarios&&n.push(ht("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||n.push(ht("EnableSelection","UnlockedCells")):n.push(ht("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&n.push("<"+t[1]+"/>")})),0==n.length?"":pt("WorksheetOptions",n.join(""),{xmlns:Pt})}(r,0,e,s)),a.join("")}function Tl(e,t){t||(t={}),e.SSF||(e.SSF=Ue(L)),e.SSF&&(ye(),ge(e.SSF),t.revssf=Te(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Gr(t.cellXfs,{},{revssf:{General:0}}));var s=[];s.push(_l(e,t)),s.push(""),s.push(""),s.push("");for(var a=0;a<e.SheetNames.length;++a)s.push(pt("Worksheet",El(a,t,e),{"ss:Name":Ze(e.SheetNames[a])}));return s[2]=function(e,t){var s=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var a=[];a.push(pt("NumberFormat",null,{"ss:Format":Ze(L[e.numFmtId])}));var n={"ss:ID":"s"+(21+t)};s.push(pt("Style",a.join(""),n))}),pt("Styles",s.join(""))}(0,t),s[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,s=[],a=0;a<t.length;++a){var n=t[a];null==n.Sheet&&(n.Name.match(/^_xlfn\./)||s.push(kl(n)))}return pt("Names",s.join(""))}(e),Ke+pt("Workbook",s.join(""),{xmlns:Dt,"xmlns:o":At,"xmlns:x":Pt,"xmlns:ss":Dt,"xmlns:dt":Rt,"xmlns:html":Ft})}var Al="e0859ff2f94f6810ab9108002b27b3d9",Pl="02d5cdd59c2e1b10939708002b2cf9ae",Dl="05d5cdd59c2e1b10939708002b2cf9ae";function Rl(e,t){var s=t||{},a=we.utils.cfb_new({root:"R"}),n="/Workbook";switch(s.bookType||"xls"){case"xls":s.bookType="biff8";case"xla":s.bookType||(s.bookType="xla");case"biff8":n="/Workbook",s.biff=8;break;case"biff5":n="/Book",s.biff=5;break;default:throw new Error("invalid type "+s.bookType+" for XLS CFB")}return we.utils.cfb_add(a,n,Wl(e,s)),8==s.biff&&(e.Props||e.Custprops)&&function(e,t){var s,a=[],n=[],r=[],l=0,i=Ce(ua,"n"),o=Ce(ha,"n");if(e.Props)for(s=Se(e.Props),l=0;l<s.length;++l)(Object.prototype.hasOwnProperty.call(i,s[l])?a:Object.prototype.hasOwnProperty.call(o,s[l])?n:r).push([s[l],e.Props[s[l]]]);if(e.Custprops)for(s=Se(e.Custprops),l=0;l<s.length;++l)Object.prototype.hasOwnProperty.call(e.Props||{},s[l])||(Object.prototype.hasOwnProperty.call(i,s[l])?a:Object.prototype.hasOwnProperty.call(o,s[l])?n:r).push([s[l],e.Custprops[s[l]]]);var c=[];for(l=0;l<r.length;++l)Ma.indexOf(r[l][0])>-1||Aa.indexOf(r[l][0])>-1||null!=r[l][1]&&c.push(r[l]);n.length&&we.utils.cfb_add(t,"/\x05SummaryInformation",Ia(n,Al,o,ha)),(a.length||c.length)&&we.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Ia(a,Pl,i,ua,c.length?c:null,Dl))}(e,a),8==s.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(s,a){if(0!=a){var n=s.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==n.slice(-1)&&we.utils.cfb_add(e,n,t.FileIndex[a].content)}})}(a,we.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),a}var Ol={0:{f:function(e,t){var s={},a=e.l+t;s.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var r=e.read_shift(1);return e.l=a,7&r&&(s.level=7&r),16&r&&(s.hidden=!0),32&r&&(s.hpt=n/20),s}},1:{f:function(e){return[qs(e)]}},2:{f:function(e){return[qs(e),sa(e),"n"]}},3:{f:function(e){return[qs(e),e.read_shift(1),"e"]}},4:{f:function(e){return[qs(e),e.read_shift(1),"b"]}},5:{f:function(e){return[qs(e),ia(e),"n"]}},6:{f:function(e){return[qs(e),zs(e),"str"]}},7:{f:function(e){return[qs(e),e.read_shift(4),"s"]}},8:{f:function(e,t,s){var a=e.l+t,n=qs(e);n.r=s["!row"];var r=[n,zs(e),"str"];if(s.cellFormula){e.l+=2;var l=Mr(e,a-e.l,s);r[3]=Pr(l,0,n,s.supbooks,s)}else e.l=a;return r}},9:{f:function(e,t,s){var a=e.l+t,n=qs(e);n.r=s["!row"];var r=[n,ia(e),"n"];if(s.cellFormula){e.l+=2;var l=Mr(e,a-e.l,s);r[3]=Pr(l,0,n,s.supbooks,s)}else e.l=a;return r}},10:{f:function(e,t,s){var a=e.l+t,n=qs(e);n.r=s["!row"];var r=[n,e.read_shift(1),"b"];if(s.cellFormula){e.l+=2;var l=Mr(e,a-e.l,s);r[3]=Pr(l,0,n,s.supbooks,s)}else e.l=a;return r}},11:{f:function(e,t,s){var a=e.l+t,n=qs(e);n.r=s["!row"];var r=[n,e.read_shift(1),"e"];if(s.cellFormula){e.l+=2;var l=Mr(e,a-e.l,s);r[3]=Pr(l,0,n,s.supbooks,s)}else e.l=a;return r}},12:{f:function(e){return[Gs(e)]}},13:{f:function(e){return[Gs(e),sa(e),"n"]}},14:{f:function(e){return[Gs(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Gs(e),e.read_shift(1),"b"]}},16:{f:sl},17:{f:function(e){return[Gs(e),zs(e),"str"]}},18:{f:function(e){return[Gs(e),e.read_shift(4),"s"]}},19:{f:Vs},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,s){var a=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),r=Zs(e),l=Fr(e,0,s),i=Js(e);e.l=a;var o={Name:r,Ptg:l};return n<268435455&&(o.Sheet=n),i&&(o.Comment=i),o}},40:{},42:{},43:{f:function(e,t,s){var a={};a.sz=e.read_shift(2)/20;var n=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1),700===e.read_shift(2)&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript"}var r=e.read_shift(1);0!=r&&(a.underline=r);var l=e.read_shift(1);l>0&&(a.family=l);var i=e.read_shift(1);switch(i>0&&(a.charset=i),e.l++,a.color=function(e){var t={},s=e.read_shift(1)>>>1,a=e.read_shift(1),n=e.read_shift(2,"i"),r=e.read_shift(1),l=e.read_shift(1),i=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=a;var o=pa[a];o&&(t.rgb=_n(o));break;case 2:t.rgb=_n([r,l,i]);break;case 3:t.theme=a}return 0!=n&&(t.tint=n>0?n/32767:n/32768),t}(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor"}return a.name=zs(e),a}},44:{f:function(e,t){return[e.read_shift(2),zs(e)]}},45:{f:Ln},46:{f:Un},47:{f:function(e,t){var s=e.l+t,a=e.read_shift(2),n=e.read_shift(2);return e.l=s,{ixfe:a,numFmtId:n}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],s=e.read_shift(4);s-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:dn},62:{f:function(e){return[qs(e),Vs(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var s={};s.r=e.read_shift(4),s.c=e.read_shift(4),t.r=Ts(s);var a=e.read_shift(1);return 2&a&&(t.l="1"),8&a&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var s={},a=e[e.l];return++e.l,s.above=!(64&a),s.left=!(128&a),e.l+=18,s.name=$s(e,t-19),s}},148:{f:el,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var s={},a=e.read_shift(4);s.defaultThemeVersion=e.read_shift(4);var n=t>8?zs(e):"";return n.length>0&&(s.CodeName=n),s.autoCompressPictures=!!(65536&a),s.backupFile=!!(64&a),s.checkCompatibility=!!(4096&a),s.date1904=!!(1&a),s.filterPrivacy=!!(8&a),s.hidePivotFieldList=!!(1024&a),s.promptedSolutions=!!(16&a),s.publishItems=!!(2048&a),s.refreshAllConnections=!!(262144&a),s.saveExternalLinkValues=!!(128&a),s.showBorderUnselectedTables=!!(4&a),s.showInkAnnotation=!!(32&a),s.showObjects=["all","placeholders","none"][a>>13&3],s.showPivotChartFilter=!!(32768&a),s.updateLinks=["userSet","never","always"][a>>8&3],s}},154:{},155:{},156:{f:function(e,t){var s={};return s.Hidden=e.read_shift(4),s.iTabID=e.read_shift(4),s.strRelID=ea(e,t-8),s.name=zs(e),s}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:ra},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:al},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:zs(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ea},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ln},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,s){var a=e.l+t,n=na(e),r=e.read_shift(1),l=[n];if(l[2]=r,s.cellFormula){var i=Or(e,a-e.l,s);l[1]=i}else e.l=a;return l}},427:{f:function(e,t,s){var a=e.l+t,n=[ra(e,16)];if(s.cellFormula){var r=Lr(e,a-e.l,s);n[1]=r,e.l=a}else e.l=a;return n}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return rl.forEach(function(s){t[s]=ia(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var s=e.l+t,a=ra(e,16),n=Js(e),r=zs(e),l=zs(e),i=zs(e);e.l=s;var o={rfx:a,relId:n,loc:r,display:i};return l&&(o.Tooltip=l),o}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ea},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Zn},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var s=ra(e,16);return t.rfx=s.s,t.ref=Ts(s.s),e.l+=16,t}},636:{T:-1},637:{f:Hs},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:zs(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ml(e,t,s,a){var n=t;if(!isNaN(n)){var r=a||(s||[]).length||0,l=e.next(4);l.write_shift(2,n),l.write_shift(2,r),r>0&&as(s)&&e.push(s)}}function Fl(e,t,s){return e||(e=vs(7)),e.write_shift(2,t),e.write_shift(2,s),e.write_shift(2,0),e.write_shift(1,0),e}function Ll(e,t,s,a){if(null!=t.v)switch(t.t){case"d":case"n":var n="d"==t.t?Pe(ze(t.v)):t.v;return void(n==(0|n)&&n>=0&&n<65536?Ml(e,2,function(e,t,s){var a=vs(9);return Fl(a,e,t),a.write_shift(2,s),a}(s,a,n)):Ml(e,3,function(e,t,s){var a=vs(15);return Fl(a,e,t),a.write_shift(8,s,"f"),a}(s,a,n)));case"b":case"e":return void Ml(e,5,function(e,t,s,a){var n=vs(9);return Fl(n,e,t),Ha(s,a||"b",n),n}(s,a,t.v,t.t));case"s":case"str":return void Ml(e,4,function(e,t,s){var a=vs(8+2*s.length);return Fl(a,e,t),a.write_shift(1,s.length),a.write_shift(s.length,s,"sbcs"),a.l<a.length?a.slice(0,a.l):a}(s,a,(t.v||"").slice(0,255)))}Ml(e,1,Fl(null,s,a))}function Il(e,t){var s=t||{};for(var a=gs(),n=0,r=0;r<e.SheetNames.length;++r)e.SheetNames[r]==s.sheet&&(n=r);if(0==n&&s.sheet&&e.SheetNames[0]!=s.sheet)throw new Error("Sheet not found: "+s.sheet);return Ml(a,4==s.biff?1033:3==s.biff?521:9,sn(0,16,s)),function(e,t,s,a){var n,r=Array.isArray(t),l=Ds(t["!ref"]||"A1"),i="",o=[];if(l.e.c>255||l.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),n=Ps(l)}for(var c=l.s.r;c<=l.e.r;++c){i=ks(c);for(var d=l.s.c;d<=l.e.c;++d){c===l.s.r&&(o[d]=Cs(d)),n=o[d]+i;var u=r?(t[c]||[])[d]:t[n];u&&Ll(e,u,c,d)}}}(a,e.Sheets[e.SheetNames[n]],0,s),Ml(a,10),a.end()}function zl(e,t,s){Ml(e,49,function(e,t){var s=e.name||"Arial",a=t&&5==t.biff,n=vs(a?15+s.length:16+2*s.length);return n.write_shift(2,20*(e.sz||12)),n.write_shift(4,0),n.write_shift(2,400),n.write_shift(4,0),n.write_shift(2,0),n.write_shift(1,s.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*s.length,s,a?"sbcs":"utf16le"),n}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},s))}function Bl(e,t){if(t){var s=0;t.forEach(function(t,a){++s<=256&&t&&Ml(e,125,function(e,t){var s=vs(12);s.write_shift(2,t),s.write_shift(2,t),s.write_shift(2,256*e.width),s.write_shift(2,0);var a=0;return e.hidden&&(a|=1),s.write_shift(1,a),a=e.level||0,s.write_shift(1,a),s.write_shift(2,0),s}(qr(a,t),a))})}}function Ul(e,t,s,a,n){var r=16+Gr(n.cellXfs,t,n);if(null!=t.v||t.bf)if(t.bf)Ml(e,6,Dr(t,s,a,0,r));else switch(t.t){case"d":case"n":Ml(e,515,function(e,t,s,a){var n=vs(14);return Qa(e,t,a,n),oa(s,n),n}(s,a,"d"==t.t?Pe(ze(t.v)):t.v,r));break;case"b":case"e":Ml(e,517,function(e,t,s,a,n,r){var l=vs(8);return Qa(e,t,a,l),Ha(s,r,l),l}(s,a,t.v,r,0,t.t));break;case"s":case"str":if(n.bookSST)Ml(e,253,function(e,t,s,a){var n=vs(10);return Qa(e,t,a,n),n.write_shift(4,s),n}(s,a,Wr(n.Strings,t.v,n.revStrings),r));else Ml(e,516,function(e,t,s,a,n){var r=!n||8==n.biff,l=vs(+r+8+(1+r)*s.length);return Qa(e,t,a,l),l.write_shift(2,s.length),r&&l.write_shift(1,1),l.write_shift((1+r)*s.length,s,r?"utf16le":"sbcs"),l}(s,a,(t.v||"").slice(0,255),r,n));break;default:Ml(e,513,Qa(s,a,r))}else Ml(e,513,Qa(s,a,r))}function Vl(e,t,s){var a,n=gs(),r=s.SheetNames[e],l=s.Sheets[r]||{},i=(s||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(l),d=8==t.biff,u="",h=[],m=Ds(l["!ref"]||"A1"),p=d?65536:16384;if(m.e.c>255||m.e.r>=p){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,p-1)}Ml(n,2057,sn(0,16,t)),Ml(n,13,Va(1)),Ml(n,12,Va(100)),Ml(n,15,Ba(!0)),Ml(n,17,Ba(!1)),Ml(n,16,oa(.001)),Ml(n,95,Ba(!0)),Ml(n,42,Ba(!1)),Ml(n,43,Ba(!1)),Ml(n,130,Va(1)),Ml(n,128,function(e){var t=vs(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),Ml(n,131,Ba(!1)),Ml(n,132,Ba(!1)),d&&Bl(n,l["!cols"]),Ml(n,512,function(e,t){var s=8!=t.biff&&t.biff?2:4,a=vs(2*s+6);return a.write_shift(s,e.s.r),a.write_shift(s,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}(m,t)),d&&(l["!links"]=[]);for(var f=m.s.r;f<=m.e.r;++f){u=ks(f);for(var x=m.s.c;x<=m.e.c;++x){f===m.s.r&&(h[x]=Cs(x)),a=h[x]+u;var v=c?(l[f]||[])[x]:l[a];v&&(Ul(n,v,f,x,t),d&&v.l&&l["!links"].push([a,v.l]))}}var g=o.CodeName||o.name||r;return d&&Ml(n,574,function(e){var t=vs(18),s=1718;return e&&e.RTL&&(s|=64),t.write_shift(2,s),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((i.Views||[])[0])),d&&(l["!merges"]||[]).length&&Ml(n,229,function(e){var t=vs(2+8*e.length);t.write_shift(2,e.length);for(var s=0;s<e.length;++s)tn(e[s],t);return t}(l["!merges"])),d&&function(e,t){for(var s=0;s<t["!links"].length;++s){var a=t["!links"][s];Ml(e,440,on(a)),a[1].Tooltip&&Ml(e,2048,cn(a))}delete t["!links"]}(n,l),Ml(n,442,$a(g)),d&&function(e,t){var s=vs(19);s.write_shift(4,2151),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,3),s.write_shift(1,1),s.write_shift(4,0),Ml(e,2151,s),(s=vs(39)).write_shift(4,2152),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,3),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(2,1),s.write_shift(4,4),s.write_shift(2,0),tn(Ds(t["!ref"]||"A1"),s),s.write_shift(4,4),Ml(e,2152,s)}(n,l),Ml(n,10),n.end()}function Hl(e,t,s){var a=gs(),n=(e||{}).Workbook||{},r=n.Sheets||[],l=n.WBProps||{},i=8==s.biff,o=5==s.biff;(Ml(a,2057,sn(0,5,s)),"xla"==s.bookType&&Ml(a,135),Ml(a,225,i?Va(1200):null),Ml(a,193,function(e,t){t||(t=vs(e));for(var s=0;s<e;++s)t.write_shift(1,0);return t}(2)),o&&Ml(a,191),o&&Ml(a,192),Ml(a,226),Ml(a,92,function(e,t){var s=!t||8==t.biff,a=vs(s?112:54);for(a.write_shift(8==t.biff?2:1,7),s&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(s?0:536870912));a.l<a.length;)a.write_shift(1,s?0:32);return a}(0,s)),Ml(a,66,Va(i?1200:1252)),i&&Ml(a,353,Va(0)),i&&Ml(a,448),Ml(a,317,function(e){for(var t=vs(2*e),s=0;s<e;++s)t.write_shift(2,s+1);return t}(e.SheetNames.length)),i&&e.vbaraw&&Ml(a,211),i&&e.vbaraw)&&Ml(a,442,$a(l.CodeName||"ThisWorkbook"));Ml(a,156,Va(17)),Ml(a,25,Ba(!1)),Ml(a,18,Ba(!1)),Ml(a,19,Va(0)),i&&Ml(a,431,Ba(!1)),i&&Ml(a,444,Va(0)),Ml(a,61,function(){var e=vs(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),Ml(a,64,Ba(!1)),Ml(a,141,Va(0)),Ml(a,34,Ba("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&at(e.Workbook.WBProps.date1904)?"true":"false"}(e))),Ml(a,14,Ba(!0)),i&&Ml(a,439,Ba(!1)),Ml(a,218,Va(0)),zl(a,0,s),function(e,t,s){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)null!=t[n]&&Ml(e,1054,nn(n,t[n],s))})}(a,e.SSF,s),function(e,t){for(var s=0;s<16;++s)Ml(e,224,rn({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(s){Ml(e,224,rn(s,0,t))})}(a,s),i&&Ml(a,352,Ba(!1));var c,d=a.end(),u=gs();i&&Ml(u,140,(c||(c=vs(4)),c.write_shift(2,1),c.write_shift(2,1),c)),i&&s.Strings&&function(e,t,s,a){var n=a||(s||[]).length||0;if(n<=8224)return Ml(e,t,s,n);var r=t;if(!isNaN(r)){for(var l=s.parts||[],i=0,o=0,c=0;c+(l[i]||8224)<=8224;)c+=l[i]||8224,i++;var d=e.next(4);for(d.write_shift(2,r),d.write_shift(2,c),e.push(s.slice(o,o+c)),o+=c;o<n;){for((d=e.next(4)).write_shift(2,60),c=0;c+(l[i]||8224)<=8224;)c+=l[i]||8224,i++;d.write_shift(2,c),e.push(s.slice(o,o+c)),o+=c}}}(u,252,function(e){var t=vs(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var s=[],a=0;a<e.length;++a)s[a]=qa(e[a]);var n=k([t].concat(s));return n.parts=[t.length].concat(s.map(function(e){return e.length})),n}(s.Strings)),Ml(u,10);var h=u.end(),m=gs(),p=0,f=0;for(f=0;f<e.SheetNames.length;++f)p+=(i?12:11)+(i?2:1)*e.SheetNames[f].length;var x=d.length+p+h.length;for(f=0;f<e.SheetNames.length;++f){Ml(m,133,an({pos:x,hs:(r[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},s)),x+=t[f].length}var v=m.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var g=[];return d.length&&g.push(d),v.length&&g.push(v),h.length&&g.push(h),k(g)}function Wl(e,t){for(var s=0;s<=e.SheetNames.length;++s){var a=e.Sheets[e.SheetNames[s]];if(a&&a["!ref"])As(a["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[s]+"' extends beyond column IV (255).  Data may be lost.")}var n=t||{};switch(n.biff||2){case 8:case 5:return function(e,t){var s=t||{},a=[];e&&!e.SSF&&(e.SSF=Ue(L)),e&&e.SSF&&(ye(),ge(e.SSF),s.revssf=Te(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF),s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,ji(s),s.cellXfs=[],Gr(s.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)a[a.length]=Vl(n,s,e);return a.unshift(Hl(e,a,s)),k(a)}(e,t);case 4:case 3:case 2:return Il(e,t)}throw new Error("invalid type "+n.bookType+" for BIFF")}function ql(e,t,s,a){for(var n=e["!merges"]||[],r=[],l=t.s.c;l<=t.e.c;++l){for(var i=0,o=0,c=0;c<n.length;++c)if(!(n[c].s.r>s||n[c].s.c>l)&&!(n[c].e.r<s||n[c].e.c<l)){if(n[c].s.r<s||n[c].s.c<l){i=-1;break}i=n[c].e.r-n[c].s.r+1,o=n[c].e.c-n[c].s.c+1;break}if(!(i<0)){var d=Ts({r:s,c:l}),u=a.dense?(e[s]||[])[l]:e[d],h=u&&null!=u.v&&(u.h||st(u.w||(Os(u),u.w)||""))||"",m={};i>1&&(m.rowspan=i),o>1&&(m.colspan=o),a.editable?h='<span contenteditable="true">'+h+"</span>":u&&(m["data-t"]=u&&u.t||"z",null!=u.v&&(m["data-v"]=u.v),null!=u.z&&(m["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),m.id=(a.id||"sjs")+"-"+d,r.push(pt("td",h,m))}}return"<tr>"+r.join("")+"</tr>"}var Yl='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Gl="</body></html>";function Kl(e,t,s){return[].join("")+"<table"+(s&&s.id?' id="'+s.id+'"':"")+">"}function $l(e,t){var s=t||{},a=null!=s.header?s.header:Yl,n=null!=s.footer?s.footer:Gl,r=[a],l=As(e["!ref"]);s.dense=Array.isArray(e),r.push(Kl(0,0,s));for(var i=l.s.r;i<=l.e.r;++i)r.push(ql(e,l,i,s));return r.push("</table>"+n),r.join("")}function Xl(e,t,s){var a=s||{};var n=0,r=0;if(null!=a.origin)if("number"==typeof a.origin)n=a.origin;else{var l="string"==typeof a.origin?Es(a.origin):a.origin;n=l.r,r=l.c}var i=t.getElementsByTagName("tr"),o=Math.min(a.sheetRows||1e7,i.length),c={s:{r:0,c:0},e:{r:n,c:r}};if(e["!ref"]){var d=As(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==n&&(c.e.r=n=d.e.r+1)}var u=[],h=0,m=e["!rows"]||(e["!rows"]=[]),p=0,f=0,x=0,v=0,g=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<i.length&&f<o;++p){var j=i[p];if(Ql(j)){if(a.display)continue;m[f]={hidden:!0}}var b=j.children;for(x=v=0;x<b.length;++x){var w=b[x];if(!a.display||!Ql(w)){var N=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):dt(w.innerHTML),_=w.getAttribute("data-z")||w.getAttribute("z");for(h=0;h<u.length;++h){var k=u[h];k.s.c==v+r&&k.s.r<f+n&&f+n<=k.e.r&&(v=k.e.c+1-r,h=-1)}y=+w.getAttribute("colspan")||1,((g=+w.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:f+n,c:v+r},e:{r:f+n+(g||1)-1,c:v+r+(y||1)-1}});var S={t:"s",v:N},C=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=N&&(0==N.length?S.t=C||"z":a.raw||0==N.trim().length||"s"==C||("TRUE"===N?S={t:"b",v:!0}:"FALSE"===N?S={t:"b",v:!1}:isNaN(He(N))?isNaN(qe(N).getDate())||(S={t:"d",v:ze(N)},a.cellDates||(S={t:"n",v:Pe(S.v)}),S.z=a.dateNF||L[14]):S={t:"n",v:He(N)})),void 0===S.z&&null!=_&&(S.z=_);var E="",T=w.getElementsByTagName("A");if(T&&T.length)for(var A=0;A<T.length&&(!T[A].hasAttribute("href")||"#"==(E=T[A].getAttribute("href")).charAt(0));++A);E&&"#"!=E.charAt(0)&&(S.l={Target:E}),a.dense?(e[f+n]||(e[f+n]=[]),e[f+n][v+r]=S):e[Ts({c:v+r,r:f+n})]=S,c.e.c<v+r&&(c.e.c=v+r),v+=y}}++f}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,f-1+n),e["!ref"]=Ps(c),f>=o&&(e["!fullref"]=Ps((c.e.r=i.length-p+f-1+n,c))),e}function Jl(e,t){return Xl((t||{}).dense?[]:{},e,t)}function Ql(e){var t="",s=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return s&&(t=s(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var Zl=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+mt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ke+t}}(),ei=function(){var e=function(e){return Ze(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",s=function(s,a,n){var r=[];r.push('      <table:table table:name="'+Ze(a.SheetNames[n])+'" table:style-name="ta1">\n');var l=0,i=0,o=As(s["!ref"]||"A1"),c=s["!merges"]||[],d=0,u=Array.isArray(s);if(s["!cols"])for(i=0;i<=o.e.c;++i)r.push("        <table:table-column"+(s["!cols"][i]?' table:style-name="co'+s["!cols"][i].ods+'"':"")+"></table:table-column>\n");var h="",m=s["!rows"]||[];for(l=0;l<o.s.r;++l)h=m[l]?' table:style-name="ro'+m[l].ods+'"':"",r.push("        <table:table-row"+h+"></table:table-row>\n");for(;l<=o.e.r;++l){for(h=m[l]?' table:style-name="ro'+m[l].ods+'"':"",r.push("        <table:table-row"+h+">\n"),i=0;i<o.s.c;++i)r.push(t);for(;i<=o.e.c;++i){var p=!1,f={},x="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>i)&&!(c[d].s.r>l)&&!(c[d].e.c<i)&&!(c[d].e.r<l)){c[d].s.c==i&&c[d].s.r==l||(p=!0),f["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,f["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(p)r.push("          <table:covered-table-cell/>\n");else{var v=Ts({r:l,c:i}),g=u?(s[l]||[])[i]:s[v];if(g&&g.f&&(f["table:formula"]=Ze(Ur(g.f)),g.F&&g.F.slice(0,v.length)==v)){var y=As(g.F);f["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,f["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(g){switch(g.t){case"b":x=g.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=g.v?"true":"false";break;case"n":x=g.w||String(g.v||0),f["office:value-type"]="float",f["office:value"]=g.v||0;break;case"s":case"str":x=null==g.v?"":g.v,f["office:value-type"]="string";break;case"d":x=g.w||ze(g.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=ze(g.v).toISOString(),f["table:style-name"]="ce1";break;default:r.push(t);continue}var j=e(x);if(g.l&&g.l.Target){var b=g.l.Target;"#"==(b="#"==b.charAt(0)?"#"+Vr(b.slice(1)):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),j=pt("text:a",j,{"xlink:href":b.replace(/&/g,"&amp;")})}r.push("          "+pt("table:table-cell",pt("text:p",j,{}),f)+"\n")}else r.push(t)}}r.push("        </table:table-row>\n")}return r.push("      </table:table>\n"),r.join("")};return function(e,t){var a=[Ke],n=mt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),r=mt({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(a.push("<office:document"+n+r+">\n"),a.push(ka().replace(/office:document-meta/g,"office:meta"))):a.push("<office:document-content"+n+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var s=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var a=0;a<t["!cols"].length;++a)if(t["!cols"][a]){var n=t["!cols"][a];if(null==n.width&&null==n.wpx&&null==n.wch)continue;Tn(n),n.ods=s;var r=t["!cols"][a].wpx+"px";e.push('  <style:style style:name="co'+s+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+r+'"/>\n'),e.push("  </style:style>\n"),++s}});var a=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var s=0;s<t["!rows"].length;++s)if(t["!rows"][s]){t["!rows"][s].ods=a;var n=t["!rows"][s].hpx+"px";e.push('  <style:style style:name="ro'+a+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+n+'"/>\n'),e.push("  </style:style>\n"),++a}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(a,e),a.push("  <office:body>\n"),a.push("    <office:spreadsheet>\n");for(var l=0;l!=e.SheetNames.length;++l)a.push(s(e.Sheets[e.SheetNames[l]],e,l));return a.push("    </office:spreadsheet>\n"),a.push("  </office:body>\n"),"fods"==t.bookType?a.push("</office:document>"):a.push("</office:document-content>"),a.join("")}}();function ti(e,t){if("fods"==t.bookType)return ei(e,t);var s=Ge(),a="",n=[],r=[];return Ye(s,a="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Ye(s,a="content.xml",ei(e,t)),n.push([a,"text/xml"]),r.push([a,"ContentFile"]),Ye(s,a="styles.xml",Zl(e,t)),n.push([a,"text/xml"]),r.push([a,"StylesFile"]),Ye(s,a="meta.xml",Ke+ka()),n.push([a,"text/xml"]),r.push([a,"MetadataFile"]),Ye(s,a="manifest.rdf",function(e){var t=[Ke];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var s=0;s!=e.length;++s)t.push(Na(e[s][0],e[s][1])),t.push(_a("",e[s][0]));return t.push(Na("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(r)),n.push([a,"application/rdf+xml"]),Ye(s,a="META-INF/manifest.xml",function(e){var t=[Ke];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var s=0;s<e.length;++s)t.push('  <manifest:file-entry manifest:full-path="'+e[s][0]+'" manifest:media-type="'+e[s][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(n)),s}function si(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ai(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):w(ct(e))}function ni(e){var t=e.reduce(function(e,t){return e+t.length},0),s=new Uint8Array(t),a=0;return e.forEach(function(e){s.set(e,a),a+=e.length}),s}function ri(e,t){var s=t?t[0]:0,a=127&e[s];e:if(e[s++]>=128){if(a|=(127&e[s])<<7,e[s++]<128)break e;if(a|=(127&e[s])<<14,e[s++]<128)break e;if(a|=(127&e[s])<<21,e[s++]<128)break e;if(a+=(127&e[s])*Math.pow(2,28),++s,e[s++]<128)break e;if(a+=(127&e[s])*Math.pow(2,35),++s,e[s++]<128)break e;if(a+=(127&e[s])*Math.pow(2,42),++s,e[s++]<128)break e}return t&&(t[0]=s),a}function li(e){var t=new Uint8Array(7);t[0]=127&e;var s=1;e:if(e>127){if(t[s-1]|=128,t[s]=e>>7&127,++s,e<=16383)break e;if(t[s-1]|=128,t[s]=e>>14&127,++s,e<=2097151)break e;if(t[s-1]|=128,t[s]=e>>21&127,++s,e<=268435455)break e;if(t[s-1]|=128,t[s]=e/256>>>21&127,++s,e<=34359738367)break e;if(t[s-1]|=128,t[s]=e/65536>>>21&127,++s,e<=4398046511103)break e;t[s-1]|=128,t[s]=e/16777216>>>21&127,++s}return t.slice(0,s)}function ii(e){var t=0,s=127&e[t];e:if(e[t++]>=128){if(s|=(127&e[t])<<7,e[t++]<128)break e;if(s|=(127&e[t])<<14,e[t++]<128)break e;if(s|=(127&e[t])<<21,e[t++]<128)break e;s|=(127&e[t])<<28}return s}function oi(e){for(var t=[],s=[0];s[0]<e.length;){var a,n=s[0],r=ri(e,s),l=7&r,i=0;if(0==(r=Math.floor(r/8)))break;switch(l){case 0:for(var o=s[0];e[s[0]++]>=128;);a=e.slice(o,s[0]);break;case 5:i=4,a=e.slice(s[0],s[0]+i),s[0]+=i;break;case 1:i=8,a=e.slice(s[0],s[0]+i),s[0]+=i;break;case 2:i=ri(e,s),a=e.slice(s[0],s[0]+i),s[0]+=i;break;default:throw new Error("PB Type ".concat(l," for Field ").concat(r," at offset ").concat(n))}var c={data:a,type:l};null==t[r]?t[r]=[c]:t[r].push(c)}return t}function ci(e){var t=[];return e.forEach(function(e,s){e.forEach(function(e){e.data&&(t.push(li(8*s+e.type)),2==e.type&&t.push(li(e.data.length)),t.push(e.data))})}),ni(t)}function di(e){for(var t,s=[],a=[0];a[0]<e.length;){var n=ri(e,a),r=oi(e.slice(a[0],a[0]+n));a[0]+=n;var l={id:ii(r[1][0].data),messages:[]};r[2].forEach(function(t){var s=oi(t.data),n=ii(s[3][0].data);l.messages.push({meta:s,data:e.slice(a[0],a[0]+n)}),a[0]+=n}),(null==(t=r[3])?void 0:t[0])&&(l.merge=ii(r[3][0].data)>>>0>0),s.push(l)}return s}function ui(e){var t=[];return e.forEach(function(e){var s=[];s[1]=[{data:li(e.id),type:0}],s[2]=[],null!=e.merge&&(s[3]=[{data:li(+!!e.merge),type:0}]);var a=[];e.messages.forEach(function(e){a.push(e.data),e.meta[3]=[{type:0,data:li(e.data.length)}],s[2].push({data:ci(e.meta),type:2})});var n=ci(s);t.push(li(n.length)),t.push(n),a.forEach(function(e){return t.push(e)})}),ni(t)}function hi(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var s=[0],a=ri(t,s),n=[];s[0]<t.length;){var r=3&t[s[0]];if(0!=r){var l=0,i=0;if(1==r?(i=4+(t[s[0]]>>2&7),l=(224&t[s[0]++])<<3,l|=t[s[0]++]):(i=1+(t[s[0]++]>>2),2==r?(l=t[s[0]]|t[s[0]+1]<<8,s[0]+=2):(l=(t[s[0]]|t[s[0]+1]<<8|t[s[0]+2]<<16|t[s[0]+3]<<24)>>>0,s[0]+=4)),n=[ni(n)],0==l)throw new Error("Invalid offset 0");if(l>n[0].length)throw new Error("Invalid offset beyond length");if(i>=l)for(n.push(n[0].slice(-l)),i-=l;i>=n[n.length-1].length;)n.push(n[n.length-1]),i-=n[n.length-1].length;n.push(n[0].slice(-l,-l+i))}else{var o=t[s[0]++]>>2;if(o<60)++o;else{var c=o-59;o=t[s[0]],c>1&&(o|=t[s[0]+1]<<8),c>2&&(o|=t[s[0]+2]<<16),c>3&&(o|=t[s[0]+3]<<24),o>>>=0,o++,s[0]+=c}n.push(t.slice(s[0],s[0]+o)),s[0]+=o}}var d=ni(n);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function mi(e){for(var t=[],s=0;s<e.length;){var a=e[s++],n=e[s]|e[s+1]<<8|e[s+2]<<16;s+=3,t.push(hi(a,e.slice(s,s+n))),s+=n}if(s!==e.length)throw new Error("data is not a valid framed stream!");return ni(t)}function pi(e){for(var t=[],s=0;s<e.length;){var a=Math.min(e.length-s,268435455),n=new Uint8Array(4);t.push(n);var r=li(a),l=r.length;t.push(r),a<=60?(l++,t.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(s,s+a)),l+=a,n[0]=0,n[1]=255&l,n[2]=l>>8&255,n[3]=l>>16&255,s+=a}return ni(t)}function fi(e,t){var s=new Uint8Array(32),a=si(s),n=12,r=0;switch(s[0]=5,e.t){case"n":s[1]=2,function(e,t,s){var a=Math.floor(0==s?0:Math.LOG10E*Math.log(Math.abs(s)))+6176-20,n=s/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(127&a)<<1;for(var r=0;n>=1;++r,n/=256)e[t+r]=255&n;e[t+15]|=s>=0?0:128}(s,n,e.v),r|=1,n+=16;break;case"b":s[1]=6,a.setFloat64(n,e.v?1:0,!0),r|=2,n+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));s[1]=3,a.setUint32(n,t.indexOf(e.v),!0),r|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,r,!0),s.slice(0,n)}function xi(e,t){var s=new Uint8Array(32),a=si(s),n=12,r=0;switch(s[0]=3,e.t){case"n":s[2]=2,a.setFloat64(n,e.v,!0),r|=32,n+=8;break;case"b":s[2]=6,a.setFloat64(n,e.v?1:0,!0),r|=32,n+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));s[2]=3,a.setUint32(n,t.indexOf(e.v),!0),r|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,r,!0),s.slice(0,n)}function vi(e){return ri(oi(e)[1][0].data)}function gi(e,t,s){var a,n,r,l;if(!(null==(a=e[6])?void 0:a[0])||!(null==(n=e[7])?void 0:n[0]))throw"Mutation only works on post-BNC storages!";if((null==(l=null==(r=e[8])?void 0:r[0])?void 0:l.data)&&ii(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var i=0,o=si(e[7][0].data),c=0,d=[],u=si(e[4][0].data),h=0,m=[],p=0;p<t.length;++p)if(null!=t[p]){var f,x;switch(o.setUint16(2*p,c,!0),u.setUint16(2*p,h,!0),typeof t[p]){case"string":f=fi({t:"s",v:t[p]},s),x=xi({t:"s",v:t[p]},s);break;case"number":f=fi({t:"n",v:t[p]},s),x=xi({t:"n",v:t[p]},s);break;case"boolean":f=fi({t:"b",v:t[p]},s),x=xi({t:"b",v:t[p]},s);break;default:throw new Error("Unsupported value "+t[p])}d.push(f),c+=f.length,m.push(x),h+=x.length,++i}else o.setUint16(2*p,65535,!0),u.setUint16(2*p,65535);for(e[2][0].data=li(i);p<e[7][0].data.length/2;++p)o.setUint16(2*p,65535,!0),u.setUint16(2*p,65535,!0);return e[6][0].data=ni(d),e[3][0].data=ni(m),i}function yi(e){return function(t){for(var s=0;s!=e.length;++s){var a=e[s];void 0===t[a[0]]&&(t[a[0]]=a[1]),"n"===a[2]&&(t[a[0]]=Number(t[a[0]]))}}}function ji(e){yi([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function bi(e,t){return"ods"==t.bookType?ti(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var s=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=As(s["!ref"]);a.s.r=a.s.c=0;var n=!1;a.e.c>9&&(n=!0,a.e.c=9),a.e.r>49&&(n=!0,a.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Ps(a)));var r=Di(s,{range:a,header:1}),l=["~Sh33tJ5~"];r.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&l.push(e)})});var i={},o=[],c=we.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],s=e[1];2==t.type&&t.name.match(/\.iwa/)&&di(mi(t.content)).forEach(function(e){o.push(e.id),i[e.id]={deps:[],location:s,type:ii(e.messages[0].meta[1][0].data)}})}),o.sort(function(e,t){return e-t});var d=o.filter(function(e){return e>1}).map(function(e){return[e,li(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&di(mi(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=ii(e.meta[1][0].data)&&function(e,t){e:for(var s=0;s<=e.length-t.length;++s){for(var a=0;a<t.length;++a)if(e[s+a]!=t[a])continue e;return!0}return!1}(e.data,t[1])})&&i[t[0]].deps.push(e.id)})})})});for(var u,h=we.find(c,i[1].location),m=di(mi(h.content)),p=0;p<m.length;++p){var f=m[p];1==f.id&&(u=f)}var x=vi(oi(u.messages[0].data)[1][0].data);for(m=di(mi((h=we.find(c,i[x].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==x&&(u=f);for(x=vi(oi(u.messages[0].data)[2][0].data),m=di(mi((h=we.find(c,i[x].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==x&&(u=f);for(x=vi(oi(u.messages[0].data)[2][0].data),m=di(mi((h=we.find(c,i[x].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==x&&(u=f);var v=oi(u.messages[0].data);v[6][0].data=li(a.e.r+1),v[7][0].data=li(a.e.c+1);for(var g=vi(v[46][0].data),y=we.find(c,i[g].location),j=di(mi(y.content)),b=0;b<j.length&&j[b].id!=g;++b);if(j[b].id!=g)throw"Bad ColumnRowUIDMapArchive";var w=oi(j[b].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var N=0;N<=a.e.c;++N){var _=[];_[1]=_[2]=[{type:0,data:li(N+420690)}],w[1].push({type:2,data:ci(_)}),w[2].push({type:0,data:li(N)}),w[3].push({type:0,data:li(N)})}w[4]=[],w[5]=[],w[6]=[];for(var k=0;k<=a.e.r;++k)(_=[])[1]=_[2]=[{type:0,data:li(k+726270)}],w[4].push({type:2,data:ci(_)}),w[5].push({type:0,data:li(k)}),w[6].push({type:0,data:li(k)});j[b].messages[0].data=ci(w),y.content=pi(ui(j)),y.size=y.content.length,delete v[46];var S=oi(v[4][0].data);S[7][0].data=li(a.e.r+1);var C=vi(oi(S[1][0].data)[2][0].data);if((j=di(mi((y=we.find(c,i[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var E=oi(j[0].messages[0].data);for(k=0;k<r.length;++k){var T=oi(E[2][0].data);T[1][0].data=li(k),T[4][0].data=li(r[k].length),E[2][k]={type:E[2][0].type,data:ci(T)}}j[0].messages[0].data=ci(E),y.content=pi(ui(j)),y.size=y.content.length;var A=vi(S[2][0].data);if((j=di(mi((y=we.find(c,i[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";for(E=oi(j[0].messages[0].data),N=0;N<=a.e.c;++N)(T=oi(E[2][0].data))[1][0].data=li(N),T[4][0].data=li(a.e.r+1),E[2][N]={type:E[2][0].type,data:ci(T)};j[0].messages[0].data=ci(E),y.content=pi(ui(j)),y.size=y.content.length;var P=vi(S[4][0].data);!function(){for(var e,t=we.find(c,i[P].location),s=di(mi(t.content)),a=0;a<s.length;++a){var n=s[a];n.id==P&&(e=n)}var r=oi(e.messages[0].data);r[3]=[];var o=[];l.forEach(function(e,t){o[1]=[{type:0,data:li(t)}],o[2]=[{type:0,data:li(1)}],o[3]=[{type:2,data:ai(e)}],r[3].push({type:2,data:ci(o)})}),e.messages[0].data=ci(r);var d=pi(ui(s));t.content=d,t.size=t.content.length}();var D=oi(S[3][0].data),R=D[1][0];delete D[2];var O=oi(R.data),M=vi(O[2][0].data);!function(){for(var e,t=we.find(c,i[M].location),s=di(mi(t.content)),n=0;n<s.length;++n){var o=s[n];o.id==M&&(e=o)}var d=oi(e.messages[0].data);delete d[6],delete D[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,m=0;m<=a.e.r;++m){var p=oi(u);h+=gi(p,r[m],l),p[1][0].data=li(m),d[5].push({data:ci(p),type:2})}d[1]=[{type:0,data:li(a.e.c+1)}],d[2]=[{type:0,data:li(a.e.r+1)}],d[3]=[{type:0,data:li(h)}],d[4]=[{type:0,data:li(a.e.r+1)}],e.messages[0].data=ci(d);var f=pi(ui(s));t.content=f,t.size=t.content.length}(),R.data=ci(O),S[3][0].data=ci(D),v[4][0].data=ci(S),u.messages[0].data=ci(v);var F=pi(ui(m));return h.content=F,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){$n=1024,e&&!e.SSF&&(e.SSF=Ue(L));e&&e.SSF&&(ye(),ge(e.SSF),t.revssf=Te(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hr?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var s="xlsb"==t.bookType?"bin":"xml",a=tr.indexOf(t.bookType)>-1,n={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};ji(t=t||{});var r=Ge(),l="",i=0;t.cellXfs=[],Gr(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(Ye(r,l="docProps/core.xml",Ea(e.Props,t)),n.coreprops.push(l),wa(t.rels,2,l,ya.CORE_PROPS),l="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var o=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&o.push(e.SheetNames[c]);e.Props.SheetNames=o}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Ye(r,l,Pa(e.Props)),n.extprops.push(l),wa(t.rels,3,l,ya.EXT_PROPS),e.Custprops!==e.Props&&Se(e.Custprops||{}).length>0&&(Ye(r,l="docProps/custom.xml",Da(e.Custprops)),n.custprops.push(l),wa(t.rels,4,l,ya.CUST_PROPS));for(i=1;i<=e.SheetNames.length;++i){var d={"!id":{}},u=e.Sheets[e.SheetNames[i-1]];(u||{})["!type"];if(Ye(r,l="xl/worksheets/sheet"+i+"."+s,wl(i-1,l,t,e,d)),n.sheets.push(l),wa(t.wbrels,-1,"worksheets/sheet"+i+"."+s,ya.WS[0]),u){var h=u["!comments"],m=!1,p="";h&&h.length>0&&(Ye(r,p="xl/comments"+i+"."+s,Nl(h,p,t)),n.comments.push(p),wa(d,-1,"../comments"+i+"."+s,ya.CMNT),m=!0),u["!legacy"]&&m&&Ye(r,"xl/drawings/vmlDrawing"+i+".vml",Xn(i,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&Ye(r,ja(l),ba(d))}null!=t.Strings&&t.Strings.length>0&&(Ye(r,l="xl/sharedStrings."+s,function(e,t,s){return(".bin"===t.slice(-4)?jn:gn)(e,s)}(t.Strings,l,t)),n.strs.push(l),wa(t.wbrels,-1,"sharedStrings."+s,ya.SST));Ye(r,l="xl/workbook."+s,function(e,t,s){return(".bin"===t.slice(-4)?bl:gl)(e,s)}(e,l,t)),n.workbooks.push(l),wa(t.rels,1,l,ya.WB),Ye(r,l="xl/theme/theme1.xml",Yn(e.Themes,t)),n.themes.push(l),wa(t.wbrels,-1,"theme/theme1.xml",ya.THEME),Ye(r,l="xl/styles."+s,function(e,t,s){return(".bin"===t.slice(-4)?qn:Dn)(e,s)}(e,l,t)),n.styles.push(l),wa(t.wbrels,-1,"styles."+s,ya.STY),e.vbaraw&&a&&(Ye(r,l="xl/vbaProject.bin",e.vbaraw),n.vba.push(l),wa(t.wbrels,-1,"vbaProject.bin",ya.VBA));return Ye(r,l="xl/metadata."+s,function(e){return(".bin"===e.slice(-4)?Gn:Kn)()}(l)),n.metadata.push(l),wa(t.wbrels,-1,"metadata."+s,ya.XLMETA),Ye(r,"[Content_Types].xml",ga(n,t)),Ye(r,"_rels/.rels",ba(t.rels)),Ye(r,"xl/_rels/workbook."+s+".rels",ba(t.wbrels)),delete t.revssf,delete t.ssf,r}(e,t):wi(e,t)}function wi(e,t){$n=1024,e&&!e.SSF&&(e.SSF=Ue(L)),e&&e.SSF&&(ye(),ge(e.SSF),t.revssf=Te(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hr?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var s="xml",a=tr.indexOf(t.bookType)>-1,n={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};ji(t=t||{});var r=Ge(),l="",i=0;if(t.cellXfs=[],Gr(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Ye(r,l="docProps/core.xml",Ea(e.Props,t)),n.coreprops.push(l),wa(t.rels,2,l,ya.CORE_PROPS),l="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var o=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&o.push(e.SheetNames[c]);e.Props.SheetNames=o}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Ye(r,l,Pa(e.Props)),n.extprops.push(l),wa(t.rels,3,l,ya.EXT_PROPS),e.Custprops!==e.Props&&Se(e.Custprops||{}).length>0&&(Ye(r,l="docProps/custom.xml",Da(e.Custprops)),n.custprops.push(l),wa(t.rels,4,l,ya.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,i=1;i<=e.SheetNames.length;++i){var u={"!id":{}},h=e.Sheets[e.SheetNames[i-1]];(h||{})["!type"];if(Ye(r,l="xl/worksheets/sheet"+i+"."+s,Qr(i-1,t,e,u)),n.sheets.push(l),wa(t.wbrels,-1,"worksheets/sheet"+i+"."+s,ya.WS[0]),h){var m=h["!comments"],p=!1,f="";if(m&&m.length>0){var x=!1;m.forEach(function(e){e[1].forEach(function(e){1==e.T&&(x=!0)})}),x&&(Ye(r,f="xl/threadedComments/threadedComment"+i+"."+s,Qn(m,d,t)),n.threadedcomments.push(f),wa(u,-1,"../threadedComments/threadedComment"+i+"."+s,ya.TCMNT)),Ye(r,f="xl/comments"+i+"."+s,Jn(m)),n.comments.push(f),wa(u,-1,"../comments"+i+"."+s,ya.CMNT),p=!0}h["!legacy"]&&p&&Ye(r,"xl/drawings/vmlDrawing"+i+".vml",Xn(i,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Ye(r,ja(l),ba(u))}return null!=t.Strings&&t.Strings.length>0&&(Ye(r,l="xl/sharedStrings."+s,gn(t.Strings,t)),n.strs.push(l),wa(t.wbrels,-1,"sharedStrings."+s,ya.SST)),Ye(r,l="xl/workbook."+s,gl(e)),n.workbooks.push(l),wa(t.rels,1,l,ya.WB),Ye(r,l="xl/theme/theme1.xml",Yn(e.Themes,t)),n.themes.push(l),wa(t.wbrels,-1,"theme/theme1.xml",ya.THEME),Ye(r,l="xl/styles."+s,Dn(e,t)),n.styles.push(l),wa(t.wbrels,-1,"styles."+s,ya.STY),e.vbaraw&&a&&(Ye(r,l="xl/vbaProject.bin",e.vbaraw),n.vba.push(l),wa(t.wbrels,-1,"vbaProject.bin",ya.VBA)),Ye(r,l="xl/metadata."+s,Kn()),n.metadata.push(l),wa(t.wbrels,-1,"metadata."+s,ya.XLMETA),d.length>1&&(Ye(r,l="xl/persons/person.xml",function(e){var t=[Ke,pt("personList",null,{xmlns:bt,"xmlns:x":Tt[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,s){t.push(pt("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),n.people.push(l),wa(t.wbrels,-1,"persons/person.xml",ya.PEOPLE)),Ye(r,"[Content_Types].xml",ga(n,t)),Ye(r,"_rels/.rels",ba(t.rels)),Ye(r,"xl/_rels/workbook.xml.rels",ba(t.wbrels)),delete t.revssf,delete t.ssf,r}function Ni(e,t){var s="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":s=v(e.slice(0,12));break;case"binary":s=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3),s.charCodeAt(4),s.charCodeAt(5),s.charCodeAt(6),s.charCodeAt(7)]}function _i(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ke(t.file,we.write(e,{type:g?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return we.write(e,t)}function ki(e,t){var s={},a=g?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(s.compression="DEFLATE"),t.password)s.type=a;else switch(t.type){case"base64":s.type="base64";break;case"binary":s.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":s.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var n=e.FullPaths?we.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[s.type]||s.type,compression:!!t.compression}):e.generate(s);if("undefined"!==typeof Deno&&"string"==typeof n){if("binary"==t.type||"base64"==t.type)return n;n=new Uint8Array(N(n))}return t.password&&"undefined"!==typeof encrypt_agile?_i(encrypt_agile(n,t.password),t):"file"===t.type?ke(t.file,n):"string"==t.type?ot(n):n}function Si(e,t,s){s||(s="");var a=s+e;switch(t.type){case"base64":return x(ct(a));case"binary":return ct(a);case"string":return e;case"file":return ke(t.file,a,"utf8");case"buffer":return g?y(a,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(a):Si(a,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Ci(e,t){switch(t.type){case"string":case"base64":case"binary":for(var s="",a=0;a<e.length;++a)s+=String.fromCharCode(e[a]);return"base64"==t.type?x(s):"string"==t.type?ot(s):s;case"file":return ke(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ei(e,t){d(),vl(e);var s=Ue(t||{});if(s.cellStyles&&(s.cellNF=!0,s.sheetStubs=!0),"array"==s.type){s.type="binary";var a=Ei(e,s);return s.type="array",N(a)}var n=0;if(s.sheet&&(n="number"==typeof s.sheet?s.sheet:e.SheetNames.indexOf(s.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+s.sheet+" : "+typeof s.sheet);switch(s.bookType||"xlsb"){case"xml":case"xlml":return Si(Tl(e,s),s);case"slk":case"sylk":return Si(hn.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"htm":case"html":return Si($l(e.Sheets[e.SheetNames[n]],s),s);case"txt":return function(e,t){switch(t.type){case"base64":return x(e);case"binary":case"string":return e;case"file":return ke(t.file,e,"binary");case"buffer":return g?y(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(Fi(e.Sheets[e.SheetNames[n]],s),s);case"csv":return Si(Mi(e.Sheets[e.SheetNames[n]],s),s,"\ufeff");case"dif":return Si(mn.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"dbf":return Ci(un.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"prn":return Si(fn.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"rtf":return Si(Nn.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"eth":return Si(pn.from_sheet(e.Sheets[e.SheetNames[n]],s),s);case"fods":return Si(ti(e,s),s);case"wk1":return Ci(xn.sheet_to_wk1(e.Sheets[e.SheetNames[n]],s),s);case"wk3":return Ci(xn.book_to_wk3(e,s),s);case"biff2":s.biff||(s.biff=2);case"biff3":s.biff||(s.biff=3);case"biff4":return s.biff||(s.biff=4),Ci(Wl(e,s),s);case"biff5":s.biff||(s.biff=5);case"biff8":case"xla":case"xls":return s.biff||(s.biff=8),function(e,t){var s=t||{};return _i(Rl(e,s),s)}(e,s);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var s=Ue(t||{});return ki(bi(e,s),s)}(e,s);default:throw new Error("Unrecognized bookType |"+s.bookType+"|")}}function Ti(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function Ai(e,t,s){var a=s||{};return a.type="file",a.file=t,Ti(a),Ei(e,a)}function Pi(e,t,s,a,n,r,l,i){var o=ks(s),c=i.defval,d=i.raw||!Object.prototype.hasOwnProperty.call(i,"raw"),u=!0,h=1===n?[]:{};if(1!==n)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:s,enumerable:!1})}catch(x){h.__rowNum__=s}else h.__rowNum__=s;if(!l||e[s])for(var m=t.s.c;m<=t.e.c;++m){var p=l?e[s][m]:e[a[m]+o];if(void 0!==p&&void 0!==p.t){var f=p.v;switch(p.t){case"z":if(null==f)break;continue;case"e":f=0==f?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=r[m]){if(null==f)if("e"==p.t&&null===f)h[r[m]]=null;else if(void 0!==c)h[r[m]]=c;else{if(!d||null!==f)continue;h[r[m]]=null}else h[r[m]]=d&&("n"!==p.t||"n"===p.t&&!1!==i.rawNumbers)?f:Os(p,f,i);null!=f&&(u=!1)}}else{if(void 0===c)continue;null!=r[m]&&(h[r[m]]=c)}}return{row:h,isempty:u}}function Di(e,t){if(null==e||null==e["!ref"])return[];var s={t:"n",v:0},a=0,n=1,r=[],l=0,i="",o={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?a=1:"A"===c.header?a=2:Array.isArray(c.header)?a=3:null==c.header&&(a=0),typeof d){case"string":o=Ds(d);break;case"number":(o=Ds(e["!ref"])).s.r=d;break;default:o=d}a>0&&(n=0);var u=ks(o.s.r),h=[],m=[],p=0,f=0,x=Array.isArray(e),v=o.s.r,g=0,y={};x&&!e[v]&&(e[v]=[]);var j=c.skipHidden&&e["!cols"]||[],b=c.skipHidden&&e["!rows"]||[];for(g=o.s.c;g<=o.e.c;++g)if(!(j[g]||{}).hidden)switch(h[g]=Cs(g),s=x?e[v][g]:e[h[g]+u],a){case 1:r[g]=g-o.s.c;break;case 2:r[g]=h[g];break;case 3:r[g]=c.header[g-o.s.c];break;default:if(null==s&&(s={w:"__EMPTY",t:"s"}),i=l=Os(s,null,c),f=y[l]||0){do{i=l+"_"+f++}while(y[i]);y[l]=f,y[i]=1}else y[l]=1;r[g]=i}for(v=o.s.r+n;v<=o.e.r;++v)if(!(b[v]||{}).hidden){var w=Pi(e,o,v,h,a,r,x,c);(!1===w.isempty||(1===a?!1!==c.blankrows:c.blankrows))&&(m[p++]=w.row)}return m.length=p,m}var Ri=/"/g;function Oi(e,t,s,a,n,r,l,i){for(var o=!0,c=[],d="",u=ks(s),h=t.s.c;h<=t.e.c;++h)if(a[h]){var m=i.dense?(e[s]||[])[h]:e[a[h]+u];if(null==m)d="";else if(null!=m.v){o=!1,d=""+(i.rawNumbers&&"n"==m.t?m.v:Os(m,null,i));for(var p=0,f=0;p!==d.length;++p)if((f=d.charCodeAt(p))===n||f===r||34===f||i.forceQuotes){d='"'+d.replace(Ri,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==m.f||m.F?d="":(o=!1,(d="="+m.f).indexOf(",")>=0&&(d='"'+d.replace(Ri,'""')+'"'));c.push(d)}return!1===i.blankrows&&o?null:c.join(l)}function Mi(e,t){var s=[],a=null==t?{}:t;if(null==e||null==e["!ref"])return"";var n=Ds(e["!ref"]),r=void 0!==a.FS?a.FS:",",l=r.charCodeAt(0),i=void 0!==a.RS?a.RS:"\n",o=i.charCodeAt(0),c=new RegExp(("|"==r?"\\|":r)+"+$"),d="",u=[];a.dense=Array.isArray(e);for(var h=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],p=n.s.c;p<=n.e.c;++p)(h[p]||{}).hidden||(u[p]=Cs(p));for(var f=0,x=n.s.r;x<=n.e.r;++x)(m[x]||{}).hidden||null!=(d=Oi(e,n,x,u,l,o,r,a))&&(a.strip&&(d=d.replace(c,"")),(d||!1!==a.blankrows)&&s.push((f++?i:"")+d));return delete a.dense,s.join("")}function Fi(e,t){t||(t={}),t.FS="\t",t.RS="\n";var s=Mi(e,t);if("undefined"==typeof h||"string"==t.type)return s;var a=h.utils.encode(1200,s,"str");return String.fromCharCode(255)+String.fromCharCode(254)+a}function Li(e,t,s){var a,n=s||{},r=+!n.skipHeader,l=e||{},i=0,o=0;if(l&&null!=n.origin)if("number"==typeof n.origin)i=n.origin;else{var c="string"==typeof n.origin?Es(n.origin):n.origin;i=c.r,o=c.c}var d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+r}};if(l["!ref"]){var u=Ds(l["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==i&&(i=u.e.r+1,d.e.r=i+t.length-1+r)}else-1==i&&(i=0,d.e.r=t.length-1+r);var h=n.header||[],m=0;t.forEach(function(e,t){Se(e).forEach(function(s){-1==(m=h.indexOf(s))&&(h[m=h.length]=s);var c=e[s],d="z",u="",p=Ts({c:o+m,r:i+t+r});a=Ii(l,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",n.cellDates||(d="n",c=Pe(c)),u=n.dateNF||L[14]):null===c&&n.nullError&&(d="e",c=0),a?(a.t=d,a.v=c,delete a.w,delete a.R,u&&(a.z=u)):l[p]=a={t:d,v:c},u&&(a.z=u)):l[p]=c})}),d.e.c=Math.max(d.e.c,o+h.length-1);var p=ks(i);if(r)for(m=0;m<h.length;++m)l[Cs(m+o)+p]={t:"s",v:h[m]};return l["!ref"]=Ps(d),l}function Ii(e,t,s){if("string"==typeof t){if(Array.isArray(e)){var a=Es(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return Ii(e,Ts("number"!=typeof t?t:{r:t,c:s||0}))}function zi(){return{SheetNames:[],Sheets:{}}}function Bi(e,t,s,a){var n=1;if(!s)for(;n<=65535&&-1!=e.SheetNames.indexOf(s="Sheet"+n);++n,s=void 0);if(!s||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(s)>=0){var r=s.match(/(^.*?)(\d+)$/);n=r&&+r[2]||0;var l=r&&r[1]||s;for(++n;n<=65535&&-1!=e.SheetNames.indexOf(s=l+n);++n);}if(xl(s),e.SheetNames.indexOf(s)>=0)throw new Error("Worksheet with name |"+s+"| already exists!");return e.SheetNames.push(s),e.Sheets[s]=t,s}function Ui(e,t,s){return t?(e.l={Target:t},s&&(e.l.Tooltip=s)):delete e.l,e}var Vi={encode_col:Cs,encode_row:ks,encode_cell:Ts,encode_range:Ps,decode_col:Ss,decode_row:_s,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Es,decode_range:As,format_cell:Os,sheet_add_aoa:Fs,sheet_add_json:Li,sheet_add_dom:Xl,aoa_to_sheet:Ls,json_to_sheet:function(e,t){return Li(null,e,t)},table_to_sheet:Jl,table_to_book:function(e,t){return Ms(Jl(e,t),t)},sheet_to_csv:Mi,sheet_to_txt:Fi,sheet_to_json:Di,sheet_to_html:$l,sheet_to_formulae:function(e){var t,s="",a="";if(null==e||null==e["!ref"])return[];var n,r=Ds(e["!ref"]),l="",i=[],o=[],c=Array.isArray(e);for(n=r.s.c;n<=r.e.c;++n)i[n]=Cs(n);for(var d=r.s.r;d<=r.e.r;++d)for(l=ks(d),n=r.s.c;n<=r.e.c;++n)if(s=i[n]+l,a="",void 0!==(t=c?(e[d]||[])[n]:e[s])){if(null!=t.F){if(s=t.F,!t.f)continue;a=t.f,-1==s.indexOf(":")&&(s=s+":"+s)}if(null!=t.f)a=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)a=""+t.v;else if("b"==t.t)a=t.v?"TRUE":"FALSE";else if(void 0!==t.w)a="'"+t.w;else{if(void 0===t.v)continue;a="s"==t.t?"'"+t.v:""+t.v}}o[o.length]=s+"="+a}return o},sheet_to_row_object_array:Di,sheet_get_cell:Ii,book_new:zi,book_append_sheet:Bi,book_set_sheet_visibility:function(e,t,s){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var s=e.SheetNames.indexOf(t);if(s>-1)return s;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),s){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+s)}e.Workbook.Sheets[a].Hidden=s},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Ui,cell_set_internal_link:function(e,t,s){return Ui(e,"#"+t,s)},cell_add_comment:function(e,t,s){e.c||(e.c=[]),e.c.push({t:t,a:s||"SheetJS"})},sheet_set_array_formula:function(e,t,s,a){for(var n="string"!=typeof t?t:Ds(t),r="string"==typeof t?t:Ps(t),l=n.s.r;l<=n.e.r;++l)for(var i=n.s.c;i<=n.e.c;++i){var o=Ii(e,l,i);o.t="n",o.F=r,delete o.v,l==n.s.r&&i==n.s.c&&(o.f=s,a&&(o.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};a.version},288(e,t){var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function g(e,t,s){this.props=e,this.context=t,this.refs=v,this.updater=s||f}function y(){}function j(e,t,s){this.props=e,this.context=t,this.refs=v,this.updater=s||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=j.prototype=new y;b.constructor=j,x(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray;function N(){}var _={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function S(e,t,a){var n=a.ref;return{$$typeof:s,type:e,key:t,ref:void 0!==n?n:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,n,r,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(i){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case s:case a:d=!0;break;case h:return A((d=e._init)(e._payload),t,n,r,l)}}if(d)return l=l(e),d=""===r?"."+T(e,0):r,w(l)?(n="",null!=d&&(n=d.replace(E,"$&/")+"/"),A(l,t,n,"",function(e){return e})):null!=l&&(C(l)&&(o=l,c=n+(null==l.key||e&&e.key===l.key?"":(""+l.key).replace(E,"$&/")+"/")+d,l=S(o.type,c,o.props)),t.push(l)),1;d=0;var u,m=""===r?".":r+":";if(w(e))for(var f=0;f<e.length;f++)d+=A(r=e[f],t,n,i=m+T(r,f),l);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(r=e.next()).done;)d+=A(r=r.value,t,n,i=m+T(r,f++),l);else if("object"===i){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,r,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function P(e,t,s){if(null==e)return e;var a=[],n=0;return A(e,a,"","",function(e){return t.call(s,e,n++)}),a}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=m,t.Children=O,t.Component=g,t.Fragment=n,t.Profiler=l,t.PureComponent=j,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=x({},e.props),n=e.key;if(null!=t)for(r in void 0!==t.key&&(n=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(a[r]=t[r]);var r=arguments.length-2;if(1===r)a.children=s;else if(1<r){for(var l=Array(r),i=0;i<r;i++)l[i]=arguments[i+2];a.children=l}return S(e.type,n,a)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,s){var a,n={},r=null;if(null!=t)for(a in void 0!==t.key&&(r=""+t.key),t)k.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(n[a]=t[a]);var l=arguments.length-2;if(1===l)n.children=s;else if(1<l){for(var i=Array(l),o=0;o<l;o++)i[o]=arguments[o+2];n.children=i}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===n[a]&&(n[a]=l[a]);return S(e,r,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,s={};_.T=s;try{var a=e(),n=_.S;null!==n&&n(s,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(N,R)}catch(r){R(r)}finally{null!==t&&null!==s.types&&(t.types=s.types),_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,s){return _.H.useActionState(e,t,s)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useEffectEvent=function(e){return _.H.useEffectEvent(e)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,s){return _.H.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,s){return _.H.useReducer(e,t,s)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,s){return _.H.useSyncExternalStore(e,t,s)},t.useTransition=function(){return _.H.useTransition()},t.version="19.2.3"},330(e,t,s){var a=s(43);var n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=a.useState,l=a.useEffect,i=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!n(e,s)}catch(a){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=r({inst:{value:s,getSnapshot:t}}),n=a[0].inst,d=a[1];return i(function(){n.value=s,n.getSnapshot=t,c(n)&&d({inst:n})},[e,s,t]),l(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),o(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},391(e,t,s){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(4)},461(e,t,s){e.exports=s(330)},579(e,t,s){e.exports=s(799)},672(e,t,s){var a=s(43);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.flushSync=function(e){var t=o.T,s=l.p;try{if(o.T=null,l.p=2,e)return e()}finally{o.T=t,l.p=s,l.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,l.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&l.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var s=t.as,a=c(s,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===s?l.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:n,fetchPriority:r}):"script"===s&&l.d.X(e,{crossOrigin:a,integrity:n,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var s=c(t.as,t.crossOrigin);l.d.M(e,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&l.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var s=t.as,a=c(s,t.crossOrigin);l.d.L(e,s,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var s=c(t.as,t.crossOrigin);l.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else l.d.m(e)},t.requestFormReset=function(e){l.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,s){return o.H.useFormState(e,t,s)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.2.3"},799(e,t){var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(e,t,a){var n=null;if(void 0!==a&&(n=""+a),void 0!==t.key&&(n=""+t.key),"key"in t)for(var r in a={},t)"key"!==r&&(a[r]=t[r]);else a=t;return t=a.ref,{$$typeof:s,type:e,key:n,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=n,t.jsxs=n},853(e,t,s){e.exports=s(896)},896(e,t){function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,n=e[a];if(!(0<r(n,t)))break e;e[a]=t,e[s]=n,s=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,n=e.length,l=n>>>1;a<l;){var i=2*(a+1)-1,o=e[i],c=i+1,d=e[c];if(0>r(o,s))c<n&&0>r(d,o)?(e[a]=d,e[c]=s,a=c):(e[a]=o,e[i]=s,a=i);else{if(!(c<n&&0>r(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,x=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,j="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=a(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,s(c,t)}t=a(d)}}function w(e){if(x=!1,b(e),!f)if(null!==a(c))f=!0,_||(_=!0,N());else{var t=a(d);null!==t&&D(w,t.startTime-e)}}var N,_=!1,k=-1,S=5,C=-1;function E(){return!!v||!(t.unstable_now()-C<S)}function T(){if(v=!1,_){var e=t.unstable_now();C=e;var s=!0;try{e:{f=!1,x&&(x=!1,y(k),k=-1),p=!0;var r=m;try{t:{for(b(e),h=a(c);null!==h&&!(h.expirationTime>e&&E());){var l=h.callback;if("function"===typeof l){h.callback=null,m=h.priorityLevel;var i=l(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){h.callback=i,b(e),s=!0;break t}h===a(c)&&n(c),b(e)}else n(c);h=a(c)}if(null!==h)s=!0;else{var o=a(d);null!==o&&D(w,o.startTime-e),s=!1}}break e}finally{h=null,m=r,p=!1}s=void 0}}finally{s?N():_=!1}}}if("function"===typeof j)N=function(){j(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=T,N=function(){P.postMessage(null)}}else N=function(){g(T,0)};function D(e,s){k=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,n,r){var l=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?l+r:l:r=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:i=r+i,sortIndex:-1},r>l?(e.sortIndex=r,s(d,e),null===a(c)&&e===a(d)&&(x?(y(k),k=-1):x=!0,D(w,r-l))):(e.sortIndex=i,s(c,e),f||p||(f=!0,_||(_=!0,N()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},950(e,t,s){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(672)}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var r=Object.create(null);s.r(r);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>l[e]=()=>a[e]);return l.default=()=>a,s.d(r,l),r}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0;var a=s(43),n=s.t(a,2),r=s(391);function l(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function c(e,t,s){return(t=o(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach(function(t){c(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}const h=["sri"],m=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],x=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var g="popstate";function y(){return S(function(e,t){let{pathname:s,search:a,hash:n}=e.location;return N("",{pathname:s,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:_(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function j(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function N(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:s,key:t&&t.key||a||Math.random().toString(36).substring(2,10)})}function _(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function k(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function S(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:r=!1}=a,l=n.history,i="POP",o=null,c=d();function d(){return(l.state||{idx:null}).idx}function h(){i="POP";let e=d(),t=null==e?null:e-c;c=e,o&&o({action:i,location:p.location,delta:t})}function m(e){return C(e)}null==c&&(c=0,l.replaceState(u(u({},l.state),{},{idx:c}),""));let p={get action(){return i},get location(){return e(n,l)},listen(e){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(g,h),o=e,()=>{n.removeEventListener(g,h),o=null}},createHref:e=>t(n,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let a=N(p.location,e,t);s&&s(a,e),c=d()+1;let u=w(a,c),h=p.createHref(a);try{l.pushState(u,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;n.location.assign(h)}r&&o&&o({action:i,location:p.location,delta:1})},replace:function(e,t){i="REPLACE";let a=N(p.location,e,t);s&&s(a,e),c=d();let n=w(a,c),u=p.createHref(a);l.replaceState(n,"",u),r&&o&&o({action:i,location:p.location,delta:0})},go:e=>l.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="http://localhost";"undefined"!==typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href),j(s,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:_(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}new WeakMap;function E(e,t){return T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function T(e,t,s,a){let n=W(("string"===typeof t?k(t):t).pathname||"/",s);if(null==n)return null;let r=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let l=null;for(let i=0;null==l&&i<r.length;++i){let e=H(n);l=B(r[i],e,a)}return l}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,i=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(a)&&l)return;j(o.relativePath.startsWith(a),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(a,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(a.length)}let c=Z([a,o.relativePath]),d=s.concat(o);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,d,c,l)),(null!=e.path||e.index)&&t.push({path:c,score:z(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!==(s=e.path)&&void 0!==s&&s.includes("?"))for(let a of P(e.path))r(e,t,!0,a);else r(e,t)}),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,n=s.endsWith("?"),r=s.replace(/\?$/,"");if(0===a.length)return n?[r,""]:[r];let l=P(a.join("/")),i=[];return i.push(...l.map(e=>""===e?r:[r,e].join("/"))),n&&i.push(...l),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var D=/^:[\w-]+$/,R=3,O=2,M=1,F=10,L=-2,I=e=>"*"===e;function z(e,t){let s=e.split("/"),a=s.length;return s.some(I)&&(a+=L),t&&(a+=O),s.filter(e=>!I(e)).reduce((e,t)=>e+(D.test(t)?R:""===t?M:F),a)}function B(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,n={},r="/",l=[];for(let i=0;i<a.length;++i){let e=a[i],o=i===a.length-1,c="/"===r?t:t.slice(r.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&s&&!a[a.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),l.push({params:n,pathname:Z([r,d.pathname]),pathnameBase:ee(Z([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=Z([r,d.pathnameBase]))}return l}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=V(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let r=n[0],l=r.replace(/(.)\/+$/,"$1"),i=n.slice(1),o=a.reduce((e,t,s)=>{let{paramName:a,isOptional:n}=t;if("*"===a){let e=i[s]||"";l=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[s];return e[a]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:r,pathnameBase:l,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}var q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=e=>q.test(e);function G(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}function K(e,t,s,a){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(a),"].  Please separate it out to the `to.").concat(s,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function J(e){let t=X(e);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,s){let a,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=k(e):(a=u({},e),j(!a.pathname||!a.pathname.includes("?"),K("?","pathname","search",a)),j(!a.pathname||!a.pathname.includes("#"),K("#","pathname","hash",a)),j(!a.search||!a.search.includes("#"),K("#","search","hash",a)));let r,l=""===e||""===a.pathname,i=l?"/":a.pathname;if(null==i)r=s;else{let e=t.length-1;if(!n&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:a,search:n="",hash:r=""}="string"===typeof e?k(e):e;if(a)if(Y(a))t=a;else{if(a.includes("//")){let e=a;a=a.replace(/\/\/+/g,"/"),b(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(a))}t=a.startsWith("/")?G(a.substring(1),"/"):G(a,s)}else t=s;return{pathname:t,search:te(n),hash:se(r)}}(a,r),c=i&&"/"!==i&&i.endsWith("/"),d=(l||"."===i)&&s.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}var Z=e=>e.join("/").replace(/\/\/+/g,"/"),ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),te=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",se=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ae=class{constructor(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=a,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function re(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var le="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function ie(e,t){let s=e;if("string"!==typeof s||!q.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let a=s,n=!1;if(le)try{let e=new URL(window.location.href),a=s.startsWith("//")?new URL(e.protocol+s):new URL(s),r=W(a.pathname,t);a.origin===e.origin&&null!=r?s=r+a.search+a.hash:n=!0}catch(r){b(!1,'<Link to="'.concat(s,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:a,isExternal:n,to:s}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oe=["POST","PUT","PATCH","DELETE"],ce=(new Set(oe),["GET",...oe]);new Set(ce),Symbol("ResetLoaderData");var de=a.createContext(null);de.displayName="DataRouter";var ue=a.createContext(null);ue.displayName="DataRouterState";var he=a.createContext(!1);function me(){return a.useContext(he)}var pe=a.createContext({isTransitioning:!1});pe.displayName="ViewTransition";var fe=a.createContext(new Map);fe.displayName="Fetchers";var xe=a.createContext(null);xe.displayName="Await";var ve=a.createContext(null);ve.displayName="Navigation";var ge=a.createContext(null);ge.displayName="Location";var ye=a.createContext({outlet:null,matches:[],isDataRoute:!1});ye.displayName="Route";var je=a.createContext(null);je.displayName="RouteError";var be="REACT_ROUTER_ERROR";function we(){return null!=a.useContext(ge)}function Ne(){return j(we(),"useLocation() may be used only in the context of a <Router> component."),a.useContext(ge).location}var _e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(e){a.useContext(ve).static||a.useLayoutEffect(e)}function Se(){let{isDataRoute:e}=a.useContext(ye);return e?function(){let{router:e}=ze("useNavigate"),t=Ue("useNavigate"),s=a.useRef(!1);ke(()=>{s.current=!0});let n=a.useCallback(async function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(s.current,_e),s.current&&("number"===typeof a?await e.navigate(a):await e.navigate(a,u({fromRouteId:t},n)))},[e,t]);return n}():function(){j(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=a.useContext(de),{basename:t,navigator:s}=a.useContext(ve),{matches:n}=a.useContext(ye),{pathname:r}=Ne(),l=JSON.stringify(J(n)),i=a.useRef(!1);ke(()=>{i.current=!0});let o=a.useCallback(function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(i.current,_e),!i.current)return;if("number"===typeof a)return void s.go(a);let o=Q(a,JSON.parse(l),r,"path"===n.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:Z([t,o.pathname])),(n.replace?s.replace:s.push)(o,n.state,n)},[t,s,l,r,e]);return o}()}var Ce=a.createContext(null);function Ee(){let{matches:e}=a.useContext(ye),t=e[e.length-1];return t?t.params:{}}function Te(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:s}=a.useContext(ye),{pathname:n}=Ne(),r=JSON.stringify(J(s));return a.useMemo(()=>Q(e,JSON.parse(r),n,"path"===t),[e,r,n,t])}function Ae(e,t,s,n,r){j(we(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=a.useContext(ve),{matches:i}=a.useContext(ye),o=i[i.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let e=m&&m.path||"";We(d,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=Ne();if(t){var x;let e="string"===typeof t?k(t):t;j("/"===h||(null===(x=e.pathname)||void 0===x?void 0:x.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let v=p.pathname||"/",g=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");g="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=E(e,{pathname:g});b(m||null!=y,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=Le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Z([h,l.encodeLocation?l.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Z([h,l.encodeLocation?l.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,s,n,r);return t&&w?a.createElement(ge.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},w):w}function Pe(){let e=Ve(),t=ne(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=a.createElement(a.Fragment,null,a.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),a.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",a.createElement("code",{style:l},"ErrorBoundary")," or"," ",a.createElement("code",{style:l},"errorElement")," prop on your route.")),a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),s?a.createElement("pre",{style:r},s):null,i)}var De=a.createElement(Pe,null),Re=class extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(be,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ae(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?a.createElement(ye.Provider,{value:this.props.routeContext},a.createElement(je.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?a.createElement(Me,{error:e},t):t}};Re.contextType=he;var Oe=new WeakMap;function Me(e){let{children:t,error:s}=e,{basename:n}=a.useContext(ve);if("object"===typeof s&&s&&"digest"in s&&"string"===typeof s.digest){let e=function(e){if(e.startsWith("".concat(be,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(s.digest);if(e){let t=Oe.get(s);if(t)throw t;let r=ie(e.location,n);if(le&&!Oe.get(s)){if(!r.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:e.replace}));throw Oe.set(s,t),t}window.location.href=r.absoluteURL||r.to}return a.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(r.absoluteURL||r.to)})}}return t}function Fe(e){let{routeContext:t,match:s,children:n}=e,r=a.useContext(de);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),a.createElement(ye.Provider,{value:t},n)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let r=e,l=null===s||void 0===s?void 0:s.errors;if(null!=l){let e=r.findIndex(e=>e.route.id&&void 0!==(null===l||void 0===l?void 0:l[e.route.id]));j(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(l).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let i=!1,o=-1;if(s)for(let a=0;a<r.length;a++){let e=r[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=a),e.route.id){let{loaderData:t,errors:a}=s,n=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){i=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}let c=s&&n?(e,t)=>{var a,r;n(e,{location:s.location,params:null!==(a=null===(r=s.matches)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)&&void 0!==a?a:{},unstable_pattern:re(s.matches),errorInfo:t})}:void 0;return r.reduceRight((e,n,d)=>{let u,h=!1,m=null,p=null;s&&(u=l&&n.route.id?l[n.route.id]:void 0,m=n.route.errorElement||De,i&&(o<0&&0===d?(We("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):o===d&&(h=!0,p=n.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,d+1)),x=()=>{let t;return t=u?m:h?p:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(Fe,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(n.route.ErrorBoundary||n.route.errorElement||0===d)?a.createElement(Re,{location:s.location,revalidation:s.revalidation,component:m,error:u,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):x()},null)}function Ie(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ze(e){let t=a.useContext(de);return j(t,Ie(e)),t}function Be(e){let t=a.useContext(ue);return j(t,Ie(e)),t}function Ue(e){let t=function(e){let t=a.useContext(ye);return j(t,Ie(e)),t}(e),s=t.matches[t.matches.length-1];return j(s.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),s.route.id}function Ve(){var e;let t=a.useContext(je),s=Be("useRouteError"),n=Ue("useRouteError");return void 0!==t?t:null===(e=s.errors)||void 0===e?void 0:e[n]}var He={};function We(e,t,s){t||He[e]||(He[e]=!0,b(!1,s))}var qe={};function Ye(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}n.useOptimistic;a.memo(function(e){let{routes:t,future:s,state:a,onError:n}=e;return Ae(t,void 0,a,n,s)});function Ge(e){let{to:t,replace:s,state:n,relative:r}=e;j(we(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=a.useContext(ve);b(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=a.useContext(ye),{pathname:o}=Ne(),c=Se(),d=Q(t,J(i),o,"path"===r),u=JSON.stringify(d);return a.useEffect(()=>{c(JSON.parse(u),{replace:s,state:n,relative:r})},[c,u,r,s,n]),null}function Ke(e){return function(e){let t=a.useContext(ye).outlet;return a.useMemo(()=>t&&a.createElement(Ce.Provider,{value:e},t),[t,e])}(e.context)}function $e(e){j(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xe(e){let{basename:t="/",children:s=null,location:n,navigationType:r="POP",navigator:l,static:i=!1,unstable_useTransitions:o}=e;j(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=a.useMemo(()=>({basename:c,navigator:l,static:i,unstable_useTransitions:o,future:{}}),[c,l,i,o]);"string"===typeof n&&(n=k(n));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:f="default"}=n,x=a.useMemo(()=>{let e=W(u,c);return null==e?null:{location:{pathname:e,search:h,hash:m,state:p,key:f},navigationType:r}},[c,u,h,m,p,f,r]);return b(null!=x,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(h).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==x?null:a.createElement(ve.Provider,{value:d},a.createElement(ge.Provider,{children:s,value:x}))}function Je(e){let{children:t,location:s}=e;return Ae(Qe(t),s)}a.Component;function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let r=[...t,n];if(e.type===a.Fragment)return void s.push.apply(s,Qe(e.props.children,r));j(e.type===$e,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),j(!e.props.index||!e.props.children,"An index route cannot have child routes.");let l={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=Qe(e.props.children,r)),s.push(l)}),s}var Ze="get",et="application/x-www-form-urlencoded";function tt(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var st=null;var at=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nt(e){return null==e||at.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(et,'"')),null)}function rt(e,t){let s,a,n,r,l;if(tt(i=e)&&"form"===i.tagName.toLowerCase()){let l=e.getAttribute("action");a=l?W(l,t):null,s=e.getAttribute("method")||Ze,n=nt(e.getAttribute("enctype"))||et,r=new FormData(e)}else if(function(e){return tt(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return tt(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let l=e.form;if(null==l)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||l.getAttribute("action");if(a=i?W(i,t):null,s=e.getAttribute("formmethod")||l.getAttribute("method")||Ze,n=nt(e.getAttribute("formenctype"))||nt(l.getAttribute("enctype"))||et,r=new FormData(l,e),!function(){if(null===st)try{new FormData(document.createElement("form"),0),st=!1}catch(e){st=!0}return st}()){let{name:t,type:s,value:a}=e;if("image"===s){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,a)}}else{if(tt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ze,a=null,n=et,l=e}var i;return r&&"text/plain"===n&&(l=r,r=void 0),{action:a,method:s.toLowerCase(),encType:n,formData:r,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function lt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function it(e,t,s){let a="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname="_root.".concat(s):t&&"/"===W(a.pathname,t)?a.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(s):a.pathname="".concat(a.pathname.replace(/\/$/,""),".").concat(s),a}async function ot(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ct(e){return null!=e&&"string"===typeof e.page}function dt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ut(e,t,s,a,n,r){let l=(e,t)=>!s[t]||e.route.id!==s[t].route.id,i=(e,t)=>{var a;return s[t].pathname!==e.pathname||(null===(a=s[t].route.path)||void 0===a?void 0:a.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>l(e,t)||i(e,t)):"data"===r?t.filter((t,r)=>{let o=a.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(l(t,r)||i(t,r))return!0;if(t.route.shouldRevalidate){var c;let a=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null===(c=s[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function ht(e,t){let{includeHydrateFallback:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let n=[a.module];return a.clientActionModule&&(n=n.concat(a.clientActionModule)),a.clientLoaderModule&&(n=n.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(n=n.concat(a.hydrateFallbackModule)),a.imports&&(n=n.concat(a.imports)),n}).flat(1),[...new Set(a)];var a}function mt(e,t){let s=new Set,a=new Set(t);return e.reduce((e,n)=>{if(t&&!ct(n)&&"script"===n.as&&n.href&&a.has(n.href))return e;let r=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}(n));return s.has(r)||(s.add(r),e.push({key:r,link:n})),e},[])}function pt(e,t){return"lazy"===e.mode&&!0===t}function ft(){let e=a.useContext(de);return lt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xt(){let e=a.useContext(ue);return lt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vt=a.createContext(void 0);function gt(){let e=a.useContext(vt);return lt(e,"You must render this element inside a <HydratedRouter> element"),e}function yt(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function jt(e,t,s){if(s&&!_t)return[e[0]];if(t){let s=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,s+1)}return e}vt.displayName="FrameworkContext";function bt(e){let{page:t}=e,s=l(e,m),{router:n}=ft(),r=a.useMemo(()=>E(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?a.createElement(Nt,u({page:t,matches:r},s)):null}function wt(e){let{manifest:t,routeModules:s}=gt(),[n,r]=a.useState([]);return a.useEffect(()=>{let a=!1;return async function(e,t,s){let a=await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await ot(a,s);return e.links?e.links():[]}return[]}));return mt(a.flat(1).filter(dt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,s).then(e=>{a||r(e)}),()=>{a=!0}},[e,t,s]),n}function Nt(e){let{page:t,matches:s}=e,n=l(e,p),r=Ne(),{manifest:i,routeModules:o}=gt(),{basename:c}=ft(),{loaderData:d,matches:h}=xt(),m=a.useMemo(()=>ut(t,s,h,i,r,"data"),[t,s,h,i,r]),f=a.useMemo(()=>ut(t,s,h,i,r,"assets"),[t,s,h,i,r]),x=a.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let e=new Set,a=!1;if(s.forEach(t=>{var s;let n=i.routes[t.route.id];n&&n.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(s=o[t.route.id])&&void 0!==s&&s.shouldRevalidate||n.hasClientLoader?a=!0:e.add(t.route.id))}),0===e.size)return[];let n=it(t,c,"data");return a&&e.size>0&&n.searchParams.set("_routes",s.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[c,d,r,i,m,s,t,o]),v=a.useMemo(()=>ht(f,i),[f,i]),g=wt(f);return a.createElement(a.Fragment,null,x.map(e=>a.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},n))),v.map(e=>a.createElement("link",u({key:e,rel:"modulepreload",href:e},n))),g.map(e=>{let{key:t,link:s}=e;return a.createElement("link",u({key:t,nonce:n.nonce},s))}))}var _t=!1;function kt(e){let{manifest:t,serverHandoffString:s,isSpaMode:n,renderMeta:r,routeDiscovery:i,ssr:o}=gt(),{router:c,static:d,staticContext:m}=ft(),{matches:p}=xt(),f=me(),x=pt(i,o);r&&(r.didRenderScripts=!0);let v=jt(p,null,n);a.useEffect(()=>{_t=!0},[]);let g=a.useMemo(()=>{var n;if(f)return null;let r=m?"window.__reactRouterContext = ".concat(s,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=d?"".concat(null!==(n=t.hmr)&&void 0!==n&&n.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(x?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,s)=>{let a="route".concat(s),n=t.routes[e.route.id];lt(n,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:l,clientMiddlewareModule:i,hydrateFallbackModule:o,module:c}=n,d=[...r?[{module:r,varName:"".concat(a,"_clientAction")}]:[],...l?[{module:l,varName:"".concat(a,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(a,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(a,"_HydrateFallback")}]:[],{module:c,varName:"".concat(a,"_main")}];return 1===d.length?"import * as ".concat(a," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(a," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(x?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:s}=e,a=l(e,h),n=new Set(t.state.matches.map(e=>e.route.id)),r=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(r.pop();r.length>0;)i.push("/".concat(r.join("/"))),r.pop();i.forEach(e=>{let s=E(t.routes,e,t.basename);s&&s.forEach(e=>n.add(e.route.id))});let o=[...n].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return u(u({},a),{},{routes:o,sri:!!s||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return a.createElement(a.Fragment,null,a.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),a.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),y=_t||f?[]:(j=t.entry.imports.concat(ht(v,t,{includeHydrateFallback:!0})),[...new Set(j)]);var j;let b="object"===typeof t.sri?t.sri:{};return Ye(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),_t||f?null:a.createElement(a.Fragment,null,"object"===typeof t.sri?a.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,x?null:a.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:b[t.url],suppressHydrationWarning:!0}),a.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:b[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>a.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:b[t],suppressHydrationWarning:!0})),g)}function St(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}a.Component;function Ct(e){let{error:t,isOutsideRemixApp:s}=e;console.error(t);let n,r=a.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ne(t))return a.createElement(Et,{title:"Unhandled Thrown Response!"},a.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)n=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);n=new Error(e)}return a.createElement(Et,{title:"Application Error!",isOutsideRemixApp:s},a.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),a.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),r)}function Et(e){var t;let{title:s,renderScripts:n,isOutsideRemixApp:r,children:l}=e,{routeModules:i}=gt();return null!==(t=i.root)&&void 0!==t&&t.Layout&&!r?l:a.createElement("html",{lang:"en"},a.createElement("head",null,a.createElement("meta",{charSet:"utf-8"}),a.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),a.createElement("title",null,s)),a.createElement("body",null,a.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},l,n?a.createElement(kt,null):null)))}var Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Tt&&(window.__reactRouterVersion="7.11.0")}catch(sI){}function At(e){let{basename:t,children:s,unstable_useTransitions:n,window:r}=e,l=a.useRef();null==l.current&&(l.current=y({window:r,v5Compat:!0}));let i=l.current,[o,c]=a.useState({action:i.action,location:i.location}),d=a.useCallback(e=>{!1===n?c(e):a.startTransition(()=>c(e))},[n]);return a.useLayoutEffect(()=>i.listen(d),[i,d]),a.createElement(Xe,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var Pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=a.forwardRef(function(e,t){let{onClick:s,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:d,target:h,to:m,preventScrollReset:p,viewTransition:x,unstable_defaultShouldRevalidate:v}=e,g=l(e,f),{basename:y,unstable_useTransitions:b}=a.useContext(ve),w="string"===typeof m&&Pt.test(m),N=ie(m,y);m=N.to;let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=a.useContext(ve),{hash:r,pathname:l,search:i}=Te(e,{relative:t}),o=l;return"/"!==s&&(o="/"===l?s:Z([s,l])),n.createHref({pathname:o,search:i,hash:r})}(m,{relative:i}),[S,C,E]=function(e,t){let s=a.useContext(vt),[n,r]=a.useState(!1),[l,i]=a.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=a.useRef(null);a.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),a.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let p=()=>{r(!0)},f=()=>{r(!1),i(!1)};return s?"intent"!==e?[l,m,{}]:[l,m,{onFocus:yt(o,p),onBlur:yt(c,f),onMouseEnter:yt(d,p),onMouseLeave:yt(u,f),onTouchStart:yt(h,p)}]:[!1,m,{}]}(r,g),T=function(e){let{target:t,replace:s,state:n,preventScrollReset:r,relative:l,viewTransition:i,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=Se(),u=Ne(),h=Te(e,{relative:l});return a.useCallback(m=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(m,t)){m.preventDefault();let t=void 0!==s?s:_(u)===_(h),p=()=>d(e,{replace:t,state:n,preventScrollReset:r,relative:l,viewTransition:i,unstable_defaultShouldRevalidate:o});c?a.startTransition(()=>p()):p()}},[u,d,h,s,n,t,e,r,l,i,o,c])}(m,{replace:c,state:d,target:h,preventScrollReset:p,relative:i,viewTransition:x,unstable_defaultShouldRevalidate:v,unstable_useTransitions:b});let A=a.createElement("a",u(u(u({},g),E),{},{href:N.absoluteURL||k,onClick:N.isExternal||o?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:St(t,C),target:h,"data-discover":w||"render"!==n?void 0:"true"}));return S&&!w?a.createElement(a.Fragment,null,A,a.createElement(bt,{page:k})):A});Dt.displayName="Link",a.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:h}=e,m=l(e,x),p=Te(c,{relative:m.relative}),f=Ne(),v=a.useContext(ue),{navigator:g,basename:y}=a.useContext(ve),b=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.useContext(pe);j(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Mt("useViewTransitionState"),r=Te(e,{relative:t});if(!s.isTransitioning)return!1;let l=W(s.currentLocation.pathname,n)||s.currentLocation.pathname,i=W(s.nextLocation.pathname,n)||s.nextLocation.pathname;return null!=U(r.pathname,i)||null!=U(r.pathname,l)}(p)&&!0===d,w=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,N=f.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(N=N.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&y&&(_=W(_,y)||_);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,C=N===w||!i&&N.startsWith(w)&&"/"===N.charAt(k),E=null!=_&&(_===w||!i&&_.startsWith(w)&&"/"===_.charAt(w.length)),T={isActive:C,isPending:E,isTransitioning:b},A=C?s:void 0;S="function"===typeof r?r(T):[r,C?"active":null,E?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof o?o(T):o;return a.createElement(Dt,u(u({},m),{},{"aria-current":A,className:S,ref:t,style:P,to:c,viewTransition:d}),"function"===typeof h?h(T):h)}).displayName="NavLink";var Rt=a.forwardRef((e,t)=>{let{discover:s="render",fetcherKey:n,navigate:r,reloadDocument:i,replace:o,state:c,method:d=Ze,action:h,onSubmit:m,relative:p,preventScrollReset:f,viewTransition:x,unstable_defaultShouldRevalidate:g}=e,y=l(e,v),{unstable_useTransitions:b}=a.useContext(ve),w=It(),N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:s}=a.useContext(ve),n=a.useContext(ye);j(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),l=u({},Te(e||".",{relative:t})),i=Ne();if(null==e){l.search=i.search;let e=new URLSearchParams(l.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let s=e.toString();l.search=s?"?".concat(s):""}}e&&"."!==e||!r.route.index||(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index");"/"!==s&&(l.pathname="/"===l.pathname?s:Z([s,l.pathname]));return _(l)}(h,{relative:p}),k="get"===d.toLowerCase()?"get":"post",S="string"===typeof h&&Pt.test(h);return a.createElement("form",u(u({ref:t,method:k,action:N,onSubmit:i?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,l=()=>w(t||e.currentTarget,{fetcherKey:n,method:s,navigate:r,replace:o,state:c,relative:p,preventScrollReset:f,viewTransition:x,unstable_defaultShouldRevalidate:g});b&&!1!==r?a.startTransition(()=>l()):l()}},y),{},{"data-discover":S||"render"!==s?void 0:"true"}))});function Ot(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Mt(e){let t=a.useContext(de);return j(t,Ot(e)),t}Rt.displayName="Form";var Ft=0,Lt=()=>"__".concat(String(++Ft),"__");function It(){let{router:e}=Mt("useSubmit"),{basename:t}=a.useContext(ve),s=Ue("useRouteId"),n=e.fetch,r=e.navigate;return a.useCallback(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:l,method:i,encType:o,formData:c,body:d}=rt(e,t);if(!1===a.navigate){let e=a.fetcherKey||Lt();await n(e,s,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await r(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,r,t,s])}var zt=(e,t,s,a,n,r,l,i)=>{let o=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let s="class"===e,a=s&&r?n.map(e=>r[e]||e):n;s?(o.classList.remove(...a),o.classList.add(r&&r[t]?r[t]:t)):o.setAttribute(e,t)}),function(e){i&&c.includes(e)&&(o.style.colorScheme=e)}(t)}if(a)d(a);else try{let e=localStorage.getItem(t)||s;d(l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},Bt=a.createContext(void 0),Ut={setTheme:e=>{},themes:[]},Vt=(a.memo(e=>{let{forcedTheme:t,storageKey:s,attribute:n,enableSystem:r,enableColorScheme:l,defaultTheme:i,value:o,themes:c,nonce:d,scriptProps:h}=e,m=JSON.stringify([n,s,i,t,c,o,r,l]).slice(1,-1);return a.createElement("script",u(u({},h),{},{suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(zt.toString(),")(").concat(m,")")}}))}),s(950));const Ht=["message"];const Wt=Array(12).fill(0),qt=e=>{let{visible:t,className:s}=e;return a.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},a.createElement("div",{className:"sonner-spinner"},Wt.map((e,t)=>a.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(t)}))))},Yt=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Gt=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Kt=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$t=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Xt=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Jt=1;const Qt=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s}=e,a=l(e,Ht),n="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Jt++,r=this.toasts.find(e=>e.id===n),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),r?this.toasts=this.toasts.map(t=>t.id===n?(this.publish(u(u(u({},t),e),{},{id:n,title:s})),u(u(u({},t),e),{},{id:n,dismissible:i,title:s})):t):this.addToast(u(u({title:s},a),{},{dismissible:i,id:n})),n},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create(u(u({},t),{},{message:e})),this.error=(e,t)=>this.create(u(u({},t),{},{message:e,type:"error"})),this.success=(e,t)=>this.create(u(u({},t),{},{type:"success",message:e})),this.info=(e,t)=>this.create(u(u({},t),{},{type:"info",message:e})),this.warning=(e,t)=>this.create(u(u({},t),{},{type:"warning",message:e})),this.loading=(e,t)=>this.create(u(u({},t),{},{type:"loading",message:e})),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create(u(u({},t),{},{promise:e,type:"loading",message:t.loading,description:"function"!==typeof t.description?t.description:void 0})));const n=Promise.resolve(e instanceof Function?e():e);let r,l=void 0!==s;const i=n.then(async e=>{r=["resolve",e];if(a.isValidElement(e))l=!1,this.create({id:s,type:"default",message:e});else if(Zt(e)&&!e.ok){l=!1;const n="function"===typeof t.error?await t.error("HTTP error! status: ".concat(e.status)):t.error,r="function"===typeof t.description?await t.description("HTTP error! status: ".concat(e.status)):t.description,i="object"===typeof n&&!a.isValidElement(n)?n:{message:n};this.create(u({id:s,type:"error",description:r},i))}else if(e instanceof Error){l=!1;const n="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,i="object"===typeof n&&!a.isValidElement(n)?n:{message:n};this.create(u({id:s,type:"error",description:r},i))}else if(void 0!==t.success){l=!1;const n="function"===typeof t.success?await t.success(e):t.success,r="function"===typeof t.description?await t.description(e):t.description,i="object"===typeof n&&!a.isValidElement(n)?n:{message:n};this.create(u({id:s,type:"success",description:r},i))}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){l=!1;const n="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,i="object"===typeof n&&!a.isValidElement(n)?n:{message:n};this.create(u({id:s,type:"error",description:r},i))}}).finally(()=>{l&&(this.dismiss(s),s=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!==typeof s&&"number"!==typeof s?{unwrap:o}:Object.assign(s,{unwrap:o})},this.custom=(e,t)=>{const s=(null==t?void 0:t.id)||Jt++;return this.create(u({jsx:e(s),id:s},t)),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Zt=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,es=(e,t)=>{const s=(null==t?void 0:t.id)||Jt++;return Qt.addToast(u(u({title:e},t),{},{id:s})),s},ts=Object.assign(es,{success:Qt.success,info:Qt.info,warning:Qt.warning,error:Qt.error,custom:Qt.custom,message:Qt.message,promise:Qt.promise,dismiss:Qt.dismiss,loading:Qt.loading},{getHistory:()=>Qt.toasts,getToasts:()=>Qt.getActiveToasts()});function ss(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const as=3,ns=14;function rs(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}const ls=e=>{var t,s,n,r,l,i,o,c,d;const{invert:h,toast:m,unstyled:p,interacting:f,setHeights:x,visibleToasts:v,heights:g,index:y,toasts:j,expanded:b,removeToast:w,defaultRichColors:N,closeButton:_,style:k,cancelButtonStyle:S,actionButtonStyle:C,className:E="",descriptionClassName:T="",duration:A,position:P,gap:D,expandByDefault:R,classNames:O,icons:M,closeButtonAriaLabel:F="Close toast"}=e,[L,I]=a.useState(null),[z,B]=a.useState(null),[U,V]=a.useState(!1),[H,W]=a.useState(!1),[q,Y]=a.useState(!1),[G,K]=a.useState(!1),[$,X]=a.useState(!1),[J,Q]=a.useState(0),[Z,ee]=a.useState(0),te=a.useRef(m.duration||A||4e3),se=a.useRef(null),ae=a.useRef(null),ne=0===y,re=y+1<=v,le=m.type,ie=!1!==m.dismissible,oe=m.className||"",ce=m.descriptionClassName||"",de=a.useMemo(()=>g.findIndex(e=>e.toastId===m.id)||0,[g,m.id]),ue=a.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:_},[m.closeButton,_]),he=a.useMemo(()=>m.duration||A||4e3,[m.duration,A]),me=a.useRef(0),pe=a.useRef(0),fe=a.useRef(0),xe=a.useRef(null),[ve,ge]=P.split("-"),ye=a.useMemo(()=>g.reduce((e,t,s)=>s>=de?e:e+t.height,0),[g,de]),je=(()=>{const[e,t]=a.useState(document.hidden);return a.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),be=m.invert||h,we="loading"===le;pe.current=a.useMemo(()=>de*D+ye,[de,ye]),a.useEffect(()=>{te.current=he},[he]),a.useEffect(()=>{V(!0)},[]),a.useEffect(()=>{const e=ae.current;if(e){const t=e.getBoundingClientRect().height;return ee(t),x(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>x(e=>e.filter(e=>e.toastId!==m.id))}},[x,m.id]),a.useLayoutEffect(()=>{if(!U)return;const e=ae.current,t=e.style.height;e.style.height="auto";const s=e.getBoundingClientRect().height;e.style.height=t,ee(s),x(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?u(u({},e),{},{height:s}):e):[{toastId:m.id,height:s,position:m.position},...e])},[U,m.title,m.description,x,m.id,m.jsx,m.action,m.cancel]);const Ne=a.useCallback(()=>{W(!0),Q(pe.current),x(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{w(m)},200)},[m,w,x,pe]);a.useEffect(()=>{if(m.promise&&"loading"===le||m.duration===1/0||"loading"===m.type)return;let e;return b||f||je?(()=>{if(fe.current<me.current){const e=(new Date).getTime()-me.current;te.current=te.current-e}fe.current=(new Date).getTime()})():te.current!==1/0&&(me.current=(new Date).getTime(),e=setTimeout(()=>{null==m.onAutoClose||m.onAutoClose.call(m,m),Ne()},te.current)),()=>clearTimeout(e)},[b,f,m,le,je,Ne]),a.useEffect(()=>{m.delete&&(Ne(),null==m.onDismiss||m.onDismiss.call(m,m))},[Ne,m.delete]);const _e=m.icon||(null==M?void 0:M[le])||(e=>{switch(e){case"success":return Yt;case"info":return Kt;case"warning":return Gt;case"error":return $t;default:return null}})(le);var ke,Se;return a.createElement("li",{tabIndex:0,ref:ae,className:rs(E,oe,null==O?void 0:O.toast,null==m||null==(t=m.classNames)?void 0:t.toast,null==O?void 0:O.default,null==O?void 0:O[le],null==m||null==(s=m.classNames)?void 0:s[le]),"data-sonner-toast":"","data-rich-colors":null!=(ke=m.richColors)?ke:N,"data-styled":!Boolean(m.jsx||m.unstyled||p),"data-mounted":U,"data-promise":Boolean(m.promise),"data-swiped":$,"data-removed":H,"data-visible":re,"data-y-position":ve,"data-x-position":ge,"data-index":y,"data-front":ne,"data-swiping":q,"data-dismissible":ie,"data-type":le,"data-invert":be,"data-swipe-out":G,"data-swipe-direction":z,"data-expanded":Boolean(b||R&&U),"data-testid":m.testId,style:u(u({"--index":y,"--toasts-before":y,"--z-index":j.length-y,"--offset":"".concat(H?J:pe.current,"px"),"--initial-height":R?"auto":"".concat(Z,"px")},k),m.style),onDragEnd:()=>{Y(!1),I(null),xe.current=null},onPointerDown:e=>{2!==e.button&&!we&&ie&&(se.current=new Date,Q(pe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),xe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s;if(G||!ie)return;xe.current=null;const a=Number((null==(e=ae.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=ae.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),r=(new Date).getTime()-(null==(s=se.current)?void 0:s.getTime()),l="x"===L?a:n,i=Math.abs(l)/r;if(Math.abs(l)>=45||i>.11)return Q(pe.current),null==m.onDismiss||m.onDismiss.call(m,m),B("x"===L?a>0?"right":"left":n>0?"down":"up"),Ne(),void K(!0);var o,c;null==(o=ae.current)||o.style.setProperty("--swipe-amount-x","0px"),null==(c=ae.current)||c.style.setProperty("--swipe-amount-y","0px"),X(!1),Y(!1),I(null)},onPointerMove:t=>{var s,a,n;if(!xe.current||!ie)return;if((null==(s=window.getSelection())?void 0:s.toString().length)>0)return;const r=t.clientY-xe.current.y,l=t.clientX-xe.current.x;var i;const o=null!=(i=e.swipeDirections)?i:function(e){const[t,s]=e.split("-"),a=[];return t&&a.push(t),s&&a.push(s),a}(P);!L&&(Math.abs(l)>1||Math.abs(r)>1)&&I(Math.abs(l)>Math.abs(r)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===L){if(o.includes("top")||o.includes("bottom"))if(o.includes("top")&&r<0||o.includes("bottom")&&r>0)c.y=r;else{const e=r*d(r);c.y=Math.abs(e)<Math.abs(r)?e:r}}else if("x"===L&&(o.includes("left")||o.includes("right")))if(o.includes("left")&&l<0||o.includes("right")&&l>0)c.x=l;else{const e=l*d(l);c.x=Math.abs(e)<Math.abs(l)?e:l}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&X(!0),null==(a=ae.current)||a.style.setProperty("--swipe-amount-x","".concat(c.x,"px")),null==(n=ae.current)||n.style.setProperty("--swipe-amount-y","".concat(c.y,"px"))}},ue&&!m.jsx&&"loading"!==le?a.createElement("button",{"aria-label":F,"data-disabled":we,"data-close-button":!0,onClick:we||!ie?()=>{}:()=>{Ne(),null==m.onDismiss||m.onDismiss.call(m,m)},className:rs(null==O?void 0:O.closeButton,null==m||null==(n=m.classNames)?void 0:n.closeButton)},null!=(Se=null==M?void 0:M.close)?Se:Xt):null,(le||m.icon||m.promise)&&null!==m.icon&&(null!==(null==M?void 0:M[le])||m.icon)?a.createElement("div",{"data-icon":"",className:rs(null==O?void 0:O.icon,null==m||null==(r=m.classNames)?void 0:r.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||function(){var e,t;return(null==M?void 0:M.loading)?a.createElement("div",{className:rs(null==O?void 0:O.loader,null==m||null==(t=m.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===le},M.loading):a.createElement(qt,{className:rs(null==O?void 0:O.loader,null==m||null==(e=m.classNames)?void 0:e.loader),visible:"loading"===le})}():null,"loading"!==m.type?_e:null):null,a.createElement("div",{"data-content":"",className:rs(null==O?void 0:O.content,null==m||null==(l=m.classNames)?void 0:l.content)},a.createElement("div",{"data-title":"",className:rs(null==O?void 0:O.title,null==m||null==(i=m.classNames)?void 0:i.title)},m.jsx?m.jsx:"function"===typeof m.title?m.title():m.title),m.description?a.createElement("div",{"data-description":"",className:rs(T,ce,null==O?void 0:O.description,null==m||null==(o=m.classNames)?void 0:o.description)},"function"===typeof m.description?m.description():m.description):null),a.isValidElement(m.cancel)?m.cancel:m.cancel&&ss(m.cancel)?a.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:e=>{ss(m.cancel)&&ie&&(null==m.cancel.onClick||m.cancel.onClick.call(m.cancel,e),Ne())},className:rs(null==O?void 0:O.cancelButton,null==m||null==(c=m.classNames)?void 0:c.cancelButton)},m.cancel.label):null,a.isValidElement(m.action)?m.action:m.action&&ss(m.action)?a.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:e=>{ss(m.action)&&(null==m.action.onClick||m.action.onClick.call(m.action,e),e.defaultPrevented||Ne())},className:rs(null==O?void 0:O.actionButton,null==m||null==(d=m.classNames)?void 0:d.actionButton)},m.action.label):null)};function is(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function os(e,t){const s={};return[e,t].forEach((e,t)=>{const a=1===t,n=a?"--mobile-offset":"--offset",r=a?"16px":"24px";function l(e){["top","right","bottom","left"].forEach(t=>{s["".concat(n,"-").concat(t)]="number"===typeof e?"".concat(e,"px"):e})}"number"===typeof e||"string"===typeof e?l(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s["".concat(n,"-").concat(t)]=r:s["".concat(n,"-").concat(t)]="number"===typeof e[t]?"".concat(e[t],"px"):e[t]}):l(r)}),s}const cs=a.forwardRef(function(e,t){const{id:s,invert:n,position:r="bottom-right",hotkey:l=["altKey","KeyT"],expand:i,closeButton:o,className:c,offset:d,mobileOffset:h,theme:m="light",richColors:p,duration:f,style:x,visibleToasts:v=as,toastOptions:g,dir:y=is(),gap:j=ns,icons:b,containerAriaLabel:w="Notifications"}=e,[N,_]=a.useState([]),k=a.useMemo(()=>s?N.filter(e=>e.toasterId===s):N.filter(e=>!e.toasterId),[N,s]),S=a.useMemo(()=>Array.from(new Set([r].concat(k.filter(e=>e.position).map(e=>e.position)))),[k,r]),[C,E]=a.useState([]),[T,A]=a.useState(!1),[P,D]=a.useState(!1),[R,O]=a.useState("system"!==m?m:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=a.useRef(null),F=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=a.useRef(null),I=a.useRef(!1),z=a.useCallback(e=>{_(t=>{var s;return(null==(s=t.find(t=>t.id===e.id))?void 0:s.delete)||Qt.dismiss(e.id),t.filter(t=>{let{id:s}=t;return s!==e.id})})},[]);return a.useEffect(()=>Qt.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{_(t=>t.map(t=>t.id===e.id?u(u({},t),{},{delete:!0}):t))}):setTimeout(()=>{Vt.flushSync(()=>{_(t=>{const s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),u(u({},t[s]),e),...t.slice(s+1)]:[e,...t]})})})}),[N]),a.useEffect(()=>{if("system"!==m)return void O(m);if("system"===m&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;O(t?"dark":"light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{O(t?"dark":"light")}catch(sI){console.error(sI)}})}},[m]),a.useEffect(()=>{N.length<=1&&A(!1)},[N]),a.useEffect(()=>{const e=e=>{var t;var s;l.every(t=>e[t]||e.code===t)&&(A(!0),null==(s=M.current)||s.focus());"Escape"!==e.code||document.activeElement!==M.current&&!(null==(t=M.current)?void 0:t.contains(document.activeElement))||A(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l]),a.useEffect(()=>{if(M.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,I.current=!1)}},[M.current]),a.createElement("section",{ref:t,"aria-label":"".concat(w," ").concat(F),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((t,s)=>{var r;const[l,m]=t.split("-");return k.length?a.createElement("ol",{key:t,dir:"auto"===y?is():y,tabIndex:-1,ref:M,className:c,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":l,"data-x-position":m,style:u(u({"--front-toast-height":"".concat((null==(r=C[0])?void 0:r.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(j,"px")},x),os(d,h)),onBlur:e=>{I.current&&!e.currentTarget.contains(e.relatedTarget)&&(I.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||I.current||(I.current=!0,L.current=e.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{P||A(!1)},onDragEnd:()=>A(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D(!0)},onPointerUp:()=>D(!1)},k.filter(e=>!e.position&&0===s||e.position===t).map((s,r)=>{var l,c;return a.createElement(ls,{key:s.id,icons:b,index:r,toast:s,defaultRichColors:p,duration:null!=(l=null==g?void 0:g.duration)?l:f,className:null==g?void 0:g.className,descriptionClassName:null==g?void 0:g.descriptionClassName,invert:n,visibleToasts:v,closeButton:null!=(c=null==g?void 0:g.closeButton)?c:o,interacting:P,position:t,style:null==g?void 0:g.style,unstyled:null==g?void 0:g.unstyled,classNames:null==g?void 0:g.classNames,cancelButtonStyle:null==g?void 0:g.cancelButtonStyle,actionButtonStyle:null==g?void 0:g.actionButtonStyle,closeButtonAriaLabel:null==g?void 0:g.closeButtonAriaLabel,removeToast:z,toasts:k.filter(e=>e.position==s.position),heights:C.filter(e=>e.position==s.position),setHeights:E,expandByDefault:i,gap:j,expanded:T,swipeDirections:e.swipeDirections})})):null}))});var ds=s(579);const us=e=>{let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const{theme:s="system"}=(()=>{var e;return null!=(e=a.useContext(Bt))?e:Ut})();return(0,ds.jsx)(cs,u({theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},t))},hs=e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const s=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return s.addPlatform=(e,t)=>{s.platforms.set(e,t)},s.setPlatform=e=>{s.platforms.has(e)&&(s.currentPlatform=s.platforms.get(e))},s})(e),ms=hs("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{});ms.addPlatform,ms.setPlatform;var ps;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(ps||(ps={}));class fs extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const xs=e=>{var t,s,a,n,r;const l=e.CapacitorCustomPlatform||null,i=e.Capacitor||{},o=i.Plugins=i.Plugins||{},c=e.CapacitorPlatforms,d=(null===(t=null===c||void 0===c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==l?l.name:(e=>{var t,s;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"})(e)),u=(null===(s=null===c||void 0===c?void 0:c.currentPlatform)||void 0===s?void 0:s.isNativePlatform)||(()=>"web"!==d()),h=(null===(a=null===c||void 0===c?void 0:c.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||(e=>{const t=p.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(d()))||!!m(e)}),m=(null===(n=null===c||void 0===c?void 0:c.currentPlatform)||void 0===n?void 0:n.getPluginHeader)||(e=>{var t;return null===(t=i.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),p=new Map,f=(null===(r=null===c||void 0===c?void 0:c.currentPlatform)||void 0===r?void 0:r.registerPlugin)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=p.get(e);if(s)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),s.proxy;const a=d(),n=m(e);let r;const c=s=>{let o;const c=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];const h=(async()=>(!r&&a in t?r=r="function"===typeof t[a]?await t[a]():t[a]:null!==l&&!r&&"web"in t&&(r=r="function"===typeof t.web?await t.web():t.web),r))().then(t=>{const r=((t,s)=>{var r,l;if(!n){if(t)return null===(l=t[s])||void 0===l?void 0:l.bind(t);throw new fs('"'.concat(e,'" plugin is not implemented on ').concat(a),ps.Unimplemented)}{const a=null===n||void 0===n?void 0:n.methods.find(e=>s===e.name);if(a)return"promise"===a.rtype?t=>i.nativePromise(e,s.toString(),t):(t,a)=>i.nativeCallback(e,s.toString(),t,a);if(t)return null===(r=t[s])||void 0===r?void 0:r.bind(t)}})(t,s);if(r){const e=r(...d);return o=null===e||void 0===e?void 0:e.remove,e}throw new fs('"'.concat(e,".").concat(s,'()" is not implemented on ').concat(a),ps.Unimplemented)});return"addListener"===s&&(h.remove=async()=>o()),h};return c.toString=()=>"".concat(s.toString(),"() { [capacitor code] }"),Object.defineProperty(c,"name",{value:s,writable:!1,configurable:!1}),c},u=c("addListener"),h=c("removeListener"),f=(e,t)=>{const s=u({eventName:e},t),a=async()=>{const a=await s;h({eventName:e,callbackId:a},t)},n=new Promise(e=>s.then(()=>e({remove:a})));return n.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},n},x=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return n?f:u;case"removeListener":return h;default:return c(t)}}});return o[e]=x,p.set(e,{name:e,proxy:x,platforms:new Set([...Object.keys(t),...n?[a]:[]])}),x};return i.convertFileSrc||(i.convertFileSrc=e=>e),i.getPlatform=d,i.handleError=t=>e.console.error(t),i.isNativePlatform=u,i.isPluginAvailable=h,i.pluginMethodNoop=(e,t,s)=>Promise.reject("".concat(s,' does not have an implementation of "').concat(t,'".')),i.registerPlugin=f,i.Exception=fs,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},vs=(e=>e.Capacitor=xs(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{}),gs=vs.registerPlugin;vs.Plugins;class ys{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const a=this.listeners[e];if(a)a.forEach(e=>e(t));else if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new vs.Exception(e,ps.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new vs.Exception(e,ps.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const js=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),bs=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ws extends ys{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=bs(s).trim(),a=bs(a).trim(),t[s]=a}),t}async setCookie(e){try{const t=js(e.key),s=js(e.value),a="; expires=".concat((e.expires||"").replace("expires=","")),n=(e.path||"/").replace("path=",""),r=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(s||"").concat(a,"; path=").concat(n,"; ").concat(r,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}gs("CapacitorCookies",{web:()=>new ws});const Ns=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),s=Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,a,n)=>(s[a]=e[t[n]],s),{});return s}(e.headers),n=a["content-type"]||"";if("string"===typeof e.data)s.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))t.set(s,a);s.body=t.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(const s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(n.includes("application/json")||"object"===typeof e.data)&&(s.body=JSON.stringify(e.data));return s};class _s extends ys{async request(e){const t=Ns(e,e.webFetchExtra),s=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,s)=>{const[a,n]=s;let r,l;return Array.isArray(n)?(l="",n.forEach(e=>{r=t?encodeURIComponent(e):e,l+="".concat(a,"=").concat(r,"&")}),l.slice(0,-1)):(r=t?encodeURIComponent(n):n,l="".concat(a,"=").concat(r)),"".concat(e,"&").concat(l)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),a=s?"".concat(e.url,"?").concat(s):e.url,n=await fetch(a,t),r=n.headers.get("content-type")||"";let l,i,{responseType:o="text"}=n.ok?e:{};switch(r.includes("application/json")&&(o="json"),o){case"arraybuffer":case"blob":i=await n.blob(),l=await(async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>s(e),a.readAsDataURL(e)}))(i);break;case"json":l=await n.json();break;default:l=await n.text()}const c={};return n.headers.forEach((e,t)=>{c[t]=e}),{data:l,headers:c,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}gs("CapacitorHttp",{web:()=>new _s});const ks="https://shardahrms.com/api",Ss=(0,a.createContext)(null),Cs=()=>{const e=(0,a.useContext)(Ss);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Es=async e=>{try{const t=await e.text();return t?JSON.parse(t):null}catch(t){return null}},Ts=()=>{const e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}},As=e=>{let{children:t}=e;const[s,n]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0),i=Se(),o=Ne(),c=(0,a.useRef)(!1),d=(0,a.useRef)(!1),u=(0,a.useRef)(null),h=(0,a.useRef)(Date.now()),m=(0,a.useRef)(!1),p=(0,a.useCallback)(()=>{h.current=Date.now()},[]);(0,a.useEffect)(()=>{const e=["mousedown","keydown","scroll","touchstart","click"];return e.forEach(e=>window.addEventListener(e,p,{passive:!0})),()=>{e.forEach(e=>window.removeEventListener(e,p))}},[p]);const f=(0,a.useCallback)(async()=>{if(!s||m.current)return;if(Date.now()-h.current>18e5)console.log("No recent activity, skipping token refresh");else{m.current=!0;try{const e=await fetch("".concat(ks,"/auth/refresh"),{method:"POST",credentials:"include",headers:Ts()});if(e.ok){const t=await Es(e);null!==t&&void 0!==t&&t.access_token&&(localStorage.setItem("access_token",t.access_token),console.log("Token refreshed successfully"))}else 401===e.status&&(console.log("Session expired during refresh"),n(null),localStorage.removeItem("access_token"),i("/login"))}catch(e){console.error("Token refresh failed:",e)}finally{m.current=!1}}},[s,i]);(0,a.useEffect)(()=>{if(s)return f(),u.current=setInterval(f,15e5),()=>{u.current&&clearInterval(u.current)}},[s,f]),(0,a.useEffect)(()=>{const e=()=>{if("visible"===document.visibilityState&&s){Date.now()-h.current>3e5&&f()}};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[s,f]);const x=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(c.current)return;if(d.current&&!e)return;const t=["/","/login","/register","/auth/callback"].some(e=>o.pathname.startsWith(e));c.current=!0;try{const e=await fetch("".concat(ks,"/auth/me"),{credentials:"include",headers:Ts()});if(e.ok){const t=await Es(e);t&&(n(t),h.current=Date.now())}else n(null),localStorage.removeItem("access_token"),t||i("/login")}catch(s){console.error("Auth check error:",s),n(null),t||i("/login")}finally{l(!1),c.current=!1,d.current=!0}},[o.pathname,i]);(0,a.useEffect)(()=>{var e,t;if(null===(e=o.hash)||void 0===e||!e.includes("session_id="))return null!==(t=o.state)&&void 0!==t&&t.user?(n(o.state.user),l(!1),d.current=!0,void(h.current=Date.now())):void x();l(!1)},[]);const v={user:s,loading:r,login:async(e,t)=>{const s=await fetch("".concat(ks,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}),a=await Es(s);if(!s.ok)throw new Error((null===a||void 0===a?void 0:a.detail)||"Login failed");return null!==a&&void 0!==a&&a.user&&(n(a.user),h.current=Date.now()),null!==a&&void 0!==a&&a.access_token&&localStorage.setItem("access_token",a.access_token),d.current=!0,a},register:async(e,t,s)=>{const a=await fetch("".concat(ks,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,email:t,password:s})}),r=await Es(a);if(!a.ok)throw new Error((null===r||void 0===r?void 0:r.detail)||"Registration failed");return null!==r&&void 0!==r&&r.user&&(n(r.user),h.current=Date.now()),null!==r&&void 0!==r&&r.access_token&&localStorage.setItem("access_token",r.access_token),d.current=!0,r},logout:async()=>{try{await fetch("".concat(ks,"/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}finally{n(null),localStorage.removeItem("access_token"),d.current=!1,u.current&&clearInterval(u.current),i("/login")}},loginWithGoogle:()=>{window.location.href="".concat(ks,"/auth/google")},processGoogleSession:async e=>{const t=await fetch("".concat(ks,"/auth/google-session"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({session_id:e})}),s=await Es(t);if(!t.ok)throw new Error((null===s||void 0===s?void 0:s.detail)||"Google authentication failed");return s&&(n(s),h.current=Date.now()),d.current=!0,s},checkAuth:x,refreshToken:f,getAuthHeaders:Ts};return(0,ds.jsx)(Ss.Provider,{value:v,children:t})};function Ps(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Ds(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{let s=!1;const a=t.map(t=>{const a=Ps(t,e);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let e=0;e<a.length;e++){const s=a[e];"function"==typeof s?s():Ps(t[e],null)}}}}function Rs(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return a.useCallback(Ds(...t),t)}const Os=["children"],Ms=["children"];var Fs=Symbol.for("react.lazy"),Ls=n[" use ".trim().toString()];function Is(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===Fs&&"_payload"in e&&("object"===typeof(t=e._payload)&&null!==t&&"then"in t);var t}function zs(e){const t=Us(e),s=a.forwardRef((e,s)=>{let{children:n}=e,r=l(e,Os);Is(n)&&"function"===typeof Ls&&(n=Ls(n._payload));const i=a.Children.toArray(n),o=i.find(Hs);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}var Bs=zs("Slot");function Us(e){const t=a.forwardRef((e,t)=>{let{children:s}=e,n=l(e,Ms);if(Is(s)&&"function"===typeof Ls&&(s=Ls(s._payload)),a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Vs=Symbol("radix.slottable");function Hs(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Vs}function Ws(e){var t,s,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=Ws(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function qs(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=Ws(e))&&(a&&(a+=" "),a+=t);return a}const Ys=["class","className"],Gs=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Ks=qs,$s=(e,t)=>s=>{var a;if(null==(null===t||void 0===t?void 0:t.variants))return Ks(e,null===s||void 0===s?void 0:s.class,null===s||void 0===s?void 0:s.className);const{variants:n,defaultVariants:r}=t,i=Object.keys(n).map(e=>{const t=null===s||void 0===s?void 0:s[e],a=null===r||void 0===r?void 0:r[e];if(null===t)return null;const l=Gs(t)||Gs(a);return n[e][l]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{}),c=null===t||void 0===t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:a}=t,n=l(t,Ys);return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes(u(u({},r),o)[t]):u(u({},r),o)[t]===s})?[...e,s,a]:e},[]);return Ks(e,i,c,null===s||void 0===s?void 0:s.class,null===s||void 0===s?void 0:s.className)},Xs=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},Js="-",Qs=[],Zs=e=>{const t=sa(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return ta(e);const s=e.split(Js),a=""===s[0]&&s.length>1?1:0;return ea(s,a,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=a[e],n=s[e];return t?n?((e,t)=>{const s=new Array(e.length+t.length);for(let a=0;a<e.length;a++)s[a]=e[a];for(let a=0;a<t.length;a++)s[e.length+a]=t[a];return s})(n,t):t:n||Qs}return s[e]||Qs}}},ea=(e,t,s)=>{if(0===e.length-t)return s.classGroupId;const a=e[t],n=s.nextPart.get(a);if(n){const s=ea(e,t+1,n);if(s)return s}const r=s.validators;if(null===r)return;const l=0===t?e.join(Js):e.slice(t).join(Js),i=r.length;for(let o=0;o<i;o++){const e=r[o];if(e.validator(l))return e.classGroupId}},ta=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),s=t.indexOf(":"),a=t.slice(0,s);return a?"arbitrary.."+a:void 0})(),sa=e=>{const{theme:t,classGroups:s}=e;return aa(s,t)},aa=(e,t)=>{const s=Xs();for(const a in e){const n=e[a];na(n,s,a,t)}return s},na=(e,t,s,a)=>{const n=e.length;for(let r=0;r<n;r++){const n=e[r];ra(n,t,s,a)}},ra=(e,t,s,a)=>{"string"!==typeof e?"function"!==typeof e?oa(e,t,s,a):ia(e,t,s,a):la(e,t,s)},la=(e,t,s)=>{(""===e?t:ca(t,e)).classGroupId=s},ia=(e,t,s,a)=>{da(e)?na(e(a),t,s,a):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(s,e)))},oa=(e,t,s,a)=>{const n=Object.entries(e),r=n.length;for(let l=0;l<r;l++){const[e,r]=n[l];na(r,ca(t,e),s,a)}},ca=(e,t)=>{let s=e;const a=t.split(Js),n=a.length;for(let r=0;r<n;r++){const e=a[r];let t=s.nextPart.get(e);t||(t=Xs(),s.nextPart.set(e,t)),s=t}return s},da=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,ua=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=Object.create(null),a=Object.create(null);const n=(n,r)=>{s[n]=r,t++,t>e&&(t=0,a=s,s=Object.create(null))};return{get(e){let t=s[e];return void 0!==t?t:void 0!==(t=a[e])?(n(e,t),t):void 0},set(e,t){e in s?s[e]=t:n(e,t)}}},ha=[],ma=(e,t,s,a,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:s,maybePostfixModifierPosition:a,isExternal:n}),pa=e=>{const{prefix:t,experimentalParseClassName:s}=e;let a=e=>{const t=[];let s,a=0,n=0,r=0;const l=e.length;for(let d=0;d<l;d++){const l=e[d];if(0===a&&0===n){if(":"===l){t.push(e.slice(r,d)),r=d+1;continue}if("/"===l){s=d;continue}}"["===l?a++:"]"===l?a--:"("===l?n++:")"===l&&n--}const i=0===t.length?e:e.slice(r);let o=i,c=!1;i.endsWith("!")?(o=i.slice(0,-1),c=!0):i.startsWith("!")&&(o=i.slice(1),c=!0);return ma(t,c,o,s&&s>r?s-r:void 0)};if(t){const e=t+":",s=a;a=t=>t.startsWith(e)?s(t.slice(e.length)):ma(ha,!1,t,void 0,!0)}if(s){const e=a;a=t=>s({className:t,parseClassName:e})}return a},fa=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,s)=>{t.set(e,1e6+s)}),e=>{const s=[];let a=[];for(let n=0;n<e.length;n++){const r=e[n],l="["===r[0],i=t.has(r);l||i?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(r)):a.push(r)}return a.length>0&&(a.sort(),s.push(...a)),s}},xa=/\s+/,va=e=>{if("string"===typeof e)return e;let t,s="";for(let a=0;a<e.length;a++)e[a]&&(t=va(e[a]))&&(s&&(s+=" "),s+=t);return s},ga=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];let n,r,l,i;const o=e=>{const t=r(e);if(t)return t;const s=((e,t)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:n,sortModifiers:r}=t,l=[],i=e.trim().split(xa);let o="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:m}=s(e);if(t){o=e+(o.length>0?" "+o:o);continue}let p=!!m,f=a(p?h.substring(0,m):h);if(!f){if(!p){o=e+(o.length>0?" "+o:o);continue}if(f=a(h),!f){o=e+(o.length>0?" "+o:o);continue}p=!1}const x=0===d.length?"":1===d.length?d[0]:r(d).join(":"),v=u?x+"!":x,g=v+f;if(l.indexOf(g)>-1)continue;l.push(g);const y=n(f,p);for(let s=0;s<y.length;++s){const e=y[s];l.push(v+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return l(e,s),s};return i=t=>{const a=s.reduce((e,t)=>t(e),e());return n=(e=>u({cache:ua(e.cacheSize),parseClassName:pa(e),sortModifiers:fa(e)},Zs(e)))(a),r=n.cache.get,l=n.cache.set,i=o,o(t)},function(){return i(function(){let e,t,s=0,a="";for(;s<arguments.length;){var n;(e=(n=s++)<0||arguments.length<=n?void 0:arguments[n])&&(t=va(e))&&(a&&(a+=" "),a+=t)}return a}(...arguments))}},ya=[],ja=e=>{const t=t=>t[e]||ya;return t.isThemeGetter=!0,t},ba=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wa=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Na=/^\d+\/\d+$/,_a=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ka=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ca=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ea=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ta=e=>Na.test(e),Aa=e=>!!e&&!Number.isNaN(Number(e)),Pa=e=>!!e&&Number.isInteger(Number(e)),Da=e=>e.endsWith("%")&&Aa(e.slice(0,-1)),Ra=e=>_a.test(e),Oa=()=>!0,Ma=e=>ka.test(e)&&!Sa.test(e),Fa=()=>!1,La=e=>Ca.test(e),Ia=e=>Ea.test(e),za=e=>!Ua(e)&&!Ga(e),Ba=e=>en(e,nn,Fa),Ua=e=>ba.test(e),Va=e=>en(e,rn,Ma),Ha=e=>en(e,ln,Aa),Wa=e=>en(e,sn,Fa),qa=e=>en(e,an,Ia),Ya=e=>en(e,cn,La),Ga=e=>wa.test(e),Ka=e=>tn(e,rn),$a=e=>tn(e,on),Xa=e=>tn(e,sn),Ja=e=>tn(e,nn),Qa=e=>tn(e,an),Za=e=>tn(e,cn,!0),en=(e,t,s)=>{const a=ba.exec(e);return!!a&&(a[1]?t(a[1]):s(a[2]))},tn=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=wa.exec(e);return!!a&&(a[1]?t(a[1]):s)},sn=e=>"position"===e||"percentage"===e,an=e=>"image"===e||"url"===e,nn=e=>"length"===e||"size"===e||"bg-size"===e,rn=e=>"length"===e,ln=e=>"number"===e,on=e=>"family-name"===e,cn=e=>"shadow"===e,dn=(Symbol.toStringTag,()=>{const e=ja("color"),t=ja("font"),s=ja("text"),a=ja("font-weight"),n=ja("tracking"),r=ja("leading"),l=ja("breakpoint"),i=ja("container"),o=ja("spacing"),c=ja("radius"),d=ja("shadow"),u=ja("inset-shadow"),h=ja("text-shadow"),m=ja("drop-shadow"),p=ja("blur"),f=ja("perspective"),x=ja("aspect"),v=ja("ease"),g=ja("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ga,Ua],j=()=>[Ga,Ua,o],b=()=>[Ta,"full","auto",...j()],w=()=>[Pa,"none","subgrid",Ga,Ua],N=()=>["auto",{span:["full",Pa,Ga,Ua]},Pa,Ga,Ua],_=()=>[Pa,"auto",Ga,Ua],k=()=>["auto","min","max","fr",Ga,Ua],S=()=>["auto",...j()],C=()=>[Ta,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],E=()=>[e,Ga,Ua],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Xa,Wa,{position:[Ga,Ua]}],A=()=>["auto","cover","contain",Ja,Ba,{size:[Ga,Ua]}],P=()=>[Da,Ka,Va],D=()=>["","none","full",c,Ga,Ua],R=()=>["",Aa,Ka,Va],O=()=>[Aa,Da,Xa,Wa],M=()=>["","none",p,Ga,Ua],F=()=>["none",Aa,Ga,Ua],L=()=>["none",Aa,Ga,Ua],I=()=>[Aa,Ga,Ua],z=()=>[Ta,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ra],breakpoint:[Ra],color:[Oa],container:[Ra],"drop-shadow":[Ra],ease:["in","out","in-out"],font:[za],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ra],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ra],shadow:[Ra],spacing:["px",Aa],text:[Ra],"text-shadow":[Ra],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ta,Ua,Ga,x]}],container:["container"],columns:[{columns:[Aa,Ua,Ga,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:b()}],"inset-x":[{"inset-x":b()}],"inset-y":[{"inset-y":b()}],start:[{start:b()}],end:[{end:b()}],top:[{top:b()}],right:[{right:b()}],bottom:[{bottom:b()}],left:[{left:b()}],visibility:["visible","invisible","collapse"],z:[{z:[Pa,"auto",Ga,Ua]}],basis:[{basis:[Ta,"full","auto",i,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Aa,Ta,"auto","initial","none",Ua]}],grow:[{grow:["",Aa,Ga,Ua]}],shrink:[{shrink:["",Aa,Ga,Ua]}],order:[{order:[Pa,"first","last","none",Ga,Ua]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[i,"screen",...C()]}],"min-w":[{"min-w":[i,"screen","none",...C()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[l]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",s,Ka,Va]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ga,Ha]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Da,Ua]}],"font-family":[{font:[$a,Ua,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Ga,Ua]}],"line-clamp":[{"line-clamp":[Aa,"none",Ga,Ha]}],leading:[{leading:[r,...j()]}],"list-image":[{"list-image":["none",Ga,Ua]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ga,Ua]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Aa,"from-font","auto",Ga,Va]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[Aa,"auto",Ga,Ua]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ga,Ua]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ga,Ua]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pa,Ga,Ua],radial:["",Ga,Ua],conic:[Pa,Ga,Ua]},Qa,qa]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Aa,Ga,Ua]}],"outline-w":[{outline:["",Aa,Ka,Va]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",d,Za,Ya]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",u,Za,Ya]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[Aa,Va]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",h,Za,Ya]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[Aa,Ga,Ua]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Aa]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[Ga,Ua]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Aa]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ga,Ua]}],filter:[{filter:["","none",Ga,Ua]}],blur:[{blur:M()}],brightness:[{brightness:[Aa,Ga,Ua]}],contrast:[{contrast:[Aa,Ga,Ua]}],"drop-shadow":[{"drop-shadow":["","none",m,Za,Ya]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",Aa,Ga,Ua]}],"hue-rotate":[{"hue-rotate":[Aa,Ga,Ua]}],invert:[{invert:["",Aa,Ga,Ua]}],saturate:[{saturate:[Aa,Ga,Ua]}],sepia:[{sepia:["",Aa,Ga,Ua]}],"backdrop-filter":[{"backdrop-filter":["","none",Ga,Ua]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[Aa,Ga,Ua]}],"backdrop-contrast":[{"backdrop-contrast":[Aa,Ga,Ua]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Aa,Ga,Ua]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Aa,Ga,Ua]}],"backdrop-invert":[{"backdrop-invert":["",Aa,Ga,Ua]}],"backdrop-opacity":[{"backdrop-opacity":[Aa,Ga,Ua]}],"backdrop-saturate":[{"backdrop-saturate":[Aa,Ga,Ua]}],"backdrop-sepia":[{"backdrop-sepia":["",Aa,Ga,Ua]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ga,Ua]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Aa,"initial",Ga,Ua]}],ease:[{ease:["linear","initial",v,Ga,Ua]}],delay:[{delay:[Aa,Ga,Ua]}],animate:[{animate:["none",g,Ga,Ua]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,Ga,Ua]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:F()}],"rotate-x":[{"rotate-x":F()}],"rotate-y":[{"rotate-y":F()}],"rotate-z":[{"rotate-z":F()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:I()}],"skew-x":[{"skew-x":I()}],"skew-y":[{"skew-y":I()}],transform:[{transform:[Ga,Ua,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ga,Ua]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ga,Ua]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[Aa,Ka,Va,Ha]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),un=ga(dn);function hn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return un(qs(t))}const mn=["className","variant","size","asChild"],pn=$s("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fn=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:r=!1}=e,i=l(e,mn);const o=r?Bs:"button";return(0,ds.jsx)(o,u({className:hn(pn({variant:a,size:n,className:s})),ref:t},i))});fn.displayName="Button";const xn=["className","type"],vn=a.forwardRef((e,t)=>{let{className:s,type:a}=e,n=l(e,xn);return(0,ds.jsx)("input",u({type:a,className:hn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t},n))});vn.displayName="Input";const gn=["asChild"];var yn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=zs("Primitive.".concat(t)),n=a.forwardRef((e,a)=>{const{asChild:n}=e,r=l(e,gn),i=n?s:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ds.jsx)(i,u(u({},r),{},{ref:a}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});var jn=a.forwardRef((e,t)=>(0,ds.jsx)(yn.label,u(u({},e),{},{ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));jn.displayName="Label";var bn=jn;const wn=["className"],Nn=$s("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_n=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,wn);return(0,ds.jsx)(bn,u({ref:t,className:hn(Nn(),s)},a))});_n.displayName=bn.displayName;const kn=["className"],Sn=["className"],Cn=["className"],En=["className"],Tn=["className"],An=["className"],Pn=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,kn);return(0,ds.jsx)("div",u({ref:t,className:hn("rounded-xl border bg-card text-card-foreground shadow",s)},a))});Pn.displayName="Card";const Dn=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Sn);return(0,ds.jsx)("div",u({ref:t,className:hn("flex flex-col space-y-1.5 p-6",s)},a))});Dn.displayName="CardHeader";const Rn=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Cn);return(0,ds.jsx)("div",u({ref:t,className:hn("font-semibold leading-none tracking-tight",s)},a))});Rn.displayName="CardTitle";const On=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,En);return(0,ds.jsx)("div",u({ref:t,className:hn("text-sm text-muted-foreground",s)},a))});On.displayName="CardDescription";const Mn=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Tn);return(0,ds.jsx)("div",u({ref:t,className:hn("p-6 pt-0",s)},a))});Mn.displayName="CardContent";a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,An);return(0,ds.jsx)("div",u({ref:t,className:hn("flex items-center p-6 pt-0",s)},a))}).displayName="CardFooter";const Fn=["asChild"];var Ln=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=zs("Primitive.".concat(t)),n=a.forwardRef((e,a)=>{const{asChild:n}=e,r=l(e,Fn),i=n?s:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ds.jsx)(i,u(u({},r),{},{ref:a}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});const In=["decorative","orientation"];var zn="horizontal",Bn=["horizontal","vertical"],Un=a.forwardRef((e,t)=>{const{decorative:s,orientation:a=zn}=e,n=l(e,In),r=function(e){return Bn.includes(e)}(a)?a:zn,i=s?{role:"none"}:{"aria-orientation":"vertical"===r?r:void 0,role:"separator"};return(0,ds.jsx)(Ln.div,u(u(u({"data-orientation":r},i),n),{},{ref:t}))});Un.displayName="Separator";var Vn=Un;const Hn=["className","orientation","decorative"],Wn=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:n=!0}=e,r=l(e,Hn);return(0,ds.jsx)(Vn,u({ref:t,decorative:n,orientation:a,className:hn("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s)},r))});Wn.displayName=Vn.displayName;"undefined"===typeof window||!window.document||window.document.createElement;function qn(e,t){let{checkForDefaultPrevented:s=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){if(null===e||void 0===e||e(a),!1===s||!a.defaultPrevented)return null===t||void 0===t?void 0:t(a)}}const Yn=["children"],Gn=["scope","children"];function Kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];const n=()=>{const t=s.map(e=>a.createContext(e));return function(s){const n=(null===s||void 0===s?void 0:s[e])||t;return a.useMemo(()=>({["__scope".concat(e)]:u(u({},s),{},{[e]:n})}),[s,n])}};return n.scopeName=e,[function(t,n){const r=a.createContext(n),i=s.length;s=[...s,n];const o=t=>{var s;const{scope:n,children:o}=t,c=l(t,Gn),d=(null===n||void 0===n||null===(s=n[e])||void 0===s?void 0:s[i])||r,u=a.useMemo(()=>c,Object.values(c));return(0,ds.jsx)(d.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(s,l){var o;const c=(null===l||void 0===l||null===(o=l[e])||void 0===o?void 0:o[i])||r,d=a.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error("`".concat(s,"` must be used within `").concat(t,"`"))}]},$n(n,...t)]}function $n(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=t[0];if(1===t.length)return n;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const s=e.reduce((e,s)=>{let{useScope:a,scopeName:n}=s;const r=a(t)["__scope".concat(n)];return u(u({},e),r)},{});return a.useMemo(()=>({["__scope".concat(n.scopeName)]:s}),[s])}};return r.scopeName=n.scopeName,r}var Xn=null!==globalThis&&void 0!==globalThis&&globalThis.document?a.useLayoutEffect:()=>{},Jn=n[" useId ".trim().toString()]||(()=>{}),Qn=0;function Zn(e){const[t,s]=a.useState(Jn());return Xn(()=>{e||s(e=>null!==e&&void 0!==e?e:String(Qn++))},[e]),e||(t?"radix-".concat(t):"")}var er=n[" useInsertionEffect ".trim().toString()]||Xn;function tr(e){let{prop:t,defaultProp:s,onChange:n=()=>{},caller:r}=e;const[l,i,o]=function(e){let{defaultProp:t,onChange:s}=e;const[n,r]=a.useState(t),l=a.useRef(n),i=a.useRef(s);return er(()=>{i.current=s},[s]),a.useEffect(()=>{var e;l.current!==n&&(null===(e=i.current)||void 0===e||e.call(i,n),l.current=n)},[n,l]),[n,r,i]}({defaultProp:s,onChange:n}),c=void 0!==t,d=c?t:l;{const e=a.useRef(void 0!==t);a.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",s=c?"controlled":"uncontrolled";console.warn("".concat(r," is changing from ").concat(e," to ").concat(s,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,r])}const u=a.useCallback(e=>{if(c){const a=function(e){return"function"===typeof e}(e)?e(t):e;var s;if(a!==t)null===(s=o.current)||void 0===s||s.call(o,a)}else i(e)},[c,t,i,o]);return[d,u]}Symbol("RADIX:SYNC_STATE");const sr=["children"],ar=["children"];function nr(e){const t=rr(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,sr),i=a.Children.toArray(n),o=i.find(ir);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function rr(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,ar);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var lr=Symbol("radix.slottable");function ir(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===lr}const or=["asChild"];var cr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=nr("Primitive.".concat(t)),n=a.forwardRef((e,a)=>{const{asChild:n}=e,r=l(e,or),i=n?s:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ds.jsx)(i,u(u({},r),{},{ref:a}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});function dr(e,t){e&&Vt.flushSync(()=>e.dispatchEvent(t))}function ur(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>function(){for(var e,s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return null===(e=t.current)||void 0===e?void 0:e.call(t,...a)},[])}const hr=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var mr,pr="dismissableLayer.update",fr="dismissableLayer.pointerDownOutside",xr="dismissableLayer.focusOutside",vr=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gr=a.forwardRef((e,t)=>{var s;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:d}=e,h=l(e,hr),m=a.useContext(vr),[p,f]=a.useState(null),x=null!==(s=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==s?s:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,v]=a.useState({}),g=Rs(t,e=>f(e)),y=Array.from(m.layers),[j]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(j),w=p?y.indexOf(p):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const s=ur(e),n=a.useRef(!1),r=a.useRef(()=>{});return a.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let a=function(){br(fr,s,n,{discrete:!0})};const n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=a,t.addEventListener("click",r.current,{once:!0})):a()}else t.removeEventListener("click",r.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,s=[...m.branches].some(e=>e.contains(t));_&&!s&&(null===i||void 0===i||i(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())},x),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const s=ur(e),n=a.useRef(!1);return a.useEffect(()=>{const e=e=>{if(e.target&&!n.current){br(xr,s,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...m.branches].some(e=>e.contains(t))||(null===o||void 0===o||o(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())},x);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const s=ur(e);a.useEffect(()=>{const e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{w===m.layers.size-1&&(null===r||void 0===r||r(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},x),a.useEffect(()=>{if(p)return n&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(mr=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),jr(),()=>{n&&1===m.layersWithOutsidePointerEventsDisabled.size&&(x.body.style.pointerEvents=mr)}},[p,x,n,m]),a.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),jr())},[p,m]),a.useEffect(()=>{const e=()=>v({});return document.addEventListener(pr,e),()=>document.removeEventListener(pr,e)},[]),(0,ds.jsx)(cr.div,u(u({},h),{},{ref:g,style:u({pointerEvents:N?_?"auto":"none":void 0},e.style),onFocusCapture:qn(e.onFocusCapture,S.onFocusCapture),onBlurCapture:qn(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:qn(e.onPointerDownCapture,k.onPointerDownCapture)}))});gr.displayName="DismissableLayer";var yr=a.forwardRef((e,t)=>{const s=a.useContext(vr),n=a.useRef(null),r=Rs(t,n);return a.useEffect(()=>{const e=n.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),(0,ds.jsx)(cr.div,u(u({},e),{},{ref:r}))});function jr(){const e=new CustomEvent(pr);document.dispatchEvent(e)}function br(e,t,s,a){let{discrete:n}=a;const r=s.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&r.addEventListener(e,t,{once:!0}),n?dr(r,l):r.dispatchEvent(l)}yr.displayName="DismissableLayerBranch";const wr=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var Nr="focusScope.autoFocusOnMount",_r="focusScope.autoFocusOnUnmount",kr={bubbles:!1,cancelable:!0},Sr=a.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i}=e,o=l(e,wr),[c,d]=a.useState(null),h=ur(r),m=ur(i),p=a.useRef(null),f=Rs(t,e=>d(e)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(n){let e=function(e){if(x.paused||!c)return;const t=e.target;c.contains(t)?p.current=t:Ar(p.current,{select:!0})},t=function(e){if(x.paused||!c)return;const t=e.relatedTarget;null!==t&&(c.contains(t)||Ar(p.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Ar(c)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const a=new MutationObserver(s);return c&&a.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}},[n,c,x.paused]),a.useEffect(()=>{if(c){Pr.add(x);const t=document.activeElement;if(!c.contains(t)){const s=new CustomEvent(Nr,kr);c.addEventListener(Nr,h),c.dispatchEvent(s),s.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=document.activeElement;for(const a of e)if(Ar(a,{select:t}),document.activeElement!==s)return}((e=Cr(c),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Ar(c))}return()=>{c.removeEventListener(Nr,h),setTimeout(()=>{const e=new CustomEvent(_r,kr);c.addEventListener(_r,m),c.dispatchEvent(e),e.defaultPrevented||Ar(null!==t&&void 0!==t?t:document.body,{select:!0}),c.removeEventListener(_r,m),Pr.remove(x)},0)}}var e},[c,h,m,x]);const v=a.useCallback(e=>{if(!s&&!n)return;if(x.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[n,r]=function(e){const t=Cr(e),s=Er(t,e),a=Er(t.reverse(),e);return[s,a]}(t);n&&r?e.shiftKey||a!==r?e.shiftKey&&a===n&&(e.preventDefault(),s&&Ar(r,{select:!0})):(e.preventDefault(),s&&Ar(n,{select:!0})):a===t&&e.preventDefault()}},[s,n,x.paused]);return(0,ds.jsx)(cr.div,u(u({tabIndex:-1},o),{},{ref:f,onKeyDown:v}))});function Cr(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Er(e,t){for(const s of e)if(!Tr(s,{upTo:t}))return s}function Tr(e,t){let{upTo:s}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==s&&e===s)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Ar(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Sr.displayName="FocusScope";var Pr=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null===s||void 0===s||s.pause()),e=Dr(e,t),e.unshift(t)},remove(t){var s;e=Dr(e,t),null===(s=e[0])||void 0===s||s.resume()}}}();function Dr(e,t){const s=[...e],a=s.indexOf(t);return-1!==a&&s.splice(a,1),s}const Rr=["container"];var Or=a.forwardRef((e,t)=>{var s;const{container:n}=e,r=l(e,Rr),[i,o]=a.useState(!1);Xn(()=>o(!0),[]);const c=n||i&&(null===globalThis||void 0===globalThis||null===(s=globalThis.document)||void 0===s?void 0:s.body);return c?Vt.createPortal((0,ds.jsx)(cr.div,u(u({},r),{},{ref:t})),c):null});Or.displayName="Portal";var Mr=e=>{const{present:t,children:s}=e,n=function(e){const[t,s]=a.useState(),n=a.useRef(null),r=a.useRef(e),l=a.useRef("none"),i=e?"mounted":"unmounted",[o,c]=function(e,t){return a.useReducer((e,s)=>{const a=t[e][s];return null!==a&&void 0!==a?a:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const e=Fr(n.current);l.current="mounted"===o?e:"none"},[o]),Xn(()=>{const t=n.current,s=r.current;if(s!==e){const a=l.current,n=Fr(t);if(e)c("MOUNT");else if("none"===n||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(s&&a!==n?"ANIMATION_OUT":"UNMOUNT")}r.current=e}},[e,c]),Xn(()=>{if(t){var e;let s;const a=null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:window,i=e=>{const l=Fr(n.current).includes(CSS.escape(e.animationName));if(e.target===t&&l&&(c("ANIMATION_END"),!r.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",s=a.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},o=e=>{e.target===t&&(l.current=Fr(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{a.clearTimeout(s),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:a.useCallback(e=>{n.current=e?getComputedStyle(e):null,s(e)},[])}}(t),r="function"===typeof s?s({present:n.isPresent}):a.Children.only(s),l=Rs(n.ref,function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r));return"function"===typeof s||n.isPresent?a.cloneElement(r,{ref:l}):null};function Fr(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}Mr.displayName="Presence";var Lr=0;function Ir(){a.useEffect(()=>{var e,t;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=s[0])&&void 0!==e?e:zr()),document.body.insertAdjacentElement("beforeend",null!==(t=s[1])&&void 0!==t?t:zr()),Lr++,()=>{1===Lr&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lr--}},[])}function zr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Br=function(){return Br=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Br.apply(this,arguments)};function Ur(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}Object.create;function Vr(e,t,s){if(s||2===arguments.length)for(var a,n=0,r=t.length;n<r;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Hr="right-scroll-bar-position",Wr="width-before-scroll-bar";function qr(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Yr="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,Gr=new WeakMap;function Kr(e,t){var s=function(e,t){var s=(0,a.useState)(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0];return s.callback=t,s.facade}(t||null,function(t){return e.forEach(function(e){return qr(e,t)})});return Yr(function(){var t=Gr.get(s);if(t){var a=new Set(t),n=new Set(e),r=s.current;a.forEach(function(e){n.has(e)||qr(e,null)}),n.forEach(function(e){a.has(e)||qr(e,r)})}Gr.set(s,e)},[e]),s}function $r(e){return e}function Xr(e,t){void 0===t&&(t=$r);var s=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(e){var n=t(e,a);return s.push(n),function(){s=s.filter(function(e){return e!==n})}},assignSyncMedium:function(e){for(a=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){a=!0;var t=[];if(s.length){var n=s;s=[],n.forEach(e),t=s}var r=function(){var s=t;t=[],s.forEach(e)},l=function(){return Promise.resolve().then(r)};l(),s={push:function(e){t.push(e),l()},filter:function(e){return t=t.filter(e),s}}}};return n}var Jr=function(e){void 0===e&&(e={});var t=Xr(null);return t.options=Br({async:!0,ssr:!1},e),t}(),Qr=function(){},Zr=a.forwardRef(function(e,t){var s=a.useRef(null),n=a.useState({onScrollCapture:Qr,onWheelCapture:Qr,onTouchMoveCapture:Qr}),r=n[0],l=n[1],i=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,f=e.noIsolation,x=e.inert,v=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,j=e.gapMode,b=Ur(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=m,N=Kr([s,t]),_=Br(Br({},b),r);return a.createElement(a.Fragment,null,u&&a.createElement(w,{sideCar:Jr,removeScrollBar:d,shards:h,noRelative:p,noIsolation:f,inert:x,setCallbacks:l,allowPinchZoom:!!v,lockRef:s,gapMode:j}),i?a.cloneElement(a.Children.only(o),Br(Br({},_),{ref:N})):a.createElement(y,Br({},_,{className:c,ref:N}),o))});Zr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Zr.classNames={fullWidth:Wr,zeroRight:Hr};var el,tl=function(e){var t=e.sideCar,s=Ur(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return a.createElement(n,Br({},s))};tl.isSideCarExport=!0;function sl(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=el||s.nc;return t&&e.setAttribute("nonce",t),e}var al=function(){var e=0,t=null;return{add:function(s){var a,n;0==e&&(t=sl())&&(n=s,(a=t).styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nl=function(){var e=function(){var e=al();return function(t,s){a.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}}();return function(t){var s=t.styles,a=t.dynamic;return e(s,a),null}},rl={left:0,top:0,right:0,gap:0},ll=function(e){return parseInt(e||"",10)||0},il=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return rl;var t=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[ll(s),ll(a),ll(n)]}(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-s+t[2]-t[0])}},ol=nl(),cl="data-scroll-locked",dl=function(e,t,s,a){var n=e.left,r=e.top,l=e.right,i=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(i,"px ").concat(a,";\n  }\n  body[").concat(cl,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===s&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(l,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(a,";\n    "),"padding"===s&&"padding-right: ".concat(i,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Hr," {\n    right: ").concat(i,"px ").concat(a,";\n  }\n  \n  .").concat(Wr," {\n    margin-right: ").concat(i,"px ").concat(a,";\n  }\n  \n  .").concat(Hr," .").concat(Hr," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(Wr," .").concat(Wr," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(cl,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},ul=function(){var e=parseInt(document.body.getAttribute(cl)||"0",10);return isFinite(e)?e:0},hl=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,r=void 0===n?"margin":n;a.useEffect(function(){return document.body.setAttribute(cl,(ul()+1).toString()),function(){var e=ul()-1;e<=0?document.body.removeAttribute(cl):document.body.setAttribute(cl,e.toString())}},[]);var l=a.useMemo(function(){return il(r)},[r]);return a.createElement(ol,{styles:dl(l,!t,r,s?"":"!important")})},ml=!1;if("undefined"!==typeof window)try{var pl=Object.defineProperty({},"passive",{get:function(){return ml=!0,!0}});window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch(aI){ml=!1}var fl=!!ml&&{passive:!1},xl=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},vl=function(e,t){var s=t.ownerDocument,a=t;do{if("undefined"!==typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),gl(e,a)){var n=yl(e,a);if(n[1]>n[2])return!0}a=a.parentNode}while(a&&a!==s.body);return!1},gl=function(e,t){return"v"===e?function(e){return xl(e,"overflowY")}(t):function(e){return xl(e,"overflowX")}(t)},yl=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},jl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bl=function(e){return[e.deltaX,e.deltaY]},wl=function(e){return e&&"current"in e?e.current:e},Nl=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},_l=0,kl=[];function Sl(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Cl=(El=function(e){var t=a.useRef([]),s=a.useRef([0,0]),n=a.useRef(),r=a.useState(_l++)[0],l=a.useState(nl)[0],i=a.useRef(e);a.useEffect(function(){i.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=Vr([e.lockRef.current],(e.shards||[]).map(wl),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var o=a.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var a,r=jl(e),l=s.current,o="deltaX"in e?e.deltaX:l[0]-r[0],c="deltaY"in e?e.deltaY:l[1]-r[1],d=e.target,u=Math.abs(o)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=window.getSelection(),m=h&&h.anchorNode;if(m&&(m===d||m.contains(d)))return!1;var p=vl(u,d);if(!p)return!0;if(p?a=u:(a="v"===u?"h":"v",p=vl(u,d)),!p)return!1;if(!n.current&&"changedTouches"in e&&(o||c)&&(n.current=a),!a)return!0;var f=n.current||a;return function(e,t,s,a,n){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),l=r*a,i=s.target,o=t.contains(i),c=!1,d=l>0,u=0,h=0;do{if(!i)break;var m=yl(e,i),p=m[0],f=m[1]-m[2]-r*p;(p||f)&&gl(e,i)&&(u+=f,h+=p);var x=i.parentNode;i=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(d&&(n&&Math.abs(u)<1||!n&&l>u)||!d&&(n&&Math.abs(h)<1||!n&&-l>h))&&(c=!0),c}(f,t,e,"h"===f?o:c,!0)},[]),c=a.useCallback(function(e){var s=e;if(kl.length&&kl[kl.length-1]===l){var a="deltaY"in s?bl(s):jl(s),n=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,a)})[0];if(n&&n.should)s.cancelable&&s.preventDefault();else if(!n){var r=(i.current.shards||[]).map(wl).filter(Boolean).filter(function(e){return e.contains(s.target)});(r.length>0?o(s,r[0]):!i.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),d=a.useCallback(function(e,s,a,n){var r={name:e,delta:s,target:a,should:n,shadowParent:Sl(a)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),u=a.useCallback(function(e){s.current=jl(e),n.current=void 0},[]),h=a.useCallback(function(t){d(t.type,bl(t),t.target,o(t,e.lockRef.current))},[]),m=a.useCallback(function(t){d(t.type,jl(t),t.target,o(t,e.lockRef.current))},[]);a.useEffect(function(){return kl.push(l),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,fl),document.addEventListener("touchmove",c,fl),document.addEventListener("touchstart",u,fl),function(){kl=kl.filter(function(e){return e!==l}),document.removeEventListener("wheel",c,fl),document.removeEventListener("touchmove",c,fl),document.removeEventListener("touchstart",u,fl)}},[]);var p=e.removeScrollBar,f=e.inert;return a.createElement(a.Fragment,null,f?a.createElement(l,{styles:Nl(r)}):null,p?a.createElement(hl,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Jr.useMedium(El),tl);var El,Tl=a.forwardRef(function(e,t){return a.createElement(Zr,Br({},e,{ref:t,sideCar:Cl}))});Tl.classNames=Zr.classNames;const Al=Tl;var Pl=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},Dl=new WeakMap,Rl=new WeakMap,Ol={},Ml=0,Fl=function(e){return e&&(e.host||Fl(e.parentNode))},Ll=function(e,t,s,a){var n=function(e,t){return t.map(function(t){if(e.contains(t))return t;var s=Fl(t);return s&&e.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Ol[s]||(Ol[s]=new WeakMap);var r=Ol[s],l=[],i=new Set,o=new Set(n),c=function(e){e&&!i.has(e)&&(i.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){e&&!o.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))d(e);else try{var t=e.getAttribute(a),n=null!==t&&"false"!==t,o=(Dl.get(e)||0)+1,c=(r.get(e)||0)+1;Dl.set(e,o),r.set(e,c),l.push(e),1===o&&n&&Rl.set(e,!0),1===c&&e.setAttribute(s,"true"),n||e.setAttribute(a,"true")}catch(sI){console.error("aria-hidden: cannot operate on ",e,sI)}})};return d(t),i.clear(),Ml++,function(){l.forEach(function(e){var t=Dl.get(e)-1,n=r.get(e)-1;Dl.set(e,t),r.set(e,n),t||(Rl.has(e)||e.removeAttribute(a),Rl.delete(e)),n||e.removeAttribute(s)}),--Ml||(Dl=new WeakMap,Dl=new WeakMap,Rl=new WeakMap,Ol={})}},Il=function(e,t,s){void 0===s&&(s="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),n=t||Pl(e);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),Ll(a,n,s,"aria-hidden")):function(){return null}};const zl=["children"],Bl=["children"];function Ul(e){const t=Vl(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,zl),i=a.Children.toArray(n),o=i.find(Wl);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function Vl(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,Bl);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Hl=Symbol("radix.slottable");function Wl(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Hl}const ql=["__scopeDialog"],Yl=["forceMount"],Gl=["__scopeDialog"],Kl=["forceMount"],$l=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Xl=["__scopeDialog"],Jl=["__scopeDialog"],Ql=["__scopeDialog"];var Zl="Dialog",[ei,ti]=Kn(Zl),[si,ai]=ei(Zl),ni=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:r,onOpenChange:l,modal:i=!0}=e,o=a.useRef(null),c=a.useRef(null),[d,u]=tr({prop:n,defaultProp:null!==r&&void 0!==r&&r,onChange:l,caller:Zl});return(0,ds.jsx)(si,{scope:t,triggerRef:o,contentRef:c,contentId:Zn(),titleId:Zn(),descriptionId:Zn(),open:d,onOpenChange:u,onOpenToggle:a.useCallback(()=>u(e=>!e),[u]),modal:i,children:s})};ni.displayName=Zl;var ri="DialogTrigger",li=a.forwardRef((e,t)=>{const{__scopeDialog:s}=e,a=l(e,ql),n=ai(ri,s),r=Rs(t,n.triggerRef);return(0,ds.jsx)(cr.button,u(u({type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Si(n.open)},a),{},{ref:r,onClick:qn(e.onClick,n.onOpenToggle)}))});li.displayName=ri;var ii="DialogPortal",[oi,ci]=ei(ii,{forceMount:void 0}),di=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:r}=e,l=ai(ii,t);return(0,ds.jsx)(oi,{scope:t,forceMount:s,children:a.Children.map(n,e=>(0,ds.jsx)(Mr,{present:s||l.open,children:(0,ds.jsx)(Or,{asChild:!0,container:r,children:e})}))})};di.displayName=ii;var ui="DialogOverlay",hi=a.forwardRef((e,t)=>{const s=ci(ui,e.__scopeDialog),{forceMount:a=s.forceMount}=e,n=l(e,Yl),r=ai(ui,e.__scopeDialog);return r.modal?(0,ds.jsx)(Mr,{present:a||r.open,children:(0,ds.jsx)(pi,u(u({},n),{},{ref:t}))}):null});hi.displayName=ui;var mi=Ul("DialogOverlay.RemoveScroll"),pi=a.forwardRef((e,t)=>{const{__scopeDialog:s}=e,a=l(e,Gl),n=ai(ui,s);return(0,ds.jsx)(Al,{as:mi,allowPinchZoom:!0,shards:[n.contentRef],children:(0,ds.jsx)(cr.div,u(u({"data-state":Si(n.open)},a),{},{ref:t,style:u({pointerEvents:"auto"},a.style)}))})}),fi="DialogContent",xi=a.forwardRef((e,t)=>{const s=ci(fi,e.__scopeDialog),{forceMount:a=s.forceMount}=e,n=l(e,Kl),r=ai(fi,e.__scopeDialog);return(0,ds.jsx)(Mr,{present:a||r.open,children:r.modal?(0,ds.jsx)(vi,u(u({},n),{},{ref:t})):(0,ds.jsx)(gi,u(u({},n),{},{ref:t}))})});xi.displayName=fi;var vi=a.forwardRef((e,t)=>{const s=ai(fi,e.__scopeDialog),n=a.useRef(null),r=Rs(t,s.contentRef,n);return a.useEffect(()=>{const e=n.current;if(e)return Il(e)},[]),(0,ds.jsx)(yi,u(u({},e),{},{ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qn(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=s.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:qn(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:qn(e.onFocusOutside,e=>e.preventDefault())}))}),gi=a.forwardRef((e,t)=>{const s=ai(fi,e.__scopeDialog),n=a.useRef(!1),r=a.useRef(!1);return(0,ds.jsx)(yi,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,l;(null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented)||(n.current||null===(l=s.triggerRef.current)||void 0===l||l.focus(),t.preventDefault());n.current=!1,r.current=!1},onInteractOutside:t=>{var a,l;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const i=t.target;(null===(l=s.triggerRef.current)||void 0===l?void 0:l.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}}))}),yi=a.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i}=e,o=l(e,$l),c=ai(fi,s),d=a.useRef(null),h=Rs(t,d);return Ir(),(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sr,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:(0,ds.jsx)(gr,u(u({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Si(c.open)},o),{},{ref:h,onDismiss:()=>c.onOpenChange(!1)}))}),(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Ai,{titleId:c.titleId}),(0,ds.jsx)(Pi,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ji="DialogTitle",bi=a.forwardRef((e,t)=>{const{__scopeDialog:s}=e,a=l(e,Xl),n=ai(ji,s);return(0,ds.jsx)(cr.h2,u(u({id:n.titleId},a),{},{ref:t}))});bi.displayName=ji;var wi="DialogDescription",Ni=a.forwardRef((e,t)=>{const{__scopeDialog:s}=e,a=l(e,Jl),n=ai(wi,s);return(0,ds.jsx)(cr.p,u(u({id:n.descriptionId},a),{},{ref:t}))});Ni.displayName=wi;var _i="DialogClose",ki=a.forwardRef((e,t)=>{const{__scopeDialog:s}=e,a=l(e,Ql),n=ai(_i,s);return(0,ds.jsx)(cr.button,u(u({type:"button"},a),{},{ref:t,onClick:qn(e.onClick,()=>n.onOpenChange(!1))}))});function Si(e){return e?"open":"closed"}ki.displayName=_i;var Ci="DialogTitleWarning",[Ei,Ti]=function(e,t){const s=a.createContext(t),n=e=>{const{children:t}=e,n=l(e,Yn),r=a.useMemo(()=>n,Object.values(n));return(0,ds.jsx)(s.Provider,{value:r,children:t})};return n.displayName=e+"Provider",[n,function(n){const r=a.useContext(s);if(r)return r;if(void 0!==t)return t;throw new Error("`".concat(n,"` must be used within `").concat(e,"`"))}]}(Ci,{contentName:fi,titleName:ji,docsSlug:"dialog"}),Ai=e=>{let{titleId:t}=e;const s=Ti(Ci),n="`".concat(s.contentName,"` requires a `").concat(s.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(s.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(s.docsSlug);return a.useEffect(()=>{if(t){document.getElementById(t)||console.error(n)}},[n,t]),null},Pi=e=>{let{contentRef:t,descriptionId:s}=e;const n=Ti("DialogDescriptionWarning"),r="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return a.useEffect(()=>{var e;const a=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(s&&a){document.getElementById(s)||console.warn(r)}},[r,t,s]),null},Di=ni,Ri=li,Oi=di,Mi=hi,Fi=xi,Li=bi,Ii=Ni,zi=ki;const Bi=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ui=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var Vi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hi=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Wi=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d}=e,h=l(e,Hi);return(0,a.createElement)("svg",u(u(u({ref:t},Vi),{},{width:n,height:n,stroke:s,strokeWidth:i?24*Number(r)/Number(n):r,className:Ui("lucide",o)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),qi=["className"],Yi=(e,t)=>{const s=(0,a.forwardRef)((s,n)=>{let{className:r}=s,i=l(s,qi);return(0,a.createElement)(Wi,u({ref:n,iconNode:t,className:Ui("lucide-".concat((o=Bi(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),r)},i));var o});return s.displayName=Bi(e),s},Gi=Yi("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ki=["className"],$i=["className","children"],Xi=["className"],Ji=["className"],Qi=["className"],Zi=["className"],eo=Di,to=Ri,so=Oi,ao=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Ki);return(0,ds.jsx)(Mi,u({ref:t,className:hn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},a))});ao.displayName=Mi.displayName;const no=a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=l(e,$i);return(0,ds.jsxs)(so,{children:[(0,ds.jsx)(ao,{}),(0,ds.jsxs)(Fi,u(u({ref:t,className:hn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},n),{},{children:[a,(0,ds.jsxs)(zi,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,ds.jsx)(Gi,{className:"h-4 w-4"}),(0,ds.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});no.displayName=Fi.displayName;const ro=e=>{let{className:t}=e,s=l(e,Xi);return(0,ds.jsx)("div",u({className:hn("flex flex-col space-y-1.5 text-center sm:text-left",t)},s))};ro.displayName="DialogHeader";const lo=e=>{let{className:t}=e,s=l(e,Ji);return(0,ds.jsx)("div",u({className:hn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},s))};lo.displayName="DialogFooter";const io=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Qi);return(0,ds.jsx)(Li,u({ref:t,className:hn("text-lg font-semibold leading-none tracking-tight",s)},a))});io.displayName=Li.displayName;const oo=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Zi);return(0,ds.jsx)(Ii,u({ref:t,className:hn("text-sm text-muted-foreground",s)},a))});oo.displayName=Ii.displayName;const co=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uo=(()=>new Set(co))(),ho=(e,t,s)=>s>t?t:s<e?e:s,mo={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},po=u(u({},mo),{},{transform:e=>ho(0,1,e)}),fo=u(u({},mo),{},{default:1}),xo=e=>Math.round(1e5*e)/1e5,vo=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const go=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,yo=(e,t)=>s=>Boolean("string"===typeof s&&go.test(s)&&s.startsWith(e)||t&&!function(e){return null==e}(s)&&Object.prototype.hasOwnProperty.call(s,t)),jo=(e,t,s)=>a=>{if("string"!==typeof a)return a;const[n,r,l,i]=a.match(vo);return{[e]:parseFloat(n),[t]:parseFloat(r),[s]:parseFloat(l),alpha:void 0!==i?parseFloat(i):1}},bo=u(u({},mo),{},{transform:e=>Math.round((e=>ho(0,255,e))(e))}),wo={test:yo("rgb","red"),parse:jo("red","green","blue"),transform:e=>{let{red:t,green:s,blue:a,alpha:n=1}=e;return"rgba("+bo.transform(t)+", "+bo.transform(s)+", "+bo.transform(a)+", "+xo(po.transform(n))+")"}};const No={test:yo("#"),parse:function(e){let t="",s="",a="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),a=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),a=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}},transform:wo.transform},_o=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),ko=_o("deg"),So=_o("%"),Co=_o("px"),Eo=_o("vh"),To=_o("vw"),Ao=(()=>u(u({},So),{},{parse:e=>So.parse(e)/100,transform:e=>So.transform(100*e)}))(),Po={test:yo("hsl","hue"),parse:jo("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:s,lightness:a,alpha:n=1}=e;return"hsla("+Math.round(t)+", "+So.transform(xo(s))+", "+So.transform(xo(a))+", "+xo(po.transform(n))+")"}},Do={test:e=>wo.test(e)||No.test(e)||Po.test(e),parse:e=>wo.test(e)?wo.parse(e):Po.test(e)?Po.parse(e):No.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?wo.transform(e):Po.transform(e),getAnimatableNone:e=>{const t=Do.parse(e);return t.alpha=0,Do.transform(t)}},Ro=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Oo="number",Mo="color",Fo=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Lo(e){const t=e.toString(),s=[],a={color:[],number:[],var:[]},n=[];let r=0;const l=t.replace(Fo,e=>(Do.test(e)?(a.color.push(r),n.push(Mo),s.push(Do.parse(e))):e.startsWith("var(")?(a.var.push(r),n.push("var"),s.push(e)):(a.number.push(r),n.push(Oo),s.push(parseFloat(e))),++r,"${}")).split("${}");return{values:s,split:l,indexes:a,types:n}}function Io(e){return Lo(e).values}function zo(e){const{split:t,types:s}=Lo(e),a=t.length;return e=>{let n="";for(let r=0;r<a;r++)if(n+=t[r],void 0!==e[r]){const t=s[r];n+=t===Oo?xo(e[r]):t===Mo?Do.transform(e[r]):e[r]}return n}}const Bo=e=>"number"===typeof e?0:Do.test(e)?Do.getAnimatableNone(e):e;const Uo={test:function(e){var t,s;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(vo))||void 0===t?void 0:t.length)||0)+((null===(s=e.match(Ro))||void 0===s?void 0:s.length)||0)>0},parse:Io,createTransformer:zo,getAnimatableNone:function(e){const t=Io(e);return zo(e)(t.map(Bo))}},Vo=new Set(["brightness","contrast","saturate","opacity"]);function Ho(e){const[t,s]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[a]=s.match(vo)||[];if(!a)return e;const n=s.replace(a,"");let r=Vo.has(t)?1:0;return a!==s&&(r*=100),t+"("+r+n+")"}const Wo=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,qo=u(u({},Uo),{},{getAnimatableNone:e=>{const t=e.match(Wo);return t?t.map(Ho).join(" "):e}}),Yo=u(u({},mo),{},{transform:Math.round}),Go=u(u({borderWidth:Co,borderTopWidth:Co,borderRightWidth:Co,borderBottomWidth:Co,borderLeftWidth:Co,borderRadius:Co,borderTopLeftRadius:Co,borderTopRightRadius:Co,borderBottomRightRadius:Co,borderBottomLeftRadius:Co,width:Co,maxWidth:Co,height:Co,maxHeight:Co,top:Co,right:Co,bottom:Co,left:Co,inset:Co,insetBlock:Co,insetBlockStart:Co,insetBlockEnd:Co,insetInline:Co,insetInlineStart:Co,insetInlineEnd:Co,padding:Co,paddingTop:Co,paddingRight:Co,paddingBottom:Co,paddingLeft:Co,paddingBlock:Co,paddingBlockStart:Co,paddingBlockEnd:Co,paddingInline:Co,paddingInlineStart:Co,paddingInlineEnd:Co,margin:Co,marginTop:Co,marginRight:Co,marginBottom:Co,marginLeft:Co,marginBlock:Co,marginBlockStart:Co,marginBlockEnd:Co,marginInline:Co,marginInlineStart:Co,marginInlineEnd:Co,fontSize:Co,backgroundPositionX:Co,backgroundPositionY:Co},{rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:fo,scaleX:fo,scaleY:fo,scaleZ:fo,skew:ko,skewX:ko,skewY:ko,distance:Co,translateX:Co,translateY:Co,translateZ:Co,x:Co,y:Co,z:Co,perspective:Co,transformPerspective:Co,opacity:po,originX:Ao,originY:Ao,originZ:Co}),{},{zIndex:Yo,fillOpacity:po,strokeOpacity:po,numOctaves:Yo}),Ko=u(u({},Go),{},{color:Do,backgroundColor:Do,outlineColor:Do,fill:Do,stroke:Do,borderColor:Do,borderTopColor:Do,borderRightColor:Do,borderBottomColor:Do,borderLeftColor:Do,filter:qo,WebkitFilter:qo}),$o=e=>Ko[e],Xo=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Jo=e=>Boolean(e&&e.getVelocity),Qo=new Set(["width","height","top","left","right","bottom",...co]),Zo=e=>t=>t.test(e),ec=[mo,Co,So,ko,To,Eo,{test:e=>"auto"===e,parse:e=>e}],tc=e=>ec.find(Zo(e));function sc(e,t){return t?"".concat(e,". For more information and steps for solving, visit https://motion.dev/troubleshooting/").concat(t):e}var ac;let nc=()=>{},rc=()=>{};"undefined"!==typeof process&&"production"!==(null===(ac={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://shardahrms.com"})||void 0===ac?void 0:ac.NODE_ENV)&&(nc=(e,t,s)=>{e||"undefined"===typeof console||console.warn(sc(t,s))},rc=(e,t,s)=>{if(!e)throw new Error(sc(t,s))});const lc=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),ic=e=>t=>"string"===typeof t&&t.startsWith(e),oc=ic("--"),cc=ic("var(--"),dc=e=>!!cc(e)&&uc.test(e.split("/*")[0].trim()),uc=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function hc(e){return"string"===typeof e&&e.split("/*")[0].includes("var(--")}const mc=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function pc(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;rc(s<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");const[a,n]=function(e){const t=mc.exec(e);if(!t)return[,];const[,s,a,n]=t;return["--".concat(null!==s&&void 0!==s?s:a),n]}(e);if(!a)return;const r=window.getComputedStyle(t).getPropertyValue(a);if(r){const e=r.trim();return lc(e)?parseFloat(e):e}return dc(n)?pc(n,t,s+1):n}const fc=e=>180*e/Math.PI,xc=e=>{const t=fc(Math.atan2(e[1],e[0]));return gc(t)},vc={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:xc,rotateZ:xc,skewX:e=>fc(Math.atan(e[1])),skewY:e=>fc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gc=e=>((e%=360)<0&&(e+=360),e),yc=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),jc=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),bc={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yc,scaleY:jc,scale:e=>(yc(e)+jc(e))/2,rotateX:e=>gc(fc(Math.atan2(e[6],e[5]))),rotateY:e=>gc(fc(Math.atan2(-e[2],e[0]))),rotateZ:xc,rotate:xc,skewX:e=>fc(Math.atan(e[4])),skewY:e=>fc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function wc(e){return e.includes("scale")?1:0}function Nc(e,t){if(!e||"none"===e)return wc(t);const s=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let a,n;if(s)a=bc,n=s;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);a=vc,n=t}if(!n)return wc(t);const r=a[t],l=n[1].split(",").map(_c);return"function"===typeof r?r(l):l[r]}function _c(e){return parseFloat(e.trim())}const kc=e=>e===mo||e===Co,Sc=new Set(["x","y","z"]),Cc=co.filter(e=>!Sc.has(e));const Ec={width:(e,t)=>{let{x:s}=e,{paddingLeft:a="0",paddingRight:n="0"}=t;return s.max-s.min-parseFloat(a)-parseFloat(n)},height:(e,t)=>{let{y:s}=e,{paddingTop:a="0",paddingBottom:n="0"}=t;return s.max-s.min-parseFloat(a)-parseFloat(n)},top:(e,t)=>{let{top:s}=t;return parseFloat(s)},left:(e,t)=>{let{left:s}=t;return parseFloat(s)},bottom:(e,t)=>{let{y:s}=e,{top:a}=t;return parseFloat(a)+(s.max-s.min)},right:(e,t)=>{let{x:s}=e,{left:a}=t;return parseFloat(a)+(s.max-s.min)},x:(e,t)=>{let{transform:s}=t;return Nc(s,"x")},y:(e,t)=>{let{transform:s}=t;return Nc(s,"y")}};Ec.translateX=Ec.x,Ec.translateY=Ec.y;const Tc=e=>e,Ac={},Pc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Dc={value:null,addProjectionMetrics:null};function Rc(e,t){let s=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},r=()=>s=!0,l=Pc.reduce((e,s)=>(e[s]=function(e,t){let s=new Set,a=new Set,n=!1,r=!1;const l=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1},o=0;function c(t){l.has(t)&&(d.schedule(t),e()),o++,t(i)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?s:a;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&l.add(e),t.has(e)||t.add(e),e},cancel:e=>{a.delete(e),l.delete(e)},process:e=>{i=e,n?r=!0:(n=!0,[s,a]=[a,s],s.forEach(c),t&&Dc.value&&Dc.value.frameloop[t].push(o),o=0,s.clear(),n=!1,r&&(r=!1,d.process(e)))}};return d}(r,t?s:void 0),e),{}),{setup:i,read:o,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=l,f=()=>{const r=Ac.useManualTiming?n.timestamp:performance.now();s=!1,Ac.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(r-n.timestamp,40),1)),n.timestamp=r,n.isProcessing=!0,i.process(n),o.process(n),c.process(n),d.process(n),u.process(n),h.process(n),m.process(n),p.process(n),n.isProcessing=!1,s&&t&&(a=!1,e(f))},x=Pc.reduce((t,r)=>{const i=l[r];return t[r]=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s||(s=!0,a=!0,n.isProcessing||e(f)),i.schedule(t,r,l)},t},{});return{schedule:x,cancel:e=>{for(let t=0;t<Pc.length;t++)l[Pc[t]].cancel(e)},state:n,steps:l}}const{schedule:Oc,cancel:Mc,state:Fc,steps:Lc}=Rc("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Tc,!0),Ic=new Set;let zc=!1,Bc=!1,Uc=!1;function Vc(){if(Bc){const e=Array.from(Ic).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),s=new Map;t.forEach(e=>{const t=function(e){const t=[];return Cc.forEach(s=>{const a=e.getValue(s);void 0!==a&&(t.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),t}(e);t.length&&(s.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=s.get(e);t&&t.forEach(t=>{var s;let[a,n]=t;null===(s=e.getValue(a))||void 0===s||s.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Bc=!1,zc=!1,Ic.forEach(e=>e.complete(Uc)),Ic.clear()}function Hc(){Ic.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Bc=!0)})}class Wc{constructor(e,t,s,a,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=a,this.element=n,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Ic.add(this),zc||(zc=!0,Oc.read(Hc),Oc.resolveKeyframes(Vc))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:a}=this;if(null===e[0]){const n=null===a||void 0===a?void 0:a.get(),r=e[e.length-1];if(void 0!==n)e[0]=n;else if(s&&t){const a=s.readValue(t,r);void 0!==a&&null!==a&&(e[0]=a)}void 0===e[0]&&(e[0]=r),a&&void 0===n&&a.set(e[0])}!function(e){for(let s=1;s<e.length;s++){var t;null!==(t=e[s])&&void 0!==t||(e[s]=e[s-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ic.delete(this)}cancel(){"scheduled"===this.state&&(Ic.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const qc=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Yc(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||qc(e))}function Gc(e,t){let s=$o(e);return s!==qo&&(s=Uo),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Kc=new Set(["auto","none","0"]);class $c extends Wc{constructor(e,t,s,a,n){super(e,t,s,a,n,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let s=e[i];if("string"===typeof s&&(s=s.trim(),dc(s))){const a=pc(s,t.current);void 0!==a&&(e[i]=a),i===e.length-1&&(this.finalKeyframe=s)}}if(this.resolveNoneKeyframes(),!Qo.has(s)||2!==e.length)return;const[a,n]=e,r=tc(a),l=tc(n);if(hc(a)!==hc(n)&&Ec[s])this.needsMeasurement=!0;else if(r!==l)if(kc(r)&&kc(l))for(let i=0;i<e.length;i++){const t=e[i];"string"===typeof t&&(e[i]=parseFloat(t))}else Ec[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let a=0;a<e.length;a++)(null===e[a]||Yc(e[a]))&&s.push(a);s.length&&function(e,t,s){let a,n=0;for(;n<e.length&&!a;){const t=e[n];"string"===typeof t&&!Kc.has(t)&&Lo(t).values.length&&(a=e[n]),n++}if(a&&s)for(const r of t)e[r]=Gc(s,a)}(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;"height"===s&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ec[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];void 0!==a&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(s);n&&n.jump(this.measuredOrigin,!1);const r=a.length-1,l=a[r];a[r]=Ec[s](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==l&&void 0===this.finalKeyframe&&(this.finalKeyframe=l),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[s,a]=e;t.getValue(s).set(a)}),this.resolveNoneKeyframes()}}function Xc(e,t){-1===e.indexOf(t)&&e.push(t)}function Jc(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Qc{constructor(){this.subscriptions=[]}add(e){return Xc(this.subscriptions,e),()=>Jc(this.subscriptions,e)}notify(e,t,s){const a=this.subscriptions.length;if(a)if(1===a)this.subscriptions[0](e,t,s);else for(let n=0;n<a;n++){const a=this.subscriptions[n];a&&a(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const{schedule:Zc,cancel:ed}=Rc(queueMicrotask,!1);let td;function sd(){td=void 0}const ad={now:()=>(void 0===td&&ad.set(Fc.isProcessing||Ac.useManualTiming?Fc.timestamp:performance.now()),td),set:e=>{td=e,queueMicrotask(sd)}};function nd(e,t){return t?e*(1e3/t):0}const rd={current:void 0};class ld{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=ad.now();var s;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(s=this.events.change)||void 0===s||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ad.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Qc);const s=this.events[e].add(t);return"change"===e?()=>{s(),Oc.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return rd.current&&rd.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ad.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return nd(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function id(e,t){return new ld(e,t)}const od=[...ec,Do,Uo],cd={current:null},dd={current:!1},ud="undefined"!==typeof window;const hd=new WeakMap;function md(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function pd(e){return"string"===typeof e||Array.isArray(e)}const fd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xd=["initial",...fd];function vd(e){return md(e.animate)||xd.some(t=>pd(e[t]))}function gd(e){return Boolean(vd(e)||e.variants)}function yd(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function jd(e,t,s,a){if("function"===typeof t){const[n,r]=yd(a);t=t(void 0!==s?s:e.custom,n,r)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[n,r]=yd(a);t=t(void 0!==s?s:e.custom,n,r)}return t}const bd=["willChange"],wd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Nd={};function _d(e){Nd=e}class kd{scrapeMotionValuesFromProps(e,t,s){return{}}constructor(e){let{parent:t,props:s,presenceContext:a,reducedMotionConfig:n,skipAnimations:r,blockInitialAnimation:i,visualState:o}=e,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Wc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=ad.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Oc.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget=u({},d),this.initialValues=s.initial?u({},d):{},this.renderState=h,this.parent=t,this.props=s,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.skipAnimationsConfig=r,this.options=c,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=vd(s),this.isVariantNode=gd(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const m=this.scrapeMotionValuesFromProps(s,{},this),{willChange:p}=m,f=l(m,bd);for(const l in f){const e=f[l];void 0!==d[l]&&Jo(e)&&e.set(d[l])}}mount(e){var t,s;this.current=e,hd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(dd.current||function(){if(dd.current=!0,ud)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>cd.current=e.matches;e.addEventListener("change",t),t()}else cd.current=!1}(),this.shouldReduceMotion=cd.current),this.shouldSkipAnimations=null!==(t=this.skipAnimationsConfig)&&void 0!==t&&t,null===(s=this.parent)||void 0===s||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Mc(this.notifyUpdate),Mc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=uo.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Oc.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;"undefined"!==typeof window&&window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Nd){const t=Nd[e];if(!t)continue;const{isEnabled:s,Feature:a}=t;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<wd.length;s++){const t=wd[s];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const a=e["on"+t];a&&(this.propEventSubscriptions[t]=this.on(t,a))}this.prevMotionValues=function(e,t,s){for(const a in t){const n=t[a],r=s[a];if(Jo(n))e.addValue(a,n);else if(Jo(r))e.addValue(a,id(n,{owner:e}));else if(r!==n)if(e.hasValue(a)){const t=e.getValue(a);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{const t=e.getStaticValue(a);e.addValue(a,id(void 0!==t?t:n,{owner:e}))}}for(const a in s)void 0===t[a]&&e.removeValue(a);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return void 0===s&&void 0!==t&&(s=id(null===t?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let a=void 0===this.latestValues[e]&&this.current?null!==(s=this.getBaseTargetFromProps(this.props,e))&&void 0!==s?s:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var n;return void 0!==a&&null!==a&&("string"===typeof a&&(lc(a)||qc(a))?a=parseFloat(a):(n=a,!od.find(Zo(n))&&Uo.test(t)&&(a=Gc(e,t))),this.setBaseTarget(e,Jo(a)?a.get():a)),Jo(a)?a.get():a}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if("string"===typeof t||"object"===typeof t){var a;const n=jd(this.props,t,null===(a=this.presenceContext)||void 0===a?void 0:a.custom);n&&(s=n[e])}if(t&&void 0!==s)return s;const n=this.getBaseTargetFromProps(this.props,e);return void 0===n||Jo(n)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new Qc),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];this.events[e].notify(...s)}}scheduleRenderMicrotask(){Zc.render(this.render)}}class Sd extends kd{constructor(){super(...arguments),this.KeyframeResolver=$c}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){const s=e.style;return s?s[t]:void 0}removeValueFromRenderState(e,t){let{vars:s,style:a}=t;delete s[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jo(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}function Cd(e){return e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))}const Ed=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Td={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ad=co.length;function Pd(e,t,s){const{style:a,vars:n,transformOrigin:r}=e;let l=!1,i=!1;for(const o in t){const e=t[o];if(uo.has(o))l=!0;else if(oc(o))n[o]=e;else{const t=Ed(e,Go[o]);o.startsWith("origin")?(i=!0,r[o]=t):a[o]=t}}if(t.transform||(l||s?a.transform=function(e,t,s){let a="",n=!0;for(let r=0;r<Ad;r++){const l=co[r],i=e[l];if(void 0===i)continue;let o=!0;if("number"===typeof i)o=i===(l.startsWith("scale")?1:0);else{const e=parseFloat(i);o=l.startsWith("scale")?1===e:0===e}if(!o||s){const e=Ed(i,Go[l]);o||(n=!1,a+="".concat(Td[l]||l,"(").concat(e,") ")),s&&(t[l]=e)}}return a=a.trim(),s?a=s(t,n?"":a):n&&(a="none"),a}(t,e.transform,s):a.transform&&(a.transform="none")),i){const{originX:e="50%",originY:t="50%",originZ:s=0}=r;a.transformOrigin="".concat(e," ").concat(t," ").concat(s)}}const Dd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rd={offset:"strokeDashoffset",array:"strokeDasharray"};const Od=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"],Md=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Fd(e,t,s,a,n){let{attrX:r,attrY:i,attrScale:o,pathLength:c,pathSpacing:d=1,pathOffset:u=0}=t;if(Pd(e,l(t,Od),a),s)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;var p,f;(h.transform&&(m.transform=h.transform,delete h.transform),m.transform||h.transformOrigin)&&(m.transformOrigin=null!==(p=h.transformOrigin)&&void 0!==p?p:"50% 50%",delete h.transformOrigin);m.transform&&(m.transformBox=null!==(f=null===n||void 0===n?void 0:n.transformBox)&&void 0!==f?f:"fill-box",delete h.transformBox);for(const l of Md)void 0!==h[l]&&(m[l]=h[l],delete h[l]);void 0!==r&&(h.x=r),void 0!==i&&(h.y=i),void 0!==o&&(h.scale=o),void 0!==c&&function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const r=n?Dd:Rd;e[r.offset]="".concat(-a),e[r.array]="".concat(t," ").concat(s)}(h,c,d,u,!1)}const Ld=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Id=e=>"string"===typeof e&&"svg"===e.toLowerCase();function zd(e,t,s,a){let{style:n,vars:r}=t;const l=e.style;let i;for(i in n)l[i]=n[i];for(i in null===a||void 0===a||a.applyProjectionStyles(l,s),r)l.setProperty(i,r[i])}function Bd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ud={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Co.test(e))return e;e=parseFloat(e)}const s=Bd(e,t.target.x),a=Bd(e,t.target.y);return"".concat(s,"% ").concat(a,"%")}},Vd=(e,t,s)=>e+(t-e)*s,Hd={correct:(e,t)=>{let{treeScale:s,projectionDelta:a}=t;const n=e,r=Uo.parse(e);if(r.length>5)return n;const l=Uo.createTransformer(e),i="number"!==typeof r[0]?1:0,o=a.x.scale*s.x,c=a.y.scale*s.y;r[0+i]/=o,r[1+i]/=c;const d=Vd(o,c,.5);return"number"===typeof r[2+i]&&(r[2+i]/=d),"number"===typeof r[3+i]&&(r[3+i]/=d),l(r)}},Wd={borderRadius:u(u({},Ud),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ud,borderTopRightRadius:Ud,borderBottomLeftRadius:Ud,borderBottomRightRadius:Ud,boxShadow:Hd};function qd(e,t){let{layout:s,layoutId:a}=t;return uo.has(e)||e.startsWith("origin")||(s||void 0!==a)&&(!!Wd[e]||"opacity"===e)}function Yd(e,t,s){const a=e.style,n=null===t||void 0===t?void 0:t.style,r={};if(!a)return r;for(const i in a){var l;(Jo(a[i])||n&&Jo(n[i])||qd(i,e)||void 0!==(null===s||void 0===s||null===(l=s.getValue(i))||void 0===l?void 0:l.liveStyle))&&(r[i]=a[i])}return r}function Gd(e,t,s){const a=Yd(e,t,s);for(const n in e)if(Jo(e[n])||Jo(t[n])){a[-1!==co.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]}return a}class Kd extends Sd{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xo}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(uo.has(t)){const e=$o(t);return e&&e.default||0}return t=Ld.has(t)?t:Cd(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return Gd(e,t,s)}build(e,t,s){Fd(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,a){!function(e,t,s,a){zd(e,t,void 0,a);for(const n in t.attrs)e.setAttribute(Ld.has(n)?n:Cd(n),t.attrs[n])}(e,t,0,a)}mount(e){this.isSVGTag=Id(e.tagName),super.mount(e)}}function $d(e){let{top:t,left:s,right:a,bottom:n}=e;return{x:{min:s,max:a},y:{min:t,max:n}}}function Xd(e){return void 0===e||1===e}function Jd(e){let{scale:t,scaleX:s,scaleY:a}=e;return!Xd(t)||!Xd(s)||!Xd(a)}function Qd(e){return Jd(e)||Zd(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Zd(e){return eu(e.x)||eu(e.y)}function eu(e){return e&&"0%"!==e}function tu(e,t,s){return s+t*(e-s)}function su(e,t,s,a,n){return void 0!==n&&(e=tu(e,n,a)),tu(e,s,a)+t}function au(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;e.min=su(e.min,t,s,a,n),e.max=su(e.max,t,s,a,n)}function nu(e,t){let{x:s,y:a}=t;au(e.x,s.translate,s.scale,s.originPoint),au(e.y,a.translate,a.scale,a.originPoint)}const ru=.999999999999,lu=1.0000000000001;function iu(e,t){e.min=e.min+t,e.max=e.max+t}function ou(e,t,s,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;au(e,t,s,Vd(e.min,e.max,n),a)}function cu(e,t){ou(e.x,t.x,t.scaleX,t.scale,t.originX),ou(e.y,t.y,t.scaleY,t.scale,t.originY)}function du(e,t){return $d(function(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}(e.getBoundingClientRect(),t))}class uu extends Sd{constructor(){super(...arguments),this.type="html",this.renderInstance=zd}readValueFromInstance(e,t){var s,a;if(uo.has(t))return null!==(s=this.projection)&&void 0!==s&&s.isProjecting?wc(t):((e,t)=>{const{transform:s="none"}=getComputedStyle(e);return Nc(s,t)})(e,t);{const s=(a=e,window.getComputedStyle(a)),n=(oc(t)?s.getPropertyValue(t):s[t])||0;return"string"===typeof n?n.trim():n}}measureInstanceViewportBox(e,t){let{transformPagePoint:s}=t;return du(e,s)}build(e,t,s){Pd(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Yd(e,t,s)}}const hu=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mu(e){return"string"===typeof e&&!e.includes("-")&&!!(hu.indexOf(e)>-1||/[A-Z]/.test(e))}const pu=(e,t)=>{var s;return(null!==(s=t.isSVG)&&void 0!==s?s:mu(e))?new Kd(t):new uu(t,{allowProjection:e!==a.Fragment})},fu=(0,a.createContext)({}),xu=(0,a.createContext)({strict:!1}),vu=(0,a.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),gu=(0,a.createContext)({});function yu(e){const{initial:t,animate:s}=function(e,t){if(vd(e)){const{initial:t,animate:s}=e;return{initial:!1===t||pd(t)?t:void 0,animate:pd(s)?s:void 0}}return!1!==e.inherit?t:{}}(e,(0,a.useContext)(gu));return(0,a.useMemo)(()=>({initial:t,animate:s}),[ju(t),ju(s)])}function ju(e){return Array.isArray(e)?e.join(" "):e}const bu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wu(e,t,s){for(const a in t)Jo(t[a])||qd(a,s)||(e[a]=t[a])}function Nu(e,t){const s={};return wu(s,e.style||{},e),Object.assign(s,function(e,t){let{transformTemplate:s}=e;return(0,a.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Pd(e,t,s),Object.assign({},e.vars,e.style)},[t])}(e,t)),s}function _u(e,t){const s={},a=Nu(e,t);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=a,s}const ku=()=>u(u({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function Su(e,t,s,n){const r=(0,a.useMemo)(()=>{const s=ku();return Fd(s,t,Id(n),e.transformTemplate,e.style),u(u({},s.attrs),{},{style:u({},s.style)})},[t]);if(e.style){const t={};wu(t,e.style,e),r.style=u(u({},t),r.style)}return r}const Cu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Eu(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Cu.has(e)}let Tu=e=>!Eu(e);try{"function"===typeof(Au=require("@emotion/is-prop-valid").default)&&(Tu=e=>e.startsWith("on")?!Eu(e):Au(e))}catch(nI){}var Au;function Pu(e,t,s,n,r){let{latestValues:l}=n,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0;const c=((null!==o&&void 0!==o?o:mu(e))?Su:_u)(t,l,r,e),d=function(e,t,s){const a={};for(const n in e)"values"===n&&"object"===typeof e.values||(Tu(n)||!0===s&&Eu(n)||!t&&!Eu(n)||e.draggable&&n.startsWith("onDrag"))&&(a[n]=e[n]);return a}(t,"string"===typeof e,i),h=e!==a.Fragment?u(u(u({},d),c),{},{ref:s}):{},{children:m}=t,p=(0,a.useMemo)(()=>Jo(m)?m.get():m,[m]);return(0,a.createElement)(e,u(u({},h),{},{children:p}))}function Du(e){return Jo(e)?e.get():e}const Ru=(0,a.createContext)(null);function Ou(e){const t=(0,a.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Mu=["transitionEnd","transition"];function Fu(e,t,s,a){const n={},r=a(e,{});for(const l in r)n[l]=Du(r[l]);let{initial:i,animate:o}=e;const c=vd(e),d=gd(e);t&&d&&!c&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let u=!!s&&!1===s.initial;u=u||!1===i;const h=u?o:i;if(h&&"boolean"!==typeof h&&!md(h)){const t=Array.isArray(h)?h:[h];for(let s=0;s<t.length;s++){const a=jd(e,t[s]);if(a){const{transitionEnd:e,transition:t}=a,s=l(a,Mu);for(const a in s){let e=s[a];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(n[a]=e)}for(const a in e)n[a]=e[a]}}}return n}const Lu=e=>(t,s)=>{const n=(0,a.useContext)(gu),r=(0,a.useContext)(Ru),l=()=>function(e,t,s,a){let{scrapeMotionValuesFromProps:n,createRenderState:r}=e;return{latestValues:Fu(t,s,a,n),renderState:r()}}(e,t,n,r);return s?l():Ou(l)},Iu=Lu({scrapeMotionValuesFromProps:Yd,createRenderState:bu}),zu=Lu({scrapeMotionValuesFromProps:Gd,createRenderState:ku}),Bu="undefined"!==typeof window,Uu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Vu=!1;function Hu(){return function(){if(Vu)return;const e={};for(const t in Uu)e[t]={isEnabled:e=>Uu[t].some(t=>!!e[t])};_d(e),Vu=!0}(),Nd}const Wu=Symbol.for("motionComponentSymbol");function qu(e,t,s){const n=(0,a.useRef)(s);(0,a.useInsertionEffect)(()=>{n.current=s});const r=(0,a.useRef)(null);return(0,a.useCallback)(s=>{var a;s&&(null===(a=e.onMount)||void 0===a||a.call(e,s));t&&(s?t.mount(s):t.unmount());const l=n.current;if("function"===typeof l)if(s){const e=l(s);"function"===typeof e&&(r.current=e)}else r.current?(r.current(),r.current=null):l(s);else l&&(l.current=s)},[t])}const Yu="data-"+Cd("framerAppearId"),Gu=(0,a.createContext)({});function Ku(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const $u=Bu?a.useLayoutEffect:a.useEffect;function Xu(e,t,s,n,r,l){var i,o,c,d;const{visualElement:u}=(0,a.useContext)(gu),h=(0,a.useContext)(xu),m=(0,a.useContext)(Ru),p=(0,a.useContext)(vu),f=p.reducedMotion,x=p.skipAnimations,v=(0,a.useRef)(null),g=(0,a.useRef)(!1);n=n||h.renderer,!v.current&&n&&(v.current=n(e,{visualState:t,parent:u,props:s,presenceContext:m,blockInitialAnimation:!!m&&!1===m.initial,reducedMotionConfig:f,skipAnimations:x,isSVG:l}),g.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const y=v.current,j=(0,a.useContext)(Gu);!y||y.projection||!r||"html"!==y.type&&"svg"!==y.type||function(e,t,s,a){const{layoutId:n,layout:r,drag:l,dragConstraints:i,layoutScroll:o,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:Ju(e.parent)),e.projection.setOptions({layoutId:n,layout:r,alwaysMeasureLayout:Boolean(l)||i&&Ku(i),visualElement:e,animationType:"string"===typeof r?r:"both",initialPromotionConfig:a,crossfade:d,layoutScroll:o,layoutRoot:c})}(v.current,s,r,j);const b=(0,a.useRef)(!1);(0,a.useInsertionEffect)(()=>{y&&b.current&&y.update(s,m)});const w=s[Yu],N=(0,a.useRef)(Boolean(w)&&!(null!==(i=(o=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(o,w))&&(null===(c=(d=window).MotionHasOptimisedAnimation)||void 0===c?void 0:c.call(d,w)));return $u(()=>{g.current=!0,y&&(b.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),N.current&&y.animationState&&y.animationState.animateChanges())}),(0,a.useEffect)(()=>{y&&(!N.current&&y.animationState&&y.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,w)}),N.current=!1),y.enteringChildren=void 0)}),y}function Ju(e){if(e)return!1!==e.options.allowProjection?e.projection:Ju(e.parent)}function Qu(e){var t,s;let{forwardMotionProps:n=!1,type:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;l&&function(e){const t=Hu();for(const s in e)t[s]=u(u({},t[s]),e[s]);_d(t)}(l);const o=r?"svg"===r:mu(e),c=o?zu:Iu;function d(t,s){let r;const l=u(u(u({},(0,a.useContext)(vu)),t),{},{layoutId:Zu(t)}),{isStatic:d}=l,h=yu(t),m=c(t,d);if(!d&&Bu){!function(){(0,a.useContext)(xu).strict;0}();const t=function(e){const t=Hu(),{drag:s,layout:a}=t;if(!s&&!a)return{};const n=u(u({},s),a);return{MeasureLayout:null!==s&&void 0!==s&&s.isEnabled(e)||null!==a&&void 0!==a&&a.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);r=t.MeasureLayout,h.visualElement=Xu(e,m,l,i,t.ProjectionNode,o)}return(0,ds.jsxs)(gu.Provider,{value:h,children:[r&&h.visualElement?(0,ds.jsx)(r,u({visualElement:h.visualElement},l)):null,Pu(e,t,qu(m,h.visualElement,s),m,d,n,o)]})}d.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==t?t:"",")"));const h=(0,a.forwardRef)(d);return h[Wu]=e,h}function Zu(e){let{layoutId:t}=e;const s=(0,a.useContext)(fu).id;return s&&void 0!==t?s+"-"+t:t}function eh(e,t){if("undefined"===typeof Proxy)return Qu;const s=new Map,a=(s,a)=>Qu(s,a,e,t);return new Proxy((e,t)=>a(e,t),{get:(n,r)=>"create"===r?a:(s.has(r)||s.set(r,Qu(r,void 0,e,t)),s.get(r))})}class th{constructor(e){this.isMounted=!1,this.node=e}update(){}}function sh(e,t,s){const a=e.getProps();return jd(a,t,void 0!==s?s:a.custom,e)}function ah(e,t){var s,a;return null!==(s=null!==(a=null===e||void 0===e?void 0:e[t])&&void 0!==a?a:null===e||void 0===e?void 0:e.default)&&void 0!==s?s:e}const nh=e=>Array.isArray(e),rh=["transitionEnd","transition"];function lh(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,id(s))}function ih(e){return nh(e)?e[e.length-1]||0:e}function oh(e,t){const s=e.getValue("willChange");if(a=s,Boolean(Jo(a)&&a.add))return s.add(t);if(!s&&Ac.WillChange){const s=new Ac.WillChange("auto");e.addValue("willChange",s),s.add(t)}var a}function ch(e){return e.props[Yu]}const dh=e=>1e3*e,uh=e=>e/1e3,hh=(e,t)=>s=>t(e(s)),mh=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce(hh)},ph={layout:0,mainThread:0,waapi:0};function fh(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function xh(e,t){return s=>s>0?t:e}const vh=(e,t,s)=>{const a=e*e,n=s*(t*t-a)+a;return n<0?0:Math.sqrt(n)},gh=[No,wo,Po];function yh(e){const t=(s=e,gh.find(e=>e.test(s)));var s;if(nc(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!Boolean(t))return!1;let a=t.parse(e);return t===Po&&(a=function(e){let{hue:t,saturation:s,lightness:a,alpha:n}=e;t/=360,s/=100,a/=100;let r=0,l=0,i=0;if(s){const e=a<.5?a*(1+s):a+s-a*s,n=2*a-e;r=fh(n,e,t+1/3),l=fh(n,e,t),i=fh(n,e,t-1/3)}else r=l=i=a;return{red:Math.round(255*r),green:Math.round(255*l),blue:Math.round(255*i),alpha:n}}(a)),a}const jh=(e,t)=>{const s=yh(e),a=yh(t);if(!s||!a)return xh(e,t);const n=u({},s);return e=>(n.red=vh(s.red,a.red,e),n.green=vh(s.green,a.green,e),n.blue=vh(s.blue,a.blue,e),n.alpha=Vd(s.alpha,a.alpha,e),wo.transform(n))},bh=new Set(["none","hidden"]);function wh(e,t){return s=>Vd(e,t,s)}function Nh(e){return"number"===typeof e?wh:"string"===typeof e?dc(e)?xh:Do.test(e)?jh:Sh:Array.isArray(e)?_h:"object"===typeof e?Do.test(e)?jh:kh:xh}function _h(e,t){const s=[...e],a=s.length,n=e.map((e,s)=>Nh(e)(e,t[s]));return e=>{for(let t=0;t<a;t++)s[t]=n[t](e);return s}}function kh(e,t){const s=u(u({},e),t),a={};for(const n in s)void 0!==e[n]&&void 0!==t[n]&&(a[n]=Nh(e[n])(e[n],t[n]));return e=>{for(const t in a)s[t]=a[t](e);return s}}const Sh=(e,t)=>{const s=Uo.createTransformer(t),a=Lo(e),n=Lo(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?bh.has(e)&&!n.values.length||bh.has(t)&&!a.values.length?function(e,t){return bh.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}(e,t):mh(_h(function(e,t){const s=[],a={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){var n;const l=t.types[r],i=e.indexes[l][a[l]],o=null!==(n=e.values[i])&&void 0!==n?n:0;s[r]=o,a[l]++}return s}(a,n),n.values),s):(nc(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),xh(e,t))};function Ch(e,t,s){if("number"===typeof e&&"number"===typeof t&&"number"===typeof s)return Vd(e,t,s);return Nh(e)(e,t)}const Eh=e=>{const t=t=>{let{timestamp:s}=t;return e(s)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Oc.update(t,e)},stop:()=>Mc(t),now:()=>Fc.isProcessing?Fc.timestamp:ad.now()}},Th=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a="";const n=Math.max(Math.round(t/s),2);for(let r=0;r<n;r++)a+=Math.round(1e4*e(r/(n-1)))/1e4+", ";return"linear(".concat(a.substring(0,a.length-2),")")},Ah=2e4;function Ph(e){let t=0;let s=e.next(t);for(;!s.done&&t<Ah;)t+=50,s=e.next(t);return t>=Ah?1/0:t}function Dh(e,t,s){const a=Math.max(t-5,0);return nd(s-e(a),t-a)}const Rh={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Oh=.001;function Mh(e){let t,s,{duration:a=Rh.duration,bounce:n=Rh.bounce,velocity:r=Rh.velocity,mass:l=Rh.mass}=e;nc(a<=dh(Rh.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let i=1-n;i=ho(Rh.minDamping,Rh.maxDamping,i),a=ho(Rh.minDuration,Rh.maxDuration,uh(a)),i<1?(t=e=>{const t=e*i,s=t*a,n=t-r,l=Lh(e,i),o=Math.exp(-s);return Oh-n/l*o},s=e=>{const s=e*i*a,n=s*r+r,l=Math.pow(i,2)*Math.pow(e,2)*a,o=Math.exp(-s),c=Lh(Math.pow(e,2),i);return(-t(e)+Oh>0?-1:1)*((n-l)*o)/c}):(t=e=>Math.exp(-e*a)*((e-r)*a+1)-.001,s=e=>Math.exp(-e*a)*(a*a*(r-e)));const o=function(e,t,s){let a=s;for(let n=1;n<Fh;n++)a-=e(a)/t(a);return a}(t,s,5/a);if(a=dh(a),isNaN(o))return{stiffness:Rh.stiffness,damping:Rh.damping,duration:a};{const e=Math.pow(o,2)*l;return{stiffness:e,damping:2*i*Math.sqrt(l*e),duration:a}}}const Fh=12;function Lh(e,t){return e*Math.sqrt(1-t*t)}const Ih=["duration","bounce"],zh=["stiffness","damping","mass"];function Bh(e,t){return t.some(t=>void 0!==e[t])}function Uh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rh.bounce;const s="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:n}=s;const r=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],i={done:!1,value:r},{stiffness:o,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:p}=function(e){let t=u({velocity:Rh.velocity,stiffness:Rh.stiffness,damping:Rh.damping,mass:Rh.mass,isResolvedFromDuration:!1},e);if(!Bh(e,zh)&&Bh(e,Ih))if(e.visualDuration){const s=e.visualDuration,a=2*Math.PI/(1.2*s),n=a*a,r=2*ho(.05,1,1-(e.bounce||0))*Math.sqrt(n);t=u(u({},t),{},{mass:Rh.mass,stiffness:n,damping:r})}else{const s=Mh(e);t=u(u(u({},t),s),{},{mass:Rh.mass}),t.isResolvedFromDuration=!0}return t}(u(u({},s),{},{velocity:-uh(s.velocity||0)})),f=m||0,x=c/(2*Math.sqrt(o*d)),v=l-r,g=uh(Math.sqrt(o/d)),y=Math.abs(v)<5;let j;if(a||(a=y?Rh.restSpeed.granular:Rh.restSpeed.default),n||(n=y?Rh.restDelta.granular:Rh.restDelta.default),x<1){const e=Lh(g,x);j=t=>{const s=Math.exp(-x*g*t);return l-s*((f+x*g*v)/e*Math.sin(e*t)+v*Math.cos(e*t))}}else if(1===x)j=e=>l-Math.exp(-g*e)*(v+(f+g*v)*e);else{const e=g*Math.sqrt(x*x-1);j=t=>{const s=Math.exp(-x*g*t),a=Math.min(e*t,300);return l-s*((f+x*g*v)*Math.sinh(a)+e*v*Math.cosh(a))/e}}const b={calculatedDuration:p&&h||null,next:e=>{const t=j(e);if(p)i.done=e>=h;else{let s=0===e?f:0;x<1&&(s=0===e?dh(f):Dh(j,e,t));const r=Math.abs(s)<=a,o=Math.abs(l-t)<=n;i.done=r&&o}return i.value=i.done?l:t,i},toString:()=>{const e=Math.min(Ph(b),Ah),t=Th(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function Vh(e){let{keyframes:t,velocity:s=0,power:a=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:l=500,modifyTarget:i,min:o,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===o?c:void 0===c||Math.abs(o-e)<Math.abs(c-e)?o:c;let f=a*s;const x=h+f,v=void 0===i?x:i(x);v!==x&&(f=v-h);const g=e=>-f*Math.exp(-e/n),y=e=>v+g(e),j=e=>{const t=g(e),s=y(e);m.done=Math.abs(t)<=d,m.value=m.done?v:s};let b,w;const N=e=>{var t;(t=m.value,void 0!==o&&t<o||void 0!==c&&t>c)&&(b=e,w=Uh({keyframes:[m.value,p(m.value)],velocity:Dh(y,e,m.value),damping:r,stiffness:l,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,j(e),N(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&j(e),m)}}}Uh.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const s=(arguments.length>2?arguments[2]:void 0)(u(u({},e),{},{keyframes:[0,t]})),a=Math.min(Ph(s),Ah);return{type:"keyframes",ease:e=>s.next(a*e).value/t,duration:uh(a)}}(e,100,Uh);return e.ease=t.ease,e.duration=dh(t.duration),e.type="keyframes",e};const Hh=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e;function Wh(e,t,s,a){if(e===t&&s===a)return Tc;const n=t=>function(e,t,s,a,n){let r,l,i=0;do{l=t+(s-t)/2,r=Hh(l,a,n)-e,r>0?s=l:t=l}while(Math.abs(r)>1e-7&&++i<12);return l}(t,0,1,e,s);return e=>0===e||1===e?e:Hh(n(e),t,a)}const qh=Wh(.42,0,1,1),Yh=Wh(0,0,.58,1),Gh=Wh(.42,0,.58,1),Kh=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$h=e=>t=>1-e(1-t),Xh=Wh(.33,1.53,.69,.99),Jh=$h(Xh),Qh=Kh(Jh),Zh=e=>(e*=2)<1?.5*Jh(e):.5*(2-Math.pow(2,-10*(e-1))),em=e=>1-Math.sin(Math.acos(e)),tm=$h(em),sm=Kh(em),am=e=>Array.isArray(e)&&"number"===typeof e[0],nm={linear:Tc,easeIn:qh,easeInOut:Gh,easeOut:Yh,circIn:em,circInOut:sm,circOut:tm,backIn:Jh,backInOut:Qh,backOut:Xh,anticipate:Zh},rm=e=>{if(am(e)){rc(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,s,a,n]=e;return Wh(t,s,a,n)}return"string"===typeof e?(rc(void 0!==nm[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),nm[e]):e},lm=(e,t,s)=>{const a=t-e;return 0===a?1:(s-e)/a};function im(e,t){let{clamp:s=!0,ease:a,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length;if(rc(r===t.length,"Both input and output ranges must be the same length","range-length"),1===r)return()=>t[0];if(2===r&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=function(e,t,s){const a=[],n=s||Ac.mix||Ch,r=e.length-1;for(let l=0;l<r;l++){let s=n(e[l],e[l+1]);if(t){const e=Array.isArray(t)?t[l]||Tc:t;s=mh(e,s)}a.push(s)}return a}(t,a,n),o=i.length,c=s=>{if(l&&s<e[0])return t[0];let a=0;if(o>1)for(;a<e.length-2&&!(s<e[a+1]);a++);const n=lm(e[a],e[a+1],s);return i[a](n)};return s?t=>c(ho(e[0],e[r-1],t)):c}function om(e){const t=[0];return function(e,t){const s=e[e.length-1];for(let a=1;a<=t;a++){const n=lm(0,t,a);e.push(Vd(s,1,n))}}(t,e.length-1),t}function cm(e){let{duration:t=300,keyframes:s,times:a,ease:n="easeInOut"}=e;const r=(e=>Array.isArray(e)&&"number"!==typeof e[0])(n)?n.map(rm):rm(n),l={done:!1,value:s[0]},i=function(e,t){return e.map(e=>e*t)}(a&&a.length===s.length?a:om(s),t),o=im(i,s,{ease:Array.isArray(r)?r:(c=s,d=r,c.map(()=>d||Gh).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(l.value=o(e),l.done=e>=t,l)}}const dm=e=>null!==e;function um(e,t,s){let{repeat:a,repeatType:n="loop"}=t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const l=e.filter(dm),i=r<0||a&&"loop"!==n&&a%2===1?0:l.length-1;return i&&void 0!==s?s:l[i]}const hm={decay:Vh,inertia:Vh,tween:cm,keyframes:cm,spring:Uh};function mm(e){"string"===typeof e.type&&(e.type=hm[e.type])}class pm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const fm=e=>e/100;class xm extends pm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:s}=this.options;s&&s.updatedAt!==ad.now()&&this.tick(ad.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},ph.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;mm(e);const{type:t=cm,repeat:s=0,repeatDelay:a=0,repeatType:n,velocity:r=0}=e;let{keyframes:l}=e;const i=t||cm;i!==cm&&"number"!==typeof l[0]&&(this.mixKeyframes=mh(fm,Ch(l[0],l[1])),l=[0,100]);const o=i(u(u({},e),{},{keyframes:l}));"mirror"===n&&(this.mirroredGenerator=i(u(u({},e),{},{keyframes:[...l].reverse(),velocity:-r}))),null===o.calculatedDuration&&(o.calculatedDuration=Ph(o));const{calculatedDuration:c}=o;this.calculatedDuration=c,this.resolvedDuration=c+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=o}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:s,totalDuration:a,mixKeyframes:n,mirroredGenerator:r,resolvedDuration:l,calculatedDuration:i}=this;if(null===this.startTime)return s.next(0);const{delay:o=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-o*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?x<0:x>a;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=a);let g=this.currentTime,y=s;if(d){const e=Math.min(this.currentTime,a)/l;let t=Math.floor(e),s=e%1;!s&&e>=1&&(s=1),1===s&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(s=1-s,h&&(s-=h/l)):"mirror"===u&&(y=r)),g=ho(0,1,s)*l}const j=v?{done:!1,value:c[0]}:y.next(g);n&&(j.value=n(j.value));let{done:b}=j;v||null===i||(b=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return w&&m!==Vh&&(j.value=um(c,this.options,f,this.speed)),p&&p(j.value),w&&this.finish(),j}then(e,t){return this.finished.then(e,t)}get duration(){return uh(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uh(e)}get time(){return uh(this.currentTime)}set time(e){var t;e=dh(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ad.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=uh(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:s=Eh,startTime:a}=this.options;this.driver||(this.driver=s(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=null!==a&&void 0!==a?a:n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ad.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,ph.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function vm(e){let t;return()=>(void 0===t&&(t=e()),t)}const gm=vm(()=>void 0!==window.ScrollTimeline),ym={};function jm(e,t){const s=vm(e);return()=>{var e;return null!==(e=ym[t])&&void 0!==e?e:s()}}const bm=jm(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(sI){return!1}return!0},"linearEasing"),wm=e=>{let[t,s,a,n]=e;return"cubic-bezier(".concat(t,", ").concat(s,", ").concat(a,", ").concat(n,")")},Nm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wm([0,.65,.55,1]),circOut:wm([.55,0,1,.45]),backIn:wm([.31,.01,.66,-.59]),backOut:wm([.33,1.53,.69,.99])};function _m(e,t){return e?"function"===typeof e?bm()?Th(e,t):"ease-out":am(e)?wm(e):Array.isArray(e)?e.map(e=>_m(e,t)||Nm.easeOut):Nm[e]:void 0}function km(e,t,s){let{delay:a=0,duration:n=300,repeat:r=0,repeatType:l="loop",ease:i="easeOut",times:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:s};o&&(d.offset=o);const u=_m(i,n);Array.isArray(u)&&(d.easing=u),Dc.value&&ph.waapi++;const h={delay:a,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:"reverse"===l?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(d,h);return Dc.value&&m.finished.finally(()=>{ph.waapi--}),m}function Sm(e){return"function"===typeof e&&"applyToOptions"in e}const Cm=["type"];class Em extends pm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:s,keyframes:a,pseudoElement:n,allowFlatten:r=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(n),this.allowFlatten=r,this.options=e,rc("string"!==typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const c=function(e){let{type:t}=e,s=l(e,Cm);return Sm(t)&&bm()?t.applyToOptions(s):(null!==(a=s.duration)&&void 0!==a||(s.duration=300),null!==(n=s.ease)&&void 0!==n||(s.ease="easeOut"),s);var a,n}(e);this.animation=km(t,s,a,c,n),!1===c.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const e=um(a,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,s){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,s):e.style[t]=s}(t,s,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(sI){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e;const t=null===(e=this.options)||void 0===e?void 0:e.element;var s,a;!this.isPseudoElement&&null!==t&&void 0!==t&&t.isConnected&&(null===(s=(a=this.animation).commitStyles)||void 0===s||s.call(a))}get duration(){var e,t;const s=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return uh(Number(s))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uh(e)}get time(){return uh(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=dh(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){var e;return null!==(e=this.manualStartTime)&&void 0!==e?e:Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:s}=e;var a;this.allowFlatten&&(null===(a=this.animation.effect)||void 0===a||a.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&gm()?(this.animation.timeline=t,Tc):s(this)}}const Tm={anticipate:Zh,backInOut:Qh,circInOut:sm};function Am(e){"string"===typeof e.ease&&e.ease in Tm&&(e.ease=Tm[e.ease])}const Pm=["motionValue","onUpdate","onComplete","element"];class Dm extends Em{constructor(e){Am(e),mm(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const t=this.options,{motionValue:s,onUpdate:a,onComplete:n,element:r}=t,i=l(t,Pm);if(!s)return;if(void 0!==e)return void s.set(e);const o=new xm(u(u({},i),{},{autoplay:!1})),c=Math.max(10,ad.now()-this.startTime),d=ho(0,10,c-10);s.setWithVelocity(o.sample(Math.max(0,c-d)).value,o.sample(c).value,d),o.stop()}}const Rm=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Uo.test(e)&&"0"!==e||e.startsWith("url(")));function Om(e){e.duration=0,e.type="keyframes"}const Mm=new Set(["opacity","clipPath","filter","transform"]),Fm=vm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Lm=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Im extends pm{constructor(e){var t;let{autoplay:s=!0,delay:a=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:m}=e,p=l(e,Lm);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=ad.now();const f=u({autoplay:s,delay:a,type:n,repeat:r,repeatDelay:i,repeatType:o,name:d,motionValue:h,element:m},p),x=(null===m||void 0===m?void 0:m.KeyframeResolver)||Wc;this.keyframeResolver=new x(c,(e,t,s)=>this.onKeyframesResolved(e,t,f,!s),d,h,m),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,s,a){var n;this.keyframeResolver=void 0;const{name:r,type:l,velocity:i,delay:o,isHandoff:c,onUpdate:d}=s;this.resolvedAt=ad.now(),function(e,t,s,a){const n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;const r=e[e.length-1],l=Rm(n,t),i=Rm(r,t);return nc(l===i,"You are trying to animate ".concat(t,' from "').concat(n,'" to "').concat(r,'". "').concat(l?r:n,'" is not an animatable value.'),"value-not-animatable"),!(!l||!i)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}(e)||("spring"===s||Sm(s))&&a)}(e,r,l,i)||(!Ac.instantAnimations&&o||null===d||void 0===d||d(um(e,s,t)),e[0]=e[e.length-1],Om(s),s.repeat=0);const h=u(u({startTime:a?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},s),{},{keyframes:e}),m=!c&&function(e){var t;const{motionValue:s,name:a,repeatDelay:n,repeatType:r,damping:l,type:i}=e;if(!((null===s||void 0===s||null===(t=s.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:c}=s.owner.getProps();return Fm()&&a&&Mm.has(a)&&("transform"!==a||!c)&&!o&&!n&&"mirror"!==r&&0!==l&&"inertia"!==i}(h),p=null===(n=h.motionValue)||void 0===n||null===(n=n.owner)||void 0===n?void 0:n.current,f=m?new Dm(u(u({},h),{},{element:p})):new xm(h);f.finished.then(()=>{this.notifyFinished()}).catch(Tc),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),Uc=!0,Hc(),Vc(),Uc=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const zm={type:"spring",stiffness:500,damping:25,restSpeed:10},Bm={type:"keyframes",duration:.8},Um={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vm=(e,t)=>{let{keyframes:s}=t;return s.length>2?Bm:uo.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===s[1]?2*Math.sqrt(550):30,restSpeed:10}:zm:Um},Hm=e=>null!==e;const Wm=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const qm=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return i=>{const o=ah(a,e)||{},c=o.delay||a.delay||0;let{elapsed:d=0}=a;d-=dh(c);const h=u(u({keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-d,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:r?void 0:n});(function(e){let{when:t,delay:s,delayChildren:a,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:c,from:d,elapsed:u}=e,h=l(e,Wm);return!!Object.keys(h).length})(o)||Object.assign(h,Vm(e,h)),h.duration&&(h.duration=dh(h.duration)),h.repeatDelay&&(h.repeatDelay=dh(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let m=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(Om(h),0===h.delay&&(m=!0)),(Ac.instantAnimations||Ac.skipAnimations||null!==n&&void 0!==n&&n.shouldSkipAnimations)&&(m=!0,Om(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,m&&!r&&void 0!==t.get()){const e=function(e,t,s){let{repeat:a,repeatType:n="loop"}=t;const r=e.filter(Hm),l=a&&"loop"!==n&&a%2===1?0:r.length-1;return l&&void 0!==s?s:r[l]}(h.keyframes,o);if(void 0!==e)return void Oc.update(()=>{h.onUpdate(e),h.onComplete()})}return o.isSync?new xm(h):new Im(h)}},Ym=["transition","transitionEnd"];function Gm(e,t){let{protectedKeys:s,needsAnimating:a}=e;const n=s.hasOwnProperty(t)&&!0!==a[t];return a[t]=!1,n}function Km(e,t){var s;let{delay:a=0,transitionOverride:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:i=e.getDefaultTransition(),transitionEnd:o}=t,c=l(t,Ym);const d=null===(s=i)||void 0===s?void 0:s.reduceMotion;n&&(i=n);const h=[],m=r&&e.animationState&&e.animationState.getState()[r];for(const l in c){var p;const t=e.getValue(l,null!==(p=e.latestValues[l])&&void 0!==p?p:null),s=c[l];if(void 0===s||m&&Gm(m,l))continue;const n=u({delay:a},ah(i||{},l)),r=t.get();if(void 0!==r&&!t.isAnimating&&!Array.isArray(s)&&s===r&&!n.velocity)continue;let o=!1;if(window.MotionHandoffAnimation){const t=ch(e);if(t){const e=window.MotionHandoffAnimation(t,l,Oc);null!==e&&(n.startTime=e,o=!0)}}oh(e,l);const f=null!==d&&void 0!==d?d:e.shouldReduceMotion;t.start(qm(l,t,s,f&&Qo.has(l)?{type:!1}:n,e,o));const x=t.animation;x&&h.push(x)}return o&&Promise.all(h).then(()=>{Oc.update(()=>{o&&function(e,t){let s=sh(e,t)||{},{transitionEnd:a={},transition:n={}}=s,r=l(s,rh);r=u(u({},r),a);for(const l in r)lh(e,l,ih(r[l]))}(e,o)})}),h}function $m(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const r=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),l=e.size,i=(l-1)*a;return"function"===typeof s?s(r,l):1===n?r*a:i-r*a}function Xm(e,t){var s;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=sh(e,t,"exit"===a.type?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(r=a.transitionOverride);const l=n?()=>Promise.all(Km(e,n,a)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:n=0,staggerChildren:l,staggerDirection:i}=r;return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6?arguments[6]:void 0;const i=[];for(const o of e.variantChildren)o.notify("AnimationStart",t),i.push(Xm(o,t,u(u({},l),{},{delay:s+("function"===typeof a?0:a)+$m(e.variantChildren,o,a,n,r)})).then(()=>o.notify("AnimationComplete",t)));return Promise.all(i)}(e,t,s,n,l,i,a)}:()=>Promise.resolve(),{when:o}=r;if(o){const[e,t]="beforeChildren"===o?[l,i]:[i,l];return e().then(()=>t())}return Promise.all([l(),i(a.delay)])}const Jm=xd.length;function Qm(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Qm(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let s=0;s<Jm;s++){const a=xd[s],n=e.props[a];(pd(n)||!1===n)&&(t[a]=n)}return t}function Zm(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(t[a]!==e[a])return!1;return!0}const ep=["transition","transitionEnd"],tp=[...fd].reverse(),sp=fd.length;function ap(e){return t=>Promise.all(t.map(t=>{let{animation:s,options:a}=t;return function(e,t){let s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const n=t.map(t=>Xm(e,t,a));s=Promise.all(n)}else if("string"===typeof t)s=Xm(e,t,a);else{const n="function"===typeof t?sh(e,t,a.custom):t;s=Promise.all(Km(e,n,a))}return s.then(()=>{e.notify("AnimationComplete",t)})}(e,s,a)}))}function np(e){let t=ap(e),s=ip(),a=!0;const n=t=>(s,a)=>{var n;const r=sh(e,a,"exit"===t?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);if(r){const{transition:e,transitionEnd:t}=r,a=l(r,ep);s=u(u(u({},s),a),t)}return s};function r(r){const{props:l}=e,i=Qm(e.parent)||{},o=[],c=new Set;let d={},h=1/0;for(let t=0;t<sp;t++){const m=tp[t],p=s[m],f=void 0!==l[m]?l[m]:i[m],x=pd(f),v=m===r?p.isActive:null;!1===v&&(h=t);let g=f===i[m]&&f!==l[m]&&x;if(g&&a&&e.manuallyAnimateOnMount&&(g=!1),p.protectedKeys=u({},d),!p.isActive&&null===v||!f&&!p.prevProp||md(f)||"boolean"===typeof f)continue;const y=rp(p.prevProp,f);let j=y||m===r&&p.isActive&&!g&&x||t>h&&x,b=!1;const w=Array.isArray(f)?f:[f];let N=w.reduce(n(m),{});!1===v&&(N={});const{prevResolvedValues:_={}}=p,k=u(u({},_),N),S=t=>{j=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const s=e.getValue(t);s&&(s.liveStyle=!1)};for(const e in k){const t=N[e],s=_[e];if(d.hasOwnProperty(e))continue;let a=!1;a=nh(t)&&nh(s)?!Zm(t,s):t!==s,a?void 0!==t&&null!==t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=N,p.isActive&&(d=u(u({},d),N)),a&&e.blockInitialAnimation&&(j=!1);const C=g&&y;j&&(!C||b)&&o.push(...w.map(t=>{const s={type:m};if("string"===typeof t&&a&&!C&&e.manuallyAnimateOnMount&&e.parent){const{parent:a}=e,n=sh(a,t);if(a.enteringChildren&&n){const{delayChildren:t}=n.transition||{};s.delay=$m(a.enteringChildren,e,t)}}return{animation:t,options:s}}))}if(c.size){const t={};if("boolean"!==typeof l.initial){const s=sh(e,Array.isArray(l.initial)?l.initial[0]:l.initial);s&&s.transition&&(t.transition=s.transition)}c.forEach(s=>{const a=e.getBaseTarget(s),n=e.getValue(s);n&&(n.liveStyle=!0),t[s]=null!==a&&void 0!==a?a:null}),o.push({animation:t})}let m=Boolean(o.length);return!a||!1!==l.initial&&l.initial!==l.animate||e.manuallyAnimateOnMount||(m=!1),a=!1,m?t(o):Promise.resolve()}return{animateChanges:r,setActive:function(t,a){var n;if(s[t].isActive===a)return Promise.resolve();null===(n=e.variantChildren)||void 0===n||n.forEach(e=>{var s;return null===(s=e.animationState)||void 0===s?void 0:s.setActive(t,a)}),s[t].isActive=a;const l=r(t);for(const e in s)s[e].protectedKeys={};return l},setAnimateFunction:function(s){t=s(e)},getState:()=>s,reset:()=>{s=ip()}}}function rp(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Zm(t,e)}function lp(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ip(){return{animate:lp(!0),whileInView:lp(),whileHover:lp(),whileTap:lp(),whileDrag:lp(),whileFocus:lp(),exit:lp()}}let op=0;const cp={animation:{Feature:class extends th{constructor(e){super(e),e.animationState||(e.animationState=np(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();md(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends th{constructor(){super(...arguments),this.id=op++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},dp={x:!1,y:!1};function up(){return dp.x||dp.y}function hp(e){return[e("x"),e("y")]}function mp(e){return e.max-e.min}function pp(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=a,e.originPoint=Vd(t.min,t.max,e.origin),e.scale=mp(s)/mp(t),e.translate=Vd(s.min,s.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function fp(e,t,s,a){pp(e.x,t.x,s.x,a?a.originX:void 0),pp(e.y,t.y,s.y,a?a.originY:void 0)}function xp(e,t,s){e.min=s.min+t.min,e.max=e.min+mp(t)}function vp(e,t,s){e.min=t.min-s.min,e.max=e.min+mp(t)}function gp(e,t,s){vp(e.x,t.x,s.x),vp(e.y,t.y,s.y)}const yp=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const jp=new Set(["INPUT","SELECT","TEXTAREA"]);function bp(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,s,a),()=>e.removeEventListener(t,s)}const wp=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Np(e){return{point:{x:e.pageX,y:e.pageY}}}function _p(e,t,s,a){return bp(e,t,(e=>t=>wp(t)&&e(t,Np(t)))(s),a)}const kp=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Sp=(e,t)=>Math.abs(e-t);const Cp=new Set(["auto","scroll"]);class Ep{constructor(e,t){let{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:n=!1,distanceThreshold:r=3,element:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Pp(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,s=function(e,t){const s=Sp(e.x,t.x),a=Sp(e.y,t.y);return Math.sqrt(s**2+a**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!s)return;const{point:a}=e,{timestamp:n}=Fc;this.history.push(u(u({},a),{},{timestamp:n}));const{onStart:r,onMove:l}=this.handlers;t||(r&&r(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Tp(t,this.transformPagePoint),Oc.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:s,onSessionEnd:a,resumeAnimation:n}=this.handlers;if(!this.dragSnapToOrigin&&this.startEvent||n&&n(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=Pp("pointercancel"===e.type?this.lastMoveEventInfo:Tp(t,this.transformPagePoint),this.history);this.startEvent&&s&&s(e,r),a&&a(e,r)},!wp(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=a||window;const i=Tp(Np(e),this.transformPagePoint),{point:o}=i,{timestamp:c}=Fc;this.history=[u(u({},o),{},{timestamp:c})];const{onSessionStart:d}=t;d&&d(e,Pp(i,this.history)),this.removeListeners=mh(_p(this.contextWindow,"pointermove",this.handlePointerMove),_p(this.contextWindow,"pointerup",this.handlePointerUp),_p(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let t=e.parentElement;for(;t;){const e=getComputedStyle(t);(Cp.has(e.overflowX)||Cp.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const s=e===window,a=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},n=a.x-t.x,r=a.y-t.y;0===n&&0===r||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=n,this.lastMoveEventInfo.point.y+=r):this.history.length>0&&(this.history[0].x-=n,this.history[0].y-=r),this.scrollPositions.set(e,a),Oc.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Mc(this.updatePoint)}}function Tp(e,t){return t?{point:t(e.point)}:e}function Ap(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pp(e,t){let{point:s}=e;return{point:s,delta:Ap(s,Rp(t)),offset:Ap(s,Dp(t)),velocity:Op(t,.1)}}function Dp(e){return e[0]}function Rp(e){return e[e.length-1]}function Op(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,a=null;const n=Rp(e);for(;s>=0&&(a=e[s],!(n.timestamp-a.timestamp>dh(t)));)s--;if(!a)return{x:0,y:0};const r=uh(n.timestamp-a.timestamp);if(0===r)return{x:0,y:0};const l={x:(n.x-a.x)/r,y:(n.y-a.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Mp(e,t,s){return{min:void 0!==t?e.min+t:void 0,max:void 0!==s?e.max+s-(e.max-e.min):void 0}}function Fp(e,t){let s=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,a]=[a,s]),{min:s,max:a}}const Lp=.35;function Ip(e,t,s){return{min:zp(e,t),max:zp(e,s)}}function zp(e,t){return"number"===typeof e?e:e[t]||0}const Bp=new WeakMap;class Up{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:a}=this.visualElement;if(a&&!1===a.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new Ep(e,{onSessionStart:e=>{t?(this.stopAnimation(),this.snapToCursor(Np(e).point)):this.pauseAnimation()},onStart:(e,t)=>{this.stopAnimation();const{drag:s,dragPropagation:a,onDragStart:n}=this.getProps();if(s&&!a&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(r=s)||"y"===r?dp[r]?null:(dp[r]=!0,()=>{dp[r]=!1}):dp.x||dp.y?null:(dp.x=dp.y=!0,()=>{dp.x=dp.y=!1}),!this.openDragLock))return;var r;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hp(e=>{let t=this.getAxisMotionValue(e).get()||0;if(So.test(t)){const{projection:s}=this.visualElement;if(s&&s.layout){const a=s.layout.layoutBox[e];if(a){t=mp(a)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),n&&Oc.update(()=>n(e,t),!1,!0),oh(this.visualElement,"transform");const{animationState:l}=this.visualElement;l&&l.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:s,dragDirectionLock:a,onDirectionLock:n,onDrag:r}=this.getProps();if(!s&&!this.openDragLock)return;const{offset:l}=t;if(a&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=null;Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x");return s}(l),void(null!==this.currentDirection&&n&&n(this.currentDirection));this.updateAxis("x",t.point,l),this.updateAxis("y",t.point,l),this.visualElement.render(),r&&Oc.update(()=>r(e,t),!1,!0)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>hp(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,distanceThreshold:s,contextWindow:kp(this.visualElement),element:this.visualElement.current})}stop(e,t){const s=e||this.latestPointerEvent,a=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!a||!s)return;const{velocity:r}=a;this.startAnimation(r);const{onDragEnd:l}=this.getProps();l&&Oc.postRender(()=>l(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,s){const{drag:a}=this.getProps();if(!s||!Vp(e,a,this.currentDirection))return;const n=this.getAxisMotionValue(e);let r=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(r=function(e,t,s){let{min:a,max:n}=t;return void 0!==a&&e<a?e=s?Vd(a,e,s.min):Math.max(e,a):void 0!==n&&e>n&&(e=s?Vd(n,e,s.max):Math.min(e,n)),e}(r,this.constraints[e],this.elastic[e])),n.set(r)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,n=this.constraints;t&&Ku(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!a)&&function(e,t){let{top:s,left:a,bottom:n,right:r}=t;return{x:Mp(e.x,a,r),y:Mp(e.y,s,n)}}(a.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lp;return!1===e?e=0:!0===e&&(e=Lp),{x:Ip(e,"left","right"),y:Ip(e,"top","bottom")}}(s),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&hp(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const s={};return void 0!==t.min&&(s.min=t.min-e.min),void 0!==t.max&&(s.max=t.max-e.min),s}(a.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ku(e))return!1;const s=e.current;rc(null!==s,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const n=function(e,t,s){const a=du(e,s),{scroll:n}=t;return n&&(iu(a.x,n.offset.x),iu(a.y,n.offset.y)),a}(s,a.root,this.visualElement.getTransformPagePoint());let r=function(e,t){return{x:Fp(e.x,t.x),y:Fp(e.y,t.y)}}(a.layout.layoutBox,n);if(t){const e=t(function(e){let{x:t,y:s}=e;return{top:s.min,right:t.max,bottom:s.max,left:t.min}}(r));this.hasMutatedConstraints=!!e,e&&(r=$d(e))}return r}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:a,dragTransition:n,dragSnapToOrigin:r,onDragTransitionEnd:l}=this.getProps(),i=this.constraints||{},o=hp(l=>{if(!Vp(l,t,this.currentDirection))return;let o=i&&i[l]||{};r&&(o={min:0,max:0});const c=a?200:1e6,d=a?40:1e7,h=u(u({type:"inertia",velocity:s?e[l]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},n),o);return this.startAxisValueAnimation(l,h)});return Promise.all(o).then(l)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return oh(this.visualElement,e),s.start(qm(e,s,0,t,this.visualElement,!1))}stopAnimation(){hp(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hp(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),s=this.visualElement.getProps(),a=s[t];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){hp(t=>{const{drag:s}=this.getProps();if(!Vp(t,s,this.currentDirection))return;const{projection:a}=this.visualElement,n=this.getAxisMotionValue(t);if(a&&a.layout){const{min:s,max:r}=a.layout.layoutBox[t],l=n.get()||0;n.set(e[t]-Vd(s,r,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Ku(t)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};hp(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const s=t.get();a[e]=function(e,t){let s=.5;const a=mp(e),n=mp(t);return n>a?s=lm(t.min,t.max-a,e.min):a>n&&(s=lm(e.min,e.max-n,t.min)),ho(0,1,s)}({min:s,max:s},this.constraints[e])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),hp(t=>{if(!Vp(t,e,null))return;const s=this.getAxisMotionValue(t),{min:n,max:r}=this.constraints[t];s.set(Vd(n,r,a[t]))})}addListeners(){if(!this.visualElement.current)return;Bp.set(this.visualElement,this);const e=this.visualElement.current,t=_p(e,"pointerdown",t=>{const{drag:s,dragListener:a=!0}=this.getProps(),n=t.target,r=n!==e&&function(e){return jp.has(e.tagName)||!0===e.isContentEditable}(n);s&&a&&!r&&this.start(t)}),s=()=>{const{dragConstraints:e}=this.getProps();Ku(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,n=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Oc.read(s);const r=bp(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s}=e;this.isDragging&&s&&(hp(e=>{const s=this.getAxisMotionValue(e);s&&(this.originPoint[e]+=t[e].translate,s.set(s.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),t(),n(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:n=!1,dragElastic:r=Lp,dragMomentum:l=!0}=e;return u(u({},e),{},{drag:t,dragDirectionLock:s,dragPropagation:a,dragConstraints:n,dragElastic:r,dragMomentum:l})}}function Vp(e,t,s){return(!0===t||t===e)&&(null===s||s===e)}const Hp=e=>(t,s)=>{e&&Oc.update(()=>e(t,s),!1,!0)};const Wp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qp(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,a.useContext)(Ru);if(null===t)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=t,l=(0,a.useId)();(0,a.useEffect)(()=>{if(e)return r(l)},[e]);const i=(0,a.useCallback)(()=>e&&n&&n(l),[l,n,e]);return!s&&n?[!1,i]:[!0]}let Yp=!1;class Gp extends a.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:a}=this.props,{projection:n}=e;n&&(t.group&&t.group.add(n),s&&s.register&&a&&s.register(n),Yp&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions(u(u({},n.options),{},{layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()}))),Wp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:a,isPresent:n}=this.props,{projection:r}=s;return r?(r.isPresent=n,e.layoutDependency!==t&&r.setOptions(u(u({},r.options),{},{layoutDependency:t})),Yp=!0,a||e.layoutDependency!==t||void 0===t||e.isPresent!==n?r.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?r.promote():r.relegate()||Oc.postRender(()=>{const e=r.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zc.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:a}=e;Yp=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Kp(e){const[t,s]=qp(),n=(0,a.useContext)(fu);return(0,ds.jsx)(Gp,u(u({},e),{},{layoutGroup:n,switchLayoutGroup:(0,a.useContext)(Gu),isPresent:t,safeToRemove:s}))}function $p(e,t){const s=ad.now(),a=n=>{let{timestamp:r}=n;const l=r-s;l>=t&&(Mc(a),e(l-t))};return Oc.setup(a,!0),()=>Mc(a)}function Xp(e){return"object"===typeof e&&null!==e}function Jp(e){return Xp(e)&&"ownerSVGElement"in e}const Qp=["TopLeft","TopRight","BottomLeft","BottomRight"],Zp=Qp.length,ef=e=>"string"===typeof e?parseFloat(e):e,tf=e=>"number"===typeof e||Co.test(e);function sf(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const af=rf(0,.5,tm),nf=rf(.5,.95,Tc);function rf(e,t,s){return a=>a<e?0:a>t?1:s(lm(e,t,a))}function lf(e,t){e.min=t.min,e.max=t.max}function of(e,t){lf(e.x,t.x),lf(e.y,t.y)}function cf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function df(e,t,s,a,n){return e=tu(e-=t,1/s,a),void 0!==n&&(e=tu(e,1/n,a)),e}function uf(e,t,s,a,n){let[r,l,i]=s;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;So.test(t)&&(t=parseFloat(t),t=Vd(l.min,l.max,t/100)-l.min);if("number"!==typeof t)return;let i=Vd(r.min,r.max,a);e===r&&(i-=t),e.min=df(e.min,t,s,i,n),e.max=df(e.max,t,s,i,n)}(e,t[r],t[l],t[i],t.scale,a,n)}const hf=["x","scaleX","originX"],mf=["y","scaleY","originY"];function pf(e,t,s,a){uf(e.x,t,hf,s?s.x:void 0,a?a.x:void 0),uf(e.y,t,mf,s?s.y:void 0,a?a.y:void 0)}function ff(e){return 0===e.translate&&1===e.scale}function xf(e){return ff(e.x)&&ff(e.y)}function vf(e,t){return e.min===t.min&&e.max===t.max}function gf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function yf(e,t){return gf(e.x,t.x)&&gf(e.y,t.y)}function jf(e){return mp(e.x)/mp(e.y)}function bf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class wf{constructor(){this.members=[]}add(e){Xc(this.members,e),e.scheduleRender()}remove(e){if(Jc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let s;for(let a=t;a>=0;a--){const e=this.members[a];if(!1!==e.isPresent){s=e;break}}return!!s&&(this.promote(s),!0)}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const a=s.options.layoutDependency,n=e.options.layoutDependency;void 0!==a&&void 0!==n&&a===n||(e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:r}=e.options;!1===r&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Nf=(e,t)=>e.depth-t.depth;class _f{constructor(){this.children=[],this.isDirty=!1}add(e){Xc(this.children,e),this.isDirty=!0}remove(e){Jc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Nf),this.isDirty=!1,this.children.forEach(e)}}const kf={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Sf=["","X","Y","Z"];let Cf=0;function Ef(e,t,s,a){const{latestValues:n}=t;n[e]&&(s[e]=n[e],t.setStaticValue(e,0),a&&(a[e]=0))}function Tf(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=ch(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:t,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Oc,!(t||a))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&Tf(a)}function Af(e){let{attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:n,resetTransform:r}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===s||void 0===s?void 0:s();this.id=Cf++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Dc.value&&(kf.nodes=kf.calculatedTargetDeltas=kf.calculatedProjections=0),this.nodes.forEach(Rf),this.nodes.forEach(Bf),this.nodes.forEach(Uf),this.nodes.forEach(Of),Dc.addProjectionMetrics&&Dc.addProjectionMetrics(kf)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new _f)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Qc),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];t&&t.notify(...a)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var s;this.isSVG=Jp(e)&&!(Jp(s=e)&&"svg"===s.tagName),this.instance=e;const{layoutId:a,layout:n,visualElement:r}=this.options;if(r&&!r.current&&r.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||a)&&(this.isLayoutDirty=!0),t){let s,a=0;const n=()=>this.root.updateBlockedByResize=!1;Oc.read(()=>{a=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==a&&(a=e,this.root.updateBlockedByResize=!0,s&&s(),s=$p(n,250),Wp.hasAnimatedSinceResize&&(Wp.hasAnimatedSinceResize=!1,this.nodes.forEach(zf)))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&r&&(a||n)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s,hasRelativeLayoutChanged:a,layout:n}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const l=this.options.transition||r.getDefaultTransition()||Gf,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=r.getProps(),c=!this.targetLayout||!yf(this.targetLayout,n),d=!s&&a;if(this.options.layoutRoot||this.resumeFrom||d||s&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=u(u({},ah(l,"layout")),{},{onPlay:i,onComplete:o});(r.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else s||zf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vf),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Tf(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let n=0;n<this.path.length;n++){const e=this.path[n];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:s}=this.options;if(void 0===t&&!s)return;const a=this.getTransformTemplate();this.prevTransformTemplateValue=a?a(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Ff);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Lf);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(If),this.nodes.forEach(Pf),this.nodes.forEach(Df)):this.nodes.forEach(Lf),this.clearAllSnapshots();const e=ad.now();Fc.delta=ho(0,1e3/60,e-Fc.timestamp),Fc.timestamp=e,Fc.isProcessing=!0,Lc.update.process(Fc),Lc.preRender.process(Fc),Lc.render.process(Fc),Fc.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mf),this.sharedNodes.forEach(Hf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Oc.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Oc.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||mp(this.snapshot.measuredBox.x)||mp(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++){this.path[s].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!xf(this.projectionDelta),s=this.getTransformTemplate(),a=s?s(this.latestValues,""):void 0,n=a!==this.prevTransformTemplateValue;e&&this.instance&&(t||Qd(this.latestValues)||n)&&(r(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let s=this.removeElementScroll(t);var a;return e&&(s=this.removeTransform(s)),Xf((a=s).x),Xf(a.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const s=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Qf))){const{scroll:e}=this.root;e&&(iu(s.x,e.offset.x),iu(s.y,e.offset.y))}return s}removeElementScroll(e){var t;const s={x:{min:0,max:0},y:{min:0,max:0}};if(of(s,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return s;for(let a=0;a<this.path.length;a++){const t=this.path[a],{scroll:n,options:r}=t;t!==this.root&&n&&r.layoutScroll&&(n.wasRoot&&of(s,e),iu(s.x,n.offset.x),iu(s.y,n.offset.y))}return s}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s={x:{min:0,max:0},y:{min:0,max:0}};of(s,e);for(let a=0;a<this.path.length;a++){const e=this.path[a];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&cu(s,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Qd(e.latestValues)&&cu(s,e.latestValues)}return Qd(this.latestValues)&&cu(s,this.latestValues),s}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};of(t,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];if(!e.instance)continue;if(!Qd(e.latestValues))continue;Jd(e.latestValues)&&e.updateSnapshot();const a=Xo();of(a,e.measurePageBox()),pf(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,a)}return Qd(this.latestValues)&&pf(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=u(u(u({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fc.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const a=Boolean(this.resumingFrom)||this!==s;if(!(t||a&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:n,layoutId:r}=this.options;if(!this.layout||!n&&!r)return;this.resolvedRelativeTargetAt=Fc.timestamp;const l=this.getClosestProjectingParent();var i,o,c;(l&&this.linkedParentVersion!==l.layoutVersion&&!l.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(l&&l.layout?this.createRelativeTarget(l,this.layout.layoutBox,l.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,c=this.relativeParent.target,xp(i.x,o.x,c.x),xp(i.y,o.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):of(this.target,this.layout.layoutBox),nu(this.target,this.targetDelta)):of(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,l&&Boolean(l.resumingFrom)===Boolean(this.resumingFrom)&&!l.options.layoutScroll&&l.target&&1!==this.animationProgress?this.createRelativeTarget(l,this.target,l.target):this.relativeParent=this.relativeTarget=void 0),Dc.value&&kf.calculatedTargetDeltas++)}getClosestProjectingParent(){if(this.parent&&!Jd(this.parent.latestValues)&&!Zd(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,s){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},gp(this.relativeTargetOrigin,t,s),of(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),s=Boolean(this.resumingFrom)||this!==t;let a=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(a=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===Fc.timestamp&&(a=!1),a)return;const{layout:n,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!n&&!r)return;of(this.layoutCorrected,this.layout.layoutBox);const l=this.treeScale.x,i=this.treeScale.y;!function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=s.length;if(!n)return;let r,l;t.x=t.y=1;for(let i=0;i<n;i++){r=s[i],l=r.projectionDelta;const{visualElement:n}=r.options;n&&n.props.style&&"contents"===n.props.style.display||(a&&r.options.layoutScroll&&r.scroll&&r!==r.root&&cu(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,nu(e,l)),a&&Qd(r.latestValues)&&cu(e,r.latestValues))}t.x<lu&&t.x>ru&&(t.x=1),t.y<lu&&t.y>ru&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,s),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=t;o?(this.projectionDelta&&this.prevProjectionDelta?(cf(this.prevProjectionDelta.x,this.projectionDelta.x),cf(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),fp(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===l&&this.treeScale.y===i&&bf(this.projectionDelta.x,this.prevProjectionDelta.x)&&bf(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o)),Dc.value&&kf.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.snapshot,a=s?s.latestValues:{},n=u({},this.latestValues),r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const l={x:{min:0,max:0},y:{min:0,max:0}},i=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),o=this.getStack(),c=!o||o.members.length<=1,d=Boolean(i&&!c&&!0===this.options.crossfade&&!this.path.some(Yf));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const s=t/1e3;var o,u,m,p;Wf(r.x,e.x,s),Wf(r.y,e.y,s),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gp(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),o=this.relativeTarget,u=this.relativeTargetOrigin,m=l,p=s,qf(o.x,u.x,m.x,p),qf(o.y,u.y,m.y,p),h&&function(e,t){return vf(e.x,t.x)&&vf(e.y,t.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),of(h,this.relativeTarget)),i&&(this.animationValues=n,function(e,t,s,a,n,r){var l,i;if(n)e.opacity=Vd(0,null!==(l=s.opacity)&&void 0!==l?l:1,af(a)),e.opacityExit=Vd(null!==(i=t.opacity)&&void 0!==i?i:1,0,nf(a));else if(r){var o,c;e.opacity=Vd(null!==(o=t.opacity)&&void 0!==o?o:1,null!==(c=s.opacity)&&void 0!==c?c:1,a)}for(let d=0;d<Zp;d++){const n="border".concat(Qp[d],"Radius");let r=sf(t,n),l=sf(s,n);void 0===r&&void 0===l||(r||(r=0),l||(l=0),0===r||0===l||tf(r)===tf(l)?(e[n]=Math.max(Vd(ef(r),ef(l),a),0),(So.test(l)||So.test(r))&&(e[n]+="%")):e[n]=l)}(t.rotate||s.rotate)&&(e.rotate=Vd(t.rotate||0,s.rotate||0,a))}(n,a,this.latestValues,s,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,s;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(s=this.resumingFrom)||void 0===s||null===(s=s.currentAnimation)||void 0===s||s.stop(),this.pendingAnimation&&(Mc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Oc.update(()=>{Wp.hasAnimatedSinceResize=!0,ph.layout++,this.motionValue||(this.motionValue=id(0)),this.currentAnimation=function(e,t,s){const a=Jo(e)?e:id(e);return a.start(qm("",a,t,s)),a.animation}(this.motionValue,[0,1e3],u(u({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{ph.layout--},onComplete:()=>{ph.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:s,layout:a,latestValues:n}=e;if(t&&s&&a){if(this!==e&&this.layout&&a&&Jf(this.options.animationType,this.layout.layoutBox,a.layoutBox)){s=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=mp(this.layout.layoutBox.x);s.x.min=e.target.x.min,s.x.max=s.x.min+t;const a=mp(this.layout.layoutBox.y);s.y.min=e.target.y.min,s.y.max=s.y.min+a}of(t,s),cu(t,n),fp(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new wf);this.sharedNodes.get(e).add(t);const s=t.options.initialPromotionConfig;t.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this.getStack();a&&a.promote(this,s),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:s}=e;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(t=!0),!t)return;const a={};s.z&&Ef("z",e,a,this.animationValues);for(let n=0;n<Sf.length;n++)Ef("rotate".concat(Sf[n]),e,a,this.animationValues),Ef("skew".concat(Sf[n]),e,a,this.animationValues);e.render();for(const n in a)e.setStaticValue(n,a[n]),this.animationValues&&(this.animationValues[n]=a[n]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Du(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=s?s(this.latestValues,""):"none");const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Du(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Qd(this.latestValues)&&(e.transform=s?s({},""):"none",this.hasProjected=!1));e.visibility="";const n=a.animationValues||a.latestValues;this.applyTransformsToTarget();let r=function(e,t,s){let a="";const n=e.x.translate/t.x,r=e.y.translate/t.y,l=(null===s||void 0===s?void 0:s.z)||0;if((n||r||l)&&(a="translate3d(".concat(n,"px, ").concat(r,"px, ").concat(l,"px) ")),1===t.x&&1===t.y||(a+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),s){const{transformPerspective:e,rotate:t,rotateX:n,rotateY:r,skewX:l,skewY:i}=s;e&&(a="perspective(".concat(e,"px) ").concat(a)),t&&(a+="rotate(".concat(t,"deg) ")),n&&(a+="rotateX(".concat(n,"deg) ")),r&&(a+="rotateY(".concat(r,"deg) ")),l&&(a+="skewX(".concat(l,"deg) ")),i&&(a+="skewY(".concat(i,"deg) "))}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(a+="scale(".concat(i,", ").concat(o,")")),a||"none"}(this.projectionDeltaWithTransform,this.treeScale,n);s&&(r=s(n,r)),e.transform=r;const{x:l,y:i}=this.projectionDelta;var o,c;(e.transformOrigin="".concat(100*l.origin,"% ").concat(100*i.origin,"% 0"),a.animationValues)?e.opacity=a===this?null!==(o=null!==(c=n.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==o?o:1:this.preserveOpacity?this.latestValues.opacity:n.opacityExit:e.opacity=a===this?void 0!==n.opacity?n.opacity:"":void 0!==n.opacityExit?n.opacityExit:0;for(const d in Wd){if(void 0===n[d])continue;const{correct:t,applyTo:s,isCSSVariable:l}=Wd[d],i="none"===r?n[d]:t(n[d],a);if(s){const t=s.length;for(let a=0;a<t;a++)e[s[a]]=i}else l?this.options.visualElement.renderState.vars[d]=i:e[d]=i}this.options.layoutId&&(e.pointerEvents=a===this?Du(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Ff),this.root.sharedNodes.clear()}}}function Pf(e){e.updateLayout()}function Df(e){var t;const s=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:a}=e.layout,{animationType:n}=e.options,r=s.source!==e.layout.source;"size"===n?hp(e=>{const a=r?s.measuredBox[e]:s.layoutBox[e],n=mp(a);a.min=t[e].min,a.max=a.min+n}):Jf(n,s.layoutBox,t)&&hp(a=>{const n=r?s.measuredBox[a]:s.layoutBox[a],l=mp(t[a]);n.max=n.min+l,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[a].max=e.relativeTarget[a].min+l)});const l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};fp(l,t,s.layoutBox);const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?fp(i,e.applyTransform(a,!0),s.measuredBox):fp(i,t,s.layoutBox);const o=!xf(l);let c=!1;if(!e.resumeFrom){const a=e.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:n,layout:r}=a;if(n&&r){const l={x:{min:0,max:0},y:{min:0,max:0}};gp(l,s.layoutBox,n.layoutBox);const i={x:{min:0,max:0},y:{min:0,max:0}};gp(i,t,r.layoutBox),yf(l,i)||(c=!0),a.options.layoutRoot&&(e.relativeTarget=i,e.relativeTargetOrigin=l,e.relativeParent=a)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:s,delta:i,layoutDelta:l,hasLayoutChanged:o,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Rf(e){Dc.value&&kf.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Of(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Mf(e){e.clearSnapshot()}function Ff(e){e.clearMeasurements()}function Lf(e){e.isLayoutDirty=!1}function If(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Bf(e){e.resolveTargetDelta()}function Uf(e){e.calcProjection()}function Vf(e){e.resetSkewAndRotation()}function Hf(e){e.removeLeadSnapshot()}function Wf(e,t,s){e.translate=Vd(t.translate,0,s),e.scale=Vd(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function qf(e,t,s,a){e.min=Vd(t.min,s.min,a),e.max=Vd(t.max,s.max,a)}function Yf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Gf={duration:.45,ease:[.4,0,.1,1]},Kf=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),$f=Kf("applewebkit/")&&!Kf("chrome/")?Math.round:Tc;function Xf(e){e.min=$f(e.min),e.max=$f(e.max)}function Jf(e,t,s){return"position"===e||"preserve-aspect"===e&&(a=jf(t),n=jf(s),r=.2,!(Math.abs(a-n)<=r));var a,n,r}function Qf(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Zf=Af({attachResizeListener:(e,t)=>bp(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||(null===(e=document.body)||void 0===e?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||(null===(t=document.body)||void 0===t?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ex={current:void 0},tx=Af({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ex.current){const e=new Zf({});e.mount(window),e.setOptions({layoutScroll:!0}),ex.current=e}return ex.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),sx={pan:{Feature:class extends th{constructor(){super(...arguments),this.removePointerDownListener=Tc}onPointerDown(e){this.session=new Ep(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kp(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Hp(e),onStart:Hp(t),onMove:Hp(s),onEnd:(e,t)=>{delete this.session,a&&Oc.postRender(()=>a(e,t))}}}mount(){this.removePointerDownListener=_p(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends th{constructor(e){super(e),this.removeGroupControls=Tc,this.removeListeners=Tc,this.controls=new Up(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tc}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},ProjectionNode:tx,MeasureLayout:Kp}};function ax(e,t){const s=function(e,t,s){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"===typeof e){var a;let n=document;t&&(n=t.current);const r=null!==(a=null===s||void 0===s?void 0:s[e])&&void 0!==a?a:n.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(e=>null!=e)}(e),a=new AbortController;return[s,u(u({passive:!0},t),{},{signal:a.signal}),()=>a.abort()]}function nx(e){return!("touch"===e.pointerType||up())}function rx(e,t,s){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover","Start"===s);const n=a["onHover"+s];n&&Oc.postRender(()=>n(t,Np(t)))}function lx(e){return Xp(e)&&"offsetHeight"in e}const ix=(e,t)=>!!t&&(e===t||ix(e,t.parentElement)),ox=new WeakSet;function cx(e){return t=>{"Enter"===t.key&&e(t)}}function dx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ux(e){return wp(e)&&!up()}function hx(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[a,n,r]=ax(e,s),l=e=>{const a=e.currentTarget;if(!ux(e))return;ox.add(a);const r=t(a,e),l=(e,t)=>{window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",o),ox.has(a)&&ox.delete(a),ux(e)&&"function"===typeof r&&r(e,{success:t})},i=e=>{l(e,a===window||a===document||s.useGlobalTarget||ix(a,e.target))},o=e=>{l(e,!1)};window.addEventListener("pointerup",i,n),window.addEventListener("pointercancel",o,n)};return a.forEach(e=>{var t;(s.useGlobalTarget?window:e).addEventListener("pointerdown",l,n),lx(e)&&(e.addEventListener("focus",e=>((e,t)=>{const s=e.currentTarget;if(!s)return;const a=cx(()=>{if(ox.has(s))return;dx(s,"down");const e=cx(()=>{dx(s,"up")});s.addEventListener("keyup",e,t),s.addEventListener("blur",()=>dx(s,"cancel"),t)});s.addEventListener("keydown",a,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),t)})(e,n)),t=e,yp.has(t.tagName)||!0===t.isContentEditable||e.hasAttribute("tabindex")||(e.tabIndex=0))}),r}function mx(e,t,s){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap","Start"===s);const n=a["onTap"+("End"===s?"":s)];n&&Oc.postRender(()=>n(t,Np(t)))}const px=["root"],fx=new WeakMap,xx=new WeakMap,vx=e=>{const t=fx.get(e.target);t&&t(e)},gx=e=>{e.forEach(vx)};function yx(e,t,s){const a=function(e){let{root:t}=e,s=l(e,px);const a=t||document;xx.has(a)||xx.set(a,{});const n=xx.get(a),r=JSON.stringify(s);return n[r]||(n[r]=new IntersectionObserver(gx,u({root:t},s))),n[r]}(t);return fx.set(e,s),a.observe(e),()=>{fx.delete(e),a.unobserve(e)}}const jx={some:0,all:1};const bx={inView:{Feature:class extends th{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:a="some",once:n}=e,r={root:t?t.current:void 0,rootMargin:s,threshold:"number"===typeof a?a:jx[a]};return yx(this.node.current,r,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,n&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:s,onViewportLeave:a}=this.node.getProps(),r=t?s:a;r&&r(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,s=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==s[e]}(e,t));s&&this.startObserver()}unmount(){}}},tap:{Feature:class extends th{mount(){const{current:e}=this.node;e&&(this.unmount=hx(e,(e,t)=>(mx(this.node,t,"Start"),(e,t)=>{let{success:s}=t;return mx(this.node,e,s?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends th{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(sI){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mh(bp(this.node.current,"focus",()=>this.onFocus()),bp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends th{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[a,n,r]=ax(e,s),l=e=>{if(!nx(e))return;const{target:s}=e,a=t(s,e);if("function"!==typeof a||!s)return;const r=e=>{nx(e)&&(a(e),s.removeEventListener("pointerleave",r))};s.addEventListener("pointerleave",r,n)};return a.forEach(e=>{e.addEventListener("pointerenter",l,n)}),r}(e,(e,t)=>(rx(this.node,t,"Start"),e=>rx(this.node,e,"End"))))}unmount(){}}}},wx={layout:{ProjectionNode:tx,MeasureLayout:Kp}},Nx=eh(u(u(u(u({},cp),bx),sx),wx),pu),_x=Yi("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),kx=Yi("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Sx=Yi("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Cx=Yi("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),Ex="https://shardahrms.com/api",Tx=()=>{const[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[r,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),{login:f,loginWithGoogle:x}=Cs(),v=Se();return(0,ds.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",style:{background:"hsl(222.2 84% 4.9%)"},children:[(0,ds.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,ds.jsx)(Nx.div,{className:"absolute w-[600px] h-[600px] rounded-full",style:{background:"radial-gradient(circle, hsl(243 75% 49% / 0.12) 0%, transparent 70%)",top:"-10%",left:"-10%"},animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),(0,ds.jsx)(Nx.div,{className:"absolute w-[500px] h-[500px] rounded-full",style:{background:"radial-gradient(circle, hsl(243 75% 49% / 0.08) 0%, transparent 70%)",bottom:"-15%",right:"-10%"},animate:{scale:[1,1.15,1],opacity:[.3,.6,.3]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:1}}),(0,ds.jsx)(Nx.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-[60%] w-[500px]",initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.3},children:(0,ds.jsxs)("svg",{viewBox:"0 0 500 120",fill:"none",children:[(0,ds.jsx)("defs",{children:(0,ds.jsxs)("linearGradient",{id:"loginArc",x1:"0",y1:"60",x2:"500",y2:"60",children:[(0,ds.jsx)("stop",{offset:"0%",stopColor:"hsl(243 75% 49%)",stopOpacity:"0"}),(0,ds.jsx)("stop",{offset:"30%",stopColor:"hsl(243 75% 49%)",stopOpacity:"0.3"}),(0,ds.jsx)("stop",{offset:"50%",stopColor:"hsl(243 75% 49%)",stopOpacity:"0.5"}),(0,ds.jsx)("stop",{offset:"70%",stopColor:"hsl(243 75% 49%)",stopOpacity:"0.3"}),(0,ds.jsx)("stop",{offset:"100%",stopColor:"hsl(243 75% 49%)",stopOpacity:"0"})]})}),(0,ds.jsx)(Nx.path,{d:"M0 110 Q125 10, 250 10 Q375 10, 500 110",stroke:"url(#loginArc)",strokeWidth:"1.5",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.2,delay:.5}})]})}),(0,ds.jsx)("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E\")",backgroundRepeat:"repeat",backgroundSize:"256px"}})]}),(0,ds.jsx)(Nx.div,{initial:{opacity:0,y:30,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{duration:.6,ease:[.4,0,.2,1]},className:"relative w-full max-w-md z-10",children:(0,ds.jsxs)(Pn,{className:"shadow-2xl border-white/[0.08] bg-white/[0.04] backdrop-blur-xl",style:{background:"hsl(222.2 60% 8% / 0.8)",borderColor:"hsl(0 0% 100% / 0.08)"},children:[(0,ds.jsxs)(Dn,{className:"text-center pb-4",children:[(0,ds.jsx)(Nx.div,{initial:{scale:.5,opacity:0,rotate:-10},animate:{scale:1,opacity:1,rotate:0},transition:{delay:.3,type:"spring",stiffness:200,damping:15},children:(0,ds.jsxs)("div",{className:"relative h-16 w-16 mx-auto mb-5",children:[(0,ds.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-primary/20 blur-xl"}),(0,ds.jsx)("div",{className:"relative h-16 w-16 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center border border-white/10",children:(0,ds.jsx)("img",{src:"/logo.png",alt:"Sharda HR",className:"h-10 w-10 object-contain"})})]})}),(0,ds.jsxs)(Nx.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,ds.jsx)(Rn,{className:"text-2xl font-bold text-white",children:"Welcome Back"}),(0,ds.jsx)(On,{className:"text-slate-400 mt-1",children:"Sign in to your Sharda HR account"})]})]}),(0,ds.jsxs)(Mn,{className:"space-y-6",children:[(0,ds.jsx)(Nx.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full h-11 gap-3 border-white/10 bg-white/[0.04] text-white hover:bg-white/[0.08] hover:border-white/20 transition-all duration-300",onClick:()=>{x()},"data-testid":"google-login-btn",children:[(0,ds.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,ds.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,ds.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,ds.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,ds.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(Wn,{className:"bg-white/10"}),(0,ds.jsx)("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-3 text-xs text-slate-500",style:{background:"hsl(222.2 60% 8%)"},children:"or continue with email"})]}),(0,ds.jsxs)(Nx.form,{onSubmit:async t=>{if(t.preventDefault(),e&&s){l(!0);try{const t=await fetch("".concat(Ex,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:s})}),a=await t.json();if(!t.ok)throw new Error((null===a||void 0===a?void 0:a.detail)||"Login failed");if(null!==a&&void 0!==a&&a.must_change_password)return null!==a&&void 0!==a&&a.access_token&&localStorage.setItem("access_token",a.access_token),o(!0),void ts.info("Please change your password to continue");await f(e,s),ts.success("Welcome back!"),v("/dashboard")}catch(a){ts.error(a.message||"Login failed")}finally{l(!1)}}else ts.error("Please fill in all fields")},className:"space-y-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"email",className:"text-slate-300 text-xs font-semibold uppercase tracking-wider",children:"Email"}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(_x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,ds.jsx)(vn,{id:"email",type:"email",placeholder:"you@company.com",value:e,onChange:e=>t(e.target.value),className:"pl-10 bg-white/[0.05] border-white/10 text-white placeholder:text-slate-500 focus:border-primary/50 focus:bg-white/[0.08] h-11","data-testid":"email-input"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"password",className:"text-slate-300 text-xs font-semibold uppercase tracking-wider",children:"Password"}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(kx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,ds.jsx)(vn,{id:"password",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:s,onChange:e=>n(e.target.value),className:"pl-10 bg-white/[0.05] border-white/10 text-white placeholder:text-slate-500 focus:border-primary/50 focus:bg-white/[0.08] h-11","data-testid":"password-input"})]})]}),(0,ds.jsx)(fn,{type:"submit",className:"w-full h-11 font-semibold rounded-lg shadow-lg shadow-primary/25 hover:shadow-primary/40 transition-all duration-300",disabled:r,"data-testid":"login-submit-btn",children:r?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing in..."]}):"Sign In"})]}),(0,ds.jsx)("p",{className:"text-center text-sm text-slate-500",children:"Contact HR administrator if you need access"})]})]})}),(0,ds.jsx)(eo,{open:i,onOpenChange:()=>{},children:(0,ds.jsxs)(no,{className:"sm:max-w-md",onPointerDownOutside:e=>e.preventDefault(),children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(Cx,{className:"w-5 h-5 text-primary"}),"Change Your Password"]}),(0,ds.jsx)(oo,{children:"For security reasons, you must change your password before continuing."})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"new-password",children:"New Password"}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(kx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{id:"new-password",type:"password",placeholder:"Enter new password",value:c,onChange:e=>d(e.target.value),className:"pl-10","data-testid":"new-password-input"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(kx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:u,onChange:e=>h(e.target.value),className:"pl-10","data-testid":"confirm-password-input"})]})]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Password must be at least 6 characters long."})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{onClick:async()=>{if(c&&u)if(c===u)if(c.length<6)ts.error("Password must be at least 6 characters");else{p(!0);try{const t=await fetch("".concat(Ex,"/auth/change-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},credentials:"include",body:JSON.stringify({new_password:c})});if(t.ok)ts.success("Password changed successfully!"),o(!1),await f(e,c),v("/dashboard");else{const e=await t.json();ts.error(e.detail||"Failed to change password")}}catch(t){ts.error("Failed to change password")}finally{p(!1)}}else ts.error("Passwords do not match");else ts.error("Please fill in all fields")},disabled:m,className:"w-full","data-testid":"change-password-btn",children:m?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing Password..."]}):"Change Password & Continue"})})]})})]})},Ax=()=>{const e=Se(),{processGoogleSession:t,setUser:s}=Cs(),n=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(n.current)return;n.current=!0;(async()=>{const s=window.location.hash,a=new URLSearchParams(s.replace("#","")).get("session_id");if(!a)return ts.error("Authentication failed: No session ID"),void e("/login");try{const s=await t(a);window.history.replaceState(null,"",window.location.pathname),ts.success("Welcome, ".concat(s.name,"!")),e("/dashboard",{state:{user:s},replace:!0})}catch(n){console.error("Auth callback error:",n),ts.error(n.message||"Authentication failed"),e("/login")}})()},[]),(0,ds.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,ds.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,ds.jsx)("p",{className:"text-slate-600 font-medium",children:"Completing sign in..."})]})})},Px=["scope","children"];function Dx(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=t[0];if(1===t.length)return n;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const s=e.reduce((e,s)=>{let{useScope:a,scopeName:n}=s;const r=a(t)["__scope".concat(n)];return u(u({},e),r)},{});return a.useMemo(()=>({["__scope".concat(n.scopeName)]:s}),[s])}};return r.scopeName=n.scopeName,r}const Rx=["asChild"];var Ox=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=zs("Primitive.".concat(t)),n=a.forwardRef((e,a)=>{const{asChild:n}=e,r=l(e,Rx),i=n?s:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ds.jsx)(i,u(u({},r),{},{ref:a}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});var Mx=s(461);function Fx(){return()=>{}}const Lx=["__scopeAvatar"],Ix=["__scopeAvatar","src","onLoadingStatusChange"],zx=["__scopeAvatar","delayMs"];var Bx="Avatar",[Ux,Vx]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];const n=()=>{const t=s.map(e=>a.createContext(e));return function(s){const n=(null===s||void 0===s?void 0:s[e])||t;return a.useMemo(()=>({["__scope".concat(e)]:u(u({},s),{},{[e]:n})}),[s,n])}};return n.scopeName=e,[function(t,n){const r=a.createContext(n);r.displayName=t+"Context";const i=s.length;s=[...s,n];const o=t=>{var s;const{scope:n,children:o}=t,c=l(t,Px),d=(null===n||void 0===n||null===(s=n[e])||void 0===s?void 0:s[i])||r,u=a.useMemo(()=>c,Object.values(c));return(0,ds.jsx)(d.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(s,l){var o;const c=(null===l||void 0===l||null===(o=l[e])||void 0===o?void 0:o[i])||r,d=a.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error("`".concat(s,"` must be used within `").concat(t,"`"))}]},Dx(n,...t)]}(Bx),[Hx,Wx]=Ux(Bx),qx=a.forwardRef((e,t)=>{const{__scopeAvatar:s}=e,n=l(e,Lx),[r,i]=a.useState("idle");return(0,ds.jsx)(Hx,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:(0,ds.jsx)(Ox.span,u(u({},n),{},{ref:t}))})});qx.displayName=Bx;var Yx="AvatarImage",Gx=a.forwardRef((e,t)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:r=()=>{}}=e,i=l(e,Ix),o=Wx(Yx,s),c=function(e,t){let{referrerPolicy:s,crossOrigin:n}=t;const r=(0,Mx.useSyncExternalStore)(Fx,()=>!0,()=>!1),l=a.useRef(null),i=r?(l.current||(l.current=new window.Image),l.current):null,[o,c]=a.useState(()=>Xx(i,e));return Xn(()=>{c(Xx(i,e))},[i,e]),Xn(()=>{const e=e=>()=>{c(e)};if(!i)return;const t=e("loaded"),a=e("error");return i.addEventListener("load",t),i.addEventListener("error",a),s&&(i.referrerPolicy=s),"string"===typeof n&&(i.crossOrigin=n),()=>{i.removeEventListener("load",t),i.removeEventListener("error",a)}},[i,n,s]),o}(n,i),d=ur(e=>{r(e),o.onImageLoadingStatusChange(e)});return Xn(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?(0,ds.jsx)(Ox.img,u(u({},i),{},{ref:t,src:n})):null});Gx.displayName=Yx;var Kx="AvatarFallback",$x=a.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:n}=e,r=l(e,zx),i=Wx(Kx,s),[o,c]=a.useState(void 0===n);return a.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(e)}},[n]),o&&"loaded"!==i.imageLoadingStatus?(0,ds.jsx)(Ox.span,u(u({},r),{},{ref:t})):null});function Xx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}$x.displayName=Kx;var Jx=qx,Qx=Gx,Zx=$x;const ev=["className"],tv=["className"],sv=["className"],av=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,ev);return(0,ds.jsx)(Jx,u({ref:t,className:hn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s)},a))});av.displayName=Jx.displayName;const nv=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,tv);return(0,ds.jsx)(Qx,u({ref:t,className:hn("aspect-square h-full w-full",s)},a))});nv.displayName=Qx.displayName;const rv=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,sv);return(0,ds.jsx)(Zx,u({ref:t,className:hn("flex h-full w-full items-center justify-center rounded-full bg-muted",s)},a))});function lv(e,t,s){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,s)}function iv(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function ov(e,t){return e.get(iv(e,t))}function cv(e,t,s){return e.set(iv(e,t),s),s}rv.displayName=Zx.displayName;const dv=["children"],uv=["children"];function hv(e){const t=mv(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,dv),i=a.Children.toArray(n),o=i.find(xv);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function mv(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,uv);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var pv=Symbol("radix.slottable");var fv;function xv(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===pv}const vv=["scope","children"];function gv(e){const t=e+"CollectionProvider",[s,n]=Kn(t),[r,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:s}=e,n=a.useRef(null),l=a.useRef(new Map).current;return(0,ds.jsx)(r,{scope:t,itemMap:l,collectionRef:n,children:s})};o.displayName=t;const c=e+"CollectionSlot",d=hv(c),h=a.forwardRef((e,t)=>{const{scope:s,children:a}=e,n=Rs(t,i(c,s).collectionRef);return(0,ds.jsx)(d,{ref:n,children:a})});h.displayName=c;const m=e+"CollectionItemSlot",p="data-radix-collection-item",f=hv(m),x=a.forwardRef((e,t)=>{const{scope:s,children:n}=e,r=l(e,vv),o=a.useRef(null),c=Rs(t,o),d=i(m,s);return a.useEffect(()=>(d.itemMap.set(o,u({ref:o},r)),()=>{d.itemMap.delete(o)})),(0,ds.jsx)(f,u(u({},{[p]:""}),{},{ref:c,children:n}))});return x.displayName=m,[{Provider:o,Slot:h,ItemSlot:x},function(t){const s=i(e+"CollectionConsumer",t),n=a.useCallback(()=>{const e=s.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),a=Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current));return a},[s.collectionRef,s.itemMap]);return n},n]}var yv=new WeakMap;fv=new WeakMap,Map;function jv(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const s=function(e,t){const s=e.length,a=bv(t),n=a>=0?a:s+a;return n<0||n>=s?-1:n}(e,t);return-1===s?void 0:e[s]}function bv(e){return e!==e||0===e?0:Math.trunc(e)}var wv=a.createContext(void 0);function Nv(e){const t=a.useContext(wv);return e||t||"ltr"}const _v=["top","right","bottom","left"],kv=Math.min,Sv=Math.max,Cv=Math.round,Ev=Math.floor,Tv=e=>({x:e,y:e}),Av={left:"right",right:"left",bottom:"top",top:"bottom"},Pv={start:"end",end:"start"};function Dv(e,t,s){return Sv(e,kv(t,s))}function Rv(e,t){return"function"===typeof e?e(t):e}function Ov(e){return e.split("-")[0]}function Mv(e){return e.split("-")[1]}function Fv(e){return"x"===e?"y":"x"}function Lv(e){return"y"===e?"height":"width"}const Iv=new Set(["top","bottom"]);function zv(e){return Iv.has(Ov(e))?"y":"x"}function Bv(e){return Fv(zv(e))}function Uv(e){return e.replace(/start|end/g,e=>Pv[e])}const Vv=["left","right"],Hv=["right","left"],Wv=["top","bottom"],qv=["bottom","top"];function Yv(e,t,s,a){const n=Mv(e);let r=function(e,t,s){switch(e){case"top":case"bottom":return s?t?Hv:Vv:t?Vv:Hv;case"left":case"right":return t?Wv:qv;default:return[]}}(Ov(e),"start"===s,a);return n&&(r=r.map(e=>e+"-"+n),t&&(r=r.concat(r.map(Uv)))),r}function Gv(e){return e.replace(/left|right|bottom|top/g,e=>Av[e])}function Kv(e){return"number"!==typeof e?function(e){return u({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $v(e){const{x:t,y:s,width:a,height:n}=e;return{width:a,height:n,top:s,left:t,right:t+a,bottom:s+n,x:t,y:s}}const Xv=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Jv=["strategy"],Qv=["mainAxis","crossAxis","limiter"],Zv=["apply"];function eg(e,t,s){let{reference:a,floating:n}=e;const r=zv(t),l=Bv(t),i=Lv(l),o=Ov(t),c="y"===r,d=a.x+a.width/2-n.width/2,u=a.y+a.height/2-n.height/2,h=a[i]/2-n[i]/2;let m;switch(o){case"top":m={x:d,y:a.y-n.height};break;case"bottom":m={x:d,y:a.y+a.height};break;case"right":m={x:a.x+a.width,y:u};break;case"left":m={x:a.x-n.width,y:u};break;default:m={x:a.x,y:a.y}}switch(Mv(t)){case"start":m[l]-=h*(s&&c?-1:1);break;case"end":m[l]+=h*(s&&c?-1:1)}return m}async function tg(e,t){var s;void 0===t&&(t={});const{x:a,y:n,platform:r,rects:l,elements:i,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=Rv(t,e),p=Kv(m),f=i[h?"floating"===u?"reference":"floating":u],x=$v(await r.getClippingRect({element:null==(s=await(null==r.isElement?void 0:r.isElement(f)))||s?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:o})),v="floating"===u?{x:a,y:n,width:l.floating.width,height:l.floating.height}:l.reference,g=await(null==r.getOffsetParent?void 0:r.getOffsetParent(i.floating)),y=await(null==r.isElement?void 0:r.isElement(g))&&await(null==r.getScale?void 0:r.getScale(g))||{x:1,y:1},j=$v(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:v,offsetParent:g,strategy:o}):v);return{top:(x.top-j.top+p.top)/y.y,bottom:(j.bottom-x.bottom+p.bottom)/y.y,left:(x.left-j.left+p.left)/y.x,right:(j.right-x.right+p.right)/y.x}}function sg(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ag(e){return _v.some(t=>e[t]>=0)}const ng=new Set(["left","top"]);function rg(){return"undefined"!==typeof window}function lg(e){return cg(e)?(e.nodeName||"").toLowerCase():"#document"}function ig(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function og(e){var t;return null==(t=(cg(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function cg(e){return!!rg()&&(e instanceof Node||e instanceof ig(e).Node)}function dg(e){return!!rg()&&(e instanceof Element||e instanceof ig(e).Element)}function ug(e){return!!rg()&&(e instanceof HTMLElement||e instanceof ig(e).HTMLElement)}function hg(e){return!(!rg()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ig(e).ShadowRoot)}const mg=new Set(["inline","contents"]);function pg(e){const{overflow:t,overflowX:s,overflowY:a,display:n}=Sg(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+s)&&!mg.has(n)}const fg=new Set(["table","td","th"]);function xg(e){return fg.has(lg(e))}const vg=[":popover-open",":modal"];function gg(e){return vg.some(t=>{try{return e.matches(t)}catch(s){return!1}})}const yg=["transform","translate","scale","rotate","perspective"],jg=["transform","translate","scale","rotate","perspective","filter"],bg=["paint","layout","strict","content"];function wg(e){const t=Ng(),s=dg(e)?Sg(e):e;return yg.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||jg.some(e=>(s.willChange||"").includes(e))||bg.some(e=>(s.contain||"").includes(e))}function Ng(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const _g=new Set(["html","body","#document"]);function kg(e){return _g.has(lg(e))}function Sg(e){return ig(e).getComputedStyle(e)}function Cg(e){return dg(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Eg(e){if("html"===lg(e))return e;const t=e.assignedSlot||e.parentNode||hg(e)&&e.host||og(e);return hg(t)?t.host:t}function Tg(e){const t=Eg(e);return kg(t)?e.ownerDocument?e.ownerDocument.body:e.body:ug(t)&&pg(t)?t:Tg(t)}function Ag(e,t,s){var a;void 0===t&&(t=[]),void 0===s&&(s=!0);const n=Tg(e),r=n===(null==(a=e.ownerDocument)?void 0:a.body),l=ig(n);if(r){const e=Pg(l);return t.concat(l,l.visualViewport||[],pg(n)?n:[],e&&s?Ag(e):[])}return t.concat(n,Ag(n,[],s))}function Pg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Dg(e){const t=Sg(e);let s=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const n=ug(e),r=n?e.offsetWidth:s,l=n?e.offsetHeight:a,i=Cv(s)!==r||Cv(a)!==l;return i&&(s=r,a=l),{width:s,height:a,$:i}}function Rg(e){return dg(e)?e:e.contextElement}function Og(e){const t=Rg(e);if(!ug(t))return Tv(1);const s=t.getBoundingClientRect(),{width:a,height:n,$:r}=Dg(t);let l=(r?Cv(s.width):s.width)/a,i=(r?Cv(s.height):s.height)/n;return l&&Number.isFinite(l)||(l=1),i&&Number.isFinite(i)||(i=1),{x:l,y:i}}const Mg=Tv(0);function Fg(e){const t=ig(e);return Ng()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Mg}function Lg(e,t,s,a){void 0===t&&(t=!1),void 0===s&&(s=!1);const n=e.getBoundingClientRect(),r=Rg(e);let l=Tv(1);t&&(a?dg(a)&&(l=Og(a)):l=Og(e));const i=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==ig(e))&&t}(r,s,a)?Fg(r):Tv(0);let o=(n.left+i.x)/l.x,c=(n.top+i.y)/l.y,d=n.width/l.x,u=n.height/l.y;if(r){const e=ig(r),t=a&&dg(a)?ig(a):a;let s=e,n=Pg(s);for(;n&&a&&t!==s;){const e=Og(n),t=n.getBoundingClientRect(),a=Sg(n),r=t.left+(n.clientLeft+parseFloat(a.paddingLeft))*e.x,l=t.top+(n.clientTop+parseFloat(a.paddingTop))*e.y;o*=e.x,c*=e.y,d*=e.x,u*=e.y,o+=r,c+=l,s=ig(n),n=Pg(s)}}return $v({width:d,height:u,x:o,y:c})}function Ig(e,t){const s=Cg(e).scrollLeft;return t?t.left+s:Lg(og(e)).left+s}function zg(e,t){const s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-Ig(e,s),y:s.top+t.scrollTop}}const Bg=new Set(["absolute","fixed"]);function Ug(e,t,s){let a;if("viewport"===t)a=function(e,t){const s=ig(e),a=og(e),n=s.visualViewport;let r=a.clientWidth,l=a.clientHeight,i=0,o=0;if(n){r=n.width,l=n.height;const e=Ng();(!e||e&&"fixed"===t)&&(i=n.offsetLeft,o=n.offsetTop)}const c=Ig(a);if(c<=0){const e=a.ownerDocument,t=e.body,s=getComputedStyle(t),n="CSS1Compat"===e.compatMode&&parseFloat(s.marginLeft)+parseFloat(s.marginRight)||0,l=Math.abs(a.clientWidth-t.clientWidth-n);l<=25&&(r-=l)}else c<=25&&(r+=c);return{width:r,height:l,x:i,y:o}}(e,s);else if("document"===t)a=function(e){const t=og(e),s=Cg(e),a=e.ownerDocument.body,n=Sv(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),r=Sv(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let l=-s.scrollLeft+Ig(e);const i=-s.scrollTop;return"rtl"===Sg(a).direction&&(l+=Sv(t.clientWidth,a.clientWidth)-n),{width:n,height:r,x:l,y:i}}(og(e));else if(dg(t))a=function(e,t){const s=Lg(e,!0,"fixed"===t),a=s.top+e.clientTop,n=s.left+e.clientLeft,r=ug(e)?Og(e):Tv(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:n*r.x,y:a*r.y}}(t,s);else{const s=Fg(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return $v(a)}function Vg(e,t){const s=Eg(e);return!(s===t||!dg(s)||kg(s))&&("fixed"===Sg(s).position||Vg(s,t))}function Hg(e,t,s){const a=ug(t),n=og(t),r="fixed"===s,l=Lg(e,!0,r,t);let i={scrollLeft:0,scrollTop:0};const o=Tv(0);function c(){o.x=Ig(n)}if(a||!a&&!r)if(("body"!==lg(t)||pg(n))&&(i=Cg(t)),a){const e=Lg(t,!0,r,t);o.x=e.x+t.clientLeft,o.y=e.y+t.clientTop}else n&&c();r&&!a&&n&&c();const d=!n||a||r?Tv(0):zg(n,i);return{x:l.left+i.scrollLeft-o.x-d.x,y:l.top+i.scrollTop-o.y-d.y,width:l.width,height:l.height}}function Wg(e){return"static"===Sg(e).position}function qg(e,t){if(!ug(e)||"fixed"===Sg(e).position)return null;if(t)return t(e);let s=e.offsetParent;return og(e)===s&&(s=s.ownerDocument.body),s}function Yg(e,t){const s=ig(e);if(gg(e))return s;if(!ug(e)){let t=Eg(e);for(;t&&!kg(t);){if(dg(t)&&!Wg(t))return t;t=Eg(t)}return s}let a=qg(e,t);for(;a&&xg(a)&&Wg(a);)a=qg(a,t);return a&&kg(a)&&Wg(a)&&!wg(a)?s:a||function(e){let t=Eg(e);for(;ug(t)&&!kg(t);){if(wg(t))return t;if(gg(t))return null;t=Eg(t)}return null}(e)||s}const Gg={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:a,strategy:n}=e;const r="fixed"===n,l=og(a),i=!!t&&gg(t.floating);if(a===l||i&&r)return s;let o={scrollLeft:0,scrollTop:0},c=Tv(1);const d=Tv(0),u=ug(a);if((u||!u&&!r)&&(("body"!==lg(a)||pg(l))&&(o=Cg(a)),ug(a))){const e=Lg(a);c=Og(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}const h=!l||u||r?Tv(0):zg(l,o);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-o.scrollLeft*c.x+d.x+h.x,y:s.y*c.y-o.scrollTop*c.y+d.y+h.y}},getDocumentElement:og,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:a,strategy:n}=e;const r=[..."clippingAncestors"===s?gg(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let a=Ag(e,[],!1).filter(e=>dg(e)&&"body"!==lg(e)),n=null;const r="fixed"===Sg(e).position;let l=r?Eg(e):e;for(;dg(l)&&!kg(l);){const t=Sg(l),s=wg(l);s||"fixed"!==t.position||(n=null),(r?!s&&!n:!s&&"static"===t.position&&n&&Bg.has(n.position)||pg(l)&&!s&&Vg(e,l))?a=a.filter(e=>e!==l):n=t,l=Eg(l)}return t.set(e,a),a}(t,this._c):[].concat(s),a],l=r[0],i=r.reduce((e,s)=>{const a=Ug(t,s,n);return e.top=Sv(a.top,e.top),e.right=kv(a.right,e.right),e.bottom=kv(a.bottom,e.bottom),e.left=Sv(a.left,e.left),e},Ug(t,l,n));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:Yg,getElementRects:async function(e){const t=this.getOffsetParent||Yg,s=this.getDimensions,a=await s(e.floating);return{reference:Hg(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=Dg(e);return{width:t,height:s}},getScale:Og,isElement:dg,isRTL:function(e){return"rtl"===Sg(e).direction}};function Kg(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $g(e,t,s,a){void 0===a&&(a={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:l="function"===typeof ResizeObserver,layoutShift:i="function"===typeof IntersectionObserver,animationFrame:o=!1}=a,c=Rg(e),d=n||r?[...c?Ag(c):[],...Ag(t)]:[];d.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),r&&e.addEventListener("resize",s)});const h=c&&i?function(e,t){let s,a=null;const n=og(e);function r(){var e;clearTimeout(s),null==(e=a)||e.disconnect(),a=null}return function l(i,o){void 0===i&&(i=!1),void 0===o&&(o=1),r();const c=e.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=c;if(i||t(),!m||!p)return;const f={rootMargin:-Ev(h)+"px "+-Ev(n.clientWidth-(d+m))+"px "+-Ev(n.clientHeight-(h+p))+"px "+-Ev(d)+"px",threshold:Sv(0,kv(1,o))||1};let x=!0;function v(t){const a=t[0].intersectionRatio;if(a!==o){if(!x)return l();a?l(!1,a):s=setTimeout(()=>{l(!1,1e-7)},1e3)}1!==a||Kg(c,e.getBoundingClientRect())||l(),x=!1}try{a=new IntersectionObserver(v,u(u({},f),{},{root:n.ownerDocument}))}catch(g){a=new IntersectionObserver(v,f)}a.observe(e)}(!0),r}(c,s):null;let m,p=-1,f=null;l&&(f=new ResizeObserver(e=>{let[a]=e;a&&a.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),s()}),c&&!o&&f.observe(c),f.observe(t));let x=o?Lg(e):null;return o&&function t(){const a=Lg(e);x&&!Kg(x,a)&&s();x=a,m=requestAnimationFrame(t)}(),s(),()=>{var e;d.forEach(e=>{n&&e.removeEventListener("scroll",s),r&&e.removeEventListener("resize",s)}),null==h||h(),null==(e=f)||e.disconnect(),f=null,o&&cancelAnimationFrame(m)}}const Xg=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,a;const{x:n,y:r,placement:l,middlewareData:i}=t,o=await async function(e,t){const{placement:s,platform:a,elements:n}=e,r=await(null==a.isRTL?void 0:a.isRTL(n.floating)),l=Ov(s),i=Mv(s),o="y"===zv(s),c=ng.has(l)?-1:1,d=r&&o?-1:1,u=Rv(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&"number"===typeof p&&(m="end"===i?-1*p:p),o?{x:m*d,y:h*c}:{x:h*c,y:m*d}}(t,e);return l===(null==(s=i.offset)?void 0:s.placement)&&null!=(a=i.arrow)&&a.alignmentOffset?{}:{x:n+o.x,y:r+o.y,data:u(u({},o),{},{placement:l})}}}},Jg=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:a,placement:n}=t,r=Rv(e,t),{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}}}=r,d=l(r,Qv),h={x:s,y:a},m=await tg(t,d),p=zv(Ov(n)),f=Fv(p);let x=h[f],v=h[p];if(i){const e="y"===f?"bottom":"right";x=Dv(x+m["y"===f?"top":"left"],x,x-m[e])}if(o){const e="y"===p?"bottom":"right";v=Dv(v+m["y"===p?"top":"left"],v,v-m[e])}const g=c.fn(u(u({},t),{},{[f]:x,[p]:v}));return u(u({},g),{},{data:{x:g.x-s,y:g.y-a,enabled:{[f]:i,[p]:o}}})}}},Qg=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,a;const{placement:n,middlewareData:r,rects:i,initialPlacement:o,platform:c,elements:d}=t,u=Rv(e,t),{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0}=u,g=l(u,Xv);if(null!=(s=r.arrow)&&s.alignmentOffset)return{};const y=Ov(n),j=zv(o),b=Ov(o)===o,w=await(null==c.isRTL?void 0:c.isRTL(d.floating)),N=p||(b||!v?[Gv(o)]:function(e){const t=Gv(e);return[Uv(e),t,Uv(t)]}(o)),_="none"!==x;!p&&_&&N.push(...Yv(o,v,x,w));const k=[o,...N],S=await tg(t,g),C=[];let E=(null==(a=r.flip)?void 0:a.overflows)||[];if(h&&C.push(S[y]),m){const e=function(e,t,s){void 0===s&&(s=!1);const a=Mv(e),n=Bv(e),r=Lv(n);let l="x"===n?a===(s?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[r]>t.floating[r]&&(l=Gv(l)),[l,Gv(l)]}(n,i,w);C.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:n,overflows:C}],!C.every(e=>e<=0)){var T,A;const e=((null==(T=r.flip)?void 0:T.index)||0)+1,t=k[e];if(t){if(!("alignment"===m&&j!==zv(t))||E.every(e=>zv(e.placement)!==j||e.overflows[0]>0))return{data:{index:e,overflows:E},reset:{placement:t}}}let s=null==(A=E.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!s)switch(f){case"bestFit":{var P;const e=null==(P=E.filter(e=>{if(_){const t=zv(e.placement);return t===j||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(s=e);break}case"initialPlacement":s=o}if(n!==s)return{reset:{placement:s}}}return{}}}},Zg=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,a;const{placement:n,rects:r,platform:i,elements:o}=t,c=Rv(e,t),{apply:d=()=>{}}=c,h=l(c,Zv),m=await tg(t,h),p=Ov(n),f=Mv(n),x="y"===zv(n),{width:v,height:g}=r.floating;let y,j;"top"===p||"bottom"===p?(y=p,j=f===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(j=p,y="end"===f?"top":"bottom");const b=g-m.top-m.bottom,w=v-m.left-m.right,N=kv(g-m[y],b),_=kv(v-m[j],w),k=!t.middlewareData.shift;let S=N,C=_;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(C=w),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(S=b),k&&!f){const e=Sv(m.left,0),t=Sv(m.right,0),s=Sv(m.top,0),a=Sv(m.bottom,0);x?C=v-2*(0!==e||0!==t?e+t:Sv(m.left,m.right)):S=g-2*(0!==s||0!==a?s+a:Sv(m.top,m.bottom))}await d(u(u({},t),{},{availableWidth:C,availableHeight:S}));const E=await i.getDimensions(o.floating);return v!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}},ey=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,a=Rv(e,t),{strategy:n="referenceHidden"}=a,r=l(a,Jv);switch(n){case"referenceHidden":{const e=sg(await tg(t,u(u({},r),{},{elementContext:"reference"})),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ag(e)}}}case"escaped":{const e=sg(await tg(t,u(u({},r),{},{altBoundary:!0})),s.floating);return{data:{escapedOffsets:e,escaped:ag(e)}}}default:return{}}}}},ty=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:a,placement:n,rects:r,platform:l,elements:i,middlewareData:o}=t,{element:c,padding:d=0}=Rv(e,t)||{};if(null==c)return{};const h=Kv(d),m={x:s,y:a},p=Bv(n),f=Lv(p),x=await l.getDimensions(c),v="y"===p,g=v?"top":"left",y=v?"bottom":"right",j=v?"clientHeight":"clientWidth",b=r.reference[f]+r.reference[p]-m[p]-r.floating[f],w=m[p]-r.reference[p],N=await(null==l.getOffsetParent?void 0:l.getOffsetParent(c));let _=N?N[j]:0;_&&await(null==l.isElement?void 0:l.isElement(N))||(_=i.floating[j]||r.floating[f]);const k=b/2-w/2,S=_/2-x[f]/2-1,C=kv(h[g],S),E=kv(h[y],S),T=C,A=_-x[f]-E,P=_/2-x[f]/2+k,D=Dv(T,P,A),R=!o.arrow&&null!=Mv(n)&&P!==D&&r.reference[f]/2-(P<T?C:E)-x[f]/2<0,O=R?P<T?P-T:P-A:0;return{[p]:m[p]+O,data:u({[p]:D,centerOffset:P-D-O},R&&{alignmentOffset:O}),reset:R}}}),sy=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:a,placement:n,rects:r,middlewareData:l}=t,{offset:i=0,mainAxis:o=!0,crossAxis:c=!0}=Rv(e,t),d={x:s,y:a},h=zv(n),m=Fv(h);let p=d[m],f=d[h];const x=Rv(i,t),v="number"===typeof x?{mainAxis:x,crossAxis:0}:u({mainAxis:0,crossAxis:0},x);if(o){const e="y"===m?"height":"width",t=r.reference[m]-r.floating[e]+v.mainAxis,s=r.reference[m]+r.reference[e]-v.mainAxis;p<t?p=t:p>s&&(p=s)}if(c){var g,y;const e="y"===m?"width":"height",t=ng.has(Ov(n)),s=r.reference[h]-r.floating[e]+(t&&(null==(g=l.offset)?void 0:g[h])||0)+(t?0:v.crossAxis),a=r.reference[h]+r.reference[e]+(t?0:(null==(y=l.offset)?void 0:y[h])||0)-(t?v.crossAxis:0);f<s?f=s:f>a&&(f=a)}return{[m]:p,[h]:f}}}},ay=(e,t,s)=>{const a=new Map,n=u({platform:Gg},s),r=u(u({},n.platform),{},{_c:a});return(async(e,t,s)=>{const{placement:a="bottom",strategy:n="absolute",middleware:r=[],platform:l}=s,i=r.filter(Boolean),o=await(null==l.isRTL?void 0:l.isRTL(t));let c=await l.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:h}=eg(c,a,o),m=a,p={},f=0;for(let x=0;x<i.length;x++){const{name:s,fn:r}=i[x],{x:v,y:g,data:y,reset:j}=await r({x:d,y:h,initialPlacement:a,placement:m,strategy:n,middlewareData:p,rects:c,platform:l,elements:{reference:e,floating:t}});d=null!=v?v:d,h=null!=g?g:h,p=u(u({},p),{},{[s]:u(u({},p[s]),y)}),j&&f<=50&&(f++,"object"===typeof j&&(j.placement&&(m=j.placement),j.rects&&(c=!0===j.rects?await l.getElementRects({reference:e,floating:t,strategy:n}):j.rects),({x:d,y:h}=eg(c,m,o))),x=-1)}return{x:d,y:h,placement:m,strategy:n,middlewareData:p}})(e,t,u(u({},n),{},{platform:r}))};var ny="undefined"!==typeof document?a.useLayoutEffect:function(){};function ry(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let s,a,n;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(a=s;0!==a--;)if(!ry(e[a],t[a]))return!1;return!0}if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(a=s;0!==a--;)if(!{}.hasOwnProperty.call(t,n[a]))return!1;for(a=s;0!==a--;){const s=n[a];if(("_owner"!==s||!e.$$typeof)&&!ry(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ly(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function iy(e,t){const s=ly(e);return Math.round(t*s)/s}function oy(e){const t=a.useRef(e);return ny(()=>{t.current=e}),t}const cy=(e,t)=>u(u({},Xg(e)),{},{options:[e,t]}),dy=(e,t)=>u(u({},Jg(e)),{},{options:[e,t]}),uy=(e,t)=>u(u({},sy(e)),{},{options:[e,t]}),hy=(e,t)=>u(u({},Qg(e)),{},{options:[e,t]}),my=(e,t)=>u(u({},Zg(e)),{},{options:[e,t]}),py=(e,t)=>u(u({},ey(e)),{},{options:[e,t]}),fy=(e,t)=>u(u({},(e=>({name:"arrow",options:e,fn(t){const{element:s,padding:a}="function"===typeof e?e(t):e;return s&&(n=s,{}.hasOwnProperty.call(n,"current"))?null!=s.current?ty({element:s.current,padding:a}).fn(t):{}:s?ty({element:s,padding:a}).fn(t):{};var n}}))(e)),{},{options:[e,t]}),xy=["children","width","height"];var vy=a.forwardRef((e,t)=>{const{children:s,width:a=10,height:n=5}=e,r=l(e,xy);return(0,ds.jsx)(cr.svg,u(u({},r),{},{ref:t,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:(0,ds.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});vy.displayName="Arrow";var gy=vy;function yy(e){const[t,s]=a.useState(void 0);return Xn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const a=t[0];let n,r;if("borderBoxSize"in a){const e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,r=t.blockSize}else n=e.offsetWidth,r=e.offsetHeight;s({width:n,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}const jy=["__scopePopper","virtualRef"],by=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],wy=["__scopePopper"];var Ny="Popper",[_y,ky]=Kn(Ny),[Sy,Cy]=_y(Ny),Ey=e=>{const{__scopePopper:t,children:s}=e,[n,r]=a.useState(null);return(0,ds.jsx)(Sy,{scope:t,anchor:n,onAnchorChange:r,children:s})};Ey.displayName=Ny;var Ty="PopperAnchor",Ay=a.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n}=e,r=l(e,jy),i=Cy(Ty,s),o=a.useRef(null),c=Rs(t,o),d=a.useRef(null);return a.useEffect(()=>{const e=d.current;d.current=(null===n||void 0===n?void 0:n.current)||o.current,e!==d.current&&i.onAnchorChange(d.current)}),n?null:(0,ds.jsx)(cr.div,u(u({},r),{},{ref:c}))});Ay.displayName=Ty;var Py="PopperContent",[Dy,Ry]=_y(Py),Oy=a.forwardRef((e,t)=>{var s,n,r,i,o,c,d,h;const{__scopePopper:m,side:p="bottom",sideOffset:f=0,align:x="center",alignOffset:v=0,arrowPadding:g=0,avoidCollisions:y=!0,collisionBoundary:j=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:N=!1,updatePositionStrategy:_="optimized",onPlaced:k}=e,S=l(e,by),C=Cy(Py,m),[E,T]=a.useState(null),A=Rs(t,e=>T(e)),[P,D]=a.useState(null),R=yy(P),O=null!==(s=null===R||void 0===R?void 0:R.width)&&void 0!==s?s:0,M=null!==(n=null===R||void 0===R?void 0:R.height)&&void 0!==n?n:0,F=p+("center"!==x?"-"+x:""),L="number"===typeof b?b:u({top:0,right:0,bottom:0,left:0},b),I=Array.isArray(j)?j:[j],z=I.length>0,B={padding:L,boundary:I.filter(Iy),altBoundary:z},{refs:U,floatingStyles:V,placement:H,isPositioned:W,middlewareData:q}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:r,elements:{reference:l,floating:i}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[h,m]=a.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=a.useState(n);ry(p,n)||f(n);const[x,v]=a.useState(null),[g,y]=a.useState(null),j=a.useCallback(e=>{e!==_.current&&(_.current=e,v(e))},[]),b=a.useCallback(e=>{e!==k.current&&(k.current=e,y(e))},[]),w=l||x,N=i||g,_=a.useRef(null),k=a.useRef(null),S=a.useRef(h),C=null!=c,E=oy(c),T=oy(r),A=oy(d),P=a.useCallback(()=>{if(!_.current||!k.current)return;const e={placement:t,strategy:s,middleware:p};T.current&&(e.platform=T.current),ay(_.current,k.current,e).then(e=>{const t=u(u({},e),{},{isPositioned:!1!==A.current});D.current&&!ry(S.current,t)&&(S.current=t,Vt.flushSync(()=>{m(t)}))})},[p,t,s,T,A]);ny(()=>{!1===d&&S.current.isPositioned&&(S.current.isPositioned=!1,m(e=>u(u({},e),{},{isPositioned:!1})))},[d]);const D=a.useRef(!1);ny(()=>(D.current=!0,()=>{D.current=!1}),[]),ny(()=>{if(w&&(_.current=w),N&&(k.current=N),w&&N){if(E.current)return E.current(w,N,P);P()}},[w,N,P,E,C]);const R=a.useMemo(()=>({reference:_,floating:k,setReference:j,setFloating:b}),[j,b]),O=a.useMemo(()=>({reference:w,floating:N}),[w,N]),M=a.useMemo(()=>{const e={position:s,left:0,top:0};if(!O.floating)return e;const t=iy(O.floating,h.x),a=iy(O.floating,h.y);return o?u(u({},e),{},{transform:"translate("+t+"px, "+a+"px)"},ly(O.floating)>=1.5&&{willChange:"transform"}):{position:s,left:t,top:a}},[s,o,O.floating,h.x,h.y]);return a.useMemo(()=>u(u({},h),{},{update:P,refs:R,elements:O,floatingStyles:M}),[h,P,R,O,M])}({strategy:"fixed",placement:F,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return $g(...t,{animationFrame:"always"===_})},elements:{reference:C.anchor},middleware:[cy({mainAxis:f+M,alignmentAxis:v}),y&&dy(u({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?uy():void 0},B)),y&&hy(u({},B)),my(u(u({},B),{},{apply:e=>{let{elements:t,rects:s,availableWidth:a,availableHeight:n}=e;const{width:r,height:l}=s.reference,i=t.floating.style;i.setProperty("--radix-popper-available-width","".concat(a,"px")),i.setProperty("--radix-popper-available-height","".concat(n,"px")),i.setProperty("--radix-popper-anchor-width","".concat(r,"px")),i.setProperty("--radix-popper-anchor-height","".concat(l,"px"))}})),P&&fy({element:P,padding:g}),zy({arrowWidth:O,arrowHeight:M}),N&&py(u({strategy:"referenceHidden"},B))]}),[Y,G]=By(H),K=ur(k);Xn(()=>{W&&(null===K||void 0===K||K())},[W,K]);const $=null===(r=q.arrow)||void 0===r?void 0:r.x,X=null===(i=q.arrow)||void 0===i?void 0:i.y,J=0!==(null===(o=q.arrow)||void 0===o?void 0:o.centerOffset),[Q,Z]=a.useState();return Xn(()=>{E&&Z(window.getComputedStyle(E).zIndex)},[E]),(0,ds.jsx)("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:u(u({},V),{},{transform:W?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[null===(c=q.transformOrigin)||void 0===c?void 0:c.x,null===(d=q.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(h=q.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:(0,ds.jsx)(Dy,{scope:m,placedSide:Y,onArrowChange:D,arrowX:$,arrowY:X,shouldHideArrow:J,children:(0,ds.jsx)(cr.div,u(u({"data-side":Y,"data-align":G},S),{},{ref:A,style:u(u({},S.style),{},{animation:W?void 0:"none"})}))})})});Oy.displayName=Py;var My="PopperArrow",Fy={top:"bottom",right:"left",bottom:"top",left:"right"},Ly=a.forwardRef(function(e,t){const{__scopePopper:s}=e,a=l(e,wy),n=Ry(My,s),r=Fy[n.placedSide];return(0,ds.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,ds.jsx)(gy,u(u({},a),{},{ref:t,style:u(u({},a.style),{},{display:"block"})}))})});function Iy(e){return null!==e}Ly.displayName=My;var zy=e=>({name:"transformOrigin",options:e,fn(t){var s,a,n,r,l;const{placement:i,rects:o,middlewareData:c}=t,d=0!==(null===(s=c.arrow)||void 0===s?void 0:s.centerOffset),u=d?0:e.arrowWidth,h=d?0:e.arrowHeight,[m,p]=By(i),f={start:"0%",center:"50%",end:"100%"}[p],x=(null!==(a=null===(n=c.arrow)||void 0===n?void 0:n.x)&&void 0!==a?a:0)+u/2,v=(null!==(r=null===(l=c.arrow)||void 0===l?void 0:l.y)&&void 0!==r?r:0)+h/2;let g="",y="";return"bottom"===m?(g=d?f:"".concat(x,"px"),y="".concat(-h,"px")):"top"===m?(g=d?f:"".concat(x,"px"),y="".concat(o.floating.height+h,"px")):"right"===m?(g="".concat(-h,"px"),y=d?f:"".concat(v,"px")):"left"===m&&(g="".concat(o.floating.width+h,"px"),y=d?f:"".concat(v,"px")),{data:{x:g,y:y}}}});function By(e){const[t,s="center"]=e.split("-");return[t,s]}var Uy=Ey,Vy=Ay,Hy=Oy,Wy=Ly;const qy=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],Yy=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var Gy="rovingFocusGroup.onEntryFocus",Ky={bubbles:!1,cancelable:!0},$y="RovingFocusGroup",[Xy,Jy,Qy]=gv($y),[Zy,ej]=Kn($y,[Qy]),[tj,sj]=Zy($y),aj=a.forwardRef((e,t)=>(0,ds.jsx)(Xy.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,ds.jsx)(Xy.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,ds.jsx)(nj,u(u({},e),{},{ref:t}))})}));aj.displayName=$y;var nj=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1}=e,p=l(e,qy),f=a.useRef(null),x=Rs(t,f),v=Nv(i),[g,y]=tr({prop:o,defaultProp:null!==c&&void 0!==c?c:null,onChange:d,caller:$y}),[j,b]=a.useState(!1),w=ur(h),N=Jy(s),_=a.useRef(!1),[k,S]=a.useState(0);return a.useEffect(()=>{const e=f.current;if(e)return e.addEventListener(Gy,w),()=>e.removeEventListener(Gy,w)},[w]),(0,ds.jsx)(tj,{scope:s,orientation:n,dir:v,loop:r,currentTabStopId:g,onItemFocus:a.useCallback(e=>y(e),[y]),onItemShiftTab:a.useCallback(()=>b(!0),[]),onFocusableItemAdd:a.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>S(e=>e-1),[]),children:(0,ds.jsx)(cr.div,u(u({tabIndex:j||0===k?-1:0,"data-orientation":n},p),{},{ref:x,style:u({outline:"none"},e.style),onMouseDown:qn(e.onMouseDown,()=>{_.current=!0}),onFocus:qn(e.onFocus,e=>{const t=!_.current;if(e.target===e.currentTarget&&t&&!j){const t=new CustomEvent(Gy,Ky);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=N().filter(e=>e.focusable);oj([e.find(e=>e.active),e.find(e=>e.id===g),...e].filter(Boolean).map(e=>e.ref.current),m)}}_.current=!1}),onBlur:qn(e.onBlur,()=>b(!1))}))})}),rj="RovingFocusGroupItem",lj=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:r=!1,tabStopId:i,children:o}=e,c=l(e,Yy),d=Zn(),h=i||d,m=sj(rj,s),p=m.currentTabStopId===h,f=Jy(s),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:g}=m;return a.useEffect(()=>{if(n)return x(),()=>v()},[n,x,v]),(0,ds.jsx)(Xy.ItemSlot,{scope:s,id:h,focusable:n,active:r,children:(0,ds.jsx)(cr.span,u(u({tabIndex:p?0:-1,"data-orientation":m.orientation},c),{},{ref:t,onMouseDown:qn(e.onMouseDown,e=>{n?m.onItemFocus(h):e.preventDefault()}),onFocus:qn(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:qn(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const a=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(a)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)?void 0:ij[a]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const r=n.indexOf(e.currentTarget);n=m.loop?(a=r+1,(s=n).map((e,t)=>s[(a+t)%s.length])):n.slice(r+1)}setTimeout(()=>oj(n))}var s,a}),children:"function"===typeof o?o({isCurrentTabStop:p,hasTabStop:null!=g}):o}))})});lj.displayName=rj;var ij={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=document.activeElement;for(const a of e){if(a===s)return;if(a.focus({preventScroll:t}),document.activeElement!==s)return}}var cj=aj,dj=lj;const uj=["children"],hj=["children"];function mj(e){const t=pj(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,uj),i=a.Children.toArray(n),o=i.find(xj);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function pj(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,hj);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var fj=Symbol("radix.slottable");function xj(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===fj}const vj=["__scopeMenu"],gj=["forceMount"],yj=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],jj=["__scopeMenu"],bj=["__scopeMenu"],wj=["disabled","onSelect"],Nj=["__scopeMenu","disabled","textValue"],_j=["checked","onCheckedChange"],kj=["value","onValueChange"],Sj=["value"],Cj=["__scopeMenu","forceMount"],Ej=["__scopeMenu"],Tj=["__scopeMenu"],Aj=["forceMount"];var Pj=["Enter"," "],Dj=["ArrowUp","PageDown","End"],Rj=["ArrowDown","PageUp","Home",...Dj],Oj={ltr:[...Pj,"ArrowRight"],rtl:[...Pj,"ArrowLeft"]},Mj={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fj="Menu",[Lj,Ij,zj]=gv(Fj),[Bj,Uj]=Kn(Fj,[zj,ky,ej]),Vj=ky(),Hj=ej(),[Wj,qj]=Bj(Fj),[Yj,Gj]=Bj(Fj),Kj=e=>{const{__scopeMenu:t,open:s=!1,children:n,dir:r,onOpenChange:l,modal:i=!0}=e,o=Vj(t),[c,d]=a.useState(null),h=a.useRef(!1),m=ur(l),p=Nv(r);return a.useEffect(()=>{const e=()=>{h.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>h.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,ds.jsx)(Uy,u(u({},o),{},{children:(0,ds.jsx)(Wj,{scope:t,open:s,onOpenChange:m,content:c,onContentChange:d,children:(0,ds.jsx)(Yj,{scope:t,onClose:a.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:i,children:n})})}))};Kj.displayName=Fj;var $j=a.forwardRef((e,t)=>{const{__scopeMenu:s}=e,a=l(e,vj),n=Vj(s);return(0,ds.jsx)(Vy,u(u(u({},n),a),{},{ref:t}))});$j.displayName="MenuAnchor";var Xj="MenuPortal",[Jj,Qj]=Bj(Xj,{forceMount:void 0}),Zj=e=>{const{__scopeMenu:t,forceMount:s,children:a,container:n}=e,r=qj(Xj,t);return(0,ds.jsx)(Jj,{scope:t,forceMount:s,children:(0,ds.jsx)(Mr,{present:s||r.open,children:(0,ds.jsx)(Or,{asChild:!0,container:n,children:a})})})};Zj.displayName=Xj;var eb="MenuContent",[tb,sb]=Bj(eb),ab=a.forwardRef((e,t)=>{const s=Qj(eb,e.__scopeMenu),{forceMount:a=s.forceMount}=e,n=l(e,gj),r=qj(eb,e.__scopeMenu),i=Gj(eb,e.__scopeMenu);return(0,ds.jsx)(Lj.Provider,{scope:e.__scopeMenu,children:(0,ds.jsx)(Mr,{present:a||r.open,children:(0,ds.jsx)(Lj.Slot,{scope:e.__scopeMenu,children:i.modal?(0,ds.jsx)(nb,u(u({},n),{},{ref:t})):(0,ds.jsx)(rb,u(u({},n),{},{ref:t}))})})})}),nb=a.forwardRef((e,t)=>{const s=qj(eb,e.__scopeMenu),n=a.useRef(null),r=Rs(t,n);return a.useEffect(()=>{const e=n.current;if(e)return Il(e)},[]),(0,ds.jsx)(ib,u(u({},e),{},{ref:r,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:qn(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)}))}),rb=a.forwardRef((e,t)=>{const s=qj(eb,e.__scopeMenu);return(0,ds.jsx)(ib,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)}))}),lb=mj("MenuContent.ScrollLock"),ib=a.forwardRef((e,t)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:x,disableOutsideScroll:v}=e,g=l(e,yj),y=qj(eb,s),j=Gj(eb,s),b=Vj(s),w=Hj(s),N=Ij(s),[_,k]=a.useState(null),S=a.useRef(null),C=Rs(t,S,y.onContentChange),E=a.useRef(0),T=a.useRef(""),A=a.useRef(0),P=a.useRef(null),D=a.useRef("right"),R=a.useRef(0),O=v?Al:a.Fragment,M=v?{as:lb,allowPinchZoom:!0}:void 0,F=e=>{var t,s;const a=T.current+e,n=N().filter(e=>!e.disabled),r=document.activeElement,l=null===(t=n.find(e=>e.ref.current===r))||void 0===t?void 0:t.textValue,i=function(e,t,s){const a=t.length>1&&Array.from(t).every(e=>e===t[0]),n=a?t[0]:t,r=s?e.indexOf(s):-1;let l=(i=e,o=Math.max(r,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(l=l.filter(e=>e!==s));const c=l.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return c!==s?c:void 0}(n.map(e=>e.textValue),a,l),o=null===(s=n.find(e=>e.textValue===i))||void 0===s?void 0:s.ref.current;!function e(t){T.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout(()=>e(""),1e3))}(a),o&&setTimeout(()=>o.focus())};a.useEffect(()=>()=>window.clearTimeout(E.current),[]),Ir();const L=a.useCallback(e=>{var t,s;return D.current===(null===(t=P.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return function(e,t){const{x:s,y:a}=e;let n=!1;for(let r=0,l=t.length-1;r<t.length;l=r++){const e=t[r],i=t[l],o=e.x,c=e.y,d=i.x,u=i.y;c>a!==u>a&&s<(d-o)*(a-c)/(u-c)+o&&(n=!n)}return n}(s,t)}(e,null===(s=P.current)||void 0===s?void 0:s.area)},[]);return(0,ds.jsx)(tb,{scope:s,searchRef:T,onItemEnter:a.useCallback(e=>{L(e)&&e.preventDefault()},[L]),onItemLeave:a.useCallback(e=>{var t;L(e)||(null===(t=S.current)||void 0===t||t.focus(),k(null))},[L]),onTriggerLeave:a.useCallback(e=>{L(e)&&e.preventDefault()},[L]),pointerGraceTimerRef:A,onPointerGraceIntentChange:a.useCallback(e=>{P.current=e},[]),children:(0,ds.jsx)(O,u(u({},M),{},{children:(0,ds.jsx)(Sr,{asChild:!0,trapped:r,onMountAutoFocus:qn(i,e=>{var t;e.preventDefault(),null===(t=S.current)||void 0===t||t.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,ds.jsx)(gr,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:x,children:(0,ds.jsx)(cj,u(u({asChild:!0},w),{},{dir:j.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:k,onEntryFocus:qn(d,e=>{j.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,ds.jsx)(Hy,u(u(u({role:"menu","aria-orientation":"vertical","data-state":Mb(y.open),"data-radix-menu-content":"",dir:j.dir},b),g),{},{ref:C,style:u({outline:"none"},g.style),onKeyDown:qn(g.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,s=e.ctrlKey||e.altKey||e.metaKey,a=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!s&&a&&F(e.key));const n=S.current;if(e.target!==n)return;if(!Rj.includes(e.key))return;e.preventDefault();const r=N().filter(e=>!e.disabled).map(e=>e.ref.current);Dj.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const s of e){if(s===t)return;if(s.focus(),document.activeElement!==t)return}}(r)}),onBlur:qn(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),T.current="")}),onPointerMove:qn(e.onPointerMove,Ib(e=>{const t=e.target,s=R.current!==e.clientX;if(e.currentTarget.contains(t)&&s){const t=e.clientX>R.current?"right":"left";D.current=t,R.current=e.clientX}}))}))}))})})}))})});ab.displayName=eb;var ob=a.forwardRef((e,t)=>{const{__scopeMenu:s}=e,a=l(e,jj);return(0,ds.jsx)(cr.div,u(u({role:"group"},a),{},{ref:t}))});ob.displayName="MenuGroup";var cb=a.forwardRef((e,t)=>{const{__scopeMenu:s}=e,a=l(e,bj);return(0,ds.jsx)(cr.div,u(u({},a),{},{ref:t}))});cb.displayName="MenuLabel";var db="MenuItem",ub="menu.itemSelect",hb=a.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:n}=e,r=l(e,wj),i=a.useRef(null),o=Gj(db,e.__scopeMenu),c=sb(db,e.__scopeMenu),d=Rs(t,i),h=a.useRef(!1);return(0,ds.jsx)(mb,u(u({},r),{},{ref:d,disabled:s,onClick:qn(e.onClick,()=>{const e=i.current;if(!s&&e){const t=new CustomEvent(ub,{bubbles:!0,cancelable:!0});e.addEventListener(ub,e=>null===n||void 0===n?void 0:n(e),{once:!0}),dr(e,t),t.defaultPrevented?h.current=!1:o.onClose()}}),onPointerDown:t=>{var s;null===(s=e.onPointerDown)||void 0===s||s.call(e,t),h.current=!0},onPointerUp:qn(e.onPointerUp,e=>{var t;h.current||null===(t=e.currentTarget)||void 0===t||t.click()}),onKeyDown:qn(e.onKeyDown,e=>{const t=""!==c.searchRef.current;s||t&&" "===e.key||Pj.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});hb.displayName=db;var mb=a.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:n=!1,textValue:r}=e,i=l(e,Nj),o=sb(db,s),c=Hj(s),d=a.useRef(null),h=Rs(t,d),[m,p]=a.useState(!1),[f,x]=a.useState("");return a.useEffect(()=>{const e=d.current;var t;e&&x((null!==(t=e.textContent)&&void 0!==t?t:"").trim())},[i.children]),(0,ds.jsx)(Lj.ItemSlot,{scope:s,disabled:n,textValue:null!==r&&void 0!==r?r:f,children:(0,ds.jsx)(dj,u(u({asChild:!0},c),{},{focusable:!n,children:(0,ds.jsx)(cr.div,u(u({role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},i),{},{ref:h,onPointerMove:qn(e.onPointerMove,Ib(e=>{if(n)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:qn(e.onPointerLeave,Ib(e=>o.onItemLeave(e))),onFocus:qn(e.onFocus,()=>p(!0)),onBlur:qn(e.onBlur,()=>p(!1))}))}))})}),pb=a.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:a}=e,n=l(e,_j);return(0,ds.jsx)(wb,{scope:e.__scopeMenu,checked:s,children:(0,ds.jsx)(hb,u(u({role:"menuitemcheckbox","aria-checked":Fb(s)?"mixed":s},n),{},{ref:t,"data-state":Lb(s),onSelect:qn(n.onSelect,()=>null===a||void 0===a?void 0:a(!!Fb(s)||!s),{checkForDefaultPrevented:!1})}))})});pb.displayName="MenuCheckboxItem";var fb="MenuRadioGroup",[xb,vb]=Bj(fb,{value:void 0,onValueChange:()=>{}}),gb=a.forwardRef((e,t)=>{const{value:s,onValueChange:a}=e,n=l(e,kj),r=ur(a);return(0,ds.jsx)(xb,{scope:e.__scopeMenu,value:s,onValueChange:r,children:(0,ds.jsx)(ob,u(u({},n),{},{ref:t}))})});gb.displayName=fb;var yb="MenuRadioItem",jb=a.forwardRef((e,t)=>{const{value:s}=e,a=l(e,Sj),n=vb(yb,e.__scopeMenu),r=s===n.value;return(0,ds.jsx)(wb,{scope:e.__scopeMenu,checked:r,children:(0,ds.jsx)(hb,u(u({role:"menuitemradio","aria-checked":r},a),{},{ref:t,"data-state":Lb(r),onSelect:qn(a.onSelect,()=>{var e;return null===(e=n.onValueChange)||void 0===e?void 0:e.call(n,s)},{checkForDefaultPrevented:!1})}))})});jb.displayName=yb;var bb="MenuItemIndicator",[wb,Nb]=Bj(bb,{checked:!1}),_b=a.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:a}=e,n=l(e,Cj),r=Nb(bb,s);return(0,ds.jsx)(Mr,{present:a||Fb(r.checked)||!0===r.checked,children:(0,ds.jsx)(cr.span,u(u({},n),{},{ref:t,"data-state":Lb(r.checked)}))})});_b.displayName=bb;var kb=a.forwardRef((e,t)=>{const{__scopeMenu:s}=e,a=l(e,Ej);return(0,ds.jsx)(cr.div,u(u({role:"separator","aria-orientation":"horizontal"},a),{},{ref:t}))});kb.displayName="MenuSeparator";var Sb=a.forwardRef((e,t)=>{const{__scopeMenu:s}=e,a=l(e,Tj),n=Vj(s);return(0,ds.jsx)(Wy,u(u(u({},n),a),{},{ref:t}))});Sb.displayName="MenuArrow";var Cb="MenuSub",[Eb,Tb]=Bj(Cb),Ab=e=>{const{__scopeMenu:t,children:s,open:n=!1,onOpenChange:r}=e,l=qj(Cb,t),i=Vj(t),[o,c]=a.useState(null),[d,h]=a.useState(null),m=ur(r);return a.useEffect(()=>(!1===l.open&&m(!1),()=>m(!1)),[l.open,m]),(0,ds.jsx)(Uy,u(u({},i),{},{children:(0,ds.jsx)(Wj,{scope:t,open:n,onOpenChange:m,content:d,onContentChange:h,children:(0,ds.jsx)(Eb,{scope:t,contentId:Zn(),triggerId:Zn(),trigger:o,onTriggerChange:c,children:s})})}))};Ab.displayName=Cb;var Pb="MenuSubTrigger",Db=a.forwardRef((e,t)=>{const s=qj(Pb,e.__scopeMenu),n=Gj(Pb,e.__scopeMenu),r=Tb(Pb,e.__scopeMenu),l=sb(Pb,e.__scopeMenu),i=a.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=l,d={__scopeMenu:e.__scopeMenu},h=a.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return a.useEffect(()=>h,[h]),a.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),c(null)}},[o,c]),(0,ds.jsx)($j,u(u({asChild:!0},d),{},{children:(0,ds.jsx)(mb,u(u({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":r.contentId,"data-state":Mb(s.open)},e),{},{ref:Ds(t,r.onTriggerChange),onClick:t=>{var a;null===(a=e.onClick)||void 0===a||a.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:qn(e.onPointerMove,Ib(t=>{l.onItemEnter(t),t.defaultPrevented||e.disabled||s.open||i.current||(l.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{s.onOpenChange(!0),h()},100))})),onPointerLeave:qn(e.onPointerLeave,Ib(e=>{var t;h();const a=null===(t=s.content)||void 0===t?void 0:t.getBoundingClientRect();if(a){var n;const t=null===(n=s.content)||void 0===n?void 0:n.dataset.side,r="right"===t,i=r?-5:5,c=a[r?"left":"right"],d=a[r?"right":"left"];l.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:c,y:a.top},{x:d,y:a.top},{x:d,y:a.bottom},{x:c,y:a.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(e),e.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:qn(e.onKeyDown,t=>{const a=""!==l.searchRef.current;var r;e.disabled||a&&" "===t.key||Oj[n.dir].includes(t.key)&&(s.onOpenChange(!0),null===(r=s.content)||void 0===r||r.focus(),t.preventDefault())})}))}))});Db.displayName=Pb;var Rb="MenuSubContent",Ob=a.forwardRef((e,t)=>{const s=Qj(eb,e.__scopeMenu),{forceMount:n=s.forceMount}=e,r=l(e,Aj),i=qj(eb,e.__scopeMenu),o=Gj(eb,e.__scopeMenu),c=Tb(Rb,e.__scopeMenu),d=a.useRef(null),h=Rs(t,d);return(0,ds.jsx)(Lj.Provider,{scope:e.__scopeMenu,children:(0,ds.jsx)(Mr,{present:n||i.open,children:(0,ds.jsx)(Lj.Slot,{scope:e.__scopeMenu,children:(0,ds.jsx)(ib,u(u({id:c.contentId,"aria-labelledby":c.triggerId},r),{},{ref:h,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null===(t=d.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:qn(e.onFocusOutside,e=>{e.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qn(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:qn(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),s=Mj[o.dir].includes(e.key);var a;t&&s&&(i.onOpenChange(!1),null===(a=c.trigger)||void 0===a||a.focus(),e.preventDefault())})}))})})})});function Mb(e){return e?"open":"closed"}function Fb(e){return"indeterminate"===e}function Lb(e){return Fb(e)?"indeterminate":e?"checked":"unchecked"}function Ib(e){return t=>"mouse"===t.pointerType?e(t):void 0}Ob.displayName=Rb;var zb=Kj,Bb=$j,Ub=Zj,Vb=ab,Hb=ob,Wb=cb,qb=hb,Yb=pb,Gb=gb,Kb=jb,$b=_b,Xb=kb,Jb=Sb,Qb=Db,Zb=Ob;const ew=["__scopeDropdownMenu","disabled"],tw=["__scopeDropdownMenu"],sw=["__scopeDropdownMenu"],aw=["__scopeDropdownMenu"],nw=["__scopeDropdownMenu"],rw=["__scopeDropdownMenu"],lw=["__scopeDropdownMenu"],iw=["__scopeDropdownMenu"],ow=["__scopeDropdownMenu"],cw=["__scopeDropdownMenu"],dw=["__scopeDropdownMenu"],uw=["__scopeDropdownMenu"],hw=["__scopeDropdownMenu"],mw=["__scopeDropdownMenu"];var pw="DropdownMenu",[fw,xw]=Kn(pw,[Uj]),vw=Uj(),[gw,yw]=fw(pw),jw=e=>{const{__scopeDropdownMenu:t,children:s,dir:n,open:r,defaultOpen:l,onOpenChange:i,modal:o=!0}=e,c=vw(t),d=a.useRef(null),[h,m]=tr({prop:r,defaultProp:null!==l&&void 0!==l&&l,onChange:i,caller:pw});return(0,ds.jsx)(gw,{scope:t,triggerId:Zn(),triggerRef:d,contentId:Zn(),open:h,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(e=>!e),[m]),modal:o,children:(0,ds.jsx)(zb,u(u({},c),{},{open:h,onOpenChange:m,dir:n,modal:o,children:s}))})};jw.displayName=pw;var bw="DropdownMenuTrigger",ww=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:a=!1}=e,n=l(e,ew),r=yw(bw,s),i=vw(s);return(0,ds.jsx)(Bb,u(u({asChild:!0},i),{},{children:(0,ds.jsx)(cr.button,u(u({type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":a?"":void 0,disabled:a},n),{},{ref:Ds(t,r.triggerRef),onPointerDown:qn(e.onPointerDown,e=>{a||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:qn(e.onKeyDown,e=>{a||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})}))}))});ww.displayName=bw;var Nw=e=>{const{__scopeDropdownMenu:t}=e,s=l(e,tw),a=vw(t);return(0,ds.jsx)(Ub,u(u({},a),s))};Nw.displayName="DropdownMenuPortal";var _w="DropdownMenuContent",kw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,n=l(e,sw),r=yw(_w,s),i=vw(s),o=a.useRef(!1);return(0,ds.jsx)(Vb,u(u(u({id:r.contentId,"aria-labelledby":r.triggerId},i),n),{},{ref:t,onCloseAutoFocus:qn(e.onCloseAutoFocus,e=>{var t;o.current||null===(t=r.triggerRef.current)||void 0===t||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:qn(e.onInteractOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,a=2===t.button||s;r.modal&&!a||(o.current=!0)}),style:u(u({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});kw.displayName=_w;var Sw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,aw),n=vw(s);return(0,ds.jsx)(Hb,u(u(u({},n),a),{},{ref:t}))});Sw.displayName="DropdownMenuGroup";var Cw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,nw),n=vw(s);return(0,ds.jsx)(Wb,u(u(u({},n),a),{},{ref:t}))});Cw.displayName="DropdownMenuLabel";var Ew=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,rw),n=vw(s);return(0,ds.jsx)(qb,u(u(u({},n),a),{},{ref:t}))});Ew.displayName="DropdownMenuItem";var Tw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,lw),n=vw(s);return(0,ds.jsx)(Yb,u(u(u({},n),a),{},{ref:t}))});Tw.displayName="DropdownMenuCheckboxItem";var Aw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,iw),n=vw(s);return(0,ds.jsx)(Gb,u(u(u({},n),a),{},{ref:t}))});Aw.displayName="DropdownMenuRadioGroup";var Pw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,ow),n=vw(s);return(0,ds.jsx)(Kb,u(u(u({},n),a),{},{ref:t}))});Pw.displayName="DropdownMenuRadioItem";var Dw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,cw),n=vw(s);return(0,ds.jsx)($b,u(u(u({},n),a),{},{ref:t}))});Dw.displayName="DropdownMenuItemIndicator";var Rw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,dw),n=vw(s);return(0,ds.jsx)(Xb,u(u(u({},n),a),{},{ref:t}))});Rw.displayName="DropdownMenuSeparator";var Ow=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,uw),n=vw(s);return(0,ds.jsx)(Jb,u(u(u({},n),a),{},{ref:t}))});Ow.displayName="DropdownMenuArrow";var Mw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,hw),n=vw(s);return(0,ds.jsx)(Qb,u(u(u({},n),a),{},{ref:t}))});Mw.displayName="DropdownMenuSubTrigger";var Fw=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:s}=e,a=l(e,mw),n=vw(s);return(0,ds.jsx)(Zb,u(u(u({},n),a),{},{ref:t,style:u(u({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Fw.displayName="DropdownMenuSubContent";var Lw=jw,Iw=ww,zw=Nw,Bw=kw,Uw=Cw,Vw=Ew,Hw=Tw,Ww=Pw,qw=Dw,Yw=Rw,Gw=Mw,Kw=Fw;const $w=Yi("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xw=Yi("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Jw=Yi("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Qw=["className","inset","children"],Zw=["className"],eN=["className","sideOffset"],tN=["className","inset"],sN=["className","children","checked"],aN=["className","children"],nN=["className","inset"],rN=["className"],lN=Lw,iN=Iw;a.forwardRef((e,t)=>{let{className:s,inset:a,children:n}=e,r=l(e,Qw);return(0,ds.jsxs)(Gw,u(u({ref:t,className:hn("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s)},r),{},{children:[n,(0,ds.jsx)($w,{className:"ml-auto"})]}))}).displayName=Gw.displayName;a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,Zw);return(0,ds.jsx)(Kw,u({ref:t,className:hn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},a))}).displayName=Kw.displayName;const oN=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4}=e,n=l(e,eN);return(0,ds.jsx)(zw,{children:(0,ds.jsx)(Bw,u({ref:t,sideOffset:a,className:hn("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},n))})});oN.displayName=Bw.displayName;const cN=a.forwardRef((e,t)=>{let{className:s,inset:a}=e,n=l(e,tN);return(0,ds.jsx)(Vw,u({ref:t,className:hn("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",a&&"pl-8",s)},n))});cN.displayName=Vw.displayName;a.forwardRef((e,t)=>{let{className:s,children:a,checked:n}=e,r=l(e,sN);return(0,ds.jsxs)(Hw,u(u({ref:t,className:hn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n},r),{},{children:[(0,ds.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,ds.jsx)(qw,{children:(0,ds.jsx)(Xw,{className:"h-4 w-4"})})}),a]}))}).displayName=Hw.displayName;a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=l(e,aN);return(0,ds.jsxs)(Ww,u(u({ref:t,className:hn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},n),{},{children:[(0,ds.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,ds.jsx)(qw,{children:(0,ds.jsx)(Jw,{className:"h-2 w-2 fill-current"})})}),a]}))}).displayName=Ww.displayName;const dN=a.forwardRef((e,t)=>{let{className:s,inset:a}=e,n=l(e,nN);return(0,ds.jsx)(Uw,u({ref:t,className:hn("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s)},n))});dN.displayName=Uw.displayName;const uN=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,rN);return(0,ds.jsx)(Yw,u({ref:t,className:hn("-mx-1 my-1 h-px bg-muted",s)},a))});uN.displayName=Yw.displayName;function hN(e,t){let[s,a]=t;return Math.min(a,Math.max(s,e))}const mN=["__scopeScrollArea","type","dir","scrollHideDelay"],pN=["__scopeScrollArea","children","nonce"],fN=["forceMount"],xN=["forceMount"],vN=["forceMount"],gN=["forceMount"],yN=["orientation"],jN=["sizes","onSizesChange"],bN=["sizes","onSizesChange"],wN=["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"],NN=["forceMount"],_N=["__scopeScrollArea","style"],kN=["__scopeScrollArea"];var SN="ScrollArea",[CN,EN]=Kn(SN),[TN,AN]=CN(SN),PN=a.forwardRef((e,t)=>{const{__scopeScrollArea:s,type:n="hover",dir:r,scrollHideDelay:i=600}=e,o=l(e,mN),[c,d]=a.useState(null),[h,m]=a.useState(null),[p,f]=a.useState(null),[x,v]=a.useState(null),[g,y]=a.useState(null),[j,b]=a.useState(0),[w,N]=a.useState(0),[_,k]=a.useState(!1),[S,C]=a.useState(!1),E=Rs(t,e=>d(e)),T=Nv(r);return(0,ds.jsx)(TN,{scope:s,type:n,dir:T,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:m,content:p,onContentChange:f,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:_,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:N,children:(0,ds.jsx)(cr.div,u(u({dir:T},o),{},{ref:E,style:u({position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":w+"px"},e.style)}))})});PN.displayName=SN;var DN="ScrollAreaViewport",RN=a.forwardRef((e,t)=>{const{__scopeScrollArea:s,children:n,nonce:r}=e,i=l(e,pN),o=AN(DN,s),c=Rs(t,a.useRef(null),o.onViewportChange);return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),(0,ds.jsx)(cr.div,u(u({"data-radix-scroll-area-viewport":""},i),{},{ref:c,style:u({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},e.style),children:(0,ds.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})}))]})});RN.displayName=DN;var ON="ScrollAreaScrollbar",MN=a.forwardRef((e,t)=>{const{forceMount:s}=e,n=l(e,fN),r=AN(ON,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=r,c="horizontal"===e.orientation;return a.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===r.type?(0,ds.jsx)(FN,u(u({},n),{},{ref:t,forceMount:s})):"scroll"===r.type?(0,ds.jsx)(LN,u(u({},n),{},{ref:t,forceMount:s})):"auto"===r.type?(0,ds.jsx)(IN,u(u({},n),{},{ref:t,forceMount:s})):"always"===r.type?(0,ds.jsx)(zN,u(u({},n),{},{ref:t})):null});MN.displayName=ON;var FN=a.forwardRef((e,t)=>{const{forceMount:s}=e,n=l(e,xN),r=AN(ON,e.__scopeScrollArea),[i,o]=a.useState(!1);return a.useEffect(()=>{const e=r.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),o(!0)},a=()=>{t=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",a)}}},[r.scrollArea,r.scrollHideDelay]),(0,ds.jsx)(Mr,{present:s||i,children:(0,ds.jsx)(IN,u(u({"data-state":i?"visible":"hidden"},n),{},{ref:t}))})}),LN=a.forwardRef((e,t)=>{const{forceMount:s}=e,n=l(e,vN),r=AN(ON,e.__scopeScrollArea),i="horizontal"===e.orientation,o=n_(()=>d("SCROLL_END"),100),[c,d]=(h="hidden",m={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},a.useReducer((e,t)=>{const s=m[e][t];return null!==s&&void 0!==s?s:e},h));var h,m;return a.useEffect(()=>{if("idle"===c){const e=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(e)}},[c,r.scrollHideDelay,d]),a.useEffect(()=>{const e=r.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const a=()=>{const a=e[t];s!==a&&(d("SCROLL"),o()),s=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[r.viewport,i,d,o]),(0,ds.jsx)(Mr,{present:s||"hidden"!==c,children:(0,ds.jsx)(zN,u(u({"data-state":"hidden"===c?"hidden":"visible"},n),{},{ref:t,onPointerEnter:qn(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:qn(e.onPointerLeave,()=>d("POINTER_LEAVE"))}))})}),IN=a.forwardRef((e,t)=>{const s=AN(ON,e.__scopeScrollArea),{forceMount:n}=e,r=l(e,gN),[i,o]=a.useState(!1),c="horizontal"===e.orientation,d=n_(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?e:t)}},10);return r_(s.viewport,d),r_(s.content,d),(0,ds.jsx)(Mr,{present:n||i,children:(0,ds.jsx)(zN,u(u({"data-state":i?"visible":"hidden"},r),{},{ref:t}))})}),zN=a.forwardRef((e,t)=>{const{orientation:s="vertical"}=e,n=l(e,yN),r=AN(ON,e.__scopeScrollArea),i=a.useRef(null),o=a.useRef(0),[c,d]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=QN(c.viewport,c.content),m=u(u({},n),{},{sizes:c,onSizesChange:d,hasThumb:Boolean(h>0&&h<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e});function p(e,t){return function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr";const n=ZN(s),r=n/2,l=t||r,i=n-l,o=s.scrollbar.paddingStart+l,c=s.scrollbar.size-s.scrollbar.paddingEnd-i,d=s.content-s.viewport,u="ltr"===a?[0,d]:[-1*d,0],h=t_([o,c],u);return h(e)}(e,o.current,c,t)}return"horizontal"===s?(0,ds.jsx)(BN,u(u({},m),{},{ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const e=e_(r.viewport.scrollLeft,c,r.dir);i.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollLeft=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollLeft=p(e,r.dir))}})):"vertical"===s?(0,ds.jsx)(UN,u(u({},m),{},{ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const e=e_(r.viewport.scrollTop,c);i.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollTop=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollTop=p(e))}})):null}),BN=a.forwardRef((e,t)=>{const{sizes:s,onSizesChange:n}=e,r=l(e,jN),i=AN(ON,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),h=Rs(t,d,i.onScrollbarXChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,ds.jsx)(WN,u(u({"data-orientation":"horizontal"},r),{},{ref:h,sizes:s,style:u({bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ZN(s)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(i.viewport){const a=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),s_(a,s)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:JN(o.paddingLeft),paddingEnd:JN(o.paddingRight)}})}}))}),UN=a.forwardRef((e,t)=>{const{sizes:s,onSizesChange:n}=e,r=l(e,bN),i=AN(ON,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),h=Rs(t,d,i.onScrollbarYChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,ds.jsx)(WN,u(u({"data-orientation":"vertical"},r),{},{ref:h,sizes:s,style:u({top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ZN(s)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(i.viewport){const a=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),s_(a,s)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:JN(o.paddingTop),paddingEnd:JN(o.paddingBottom)}})}}))}),[VN,HN]=CN(ON),WN=a.forwardRef((e,t)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:m,onResize:p}=e,f=l(e,wN),x=AN(ON,s),[v,g]=a.useState(null),y=Rs(t,e=>g(e)),j=a.useRef(null),b=a.useRef(""),w=x.viewport,N=n.content-n.viewport,_=ur(m),k=ur(d),S=n_(p,10);function C(e){if(j.current){const t=e.clientX-j.current.left,s=e.clientY-j.current.top;h({x:t,y:s})}}return a.useEffect(()=>{const e=e=>{const t=e.target;(null===v||void 0===v?void 0:v.contains(t))&&_(e,N)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,v,N,_]),a.useEffect(k,[n,k]),r_(v,S),r_(x.content,S),(0,ds.jsx)(VN,{scope:s,scrollbar:v,hasThumb:r,onThumbChange:ur(i),onThumbPointerUp:ur(o),onThumbPositionChange:k,onThumbPointerDown:ur(c),children:(0,ds.jsx)(cr.div,u(u({},f),{},{ref:y,style:u({position:"absolute"},f.style),onPointerDown:qn(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),j.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),C(e)}}),onPointerMove:qn(e.onPointerMove,C),onPointerUp:qn(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,x.viewport&&(x.viewport.style.scrollBehavior=""),j.current=null})}))})}),qN="ScrollAreaThumb",YN=a.forwardRef((e,t)=>{const{forceMount:s}=e,a=l(e,NN),n=HN(qN,e.__scopeScrollArea);return(0,ds.jsx)(Mr,{present:s||n.hasThumb,children:(0,ds.jsx)(GN,u({ref:t},a))})}),GN=a.forwardRef((e,t)=>{const{__scopeScrollArea:s,style:n}=e,r=l(e,_N),i=AN(qN,s),o=HN(qN,s),{onThumbPositionChange:c}=o,d=Rs(t,e=>o.onThumbChange(e)),h=a.useRef(void 0),m=n_(()=>{h.current&&(h.current(),h.current=void 0)},100);return a.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(m(),!h.current){const t=a_(e,c);h.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,m,c]),(0,ds.jsx)(cr.div,u(u({"data-state":o.hasThumb?"visible":"hidden"},r),{},{ref:d,style:u({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},n),onPointerDownCapture:qn(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top;o.onThumbPointerDown({x:s,y:a})}),onPointerUp:qn(e.onPointerUp,o.onThumbPointerUp)}))});YN.displayName=qN;var KN="ScrollAreaCorner",$N=a.forwardRef((e,t)=>{const s=AN(KN,e.__scopeScrollArea),a=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&a?(0,ds.jsx)(XN,u(u({},e),{},{ref:t})):null});$N.displayName=KN;var XN=a.forwardRef((e,t)=>{const{__scopeScrollArea:s}=e,n=l(e,kN),r=AN(KN,s),[i,o]=a.useState(0),[c,d]=a.useState(0),h=Boolean(i&&c);return r_(r.scrollbarX,()=>{var e;const t=(null===(e=r.scrollbarX)||void 0===e?void 0:e.offsetHeight)||0;r.onCornerHeightChange(t),d(t)}),r_(r.scrollbarY,()=>{var e;const t=(null===(e=r.scrollbarY)||void 0===e?void 0:e.offsetWidth)||0;r.onCornerWidthChange(t),o(t)}),h?(0,ds.jsx)(cr.div,u(u({},n),{},{ref:t,style:u({width:i,height:c,position:"absolute",right:"ltr"===r.dir?0:void 0,left:"rtl"===r.dir?0:void 0,bottom:0},e.style)})):null});function JN(e){return e?parseInt(e,10):0}function QN(e,t){const s=e/t;return isNaN(s)?0:s}function ZN(e){const t=QN(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-s)*t;return Math.max(a,18)}function e_(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr";const a=ZN(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=t.scrollbar.size-n,l=t.content-t.viewport,i=r-a,o=hN(e,"ltr"===s?[0,l]:[-1*l,0]);return t_([0,l],[0,i])(o)}function t_(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(s-e[0])}}function s_(e,t){return e>0&&e<t}var a_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s={left:e.scrollLeft,top:e.scrollTop},a=0;return function n(){const r={left:e.scrollLeft,top:e.scrollTop},l=s.left!==r.left,i=s.top!==r.top;(l||i)&&t(),s=r,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function n_(e,t){const s=ur(e),n=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(n.current),[]),a.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,t)},[s,t])}function r_(e,t){const s=ur(t);Xn(()=>{let t=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,s])}var l_=PN,i_=RN,o_=$N;const c_=["className","children"],d_=["className","orientation"],u_=a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=l(e,c_);return(0,ds.jsxs)(l_,u(u({ref:t,className:hn("relative overflow-hidden",s)},n),{},{children:[(0,ds.jsx)(i_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,ds.jsx)(h_,{}),(0,ds.jsx)(o_,{})]}))});u_.displayName=l_.displayName;const h_=a.forwardRef((e,t)=>{let{className:s,orientation:a="vertical"}=e,n=l(e,d_);return(0,ds.jsx)(MN,u(u({ref:t,orientation:a,className:hn("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s)},n),{},{children:(0,ds.jsx)(YN,{className:"relative flex-1 rounded-full bg-border"})}))});h_.displayName=MN.displayName;const m_=Yi("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),p_=Yi("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),f_=Yi("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),x_=Yi("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),v_=Yi("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g_=Yi("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y_=Yi("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),j_=Yi("megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),b_=Yi("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),w_=Yi("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),N_=Yi("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),__=Yi("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),k_=Yi("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),S_=Yi("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),C_=Yi("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),E_=Yi("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),T_=Yi("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),A_=Yi("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),P_=Yi("hard-hat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]),D_=Yi("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),R_=Yi("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),O_=Yi("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),M_=Yi("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),F_=Yi("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),L_=Yi("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),I_=Yi("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),z_=Yi("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),B_=Yi("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),U_=Yi("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),V_=Yi("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),H_=Yi("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function W_(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function q_(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return a.useCallback(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{let s=!1;const a=t.map(t=>{const a=W_(t,e);return s||"function"!==typeof a||(s=!0),a});if(s)return()=>{for(let e=0;e<a.length;e++){const s=a[e];"function"===typeof s?s():W_(t[e],null)}}}}(...t),t)}class Y_ extends a.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=lx(e)&&e.offsetWidth||0,a=lx(e)&&e.offsetHeight||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=s-n.width-n.left,n.bottom=a-n.height-n.top}return null}componentDidUpdate(){}render(){return this.props.children}}function G_(e){var t,s;let{children:n,isPresent:r,anchorX:l,anchorY:i,root:o}=e;const c=(0,a.useId)(),d=(0,a.useRef)(null),u=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,a.useContext)(vu),m=null!==(t=null===(s=n.props)||void 0===s?void 0:s.ref)&&void 0!==t?t:null===n||void 0===n?void 0:n.ref,p=q_(d,m);return(0,a.useInsertionEffect)(()=>{const{width:e,height:t,top:s,left:a,right:n,bottom:m}=u.current;if(r||!d.current||!e||!t)return;const p="left"===l?"left: ".concat(a):"right: ".concat(n),f="bottom"===i?"bottom: ".concat(m):"top: ".concat(s);d.current.dataset.motionPopId=c;const x=document.createElement("style");h&&(x.nonce=h);const v=null!==o&&void 0!==o?o:document.head;return v.appendChild(x),x.sheet&&x.sheet.insertRule('\n          [data-motion-pop-id="'.concat(c,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(p,"px !important;\n            ").concat(f,"px !important;\n          }\n        ")),()=>{v.contains(x)&&v.removeChild(x)}},[r]),(0,ds.jsx)(Y_,{isPresent:r,childRef:d,sizeRef:u,children:a.cloneElement(n,{ref:p})})}const K_=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:i,mode:o,anchorX:c,anchorY:d,root:h}=e;const m=Ou($_),p=(0,a.useId)();let f=!0,x=(0,a.useMemo)(()=>(f=!1,{id:p,initial:s,isPresent:n,custom:l,onExitComplete:e=>{m.set(e,!0);for(const t of m.values())if(!t)return;r&&r()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[n,m,r]);return i&&f&&(x=u({},x)),(0,a.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[n]),a.useEffect(()=>{!n&&!m.size&&r&&r()},[n]),"popLayout"===o&&(t=(0,ds.jsx)(G_,{isPresent:n,anchorX:c,anchorY:d,root:h,children:t})),(0,ds.jsx)(Ru.Provider,{value:x,children:t})};function $_(){return new Map}const X_=e=>e.key||"";function J_(e){const t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}const Q_=e=>{let{children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",anchorY:d="top",root:u}=e;const[h,m]=qp(o),p=(0,a.useMemo)(()=>J_(t),[t]),f=o&&!h?[]:p.map(X_),x=(0,a.useRef)(!0),v=(0,a.useRef)(p),g=Ou(()=>new Map),y=(0,a.useRef)(new Set),[j,b]=(0,a.useState)(p),[w,N]=(0,a.useState)(p);$u(()=>{x.current=!1,v.current=p;for(let e=0;e<w.length;e++){const t=X_(w[e]);f.includes(t)?(g.delete(t),y.current.delete(t)):!0!==g.get(t)&&g.set(t,!1)}},[w,f.length,f.join("-")]);const _=[];if(p!==j){let e=[...p];for(let t=0;t<w.length;t++){const s=w[t],a=X_(s);f.includes(a)||(e.splice(t,0,s),_.push(s))}return"wait"===i&&_.length&&(e=_),N(J_(e)),b(p),null}const{forceRender:k}=(0,a.useContext)(fu);return(0,ds.jsx)(ds.Fragment,{children:w.map(e=>{const t=X_(e),a=!(o&&!h)&&(p===w||f.includes(t));return(0,ds.jsx)(K_,{isPresent:a,initial:!(x.current&&!n)&&void 0,custom:s,presenceAffectsLayout:l,mode:i,root:u,onExitComplete:a?void 0:()=>{if(y.current.has(t))return;if(y.current.add(t),!g.has(t))return;g.set(t,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null===k||void 0===k||k(),N(v.current),o&&(null===m||void 0===m||m()),r&&r())},anchorX:c,anchorY:d,children:e},t)})})},Z_=["className","variant"],ek=$s("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tk(e){let{className:t,variant:s}=e,a=l(e,Z_);return(0,ds.jsx)("div",u({className:hn(ek({variant:s}),t)},a))}const sk=Yi("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ak=Yi("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),nk=()=>{const e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}},rk=e=>{let{isOpen:t,onClose:s}=e;const n=Se(),{user:r}=Cs(),[l,i]=(0,a.useState)(""),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),h="super_admin"===(null===r||void 0===r?void 0:r.role)||"hr_admin"===(null===r||void 0===r?void 0:r.role)||"hr_executive"===(null===r||void 0===r?void 0:r.role),m=(0,a.useCallback)(async e=>{if(!e||e.length<2)c([]);else{u(!0);try{const t=nk(),s=await fetch("".concat("https://shardahrms.com/api","/employees/search?q=").concat(encodeURIComponent(e),"&limit=10"),{credentials:"include",headers:t});if(s.ok){const e=await s.json();c(e)}}catch(t){console.error("Search error:",t)}finally{u(!1)}}},[]);(0,a.useEffect)(()=>{const e=setTimeout(()=>{l&&m(l)},300);return()=>clearTimeout(e)},[l,m]),(0,a.useEffect)(()=>{t||(i(""),c([]))},[t]);return(0,a.useEffect)(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),t&&s()),"Escape"===e.key&&t&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]),h?(0,ds.jsx)(eo,{open:t,onOpenChange:s,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg p-0 gap-0",children:[(0,ds.jsx)(ro,{className:"px-4 pt-4 pb-2",children:(0,ds.jsxs)(io,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,ds.jsx)(V_,{className:"w-5 h-5 text-slate-400"}),"Search Employees"]})}),(0,ds.jsx)("div",{className:"px-4 pb-2",children:(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by name, email, emp code, or department...",value:l,onChange:e=>i(e.target.value),className:"pl-10 pr-10",autoFocus:!0,"data-testid":"global-search-input"}),l&&(0,ds.jsx)("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:(0,ds.jsx)(Gi,{className:"w-4 h-4"})})]})}),(0,ds.jsx)("div",{className:"max-h-[400px] overflow-y-auto px-4 pb-4",children:d?(0,ds.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,ds.jsx)(Sx,{className:"w-6 h-6 animate-spin text-primary"})}):o.length>0?(0,ds.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,ds.jsx)(Pn,{className:"cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>(e=>{s(),n("/dashboard/employee/".concat(e.employee_id))})(e),"data-testid":"search-result-".concat(e.employee_id),children:(0,ds.jsx)(Mn,{className:"p-3",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(sk,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsxs)("span",{className:"font-medium text-slate-900 truncate",children:[e.first_name," ",e.last_name]}),(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:e.emp_code})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-0.5",children:[e.department_name&&(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(ak,{className:"w-3 h-3"}),e.department_name]}),e.email&&(0,ds.jsxs)("span",{className:"flex items-center gap-1 truncate",children:[(0,ds.jsx)(_x,{className:"w-3 h-3"}),e.email]})]})]}),(0,ds.jsx)(tk,{className:"active"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.status})]})})},e.employee_id))}):l.length>=2?(0,ds.jsxs)("div",{className:"text-center py-8 text-slate-500",children:['No employees found for "',l,'"']}):l.length>0?(0,ds.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Type at least 2 characters to search"}):(0,ds.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,ds.jsx)(V_,{className:"w-8 h-8 mx-auto mb-2"}),(0,ds.jsx)("p",{children:"Start typing to search employees"}),(0,ds.jsx)("p",{className:"text-xs mt-1",children:"Press Esc to close"})]})})]})}):null},lk=Yi("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ik=Yi("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ok=Yi("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ck=Yi("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),dk=Yi("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),uk="https://shardahrms.com/api",hk=()=>{const e=Se(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(0),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),d=(0,a.useCallback)(async()=>{try{const e=nk(),[t,a]=await Promise.all([fetch("".concat(uk,"/notifications/list?limit=20"),{credentials:"include",headers:e}),fetch("".concat(uk,"/notifications/unread-count"),{credentials:"include",headers:e})]);if(t.ok&&s(await t.json()),a.ok){const e=await a.json();r(e.count||0)}}catch(e){console.error("Failed to fetch notifications:",e)}},[]);(0,a.useEffect)(()=>{d();const e=setInterval(d,6e4);return()=>clearInterval(e)},[d]),(0,a.useEffect)(()=>{o&&d()},[o,d]);const u=t=>{t.is_read||(async e=>{try{const t=nk();await fetch("".concat(uk,"/notifications/").concat(e,"/read"),{method:"PUT",credentials:"include",headers:t}),d()}catch(t){console.error("Failed to mark as read:",t)}})(t.notification_id),t.link&&(c(!1),e(t.link))},h=e=>{const t=new Date(e),s=(new Date-t)/1e3;return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):t.toLocaleDateString()};return(0,ds.jsxs)(lN,{open:o,onOpenChange:c,children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"ghost",size:"icon",className:"relative","data-testid":"notifications-btn",children:[(0,ds.jsx)(ok,{className:"w-5 h-5"}),n>0&&(0,ds.jsx)(tk,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs bg-red-500",children:n>9?"9+":n})]})}),(0,ds.jsxs)(oN,{align:"end",className:"w-80",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[(0,ds.jsx)("h3",{className:"font-semibold text-sm",children:"Notifications"}),(0,ds.jsx)("div",{className:"flex gap-1",children:n>0&&(0,ds.jsxs)(fn,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:async()=>{i(!0);try{const e=nk();await fetch("".concat(uk,"/notifications/mark-all-read"),{method:"PUT",credentials:"include",headers:e}),d()}catch(e){console.error("Failed to mark all as read:",e)}finally{i(!1)}},disabled:l,children:[(0,ds.jsx)(ck,{className:"w-3 h-3 mr-1"}),"Mark all read"]})})]}),(0,ds.jsx)(u_,{className:"h-[350px]",children:t.length>0?(0,ds.jsx)("div",{className:"divide-y",children:t.map(e=>{return(0,ds.jsx)("div",{className:"p-3 cursor-pointer hover:bg-slate-50 transition-colors ".concat(e.is_read?"":"bg-blue-50/50"),onClick:()=>u(e),children:(0,ds.jsxs)("div",{className:"flex gap-3",children:[(0,ds.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(t=e.type,s=e.module,"meetings"===s?(0,ds.jsx)(v_,{className:"w-4 h-4 text-blue-500"}):"helpdesk"===s?(0,ds.jsx)(lk,{className:"w-4 h-4 text-amber-500"}):"warning"===t?(0,ds.jsx)(ik,{className:"w-4 h-4 text-orange-500"}):"success"===t?(0,ds.jsx)(Xw,{className:"w-4 h-4 text-emerald-500"}):(0,ds.jsx)(ok,{className:"w-4 h-4 text-slate-500"}))}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("p",{className:"text-sm ".concat(e.is_read?"":"font-medium"),children:e.title}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-2",children:e.message}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:h(e.created_at)})]}),!e.is_read&&(0,ds.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]})},e.notification_id);var t,s})}):(0,ds.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[(0,ds.jsx)(ok,{className:"w-10 h-10 mb-2 opacity-50"}),(0,ds.jsx)("p",{className:"text-sm",children:"No notifications"})]})}),t.length>0&&(0,ds.jsx)("div",{className:"border-t p-2",children:(0,ds.jsxs)(fn,{variant:"ghost",size:"sm",className:"w-full text-xs text-slate-500",onClick:async()=>{i(!0);try{const e=nk();await fetch("".concat(uk,"/notifications/clear-all"),{method:"DELETE",credentials:"include",headers:e}),d()}catch(e){console.error("Failed to clear notifications:",e)}finally{i(!1)}},disabled:l,children:[(0,ds.jsx)(dk,{className:"w-3 h-3 mr-1"}),"Clear all notifications"]})})]})]})},mk=e=>{let{onComplete:t}=e;const[s,n]=(0,a.useState)(0);return(0,a.useEffect)(()=>{const e=setTimeout(()=>n(1),400),s=setTimeout(()=>n(2),1e3),a=setTimeout(()=>n(3),1600),r=setTimeout(()=>null===t||void 0===t?void 0:t(),2e3);return()=>{clearTimeout(e),clearTimeout(s),clearTimeout(a),clearTimeout(r)}},[t]),(0,ds.jsx)(Q_,{children:s<3&&(0,ds.jsxs)(Nx.div,{className:"loading-screen",exit:{opacity:0,scale:1.05},transition:{duration:.4,ease:[.4,0,.2,1]},children:[(0,ds.jsx)(Nx.div,{className:"loading-arc",initial:{opacity:0},animate:{opacity:s>=1?1:0},transition:{duration:.6},children:(0,ds.jsxs)("svg",{viewBox:"0 0 400 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ds.jsx)("defs",{children:(0,ds.jsxs)("linearGradient",{id:"arcGlow",x1:"0",y1:"50",x2:"400",y2:"50",gradientUnits:"userSpaceOnUse",children:[(0,ds.jsx)("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:"0"}),(0,ds.jsx)("stop",{offset:"30%",stopColor:"hsl(var(--primary))",stopOpacity:"0.6"}),(0,ds.jsx)("stop",{offset:"50%",stopColor:"hsl(var(--primary))",stopOpacity:"0.8"}),(0,ds.jsx)("stop",{offset:"70%",stopColor:"hsl(var(--primary))",stopOpacity:"0.6"}),(0,ds.jsx)("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:"0"})]})}),(0,ds.jsx)(Nx.path,{d:"M0 90 Q100 10, 200 10 Q300 10, 400 90",stroke:"url(#arcGlow)",strokeWidth:"2",fill:"none",initial:{pathLength:0},animate:{pathLength:s>=1?1:0},transition:{duration:.8,ease:"easeOut"}}),(0,ds.jsx)(Nx.path,{d:"M0 90 Q100 10, 200 10 Q300 10, 400 90",stroke:"hsl(var(--primary))",strokeWidth:"1",fill:"none",filter:"blur(4px)",initial:{pathLength:0},animate:{pathLength:s>=1?1:0},transition:{duration:.8,ease:"easeOut",delay:.1}})]})}),(0,ds.jsxs)(Nx.div,{className:"loading-logo",initial:{opacity:0,scale:.8,y:20},animate:{opacity:s>=1?1:0,scale:s>=1?1:.8,y:s>=1?0:20},transition:{duration:.5,ease:[.4,0,.2,1]},children:[(0,ds.jsx)("img",{src:"/logo.png",alt:"Sharda HR",className:"loading-logo-img"}),(0,ds.jsx)(Nx.span,{className:"loading-logo-text",initial:{opacity:0,x:-10},animate:{opacity:s>=2?1:0,x:s>=2?0:-10},transition:{duration:.3},children:"Sharda HR"})]}),(0,ds.jsx)(Nx.div,{className:"loading-bar-track",initial:{opacity:0},animate:{opacity:s>=1?1:0},children:(0,ds.jsx)(Nx.div,{className:"loading-bar-fill",initial:{width:"0%"},animate:{width:s>=2?"100%":"40%"},transition:{duration:s>=2?.5:.6,ease:"easeOut"}})})]})})},pk={initial:{opacity:0,y:16,filter:"blur(4px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:-8,filter:"blur(2px)"}},fk={duration:.35,ease:[.4,0,.2,1]},xk=()=>{const{user:e,logout:t}=Cs(),s=Ne(),n=Se(),[r,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!0),m="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"hr_executive"===(null===e||void 0===e?void 0:e.role),p=(0,a.useCallback)(()=>{h(!1),setTimeout(()=>d(!0),100)},[]);(0,a.useEffect)(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&m&&(e.preventDefault(),o(!0))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m]);const f=[{name:"Dashboard",path:"/dashboard",icon:m_,exact:!0},{name:"Attendance",path:"/dashboard/attendance",icon:p_},{name:"My Calendar",path:"/dashboard/my-calendar",icon:f_},{name:"Meetings",path:"/dashboard/meetings",icon:x_},{name:"Leave",path:"/dashboard/leave",icon:v_},{name:"Payroll",path:"/dashboard/payroll",icon:g_},{name:"Performance",path:"/dashboard/performance",icon:y_},{name:"Announcements",path:"/dashboard/announcements",icon:j_},{name:"Helpdesk",path:"/dashboard/helpdesk",icon:b_},{name:"SOPs",path:"/dashboard/sop",icon:w_},{name:"Training",path:"/dashboard/training",icon:N_},{name:"Tour Management",path:"/dashboard/tour-management",icon:__}],x=[{name:"Employees",path:"/dashboard/employees",icon:k_}],v=m?[f[0],...x,...f.slice(1)]:f,g=[{name:"Documents",path:"/dashboard/documents",icon:S_},{name:"Assets",path:"/dashboard/assets",icon:C_},{name:"Expenses",path:"/dashboard/expenses",icon:E_},{name:"Recruitment",path:"/dashboard/recruitment",icon:T_},{name:"Onboarding",path:"/dashboard/onboarding",icon:A_},{name:"Contract Labour",path:"/dashboard/labour",icon:P_},{name:"Insurance",path:"/dashboard/insurance",icon:D_},{name:"Reports",path:"/dashboard/reports",icon:R_},{name:"Report Builder",path:"/dashboard/report-builder",icon:O_},{name:"Bulk Import",path:"/dashboard/import",icon:M_},{name:"Master Setup",path:"/dashboard/master-setup",icon:F_},{name:"User Management",path:"/dashboard/user-management",icon:L_},{name:"Data Management",path:"/dashboard/data-management",icon:I_},{name:"API Manager",path:"/dashboard/biometric",icon:z_},{name:"Holidays",path:"/dashboard/holidays",icon:f_},{name:"Events",path:"/dashboard/events",icon:B_}],y=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U",j=e=>{let{item:t,mobile:a}=e;const n=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?s.pathname===e:s.pathname.startsWith(e)}(t.path,t.exact);return(0,ds.jsxs)(Dt,{to:t.path,className:"sidebar-link ".concat(n?"active":""),onClick:()=>a&&l(!1),"data-testid":"nav-".concat(t.name.toLowerCase().replace(/\s+/g,"-")),children:[(0,ds.jsx)(t.icon,{className:"w-[18px] h-[18px]"}),(0,ds.jsx)("span",{children:t.name}),n&&(0,ds.jsx)(Nx.div,{layoutId:"activeIndicator",className:"absolute right-2 w-1.5 h-1.5 rounded-full bg-white/80",transition:{type:"spring",stiffness:380,damping:30}})]})},b=t=>{var s;let{mobile:a=!1}=t;return(0,ds.jsxs)("div",{className:"flex flex-col h-full sidebar ".concat(""),children:[(0,ds.jsxs)("div",{className:"h-16 flex items-center px-4 border-b border-white/[0.06]",children:[(0,ds.jsxs)(Dt,{to:"/dashboard",className:"flex items-center gap-2.5 group",children:[(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)("img",{src:"/logo.png",alt:"Sharda HR",className:"h-9 w-9 object-contain relative z-10"}),(0,ds.jsx)("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(0,ds.jsx)("span",{className:"font-bold text-lg text-white tracking-tight",style:{fontFamily:"Manrope, sans-serif"},children:"Sharda HR"})]}),a&&(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"ml-auto text-slate-400 hover:text-white hover:bg-white/10",onClick:()=>l(!1),children:(0,ds.jsx)(Gi,{className:"w-5 h-5"})})]}),(0,ds.jsxs)(u_,{className:"flex-1 px-3 py-4",children:[(0,ds.jsx)("nav",{className:"space-y-0.5",children:v.map(e=>(0,ds.jsx)(j,{item:e,mobile:a},e.path))}),("super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role))&&(0,ds.jsxs)("div",{className:"mt-6 pt-5 border-t border-white/[0.06]",children:[(0,ds.jsx)("p",{className:"px-3 mb-2.5 text-[10px] font-bold text-slate-500 uppercase tracking-[0.12em]",style:{fontFamily:"JetBrains Mono, monospace"},children:"// Administration"}),(0,ds.jsx)("nav",{className:"space-y-0.5",children:g.map(e=>(0,ds.jsx)(j,{item:e,mobile:a},e.path))})]}),(0,ds.jsx)("div",{className:"mt-6 pt-5 border-t border-white/[0.06]",children:(0,ds.jsx)(j,{item:{name:"Settings",path:"/dashboard/settings",icon:z_},mobile:a})})]}),(0,ds.jsx)("div",{className:"p-3 border-t border-white/[0.06]",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 rounded-xl bg-white/[0.04] hover:bg-white/[0.08] transition-colors duration-200",children:[(0,ds.jsxs)(av,{className:"h-9 w-9 ring-2 ring-white/10",children:[(0,ds.jsx)(nv,{src:null===e||void 0===e?void 0:e.picture}),(0,ds.jsx)(rv,{className:"bg-primary/80 text-white text-sm font-semibold",children:y(null===e||void 0===e?void 0:e.name)})]}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("p",{className:"text-sm font-semibold text-white truncate",children:null===e||void 0===e?void 0:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 truncate capitalize",children:null===e||void 0===e||null===(s=e.role)||void 0===s?void 0:s.replace("_"," ")})]})]})})]})};return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Q_,{children:u&&(0,ds.jsx)(mk,{onComplete:p})}),(0,ds.jsxs)("div",{className:"min-h-screen bg-slate-50/80 noise-bg transition-opacity duration-500 ".concat(c?"opacity-100":"opacity-0"),children:[(0,ds.jsx)("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:block lg:w-64 lg:overflow-y-auto",children:(0,ds.jsx)(b,{})}),(0,ds.jsx)(Q_,{children:r&&(0,ds.jsx)(Nx.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/60 lg:hidden backdrop-blur-sm",onClick:()=>l(!1)})}),(0,ds.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-[cubic-bezier(0.4,0,0.2,1)] lg:hidden ".concat(r?"translate-x-0":"-translate-x-full"),children:(0,ds.jsx)(b,{mobile:!0})}),(0,ds.jsxs)("div",{className:"lg:pl-64",children:[(0,ds.jsxs)("header",{className:"sticky top-0 z-30 glass border-b border-slate-200/60",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>l(!0),"data-testid":"mobile-menu-btn",children:(0,ds.jsx)(U_,{className:"w-5 h-5"})}),(0,ds.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm",children:[(0,ds.jsx)(Dt,{to:"/dashboard",className:"text-slate-400 hover:text-slate-600 transition-colors",children:"Dashboard"}),"/dashboard"!==s.pathname&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)($w,{className:"w-3.5 h-3.5 text-slate-300"}),(0,ds.jsx)("span",{className:"text-slate-800 font-semibold capitalize",children:s.pathname.split("/").pop().replace(/-/g," ")})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,ds.jsxs)(fn,{variant:"ghost",size:"sm",className:"hidden sm:flex items-center gap-2 text-slate-400 hover:text-slate-600 border border-slate-200/80 px-3 rounded-lg hover:border-slate-300 transition-all",onClick:()=>o(!0),"data-testid":"global-search-btn",children:[(0,ds.jsx)(V_,{className:"w-4 h-4"}),(0,ds.jsx)("span",{className:"text-sm",children:"Search..."}),(0,ds.jsxs)("kbd",{className:"ml-2 pointer-events-none hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-slate-100/80 px-1.5 font-mono text-[10px] text-slate-500",children:[(0,ds.jsx)("span",{children:"\u2318"}),"K"]})]}),m&&(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"sm:hidden",onClick:()=>o(!0),"data-testid":"global-search-btn-mobile",children:(0,ds.jsx)(V_,{className:"w-5 h-5"})}),(0,ds.jsx)(hk,{}),(0,ds.jsxs)(lN,{children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"ghost",className:"gap-2 px-2 rounded-lg hover:bg-slate-100","data-testid":"user-menu-btn",children:[(0,ds.jsxs)(av,{className:"h-8 w-8 ring-2 ring-slate-100",children:[(0,ds.jsx)(nv,{src:null===e||void 0===e?void 0:e.picture}),(0,ds.jsx)(rv,{className:"bg-primary text-white text-sm font-semibold",children:y(null===e||void 0===e?void 0:e.name)})]}),(0,ds.jsx)("span",{className:"hidden sm:block text-sm font-medium text-slate-700",children:null===e||void 0===e?void 0:e.name})]})}),(0,ds.jsxs)(oN,{align:"end",className:"w-56",children:[(0,ds.jsx)(dN,{children:(0,ds.jsxs)("div",{className:"flex flex-col",children:[(0,ds.jsx)("span",{className:"font-semibold",children:null===e||void 0===e?void 0:e.name}),(0,ds.jsx)("span",{className:"text-xs font-normal text-slate-500",children:null===e||void 0===e?void 0:e.email})]})}),(0,ds.jsx)(uN,{}),(0,ds.jsxs)(cN,{onClick:()=>n("/dashboard/settings"),children:[(0,ds.jsx)(z_,{className:"w-4 h-4 mr-2"}),"Settings"]}),(0,ds.jsx)(uN,{}),(0,ds.jsxs)(cN,{onClick:async()=>{await t()},className:"text-red-600","data-testid":"logout-btn",children:[(0,ds.jsx)(H_,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})]})]}),(0,ds.jsx)("div",{className:"header-accent-line"})]}),(0,ds.jsx)("main",{className:"p-4 sm:p-6 lg:p-8 relative z-[1]",children:(0,ds.jsx)(Q_,{mode:"wait",children:(0,ds.jsx)(Nx.div,{variants:pk,initial:"initial",animate:"animate",exit:"exit",transition:fk,children:(0,ds.jsx)(Ke,{})},s.pathname)})})]}),(0,ds.jsx)(rk,{isOpen:i,onClose:()=>o(!1)})]})]})},vk=["scope","children"];function gk(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=t[0];if(1===t.length)return n;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const s=e.reduce((e,s)=>{let{useScope:a,scopeName:n}=s;const r=a(t)["__scope".concat(n)];return u(u({},e),r)},{});return a.useMemo(()=>({["__scope".concat(n.scopeName)]:s}),[s])}};return r.scopeName=n.scopeName,r}const yk=["asChild"];var jk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=zs("Primitive.".concat(t)),n=a.forwardRef((e,a)=>{const{asChild:n}=e,r=l(e,yk),i=n?s:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ds.jsx)(i,u(u({},r),{},{ref:a}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});const bk=["__scopeProgress","value","max","getValueLabel"],wk=["__scopeProgress"];var Nk="Progress",_k=100,[kk,Sk]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];const n=()=>{const t=s.map(e=>a.createContext(e));return function(s){const n=(null===s||void 0===s?void 0:s[e])||t;return a.useMemo(()=>({["__scope".concat(e)]:u(u({},s),{},{[e]:n})}),[s,n])}};return n.scopeName=e,[function(t,n){const r=a.createContext(n);r.displayName=t+"Context";const i=s.length;s=[...s,n];const o=t=>{var s;const{scope:n,children:o}=t,c=l(t,vk),d=(null===n||void 0===n||null===(s=n[e])||void 0===s?void 0:s[i])||r,u=a.useMemo(()=>c,Object.values(c));return(0,ds.jsx)(d.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(s,l){var o;const c=(null===l||void 0===l||null===(o=l[e])||void 0===o?void 0:o[i])||r,d=a.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error("`".concat(s,"` must be used within `").concat(t,"`"))}]},gk(n,...t)]}(Nk),[Ck,Ek]=kk(Nk),Tk=a.forwardRef((e,t)=>{const{__scopeProgress:s,value:a=null,max:n,getValueLabel:r=Dk}=e,i=l(e,bk);var o,c;!n&&0!==n||Mk(n)||console.error((o="".concat(n),c="Progress","Invalid prop `max` of value `".concat(o,"` supplied to `").concat(c,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(_k,"`.")));const d=Mk(n)?n:_k;null===a||Fk(a,d)||console.error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(_k," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")}("".concat(a),"Progress"));const h=Fk(a,d)?a:null,m=Ok(h)?r(h,d):void 0;return(0,ds.jsx)(Ck,{scope:s,value:h,max:d,children:(0,ds.jsx)(jk.div,u(u({"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":Ok(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":Rk(h,d),"data-value":null!==h&&void 0!==h?h:void 0,"data-max":d},i),{},{ref:t}))})});Tk.displayName=Nk;var Ak="ProgressIndicator",Pk=a.forwardRef((e,t)=>{var s;const{__scopeProgress:a}=e,n=l(e,wk),r=Ek(Ak,a);return(0,ds.jsx)(jk.div,u(u({"data-state":Rk(r.value,r.max),"data-value":null!==(s=r.value)&&void 0!==s?s:void 0,"data-max":r.max},n),{},{ref:t}))});function Dk(e,t){return"".concat(Math.round(e/t*100),"%")}function Rk(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Ok(e){return"number"===typeof e}function Mk(e){return Ok(e)&&!isNaN(e)&&e>0}function Fk(e,t){return Ok(e)&&!isNaN(e)&&e<=t&&e>=0}Pk.displayName=Ak;var Lk=Tk,Ik=Pk;const zk=["className","value"],Bk=a.forwardRef((e,t)=>{let{className:s,value:a}=e,n=l(e,zk);return(0,ds.jsx)(Lk,u(u({ref:t,className:hn("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s)},n),{},{children:(0,ds.jsx)(Ik,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})}))});Bk.displayName=Lk.displayName;const Uk=["className"];function Vk(e){let{className:t}=e,s=l(e,Uk);return(0,ds.jsx)("div",u({className:hn("animate-pulse rounded-md bg-primary/10",t)},s))}const Hk=Yi("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Wk=Yi("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),qk=Yi("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Yk=Yi("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Gk=Yi("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Kk=Yi("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),$k=Yi("laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),Xk=Yi("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Jk=Yi("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Qk=Yi("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Zk=Yi("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),eS=Yi("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),tS={birthday:{icon:Qk,selfTitle:"Happy Birthday!",selfMessage:"Wishing you an amazing year ahead! Your team celebrates you today.",otherPrefix:"'s Birthday!",gradient:"from-amber-50 via-orange-50 to-rose-50",border:"border-amber-200",iconBg:"bg-amber-100",iconColor:"text-amber-600",textColor:"text-amber-900",subColor:"text-amber-600",accentColor:"#f59e0b"},work_anniversary:{icon:Zk,selfTitle:"Work Anniversary!",selfMessage:e=>"Congratulations on ".concat(e," year").concat(1!==e?"s":""," at Sharda! Your dedication is valued."),otherPrefix:"'s Work Anniversary!",gradient:"from-blue-50 via-indigo-50 to-purple-50",border:"border-blue-200",iconBg:"bg-blue-100",iconColor:"text-blue-600",textColor:"text-blue-900",subColor:"text-blue-600",accentColor:"#3b82f6"},marriage_anniversary:{icon:eS,selfTitle:"Happy Marriage Anniversary!",selfMessage:"Wishing you and your partner a beautiful day together!",otherPrefix:"'s Marriage Anniversary!",gradient:"from-pink-50 via-rose-50 to-red-50",border:"border-pink-200",iconBg:"bg-pink-100",iconColor:"text-pink-600",textColor:"text-pink-900",subColor:"text-pink-600",accentColor:"#ec4899"},custom:{icon:B_,selfTitle:"Special Day!",selfMessage:"Have a wonderful day!",otherPrefix:"'s Special Day!",gradient:"from-emerald-50 via-teal-50 to-cyan-50",border:"border-emerald-200",iconBg:"bg-emerald-100",iconColor:"text-emerald-600",textColor:"text-emerald-900",subColor:"text-emerald-600",accentColor:"#10b981"}},sS=e=>{let{delay:t,left:s,color:a}=e;return(0,ds.jsx)(Nx.div,{className:"confetti-piece",style:{left:"".concat(s,"%"),top:"-10px",backgroundColor:a},initial:{y:-20,rotate:0,opacity:1},animate:{y:"100vh",rotate:720,opacity:0},transition:{duration:3,delay:t,ease:"easeIn"}})},aS=e=>{let{onThemeDetected:t}=e;const{user:s}=Cs(),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d()},[]),(0,a.useEffect)(()=>{if(t&&n.length>0){var e;const a=n.find(e=>e.emp_code===(null===s||void 0===s?void 0:s.employee_id)),r=(null===a||void 0===a?void 0:a.event_type)||(null===(e=n[0])||void 0===e?void 0:e.event_type)||null;t(r)}else t&&t(null)},[n,s,t]);const d=async()=>{try{const e=await fetch("".concat("https://shardahrms.com/api","/events/today"),{headers:nk(),credentials:"include"});if(e.ok){const t=await e.json();r(t);t.some(e=>e.emp_code===(null===s||void 0===s?void 0:s.employee_id))&&(c(!0),setTimeout(()=>c(!1),4e3))}}catch(aI){console.error("Failed to fetch celebrations:",aI)}};if(0===n.length||l)return null;const u=n.filter(e=>e.emp_code===(null===s||void 0===s?void 0:s.employee_id)),h=n.filter(e=>e.emp_code!==(null===s||void 0===s?void 0:s.employee_id)),m=["#f59e0b","#3b82f6","#ec4899","#10b981","#8b5cf6","#ef4444"];return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Q_,{children:o&&(0,ds.jsx)(ds.Fragment,{children:Array.from({length:24}).map((e,t)=>(0,ds.jsx)(sS,{delay:1.5*Math.random(),left:100*Math.random(),color:m[t%m.length]},t))})}),(0,ds.jsxs)(Nx.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:[.4,0,.2,1]},className:"space-y-3","data-testid":"celebration-banner",children:[u.map(e=>{const t=tS[e.event_type]||tS.custom,s=t.icon,a="function"===typeof t.selfMessage?t.selfMessage(e.years||0):t.selfMessage;return(0,ds.jsxs)(Nx.div,{className:"relative overflow-hidden rounded-xl bg-gradient-to-r ".concat(t.gradient," ").concat(t.border," border p-5"),initial:{scale:.95},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},children:[(0,ds.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-[0.08]",style:{background:"radial-gradient(circle, ".concat(t.accentColor,", transparent)")}}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)(Nx.div,{className:"w-14 h-14 rounded-2xl ".concat(t.iconBg," flex items-center justify-center shrink-0"),animate:{rotate:[0,-5,5,-5,0]},transition:{duration:.6,delay:.5},children:(0,ds.jsx)(s,{className:"w-7 h-7 ".concat(t.iconColor)})}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("h3",{className:"text-lg font-bold ".concat(t.textColor),style:{fontFamily:"Manrope, sans-serif"},children:t.selfTitle}),(0,ds.jsx)("p",{className:"text-sm ".concat(t.subColor," mt-0.5"),children:a})]}),(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"shrink-0 opacity-50 hover:opacity-100",onClick:()=>i(!0),children:(0,ds.jsx)(Gi,{className:"w-4 h-4"})})]})]},e.event_id)}),h.length>0&&(0,ds.jsxs)(Nx.div,{className:"rounded-xl bg-white border border-slate-200 p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[(0,ds.jsx)(B_,{className:"w-4 h-4 text-amber-500"}),"Today's Celebrations"]}),(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-50 hover:opacity-100",onClick:()=>i(!0),children:(0,ds.jsx)(Gi,{className:"w-3 h-3"})})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[h.slice(0,5).map(e=>{const t=tS[e.event_type]||tS.custom,s=t.icon;return(0,ds.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[(0,ds.jsx)("div",{className:"w-8 h-8 rounded-lg ".concat(t.iconBg," flex items-center justify-center shrink-0"),children:(0,ds.jsx)(s,{className:"w-4 h-4 ".concat(t.iconColor)})}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsxs)("p",{className:"text-sm font-medium text-slate-800 truncate",children:[e.employee_name,t.otherPrefix]}),e.department&&(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:e.department})]}),"work_anniversary"===e.event_type&&e.years&&(0,ds.jsxs)("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:[e.years,"yr"]})]},e.event_id)}),h.length>5&&(0,ds.jsxs)("p",{className:"text-xs text-slate-400 text-center pt-1",children:["+",h.length-5," more celebrations today"]})]})]})]})]})},nS="https://shardahrms.com/api",rS=()=>{var e,t,s,n,r,l;const{user:i}=Cs(),[o,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[m,p]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[N,_]=(0,a.useState)(!0),[k,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)(null),[T,A]=(0,a.useState)(null),[P,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{R()},[]);const R=async()=>{try{const e=nk(),[t,s,a,n,r,l,i,o]=await Promise.all([fetch("".concat(nS,"/dashboard/stats"),{credentials:"include",headers:e}),fetch("".concat(nS,"/dashboard/employee"),{credentials:"include",headers:e}),fetch("".concat(nS,"/leave-types"),{credentials:"include",headers:e}),fetch("".concat(nS,"/sop/my-sops"),{credentials:"include",headers:e}),fetch("".concat(nS,"/employee-assets/my-assets"),{credentials:"include",headers:e}),fetch("".concat(nS,"/tours/my-tours"),{credentials:"include",headers:e}),fetch("".concat(nS,"/expenses/my-expenses"),{credentials:"include",headers:e}),fetch("".concat(nS,"/travel/my-active-tour"),{credentials:"include",headers:e})]);if(t.ok){const e=await t.json();c(e)}if(s.ok){const e=await s.json();h(e)}if(a.ok){const e=await a.json();p(e)}if(n.ok){const e=await n.json();x(e)}if(r.ok){const e=await r.json();g(e)}if(l.ok){const e=await l.json();j(e)}if(i.ok){const e=await i.json();w(e)}if(o.ok){const e=await o.json();A(e)}}catch(e){console.error("Error fetching dashboard:",e)}finally{_(!1)}},O=async e=>{D(!0);try{var t;const s=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:1e4})}),a=await fetch("".concat(nS,"/travel/remote-check-in"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({punch_type:e,location:{lat:s.coords.latitude,lng:s.coords.longitude},tour_request_id:null===T||void 0===T||null===(t=T.tour)||void 0===t?void 0:t.request_id})});if(a.ok){const t=await a.json();ts.success("Remote ".concat(e," recorded at ").concat(t.time)),R()}else{const e=await a.json();ts.error(e.detail||"Failed to record check-in")}}catch(s){1===s.code?ts.error("Location permission denied. Please enable GPS."):ts.error("Failed to get location for remote check-in")}finally{D(!1)}},M="super_admin"===(null===i||void 0===i?void 0:i.role)||"hr_admin"===(null===i||void 0===i?void 0:i.role)||"hr_executive"===(null===i||void 0===i?void 0:i.role),F={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return N?(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"dashboard-loading",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(Vk,{className:"h-8 w-64"}),(0,ds.jsx)(Vk,{className:"h-5 w-48"})]}),(0,ds.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(Vk,{className:"h-4 w-24"}),(0,ds.jsx)(Vk,{className:"h-8 w-16"})]}),(0,ds.jsx)(Vk,{className:"h-12 w-12 rounded-full"})]})})},t))}),(0,ds.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Vk,{className:"h-6 w-32"})}),(0,ds.jsx)(Mn,{className:"space-y-3",children:[...Array(3)].map((e,t)=>(0,ds.jsx)(Vk,{className:"h-12 w-full"},t))})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Vk,{className:"h-6 w-32"})}),(0,ds.jsx)(Mn,{className:"space-y-3",children:[...Array(3)].map((e,t)=>(0,ds.jsx)(Vk,{className:"h-12 w-full"},t))})]})]})]}):(0,ds.jsxs)("div",{className:"space-y-6 ".concat(C?"celebration-theme celebration-theme-".concat(C):""),"data-testid":"dashboard-page",children:[(0,ds.jsx)(aS,{onThemeDetected:E}),(0,ds.jsx)(Nx.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.4,0,.2,1]},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("div",{className:"flex items-center gap-3 mb-1",children:(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Dashboard"})}),(0,ds.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:["Welcome back, ",null===i||void 0===i||null===(e=i.name)||void 0===e?void 0:e.split(" ")[0]]}),(0,ds.jsx)("p",{className:"text-slate-500 mt-1.5 text-sm",children:(new Date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[200px]"})]})}),(null===T||void 0===T?void 0:T.can_remote_checkin)&&(0,ds.jsx)(Nx.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:(0,ds.jsx)(Pn,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-transparent","data-testid":"remote-checkin-card",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(Hk,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-semibold text-sm text-slate-800",children:"Remote Check-in"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:null!==T&&void 0!==T&&T.has_active_tour?"On tour: ".concat((null===(t=T.tour)||void 0===t?void 0:t.purpose)||"Active Tour"):null!==T&&void 0!==T&&T.is_field_employee?"Field employee \u2014 GPS check-in available":"Remote check-in available"})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(null===T||void 0===T||null===(s=T.todays_checkins)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)("span",{className:"text-xs text-slate-400 mr-2",children:[T.todays_checkins.length," check-in",1!==T.todays_checkins.length?"s":""," today"]}),(0,ds.jsxs)(fn,{size:"sm",onClick:()=>O("IN"),disabled:P,"data-testid":"dashboard-remote-checkin-btn",children:[(0,ds.jsx)(Wk,{className:"w-3.5 h-3.5 mr-1.5"})," Clock In"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>O("OUT"),disabled:P,"data-testid":"dashboard-remote-checkout-btn",children:[(0,ds.jsx)(H_,{className:"w-3.5 h-3.5 mr-1.5"})," Clock Out"]})]})]})})})}),M&&o&&(0,ds.jsxs)(Nx.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ds.jsx)(Nx.div,{variants:F,children:(0,ds.jsx)(Pn,{className:"stat-card group","data-testid":"stat-employees",children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Total Employees"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:o.total_employees})]}),(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,ds.jsx)(k_,{className:"w-6 h-6 text-primary"})})]})})})}),(0,ds.jsx)(Nx.div,{variants:F,children:(0,ds.jsx)(Pn,{className:"stat-card group","data-testid":"stat-present",children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Present Today"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:o.present_today}),(0,ds.jsxs)("p",{className:"text-xs text-emerald-600 mt-1 flex items-center gap-1",children:[(0,ds.jsx)(qk,{className:"w-3 h-3"}),o.attendance_percentage,"% attendance"]})]}),(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,ds.jsx)(Yk,{className:"w-6 h-6 text-emerald-600"})})]})})})}),(0,ds.jsx)(Nx.div,{variants:F,children:(0,ds.jsx)(Pn,{className:"stat-card group","data-testid":"stat-leave",children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"On Leave Today"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:o.on_leave_today})]}),(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,ds.jsx)(v_,{className:"w-6 h-6 text-amber-600"})})]})})})}),(0,ds.jsx)(Nx.div,{variants:F,children:(0,ds.jsx)(Pn,{className:"stat-card group","data-testid":"stat-pending",children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Pending Approvals"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:o.pending_leaves})]}),(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,ds.jsx)(ik,{className:"w-6 h-6 text-red-600"})})]})})})})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,ds.jsxs)("div",{className:"lg:col-span-8 space-y-6",children:[(0,ds.jsxs)(Pn,{"data-testid":"attendance-status-card",children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Today's Attendance"}),(0,ds.jsx)(On,{children:"Your attendance status for today"})]}),(0,ds.jsx)(Mn,{children:null!==d&&void 0!==d&&d.attendance_today?(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-slate-900",children:["Status: ",(0,ds.jsx)("span",{className:"text-emerald-600 capitalize",children:d.attendance_today.status})]}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:["First In: ",d.attendance_today.first_in||"N/A"," | Last Out: ",d.attendance_today.last_out||"In Progress"]})]})]}),d.attendance_today.total_hours&&(0,ds.jsxs)(tk,{variant:"secondary",className:"text-lg px-4 py-1",children:[d.attendance_today.total_hours," hrs"]})]}),(null===(n=d.attendance_today.punches)||void 0===n?void 0:n.length)>0&&(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:d.attendance_today.punches.map((e,t)=>(0,ds.jsxs)(tk,{variant:"IN"===e.type?"default":"outline",children:[e.type," - ",e.time]},t))})]}):(0,ds.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,ds.jsx)(ik,{className:"w-6 h-6 text-amber-600"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-amber-800",children:"No attendance marked today"}),(0,ds.jsx)("p",{className:"text-sm text-amber-600",children:"Your attendance will be synced from the biometric system"})]})]})})]}),(0,ds.jsxs)(Pn,{"data-testid":"leave-balance-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Leave Balance"}),(0,ds.jsx)(On,{children:"Your leave quota for this year"})]}),(0,ds.jsx)(Dt,{to:"/dashboard/leave",children:(0,ds.jsxs)(fn,{variant:"ghost",size:"sm",className:"gap-1",children:["View All ",(0,ds.jsx)(Gk,{className:"w-4 h-4"})]})})]})}),(0,ds.jsx)(Mn,{children:(null===d||void 0===d||null===(r=d.leave_balance)||void 0===r?void 0:r.length)>0?(0,ds.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:d.leave_balance.slice(0,4).map((e,t)=>{const s=m.find(t=>t.leave_type_id===e.leave_type_id),a=(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.code)||e.leave_type_id;return(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-600",children:a}),(0,ds.jsxs)("p",{className:"text-sm font-semibold text-slate-900",children:[e.available," / ",e.opening_balance+e.accrued]})]}),(0,ds.jsx)(Bk,{value:e.available/(e.opening_balance+e.accrued||1)*100,className:"h-2"})]},t)})}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No leave balance data available"})})]})]}),(0,ds.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,ds.jsxs)(Pn,{"data-testid":"announcements-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(j_,{className:"w-5 h-5 text-primary"}),"Announcements"]}),(0,ds.jsx)(Dt,{to:"/dashboard/announcements",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,ds.jsx)(Mn,{className:"space-y-3",children:(null===d||void 0===d||null===(l=d.recent_announcements)||void 0===l?void 0:l.length)>0?d.recent_announcements.slice(0,3).map((e,t)=>(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100 hover:bg-slate-50 transition-colors cursor-pointer",children:[(0,ds.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900 text-sm line-clamp-1",children:e.title}),(0,ds.jsx)(tk,{variant:"outline",className:"text-xs shrink-0",children:e.category})]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2",children:e.content})]},t)):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4 text-sm",children:"No announcements"})})]}),f.length>0&&(0,ds.jsxs)(Pn,{"data-testid":"my-sops-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(w_,{className:"w-5 h-5 text-emerald-600"}),"My SOPs"]}),(0,ds.jsx)(Dt,{to:"/dashboard/sop",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,ds.jsx)(Mn,{className:"space-y-3",children:f.slice(0,3).map((e,t)=>(0,ds.jsx)("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100 hover:bg-emerald-100 transition-colors",children:(0,ds.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"font-medium text-emerald-900 text-sm",children:e.title}),e.description&&(0,ds.jsx)("p",{className:"text-xs text-emerald-600 line-clamp-1 mt-1",children:e.description}),(0,ds.jsxs)("p",{className:"text-xs text-emerald-500 mt-1",children:["v",e.version]})]}),e.file_name&&(0,ds.jsx)("a",{href:"".concat(nS,"/sop/").concat(e.sop_id,"/download"),target:"_blank",rel:"noopener noreferrer",className:"shrink-0",children:(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-100",children:(0,ds.jsx)(Kk,{className:"w-3 h-3"})})})]})},t))})]}),(0,ds.jsxs)(Pn,{"data-testid":"quick-actions-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Quick Actions"})}),(0,ds.jsxs)(Mn,{className:"space-y-2",children:[(0,ds.jsx)(Dt,{to:"/dashboard/leave",className:"block",children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start gap-2","data-testid":"quick-apply-leave",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"}),"Apply for Leave"]})}),(0,ds.jsx)(Dt,{to:"/dashboard/attendance",className:"block",children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start gap-2","data-testid":"quick-view-attendance",children:[(0,ds.jsx)(p_,{className:"w-4 h-4"}),"View Attendance"]})}),(0,ds.jsx)(Dt,{to:"/dashboard/tours",className:"block",children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start gap-2","data-testid":"quick-tour-request",children:[(0,ds.jsx)(__,{className:"w-4 h-4"}),"Tour Request"]})}),(0,ds.jsx)(Dt,{to:"/dashboard/expenses",className:"block",children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start gap-2","data-testid":"quick-expense-claim",children:[(0,ds.jsx)(E_,{className:"w-4 h-4"}),"Expense Claim"]})})]})]}),v&&(0,ds.jsxs)(Pn,{"data-testid":"my-assets-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(C_,{className:"w-5 h-5 text-blue-600"}),"My Assets"]})}),(0,ds.jsxs)(Mn,{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,ds.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(v.laptop?"bg-emerald-50 border border-emerald-200":"bg-slate-50"),children:[(0,ds.jsx)($k,{className:"w-5 h-5 mx-auto mb-1 ".concat(v.laptop?"text-emerald-600":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-xs font-medium",children:"Laptop"}),(0,ds.jsx)("p",{className:"text-xs ".concat(v.laptop?"text-emerald-600":"text-slate-400"),children:v.laptop?"Assigned":"N/A"})]}),(0,ds.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(v.mobile_charger?"bg-emerald-50 border border-emerald-200":"bg-slate-50"),children:[(0,ds.jsx)(Xk,{className:"w-5 h-5 mx-auto mb-1 ".concat(v.mobile_charger?"text-emerald-600":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-xs font-medium",children:"Mobile"}),(0,ds.jsx)("p",{className:"text-xs ".concat(v.mobile_charger?"text-emerald-600":"text-slate-400"),children:v.mobile_charger?"Assigned":"N/A"})]})]}),v.sdpl_number&&(0,ds.jsxs)("div",{className:"p-2 bg-blue-50 rounded text-xs",children:[(0,ds.jsx)("span",{className:"text-blue-600 font-medium",children:"SDPL#:"})," ",v.sdpl_number]})]})]}),y.length>0&&(0,ds.jsxs)(Pn,{"data-testid":"my-tours-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(Jk,{className:"w-5 h-5 text-purple-600"}),"My Tours"]}),(0,ds.jsx)(Dt,{to:"/dashboard/tours",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,ds.jsx)(Mn,{className:"space-y-2",children:y.slice(0,2).map((e,t)=>(0,ds.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-100",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ds.jsx)("p",{className:"font-medium text-purple-900 text-sm",children:e.destination}),(0,ds.jsx)(tk,{className:"approved"===e.status?"bg-emerald-100 text-emerald-700":"pending"===e.status?"bg-amber-100 text-amber-700":"bg-slate-50 text-slate-600",children:e.status})]}),(0,ds.jsxs)("p",{className:"text-xs text-purple-600",children:[e.from_date," - ",e.to_date]})]},t))})]}),b.length>0&&(0,ds.jsxs)(Pn,{"data-testid":"my-expenses-card",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(E_,{className:"w-5 h-5 text-orange-600"}),"My Expenses"]}),(0,ds.jsx)(Dt,{to:"/dashboard/expenses",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,ds.jsx)(Mn,{className:"space-y-2",children:b.slice(0,2).map((e,t)=>{var s;return(0,ds.jsxs)("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-100",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ds.jsx)("p",{className:"font-medium text-orange-900 text-sm",children:e.category||e.description}),(0,ds.jsx)(tk,{className:"approved"===e.status?"bg-emerald-100 text-emerald-700":"pending"===e.status?"bg-amber-100 text-amber-700":"reimbursed"===e.status?"bg-blue-100 text-blue-700":"bg-slate-50 text-slate-600",children:e.status})]}),(0,ds.jsxs)("p",{className:"text-xs text-orange-600",children:["\u20b9",null===(s=e.amount)||void 0===s?void 0:s.toLocaleString("en-IN")," \u2022 ",e.date]})]},t)})})]}),(M||"manager"===(null===i||void 0===i?void 0:i.role))&&(null===o||void 0===o?void 0:o.pending_leaves)>0&&(0,ds.jsx)(Pn,{className:"border-amber-200 bg-amber-50","data-testid":"pending-actions-card",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(ik,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"font-medium text-amber-900",children:"Pending Approvals"}),(0,ds.jsxs)("p",{className:"text-sm text-amber-700",children:[o.pending_leaves," leave requests need your attention"]})]}),(0,ds.jsx)(Dt,{to:"/dashboard/leave",children:(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Review"})})]})})})]})]})]})},lS=["className"],iS=["className"],oS=["className"],cS=["className"],dS=["className"],uS=["className"],hS=["className"],mS=["className"],pS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,lS);return(0,ds.jsx)("div",{className:"relative w-full overflow-auto",children:(0,ds.jsx)("table",u({ref:t,className:hn("w-full caption-bottom text-sm",s)},a))})});pS.displayName="Table";const fS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,iS);return(0,ds.jsx)("thead",u({ref:t,className:hn("[&_tr]:border-b",s)},a))});fS.displayName="TableHeader";const xS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,oS);return(0,ds.jsx)("tbody",u({ref:t,className:hn("[&_tr:last-child]:border-0",s)},a))});xS.displayName="TableBody";a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,cS);return(0,ds.jsx)("tfoot",u({ref:t,className:hn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s)},a))}).displayName="TableFooter";const vS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,dS);return(0,ds.jsx)("tr",u({ref:t,className:hn("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s)},a))});vS.displayName="TableRow";const gS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,uS);return(0,ds.jsx)("th",u({ref:t,className:hn("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},a))});gS.displayName="TableHead";const yS=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,hS);return(0,ds.jsx)("td",u({ref:t,className:hn("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},a))});yS.displayName="TableCell";a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,mS);return(0,ds.jsx)("caption",u({ref:t,className:hn("mt-4 text-sm text-muted-foreground",s)},a))}).displayName="TableCaption";const jS=["children"],bS=["children"];function wS(e){const t=NS(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,jS),i=a.Children.toArray(n),o=i.find(kS);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function NS(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,bS);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var _S=Symbol("radix.slottable");function kS(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===_S}function SS(e){const t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var CS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ES=a.forwardRef((e,t)=>(0,ds.jsx)(cr.span,u(u({},e),{},{ref:t,style:u(u({},CS),e.style)})));ES.displayName="VisuallyHidden";const TS=["__scopeSelect","disabled"],AS=["__scopeSelect","className","style","children","placeholder"],PS=["__scopeSelect","children"],DS=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],RS=["__scopeSelect","onPlaced"],OS=["__scopeSelect","align","collisionPadding"],MS=["__scopeSelect","nonce"],FS=["__scopeSelect"],LS=["__scopeSelect"],IS=["__scopeSelect","value","disabled","textValue"],zS=["__scopeSelect","className","style"],BS=["__scopeSelect"],US=["__scopeSelect","onAutoScroll"],VS=["__scopeSelect"],HS=["__scopeSelect"],WS=["__scopeSelect","value"];var qS=[" ","Enter","ArrowUp","ArrowDown"],YS=[" ","Enter"],GS="Select",[KS,$S,XS]=gv(GS),[JS,QS]=Kn(GS,[XS,ky]),ZS=ky(),[eC,tC]=JS(GS),[sC,aC]=JS(GS),nC=e=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:r,onOpenChange:l,value:i,defaultValue:o,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:p,required:f,form:x}=e,v=ZS(t),[g,y]=a.useState(null),[j,b]=a.useState(null),[w,N]=a.useState(!1),_=Nv(d),[k,S]=tr({prop:n,defaultProp:null!==r&&void 0!==r&&r,onChange:l,caller:GS}),[C,E]=tr({prop:i,defaultProp:o,onChange:c,caller:GS}),T=a.useRef(null),A=!g||(x||!!g.closest("form")),[P,D]=a.useState(new Set),R=Array.from(P).map(e=>e.props.value).join(";");return(0,ds.jsx)(Uy,u(u({},v),{},{children:(0,ds.jsxs)(eC,{required:f,scope:t,trigger:g,onTriggerChange:y,valueNode:j,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:Zn(),value:C,onValueChange:E,open:k,onOpenChange:S,dir:_,triggerPointerDownPosRef:T,disabled:p,children:[(0,ds.jsx)(KS.Provider,{scope:t,children:(0,ds.jsx)(sC,{scope:e.__scopeSelect,onNativeOptionAdd:a.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:a.useCallback(e=>{D(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:s})}),A?(0,ds.jsxs)(YC,{"aria-hidden":!0,required:f,tabIndex:-1,name:h,autoComplete:m,value:C,onChange:e=>E(e.target.value),disabled:p,form:x,children:[void 0===C?(0,ds.jsx)("option",{value:""}):null,Array.from(P)]},R):null]})}))};nC.displayName=GS;var rC="SelectTrigger",lC=a.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:n=!1}=e,r=l(e,TS),i=ZS(s),o=tC(rC,s),c=o.disabled||n,d=Rs(t,o.onTriggerChange),h=$S(s),m=a.useRef("touch"),[p,f,x]=KC(e=>{const t=h().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),a=$C(t,e,s);void 0!==a&&o.onValueChange(a.value)}),v=e=>{c||(o.onOpenChange(!0),x()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,ds.jsx)(Vy,u(u({asChild:!0},i),{},{children:(0,ds.jsx)(cr.button,u(u({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":GC(o.value)?"":void 0},r),{},{ref:d,onClick:qn(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==m.current&&v(e)}),onPointerDown:qn(r.onPointerDown,e=>{m.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:qn(r.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||qS.includes(e.key)&&(v(),e.preventDefault())})}))}))});lC.displayName=rC;var iC="SelectValue",oC=a.forwardRef((e,t)=>{const{__scopeSelect:s,className:a,style:n,children:r,placeholder:i=""}=e,o=l(e,AS),c=tC(iC,s),{onValueNodeHasChildrenChange:d}=c,h=void 0!==r,m=Rs(t,c.onValueNodeChange);return Xn(()=>{d(h)},[d,h]),(0,ds.jsx)(cr.span,u(u({},o),{},{ref:m,style:{pointerEvents:"none"},children:GC(c.value)?(0,ds.jsx)(ds.Fragment,{children:i}):r}))});oC.displayName=iC;var cC=a.forwardRef((e,t)=>{const{__scopeSelect:s,children:a}=e,n=l(e,PS);return(0,ds.jsx)(cr.span,u(u({"aria-hidden":!0},n),{},{ref:t,children:a||"\u25bc"}))});cC.displayName="SelectIcon";var dC=e=>(0,ds.jsx)(Or,u({asChild:!0},e));dC.displayName="SelectPortal";var uC="SelectContent",hC=a.forwardRef((e,t)=>{const s=tC(uC,e.__scopeSelect),[n,r]=a.useState();if(Xn(()=>{r(new DocumentFragment)},[]),!s.open){const t=n;return t?Vt.createPortal((0,ds.jsx)(pC,{scope:e.__scopeSelect,children:(0,ds.jsx)(KS.Slot,{scope:e.__scopeSelect,children:(0,ds.jsx)("div",{children:e.children})})}),t):null}return(0,ds.jsx)(vC,u(u({},e),{},{ref:t}))});hC.displayName=uC;var mC=10,[pC,fC]=JS(uC),xC=wS("SelectContent.RemoveScroll"),vC=a.forwardRef((e,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:p,collisionBoundary:f,collisionPadding:x,sticky:v,hideWhenDetached:g,avoidCollisions:y}=e,j=l(e,DS),b=tC(uC,s),[w,N]=a.useState(null),[_,k]=a.useState(null),S=Rs(t,e=>N(e)),[C,E]=a.useState(null),[T,A]=a.useState(null),P=$S(s),[D,R]=a.useState(!1),O=a.useRef(!1);a.useEffect(()=>{if(w)return Il(w)},[w]),Ir();const M=a.useCallback(e=>{const[t,...s]=P().map(e=>e.ref.current),[a]=s.slice(-1),n=document.activeElement;for(const r of e){if(r===n)return;if(null===r||void 0===r||r.scrollIntoView({block:"nearest"}),r===t&&_&&(_.scrollTop=0),r===a&&_&&(_.scrollTop=_.scrollHeight),null===r||void 0===r||r.focus(),document.activeElement!==n)return}},[P,_]),F=a.useCallback(()=>M([C,w]),[M,C,w]);a.useEffect(()=>{D&&F()},[D,F]);const{onOpenChange:L,triggerPointerDownPosRef:I}=b;a.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{var s,a,n,r;e={x:Math.abs(Math.round(t.pageX)-(null!==(s=null===(a=I.current)||void 0===a?void 0:a.x)&&void 0!==s?s:0)),y:Math.abs(Math.round(t.pageY)-(null!==(n=null===(r=I.current)||void 0===r?void 0:r.y)&&void 0!==n?n:0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():w.contains(s.target)||L(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[w,L,I]),a.useEffect(()=>{const e=()=>L(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[L]);const[z,B]=KC(e=>{const t=P().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),a=$C(t,e,s);a&&setTimeout(()=>a.ref.current.focus())}),U=a.useCallback((e,t,s)=>{const a=!O.current&&!s;(void 0!==b.value&&b.value===t||a)&&(E(e),a&&(O.current=!0))},[b.value]),V=a.useCallback(()=>null===w||void 0===w?void 0:w.focus(),[w]),H=a.useCallback((e,t,s)=>{const a=!O.current&&!s;(void 0!==b.value&&b.value===t||a)&&A(e)},[b.value]),W="popper"===n?yC:gC,q=W===yC?{side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:p,collisionBoundary:f,collisionPadding:x,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return(0,ds.jsx)(pC,{scope:s,content:w,viewport:_,onViewportChange:k,itemRefCallback:U,selectedItem:C,onItemLeave:V,itemTextRefCallback:H,focusSelectedItem:F,selectedItemText:T,position:n,isPositioned:D,searchRef:z,children:(0,ds.jsx)(Al,{as:xC,allowPinchZoom:!0,children:(0,ds.jsx)(Sr,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:qn(r,e=>{var t;null===(t=b.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,ds.jsx)(gr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:(0,ds.jsx)(W,u(u(u({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault()},j),q),{},{onPlaced:()=>R(!0),ref:S,style:u({display:"flex",flexDirection:"column",outline:"none"},j.style),onKeyDown:qn(j.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,a=t.indexOf(s);t=t.slice(a+1)}setTimeout(()=>M(t)),e.preventDefault()}})}))})})})})});vC.displayName="SelectContentImpl";var gC=a.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:n}=e,r=l(e,RS),i=tC(uC,s),o=fC(uC,s),[c,d]=a.useState(null),[h,m]=a.useState(null),p=Rs(t,e=>m(e)),f=$S(s),x=a.useRef(!1),v=a.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:j,focusSelectedItem:b}=o,w=a.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&g&&y&&j){const e=i.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),a=j.getBoundingClientRect();if("rtl"!==i.dir){const n=a.left-t.left,r=s.left-n,l=e.left-r,i=e.width+l,o=Math.max(i,t.width),d=window.innerWidth-mC,u=hN(r,[mC,Math.max(mC,d-o)]);c.style.minWidth=i+"px",c.style.left=u+"px"}else{const n=t.right-a.right,r=window.innerWidth-s.right-n,l=window.innerWidth-e.right-r,i=e.width+l,o=Math.max(i,t.width),d=window.innerWidth-mC,u=hN(r,[mC,Math.max(mC,d-o)]);c.style.minWidth=i+"px",c.style.right=u+"px"}const r=f(),l=window.innerHeight-2*mC,o=g.scrollHeight,d=window.getComputedStyle(h),u=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),p=parseInt(d.borderBottomWidth,10),v=u+m+o+parseInt(d.paddingBottom,10)+p,b=Math.min(5*y.offsetHeight,v),w=window.getComputedStyle(g),N=parseInt(w.paddingTop,10),_=parseInt(w.paddingBottom,10),k=e.top+e.height/2-mC,S=l-k,C=y.offsetHeight/2,E=u+m+(y.offsetTop+C),T=v-E;if(E<=k){const e=r.length>0&&y===r[r.length-1].ref.current;c.style.bottom="0px";const t=h.clientHeight-g.offsetTop-g.offsetHeight,s=E+Math.max(S,C+(e?_:0)+t+p);c.style.height=s+"px"}else{const e=r.length>0&&y===r[0].ref.current;c.style.top="0px";const t=Math.max(k,u+g.offsetTop+(e?N:0)+C)+T;c.style.height=t+"px",g.scrollTop=E-k+g.offsetTop}c.style.margin="".concat(mC,"px 0"),c.style.minHeight=b+"px",c.style.maxHeight=l+"px",null===n||void 0===n||n(),requestAnimationFrame(()=>x.current=!0)}},[f,i.trigger,i.valueNode,c,h,g,y,j,i.dir,n]);Xn(()=>w(),[w]);const[N,_]=a.useState();Xn(()=>{h&&_(window.getComputedStyle(h).zIndex)},[h]);const k=a.useCallback(e=>{e&&!0===v.current&&(w(),null===b||void 0===b||b(),v.current=!1)},[w,b]);return(0,ds.jsx)(jC,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:k,children:(0,ds.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:(0,ds.jsx)(cr.div,u(u({},r),{},{ref:p,style:u({boxSizing:"border-box",maxHeight:"100%"},r.style)}))})})});gC.displayName="SelectItemAlignedPosition";var yC=a.forwardRef((e,t)=>{const{__scopeSelect:s,align:a="start",collisionPadding:n=mC}=e,r=l(e,OS),i=ZS(s);return(0,ds.jsx)(Hy,u(u(u({},i),r),{},{ref:t,align:a,collisionPadding:n,style:u(u({boxSizing:"border-box"},r.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});yC.displayName="SelectPopperPosition";var[jC,bC]=JS(uC,{}),wC="SelectViewport",NC=a.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:n}=e,r=l(e,MS),i=fC(wC,s),o=bC(wC,s),c=Rs(t,i.onViewportChange),d=a.useRef(0);return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,ds.jsx)(KS.Slot,{scope:s,children:(0,ds.jsx)(cr.div,u(u({"data-radix-select-viewport":"",role:"presentation"},r),{},{ref:c,style:u({position:"relative",flex:1,overflow:"hidden auto"},r.style),onScroll:qn(r.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:a}=o;if(null!==a&&void 0!==a&&a.current&&s){const e=Math.abs(d.current-t.scrollTop);if(e>0){const a=window.innerHeight-2*mC,n=parseFloat(s.style.minHeight),r=parseFloat(s.style.height),l=Math.max(n,r);if(l<a){const n=l+e,r=Math.min(a,n),i=n-r;s.style.height=r+"px","0px"===s.style.bottom&&(t.scrollTop=i>0?i:0,s.style.justifyContent="flex-end")}}}d.current=t.scrollTop})}))})]})});NC.displayName=wC;var _C="SelectGroup",[kC,SC]=JS(_C),CC=a.forwardRef((e,t)=>{const{__scopeSelect:s}=e,a=l(e,FS),n=Zn();return(0,ds.jsx)(kC,{scope:s,id:n,children:(0,ds.jsx)(cr.div,u(u({role:"group","aria-labelledby":n},a),{},{ref:t}))})});CC.displayName=_C;var EC="SelectLabel",TC=a.forwardRef((e,t)=>{const{__scopeSelect:s}=e,a=l(e,LS),n=SC(EC,s);return(0,ds.jsx)(cr.div,u(u({id:n.id},a),{},{ref:t}))});TC.displayName=EC;var AC="SelectItem",[PC,DC]=JS(AC),RC=a.forwardRef((e,t)=>{const{__scopeSelect:s,value:n,disabled:r=!1,textValue:i}=e,o=l(e,IS),c=tC(AC,s),d=fC(AC,s),h=c.value===n,[m,p]=a.useState(null!==i&&void 0!==i?i:""),[f,x]=a.useState(!1),v=Rs(t,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,n,r)}),g=Zn(),y=a.useRef("touch"),j=()=>{r||(c.onValueChange(n),c.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,ds.jsx)(PC,{scope:s,value:n,disabled:r,textId:g,isSelected:h,onItemTextChange:a.useCallback(e=>{p(t=>{var s;return t||(null!==(s=null===e||void 0===e?void 0:e.textContent)&&void 0!==s?s:"").trim()})},[]),children:(0,ds.jsx)(KS.ItemSlot,{scope:s,value:n,disabled:r,textValue:m,children:(0,ds.jsx)(cr.div,u(u({role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":h&&f,"data-state":h?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o),{},{ref:v,onFocus:qn(o.onFocus,()=>x(!0)),onBlur:qn(o.onBlur,()=>x(!1)),onClick:qn(o.onClick,()=>{"mouse"!==y.current&&j()}),onPointerUp:qn(o.onPointerUp,()=>{"mouse"===y.current&&j()}),onPointerDown:qn(o.onPointerDown,e=>{y.current=e.pointerType}),onPointerMove:qn(o.onPointerMove,e=>{var t;(y.current=e.pointerType,r)?null===(t=d.onItemLeave)||void 0===t||t.call(d):"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qn(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null===(t=d.onItemLeave)||void 0===t||t.call(d))}),onKeyDown:qn(o.onKeyDown,e=>{var t;""!==(null===(t=d.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(YS.includes(e.key)&&j()," "===e.key&&e.preventDefault())})}))})})});RC.displayName=AC;var OC="SelectItemText",MC=a.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:r}=e,i=l(e,zS),o=tC(OC,s),c=fC(OC,s),d=DC(OC,s),h=aC(OC,s),[m,p]=a.useState(null),f=Rs(t,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=c.itemTextRefCallback)||void 0===t?void 0:t.call(c,e,d.value,d.disabled)}),x=null===m||void 0===m?void 0:m.textContent,v=a.useMemo(()=>(0,ds.jsx)("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=h;return Xn(()=>(g(v),()=>y(v)),[g,y,v]),(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(cr.span,u(u({id:d.textId},i),{},{ref:f})),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Vt.createPortal(i.children,o.valueNode):null]})});MC.displayName=OC;var FC="SelectItemIndicator",LC=a.forwardRef((e,t)=>{const{__scopeSelect:s}=e,a=l(e,BS);return DC(FC,s).isSelected?(0,ds.jsx)(cr.span,u(u({"aria-hidden":!0},a),{},{ref:t})):null});LC.displayName=FC;var IC="SelectScrollUpButton",zC=a.forwardRef((e,t)=>{const s=fC(IC,e.__scopeSelect),n=bC(IC,e.__scopeSelect),[r,l]=a.useState(!1),i=Rs(t,n.onScrollButtonChange);return Xn(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollTop>0;l(e)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,ds.jsx)(VC,u(u({},e),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});zC.displayName=IC;var BC="SelectScrollDownButton",UC=a.forwardRef((e,t)=>{const s=fC(BC,e.__scopeSelect),n=bC(BC,e.__scopeSelect),[r,l]=a.useState(!1),i=Rs(t,n.onScrollButtonChange);return Xn(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;l(s)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,ds.jsx)(VC,u(u({},e),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});UC.displayName=BC;var VC=a.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:n}=e,r=l(e,US),i=fC("SelectScrollButton",s),o=a.useRef(null),c=$S(s),d=a.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),Xn(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[c]),(0,ds.jsx)(cr.div,u(u({"aria-hidden":!0},r),{},{ref:t,style:u({flexShrink:0},r.style),onPointerDown:qn(r.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:qn(r.onPointerMove,()=>{var e;null===(e=i.onItemLeave)||void 0===e||e.call(i),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:qn(r.onPointerLeave,()=>{d()})}))}),HC=a.forwardRef((e,t)=>{const{__scopeSelect:s}=e,a=l(e,VS);return(0,ds.jsx)(cr.div,u(u({"aria-hidden":!0},a),{},{ref:t}))});HC.displayName="SelectSeparator";var WC="SelectArrow",qC=a.forwardRef((e,t)=>{const{__scopeSelect:s}=e,a=l(e,HS),n=ZS(s),r=tC(WC,s),i=fC(WC,s);return r.open&&"popper"===i.position?(0,ds.jsx)(Wy,u(u(u({},n),a),{},{ref:t})):null});qC.displayName=WC;var YC=a.forwardRef((e,t)=>{let{__scopeSelect:s,value:n}=e,r=l(e,WS);const i=a.useRef(null),o=Rs(t,i),c=SS(n);return a.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(c!==n&&s){const t=new Event("change",{bubbles:!0});s.call(e,n),e.dispatchEvent(t)}},[c,n]),(0,ds.jsx)(cr.select,u(u({},r),{},{style:u(u({},CS),r.style),ref:o,defaultValue:n}))});function GC(e){return""===e||void 0===e}function KC(e){const t=ur(e),s=a.useRef(""),n=a.useRef(0),r=a.useCallback(e=>{const a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),l=a.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,r,l]}function $C(e,t,s){const a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=s?e.indexOf(s):-1;let r=(l=e,i=Math.max(n,0),l.map((e,t)=>l[(i+t)%l.length]));var l,i;1===a.length&&(r=r.filter(e=>e!==s));const o=r.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return o!==s?o:void 0}YC.displayName="SelectBubbleInput";var XC=nC,JC=lC,QC=oC,ZC=cC,eE=dC,tE=hC,sE=NC,aE=TC,nE=RC,rE=MC,lE=LC,iE=zC,oE=UC,cE=HC;const dE=Yi("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),uE=Yi("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),hE=["className","children"],mE=["className"],pE=["className"],fE=["className","children","position"],xE=["className"],vE=["className","children"],gE=["className"],yE=XC,jE=QC,bE=a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=l(e,hE);return(0,ds.jsxs)(JC,u(u({ref:t,className:hn("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s)},n),{},{children:[a,(0,ds.jsx)(ZC,{asChild:!0,children:(0,ds.jsx)(dE,{className:"h-4 w-4 opacity-50"})})]}))});bE.displayName=JC.displayName;const wE=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,mE);return(0,ds.jsx)(iE,u(u({ref:t,className:hn("flex cursor-default items-center justify-center py-1",s)},a),{},{children:(0,ds.jsx)(uE,{className:"h-4 w-4"})}))});wE.displayName=iE.displayName;const NE=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,pE);return(0,ds.jsx)(oE,u(u({ref:t,className:hn("flex cursor-default items-center justify-center py-1",s)},a),{},{children:(0,ds.jsx)(dE,{className:"h-4 w-4"})}))});NE.displayName=oE.displayName;const _E=a.forwardRef((e,t)=>{let{className:s,children:a,position:n="popper"}=e,r=l(e,fE);return(0,ds.jsx)(eE,{children:(0,ds.jsxs)(tE,u(u({ref:t,className:hn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n},r),{},{children:[(0,ds.jsx)(wE,{}),(0,ds.jsx)(sE,{className:hn("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,ds.jsx)(NE,{})]}))})});_E.displayName=tE.displayName;a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,xE);return(0,ds.jsx)(aE,u({ref:t,className:hn("px-2 py-1.5 text-sm font-semibold",s)},a))}).displayName=aE.displayName;const kE=a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=l(e,vE);return(0,ds.jsxs)(nE,u(u({ref:t,className:hn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},n),{},{children:[(0,ds.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,ds.jsx)(lE,{children:(0,ds.jsx)(Xw,{className:"h-4 w-4"})})}),(0,ds.jsx)(rE,{children:a})]}))});kE.displayName=nE.displayName;a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,gE);return(0,ds.jsx)(cE,u({ref:t,className:hn("-mx-1 my-1 h-px bg-muted",s)},a))}).displayName=cE.displayName;const SE=Yi("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),CE=Yi("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),EE=Yi("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),TE=Yi("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),AE=Yi("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),PE=Yi("user-check",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),DE=Yi("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var RE=Symbol("radix.slottable");function OE(e){const t=e=>{let{children:t}=e;return(0,ds.jsx)(ds.Fragment,{children:t})};return t.displayName="".concat(e,".Slottable"),t.__radixId=RE,t}const ME=["__scopeAlertDialog"],FE=["__scopeAlertDialog"],LE=["__scopeAlertDialog"],IE=["__scopeAlertDialog"],zE=["__scopeAlertDialog","children"],BE=["__scopeAlertDialog"],UE=["__scopeAlertDialog"],VE=["__scopeAlertDialog"],HE=["__scopeAlertDialog"];var WE="AlertDialog",[qE,YE]=Kn(WE,[ti]),GE=ti(),KE=e=>{const{__scopeAlertDialog:t}=e,s=l(e,ME),a=GE(t);return(0,ds.jsx)(Di,u(u(u({},a),s),{},{modal:!0}))};KE.displayName=WE;var $E=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,FE),n=GE(s);return(0,ds.jsx)(Ri,u(u(u({},n),a),{},{ref:t}))});$E.displayName="AlertDialogTrigger";var XE=e=>{const{__scopeAlertDialog:t}=e,s=l(e,LE),a=GE(t);return(0,ds.jsx)(Oi,u(u({},a),s))};XE.displayName="AlertDialogPortal";var JE=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,IE),n=GE(s);return(0,ds.jsx)(Mi,u(u(u({},n),a),{},{ref:t}))});JE.displayName="AlertDialogOverlay";var QE="AlertDialogContent",[ZE,eT]=qE(QE),tT=OE("AlertDialogContent"),sT=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:n}=e,r=l(e,zE),i=GE(s),o=a.useRef(null),c=Rs(t,o),d=a.useRef(null);return(0,ds.jsx)(Ei,{contentName:QE,titleName:aT,docsSlug:"alert-dialog",children:(0,ds.jsx)(ZE,{scope:s,cancelRef:d,children:(0,ds.jsxs)(Fi,u(u(u({role:"alertdialog"},i),r),{},{ref:c,onOpenAutoFocus:qn(r.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=d.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,ds.jsx)(tT,{children:n}),(0,ds.jsx)(dT,{contentRef:o})]}))})})});sT.displayName=QE;var aT="AlertDialogTitle",nT=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,BE),n=GE(s);return(0,ds.jsx)(Li,u(u(u({},n),a),{},{ref:t}))});nT.displayName=aT;var rT="AlertDialogDescription",lT=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,UE),n=GE(s);return(0,ds.jsx)(Ii,u(u(u({},n),a),{},{ref:t}))});lT.displayName=rT;var iT=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,VE),n=GE(s);return(0,ds.jsx)(zi,u(u(u({},n),a),{},{ref:t}))});iT.displayName="AlertDialogAction";var oT="AlertDialogCancel",cT=a.forwardRef((e,t)=>{const{__scopeAlertDialog:s}=e,a=l(e,HE),{cancelRef:n}=eT(oT,s),r=GE(s),i=Rs(t,n);return(0,ds.jsx)(zi,u(u(u({},r),a),{},{ref:i}))});cT.displayName=oT;var dT=e=>{let{contentRef:t}=e;const s="`".concat(QE,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(QE,"` by passing a `").concat(rT,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(QE,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},uT=JE,hT=sT,mT=iT,pT=cT,fT=nT,xT=lT;const vT=["className"],gT=["className"],yT=["className"],jT=["className"],bT=["className"],wT=["className"],NT=["className"],_T=["className"],kT=KE,ST=XE,CT=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,vT);return(0,ds.jsx)(uT,u(u({className:hn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},a),{},{ref:t}))});CT.displayName=uT.displayName;const ET=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,gT);return(0,ds.jsxs)(ST,{children:[(0,ds.jsx)(CT,{}),(0,ds.jsx)(hT,u({ref:t,className:hn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},a))]})});ET.displayName=hT.displayName;const TT=e=>{let{className:t}=e,s=l(e,yT);return(0,ds.jsx)("div",u({className:hn("flex flex-col space-y-2 text-center sm:text-left",t)},s))};TT.displayName="AlertDialogHeader";const AT=e=>{let{className:t}=e,s=l(e,jT);return(0,ds.jsx)("div",u({className:hn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},s))};AT.displayName="AlertDialogFooter";const PT=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,bT);return(0,ds.jsx)(fT,u({ref:t,className:hn("text-lg font-semibold",s)},a))});PT.displayName=fT.displayName;const DT=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,wT);return(0,ds.jsx)(xT,u({ref:t,className:hn("text-sm text-muted-foreground",s)},a))});DT.displayName=xT.displayName;const RT=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,NT);return(0,ds.jsx)(mT,u({ref:t,className:hn(pn(),s)},a))});RT.displayName=mT.displayName;const OT=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,_T);return(0,ds.jsx)(pT,u({ref:t,className:hn(pn({variant:"outline"}),"mt-2 sm:mt-0",s)},a))});OT.displayName=pT.displayName;const MT="https://shardahrms.com/api",FT=()=>{const e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}},LT=()=>{var e,t,s,n;const{user:r}=Cs(),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)(""),[f,x]=(0,a.useState)("all"),[v,g]=(0,a.useState)("active"),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)({open:!1,employee:null,permanent:!1}),[N,_]=(0,a.useState)({first_name:"",last_name:"",email:"",phone:"",department_id:"",employment_type:"management"}),k="super_admin"===(null===r||void 0===r?void 0:r.role)||"hr_admin"===(null===r||void 0===r?void 0:r.role)||"hr_executive"===(null===r||void 0===r?void 0:r.role);(0,a.useEffect)(()=>{S()},[f,v]);const S=async()=>{try{let e="".concat(MT,"/employees?");"all"!==f&&(e+="department_id=".concat(f,"&")),e+="all"!==v?"status=".concat(v,"&"):"include_inactive=true&";const t=FT(),[s,a]=await Promise.all([fetch(e,{credentials:"include",headers:t}),fetch("".concat(MT,"/departments"),{credentials:"include",headers:t})]);if(s.ok){const e=await s.json();i(e)}if(a.ok){const e=await a.json();c(e)}}catch(e){console.error("Error fetching data:",e),ts.error("Failed to load employee data")}finally{h(!1)}},C=e=>{const t=o.find(t=>t.department_id===e);return(null===t||void 0===t?void 0:t.name)||"Unassigned"},E=l.filter(e=>{var t;const s="".concat(e.first_name," ").concat(e.last_name).toLowerCase(),a=(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())||"",n=m.toLowerCase();return s.includes(n)||a.includes(n)}),T={active:"bg-emerald-50 text-emerald-700 border-emerald-200",inactive:"bg-slate-100 text-slate-600 border-slate-200",terminated:"bg-red-50 text-red-700 border-red-200",resigned:"bg-amber-50 text-amber-700 border-amber-200"};return d?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"employee-directory-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Employees"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Employee Directory"}),(0,ds.jsxs)("p",{className:"text-slate-600 mt-1",children:[l.length," employees in the organization"]}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),k&&(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2",onClick:()=>{try{const e=["Employee Code","First Name","Last Name","Email","Phone","Department","Designation","Employment Type","Status","Join Date"],t=E.map(e=>[e.employee_code||e.employee_id,e.first_name||"",e.last_name||"",e.email||"",e.phone||"",e.department||"",e.designation||"",e.employment_type||"",e.status||"active",e.join_date||""]),s=[e.join(","),...t.map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),r=URL.createObjectURL(a);n.setAttribute("href",r),n.setAttribute("download","employees_export_".concat((new Date).toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),ts.success("Exported ".concat(E.length," employees"))}catch(e){ts.error("Failed to export employees")}},children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export"]}),(0,ds.jsxs)(eo,{open:y,onOpenChange:j,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"add-employee-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Employee"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add New Employee"}),(0,ds.jsx)(oo,{children:"Enter the basic details of the new employee"})]}),(0,ds.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"first_name",children:"First Name"}),(0,ds.jsx)(vn,{id:"first_name",value:N.first_name,onChange:e=>_(u(u({},N),{},{first_name:e.target.value})),placeholder:"John","data-testid":"input-first-name"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"last_name",children:"Last Name"}),(0,ds.jsx)(vn,{id:"last_name",value:N.last_name,onChange:e=>_(u(u({},N),{},{last_name:e.target.value})),placeholder:"Doe","data-testid":"input-last-name"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"email",children:"Email"}),(0,ds.jsx)(vn,{id:"email",type:"email",value:N.email,onChange:e=>_(u(u({},N),{},{email:e.target.value})),placeholder:"john.doe@company.com","data-testid":"input-email"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"phone",children:"Phone"}),(0,ds.jsx)(vn,{id:"phone",value:N.phone,onChange:e=>_(u(u({},N),{},{phone:e.target.value})),placeholder:"+91 98765 43210","data-testid":"input-phone"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"department",children:"Department"}),(0,ds.jsxs)(yE,{value:N.department_id,onValueChange:e=>_(u(u({},N),{},{department_id:e})),children:[(0,ds.jsx)(bE,{"data-testid":"select-department",children:(0,ds.jsx)(jE,{placeholder:"Select department"})}),(0,ds.jsx)(_E,{children:o.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{htmlFor:"type",children:"Employment Type"}),(0,ds.jsxs)(yE,{value:N.employment_type,onValueChange:e=>_(u(u({},N),{},{employment_type:e})),children:[(0,ds.jsx)(bE,{"data-testid":"select-type",children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"management",children:"Management"}),(0,ds.jsx)(kE,{value:"labour",children:"Labour"}),(0,ds.jsx)(kE,{value:"contract",children:"Contract"})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{try{const e=await fetch("".concat(MT,"/employees"),{method:"POST",headers:u({"Content-Type":"application/json"},FT()),credentials:"include",body:JSON.stringify(N)});if(e.ok)ts.success("Employee added successfully"),j(!1),_({first_name:"",last_name:"",email:"",phone:"",department_id:"",employment_type:"management"}),S();else{const t=await e.json();ts.error(t.detail||"Failed to add employee")}}catch(e){ts.error("Failed to add employee")}},"data-testid":"submit-employee-btn",children:"Add Employee"})]})]})]})]})]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ds.jsxs)("div",{className:"relative flex-1",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by name or email...",value:m,onChange:e=>p(e.target.value),className:"pl-10","data-testid":"search-employees"})]}),(0,ds.jsxs)(yE,{value:f,onValueChange:x,children:[(0,ds.jsxs)(bE,{className:"w-full sm:w-48","data-testid":"filter-department",children:[(0,ds.jsx)(F_,{className:"w-4 h-4 mr-2 text-slate-400"}),(0,ds.jsx)(jE,{placeholder:"All Departments"})]}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Departments"}),o.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))]})]}),(0,ds.jsxs)(yE,{value:v,onValueChange:g,children:[(0,ds.jsxs)(bE,{className:"w-full sm:w-40","data-testid":"filter-status",children:[(0,ds.jsx)(EE,{className:"w-4 h-4 mr-2 text-slate-400"}),(0,ds.jsx)(jE,{placeholder:"All Status"})]}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"active",children:"Active"}),(0,ds.jsx)(kE,{value:"inactive",children:"Inactive"}),(0,ds.jsx)(kE,{value:"resigned",children:"Resigned"})]})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{className:"w-[300px]",children:"Employee"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{children:"Contact"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:E.length>0?E.map(e=>{return(0,ds.jsxs)(vS,{className:"hover:bg-slate-50/50","data-testid":"employee-row-".concat(e.employee_id),children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)(av,{className:"h-10 w-10",children:(0,ds.jsx)(rv,{className:"bg-primary/10 text-primary font-medium",children:(t=e.first_name,s=e.last_name,"".concat((null===t||void 0===t?void 0:t[0])||"").concat((null===s||void 0===s?void 0:s[0])||"").toUpperCase())})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-slate-900",children:[e.first_name," ",e.last_name]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:e.emp_code||e.employee_id})]})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(F_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("span",{className:"text-slate-700",children:C(e.department_id)})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",className:"capitalize",children:e.employment_type})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,ds.jsx)(_x,{className:"w-3.5 h-3.5"}),(0,ds.jsx)("span",{className:"truncate max-w-[150px]",children:e.email})]}),e.phone&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,ds.jsx)(TE,{className:"w-3.5 h-3.5"}),(0,ds.jsx)("span",{children:e.phone})]})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:T[e.status]||T.active,children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,ds.jsx)(Dt,{to:"/dashboard/employees/".concat(e.employee_id),children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm","data-testid":"view-employee-".concat(e.employee_id),children:"View"})}),k&&(0,ds.jsxs)(lN,{children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,ds.jsx)(AE,{className:"h-4 w-4"})})}),(0,ds.jsxs)(oN,{align:"end",children:["inactive"!==e.status&&e.is_active?(0,ds.jsxs)(cN,{onClick:()=>w({open:!0,employee:e,permanent:!1}),className:"text-amber-600",children:[(0,ds.jsx)(DE,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):(0,ds.jsxs)(cN,{onClick:()=>(async e=>{try{const t=await fetch("".concat(MT,"/employees/").concat(e.employee_id,"/activate"),{method:"POST",credentials:"include",headers:FT()});if(t.ok)ts.success("Employee activated"),S();else{const e=await t.json();ts.error(e.detail||"Failed to activate employee")}}catch(t){ts.error("Failed to activate employee")}})(e),children:[(0,ds.jsx)(PE,{className:"w-4 h-4 mr-2 text-green-600"}),"Activate"]}),(0,ds.jsxs)(cN,{onClick:()=>w({open:!0,employee:e,permanent:!0}),className:"text-red-600",children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})})]},e.employee_id);var t,s}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:6,className:"h-32 text-center",children:(0,ds.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-10 h-10 text-slate-300"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No employees found"}),k&&(0,ds.jsx)(fn,{size:"sm",onClick:()=>j(!0),children:"Add First Employee"})]})})})})]})})}),(0,ds.jsx)(kT,{open:b.open,onOpenChange:e=>!e&&w({open:!1,employee:null,permanent:!1}),children:(0,ds.jsxs)(ET,{children:[(0,ds.jsxs)(TT,{children:[(0,ds.jsx)(PT,{children:b.permanent?"Delete Employee Permanently?":"Deactivate Employee?"}),(0,ds.jsx)(DT,{children:b.permanent?(0,ds.jsxs)(ds.Fragment,{children:["This will ",(0,ds.jsx)("strong",{children:"permanently delete"})," ",null===(e=b.employee)||void 0===e?void 0:e.first_name," ",null===(t=b.employee)||void 0===t?void 0:t.last_name," and their user account. This action cannot be undone."]}):(0,ds.jsxs)(ds.Fragment,{children:["This will deactivate ",null===(s=b.employee)||void 0===s?void 0:s.first_name," ",null===(n=b.employee)||void 0===n?void 0:n.last_name,". They will no longer appear in the active employee list and won't be able to login. You can reactivate them later."]})})]}),(0,ds.jsxs)(AT,{children:[(0,ds.jsx)(OT,{children:"Cancel"}),(0,ds.jsx)(RT,{onClick:async()=>{if(b.employee)try{const e="".concat(MT,"/employees/").concat(b.employee.employee_id).concat(b.permanent?"?permanent=true":""),t=await fetch(e,{method:"DELETE",credentials:"include",headers:FT()});if(t.ok)ts.success(b.permanent?"Employee permanently deleted":"Employee deactivated"),S();else{const e=await t.json();ts.error(e.detail||"Failed to delete employee")}}catch(e){ts.error("Failed to delete employee")}finally{w({open:!1,employee:null,permanent:!1})}},className:b.permanent?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700",children:b.permanent?"Delete Permanently":"Deactivate"})]})]})})]})},IT=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],zT=["__scopeTabs","loop"],BT=["__scopeTabs","value","disabled"],UT=["__scopeTabs","value","forceMount","children"];var VT="Tabs",[HT,WT]=Kn(VT,[ej]),qT=ej(),[YT,GT]=HT(VT),KT=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,onValueChange:n,defaultValue:r,orientation:i="horizontal",dir:o,activationMode:c="automatic"}=e,d=l(e,IT),h=Nv(o),[m,p]=tr({prop:a,onChange:n,defaultProp:null!==r&&void 0!==r?r:"",caller:VT});return(0,ds.jsx)(YT,{scope:s,baseId:Zn(),value:m,onValueChange:p,orientation:i,dir:h,activationMode:c,children:(0,ds.jsx)(cr.div,u(u({dir:h,"data-orientation":i},d),{},{ref:t}))})});KT.displayName=VT;var $T="TabsList",XT=a.forwardRef((e,t)=>{const{__scopeTabs:s,loop:a=!0}=e,n=l(e,zT),r=GT($T,s),i=qT(s);return(0,ds.jsx)(cj,u(u({asChild:!0},i),{},{orientation:r.orientation,dir:r.dir,loop:a,children:(0,ds.jsx)(cr.div,u(u({role:"tablist","aria-orientation":r.orientation},n),{},{ref:t}))}))});XT.displayName=$T;var JT="TabsTrigger",QT=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,disabled:n=!1}=e,r=l(e,BT),i=GT(JT,s),o=qT(s),c=tA(i.baseId,a),d=sA(i.baseId,a),h=a===i.value;return(0,ds.jsx)(dj,u(u({asChild:!0},o),{},{focusable:!n,active:h,children:(0,ds.jsx)(cr.button,u(u({type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c},r),{},{ref:t,onMouseDown:qn(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:qn(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:qn(e.onFocus,()=>{const e="manual"!==i.activationMode;h||n||!e||i.onValueChange(a)})}))}))});QT.displayName=JT;var ZT="TabsContent",eA=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:r,children:i}=e,o=l(e,UT),c=GT(ZT,s),d=tA(c.baseId,n),h=sA(c.baseId,n),m=n===c.value,p=a.useRef(m);return a.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,ds.jsx)(Mr,{present:r||m,children:s=>{let{present:a}=s;return(0,ds.jsx)(cr.div,u(u({"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!a,id:h,tabIndex:0},o),{},{ref:t,style:u(u({},e.style),{},{animationDuration:p.current?"0s":void 0}),children:a&&i}))}})});function tA(e,t){return"".concat(e,"-trigger-").concat(t)}function sA(e,t){return"".concat(e,"-content-").concat(t)}eA.displayName=ZT;var aA=XT,nA=QT,rA=eA;const lA=["className"],iA=["className"],oA=["className"],cA=KT,dA=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,lA);return(0,ds.jsx)(aA,u({ref:t,className:hn("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s)},a))});dA.displayName=aA.displayName;const uA=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,iA);return(0,ds.jsx)(nA,u({ref:t,className:hn("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s)},a))});uA.displayName=nA.displayName;const hA=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,oA);return(0,ds.jsx)(rA,u({ref:t,className:hn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},a))});hA.displayName=rA.displayName;const mA=Yi("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),pA=Yi("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),fA=Yi("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),xA=Yi("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vA=Yi("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),gA=Yi("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),yA="https://shardahrms.com/api",jA=()=>{const{id:e}=Ee(),[t,s]=(0,a.useState)(null),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({}),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)((new Date).getMonth()+1),[N,_]=(0,a.useState)((new Date).getFullYear()),[k,S]=(0,a.useState)(null),[C,E]=(0,a.useState)([]),[T,A]=(0,a.useState)([]),[P,D]=(0,a.useState)(!1),[R,O]=(0,a.useState)({name:"",type:"",description:"",file:null}),[M,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{L()},[e]),(0,a.useEffect)(()=>{t&&I()},[t,b,N]);const L=async()=>{try{const t=nk(),[a,n,l]=await Promise.all([fetch("".concat(yA,"/employees/").concat(e),{credentials:"include",headers:t}),fetch("".concat(yA,"/departments"),{credentials:"include",headers:t}),fetch("".concat(yA,"/designations"),{credentials:"include",headers:t})]);if(a.ok){const e=await a.json();s(e),z(e.employee_id,e.emp_code),B(e.employee_id)}else ts.error("Employee not found");n.ok&&r(await n.json()),l.ok&&i(await l.json());const o=await fetch("".concat(yA,"/document-types"),{credentials:"include",headers:t});o.ok&&A(await o.json())}catch(t){console.error("Error fetching employee:",t),ts.error("Failed to load employee data")}finally{c(!1)}},I=async()=>{if(t){j(!0);try{const e=nk(),s=t.employee_id||t.emp_code;let a=await fetch("".concat(yA,"/attendance?employee_id=").concat(s,"&month=").concat(b,"&year=").concat(N),{credentials:"include",headers:e});if(a.ok){let n=await a.json();0===n.length&&t.emp_code&&t.emp_code!==s&&(a=await fetch("".concat(yA,"/attendance?employee_id=").concat(t.emp_code,"&month=").concat(b,"&year=").concat(N),{credentials:"include",headers:e}),a.ok&&(n=await a.json())),g(n)}}catch(e){console.error("Error fetching attendance:",e)}finally{j(!1)}}},z=async(e,t)=>{try{const s=nk();let a=await fetch("".concat(yA,"/employee-assets/").concat(t||e),{credentials:"include",headers:s}),n=null;a.ok&&(n=await a.json());const r=await fetch("".concat(yA,"/assets?search=").concat(t),{credentials:"include",headers:s});let l=[];if(r.ok){l=((await r.json()).assets||[]).filter(e=>e.emp_code===t&&"assigned"===e.status)}S(u(u({},n),{},{assigned_items:l}))}catch(s){console.error("Error fetching assets:",s)}},B=async e=>{try{const t=nk(),s=await fetch("".concat(yA,"/documents?employee_id=").concat(e),{credentials:"include",headers:t});if(s.ok){const e=await s.json();E(Array.isArray(e)?e:[])}}catch(t){console.error("Error fetching documents:",t)}},U=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"present":return"bg-emerald-100 text-emerald-700";case"absent":return"bg-red-100 text-red-700";case"wfh":return"bg-blue-100 text-blue-700";case"leave":return"bg-amber-100 text-amber-700";case"half_day":case"hd":return"bg-orange-100 text-orange-700";case"holiday":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-600"}},V={present:v.filter(e=>"present"===e.status).length,absent:v.filter(e=>"absent"===e.status).length,wfh:v.filter(e=>"wfh"===e.status).length,leave:v.filter(e=>"leave"===e.status).length,late:v.filter(e=>e.is_late).length},H=[];for(let a=1;a<=12;a++)H.push({value:a,label:new Date(2e3,a-1).toLocaleString("default",{month:"long"})});const W=[],q=(new Date).getFullYear();for(let a=q;a>=q-3;a--)W.push(a);const Y=e=>{const t=n.find(t=>t.department_id===e);return(null===t||void 0===t?void 0:t.name)||"Unassigned"},G=e=>{const t=l.find(t=>t.designation_id===e);return(null===t||void 0===t?void 0:t.name)||"Not Assigned"},K=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A";return o?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):t?(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"employee-profile-page",children:[(0,ds.jsxs)(Dt,{to:"/dashboard/employees",className:"inline-flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900",children:[(0,ds.jsx)(mA,{className:"w-4 h-4"}),"Back to Directory"]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,ds.jsx)(av,{className:"h-24 w-24 mx-auto md:mx-0",children:(0,ds.jsx)(rv,{className:"bg-primary text-white text-2xl font-semibold",children:($=t.first_name,X=t.last_name,"".concat((null===$||void 0===$?void 0:$[0])||"").concat((null===X||void 0===X?void 0:X[0])||"").toUpperCase())})}),(0,ds.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,ds.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-2",children:[(0,ds.jsxs)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:[t.first_name," ",t.last_name]}),(0,ds.jsx)(tk,{className:"active"===t.status?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600",children:t.status})]}),(0,ds.jsxs)("p",{className:"text-slate-600 mb-4",children:[G(t.designation_id)," \u2022 ",Y(t.department_id)]}),(0,ds.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 text-sm",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(_x,{className:"w-4 h-4"}),t.email]}),t.phone&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(TE,{className:"w-4 h-4"}),t.phone]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),(0,ds.jsx)("span",{className:"capitalize",children:t.employment_type})]})]})]}),(0,ds.jsx)("div",{className:"flex justify-center md:justify-end",children:(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2","data-testid":"edit-employee-btn",onClick:()=>{var e,s;p({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"",date_of_birth:(null===(e=t.date_of_birth)||void 0===e?void 0:e.split(" ")[0])||(null===(s=t.date_of_birth)||void 0===s?void 0:s.split("T")[0])||"",gender:t.gender||"",address:t.address||"",city:t.city||"",state:t.state||"",pincode:t.pincode||"",department_id:t.department_id||"",designation_id:t.designation_id||"",emergency_contact_name:t.emergency_contact_name||"",emergency_contact_phone:t.emergency_contact_phone||""}),h(!0)},children:[(0,ds.jsx)(pA,{className:"w-4 h-4"}),"Edit Profile"]})})]})})}),(0,ds.jsxs)(cA,{defaultValue:"personal",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border flex-wrap h-auto gap-1",children:[(0,ds.jsx)(uA,{value:"personal","data-testid":"tab-personal",children:"Personal"}),(0,ds.jsx)(uA,{value:"employment","data-testid":"tab-employment",children:"Employment"}),(0,ds.jsx)(uA,{value:"attendance","data-testid":"tab-attendance",children:"Attendance"}),(0,ds.jsx)(uA,{value:"assets","data-testid":"tab-assets",children:"Assets"}),(0,ds.jsx)(uA,{value:"documents","data-testid":"tab-documents",children:"Documents"})]}),(0,ds.jsx)(hA,{value:"personal",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(sk,{className:"w-5 h-5 text-primary"}),"Personal Information"]})}),(0,ds.jsx)(Mn,{className:"space-y-4",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"First Name"}),(0,ds.jsx)("p",{className:"font-medium",children:t.first_name})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Last Name"}),(0,ds.jsx)("p",{className:"font-medium",children:t.last_name})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Date of Birth"}),(0,ds.jsx)("p",{className:"font-medium",children:K(t.date_of_birth)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Gender"}),(0,ds.jsx)("p",{className:"font-medium capitalize",children:t.gender||"Not specified"})]})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(Jk,{className:"w-5 h-5 text-primary"}),"Contact Details"]})}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Email"}),(0,ds.jsx)("p",{className:"font-medium",children:t.email})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Phone"}),(0,ds.jsx)("p",{className:"font-medium",children:t.phone||"Not provided"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Address"}),(0,ds.jsx)("p",{className:"font-medium",children:t.address?"".concat(t.address,", ").concat(t.city||"",", ").concat(t.state||""," - ").concat(t.pincode||""):"Not provided"})]}),(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Emergency Contact"}),(0,ds.jsx)("p",{className:"font-medium",children:t.emergency_contact_name||"Not provided"}),(0,ds.jsx)("p",{className:"text-sm text-slate-600",children:t.emergency_contact_phone||""})]})]})]})]})}),(0,ds.jsx)(hA,{value:"employment",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(F_,{className:"w-5 h-5 text-primary"}),"Organization Details"]})}),(0,ds.jsx)(Mn,{className:"space-y-4",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Employee ID"}),(0,ds.jsx)("p",{className:"font-medium",children:t.emp_code||t.employee_id})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Employment Type"}),(0,ds.jsx)("p",{className:"font-medium capitalize",children:t.employment_type})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Department"}),(0,ds.jsx)("p",{className:"font-medium",children:Y(t.department_id)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Designation"}),(0,ds.jsx)("p",{className:"font-medium",children:G(t.designation_id)})]})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-5 h-5 text-primary"}),"Important Dates"]})}),(0,ds.jsx)(Mn,{className:"space-y-4",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Joining Date"}),(0,ds.jsx)("p",{className:"font-medium",children:K(t.joining_date)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Confirmation Date"}),(0,ds.jsx)("p",{className:"font-medium",children:K(t.confirmation_date)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Probation End"}),(0,ds.jsx)("p",{className:"font-medium",children:K(t.probation_end_date)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Status"}),(0,ds.jsx)(tk,{className:"active"===t.status?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600",children:t.status})]})]})})]})]})}),(0,ds.jsxs)(hA,{value:"documents",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"flex flex-row items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(M_,{className:"w-5 h-5 text-primary"}),"Documents (",C.length,")"]}),(0,ds.jsxs)(fn,{size:"sm",onClick:()=>D(!0),children:[(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload"]})]}),(0,ds.jsx)(Mn,{children:C.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Document"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{children:"Uploaded"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:C.map(e=>{var s;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(M_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.name}),e.description&&(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:(null===(s=T.find(t=>t.type_id===e.type))||void 0===s?void 0:s.name)||e.type})}),(0,ds.jsx)(yS,{className:"text-sm text-slate-500",children:e.uploaded_at?new Date(e.uploaded_at).toLocaleDateString("en-IN"):"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_verified?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700",children:e.is_verified?"Verified":"Pending"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-1",children:[e.file_url&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>window.open(e.file_url,"_blank"),children:(0,ds.jsx)(xA,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this document?"))try{(await fetch("".concat(yA,"/documents/").concat(e),{method:"DELETE",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),credentials:"include"})).ok?(ts.success("Document deleted"),B(t.employee_id)):ts.error("Failed to delete document")}catch(s){ts.error("Failed to delete document")}})(e.document_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})})]},e.document_id)})})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No documents uploaded yet"}),(0,ds.jsxs)(fn,{variant:"outline",className:"mt-4",onClick:()=>D(!0),children:[(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload Document"]})]})})]}),(0,ds.jsx)(eo,{open:P,onOpenChange:D,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Upload Document"}),(0,ds.jsxs)(oo,{children:["Upload a document for ",null===t||void 0===t?void 0:t.first_name]})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Document Name *"}),(0,ds.jsx)(vn,{value:R.name,onChange:e=>O(u(u({},R),{},{name:e.target.value})),placeholder:"e.g., PAN Card, Aadhaar"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Document Type *"}),(0,ds.jsxs)(yE,{value:R.type,onValueChange:e=>O(u(u({},R),{},{type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsx)(_E,{children:T.map(e=>(0,ds.jsx)(kE,{value:e.type_id,children:e.name},e.type_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(vn,{value:R.description,onChange:e=>O(u(u({},R),{},{description:e.target.value})),placeholder:"Optional notes"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"File"}),(0,ds.jsx)(vn,{type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:e=>{var t;return O(u(u({},R),{},{file:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null}))}}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Supported: PDF, JPG, PNG, DOC up to 10MB"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(R.name&&R.type){F(!0);try{const e=new FormData;e.append("name",R.name),e.append("type",R.type),e.append("description",R.description||""),e.append("employee_id",t.employee_id),R.file&&e.append("file",R.file);const s=await fetch("".concat(yA,"/documents/upload"),{method:"POST",headers:nk(),credentials:"include",body:e});if(s.ok)ts.success("Document uploaded successfully"),D(!1),O({name:"",type:"",description:"",file:null}),B(t.employee_id);else{const e=await s.json().catch(()=>({}));ts.error(e.detail||"Failed to upload document")}}catch(e){ts.error("Failed to upload document")}finally{F(!1)}}else ts.error("Please fill required fields")},disabled:M,children:[M?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload"]})]})]})})]}),(0,ds.jsx)(hA,{value:"attendance",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsx)("div",{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(p_,{className:"w-5 h-5 text-primary"}),"Monthly Attendance"]})}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsxs)(yE,{value:String(b),onValueChange:e=>w(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:H.map(e=>(0,ds.jsx)(kE,{value:String(e.value),children:e.label},e.value))})]}),(0,ds.jsxs)(yE,{value:String(N),onValueChange:e=>_(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-24",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:W.map(e=>(0,ds.jsx)(kE,{value:String(e),children:e},e))})]})]})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mb-4",children:[(0,ds.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:V.present}),(0,ds.jsx)("p",{className:"text-xs text-emerald-700",children:"Present"})]}),(0,ds.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-red-600",children:V.absent}),(0,ds.jsx)("p",{className:"text-xs text-red-700",children:"Absent"})]}),(0,ds.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:V.wfh}),(0,ds.jsx)("p",{className:"text-xs text-blue-700",children:"WFH"})]}),(0,ds.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:V.leave}),(0,ds.jsx)("p",{className:"text-xs text-amber-700",children:"Leave"})]}),(0,ds.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:V.late}),(0,ds.jsx)("p",{className:"text-xs text-orange-700",children:"Late"})]})]}),y?(0,ds.jsx)("div",{className:"flex justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsx)("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto border rounded-lg",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{className:"sticky top-0 bg-slate-50",children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Date"}),(0,ds.jsx)(gS,{children:"Day"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"In"}),(0,ds.jsx)(gS,{children:"Out"}),(0,ds.jsx)(gS,{children:"Hours"})]})}),(0,ds.jsx)(xS,{children:v.length>0?v.slice(0,31).map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:new Date(e.date+"T00:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,ds.jsx)(yS,{children:new Date(e.date+"T00:00:00").toLocaleDateString("en-IN",{weekday:"short"})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)(tk,{className:U(e.status),children:[e.status,e.is_late&&(0,ds.jsx)("span",{className:"ml-1",children:"(L)"})]})}),(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.first_in||e.check_in_time||"-"}),(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.last_out||e.check_out_time||"-"}),(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.total_hours?"".concat(e.total_hours,"h"):"-"})]},e.attendance_id||"att-".concat(t))):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:6,className:"text-center py-8 text-slate-500",children:"No attendance records for this month"})})})]})})]})]})}),(0,ds.jsx)(hA,{value:"assets",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(C_,{className:"w-5 h-5 text-primary"}),"Assigned Assets"]})}),(0,ds.jsx)(Mn,{children:k?(0,ds.jsxs)("div",{className:"space-y-6",children:[k.assigned_items&&k.assigned_items.length>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"text-sm font-semibold text-slate-600 mb-3",children:"Assigned Items"}),(0,ds.jsx)("div",{className:"space-y-2",children:k.assigned_items.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:["laptop"===e.asset_type?(0,ds.jsx)($k,{className:"w-5 h-5 text-blue-500"}):"mobile"===e.asset_type?(0,ds.jsx)(Xk,{className:"w-5 h-5 text-green-500"}):"printer"===e.asset_type?(0,ds.jsx)(vA,{className:"w-5 h-5 text-orange-500"}):(0,ds.jsx)(C_,{className:"w-5 h-5 text-slate-500"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.description||e.asset_type||"Asset"}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["Tag: ",e.asset_tag||"N/A"]})]})]}),(0,ds.jsx)(tk,{className:"bg-emerald-100 text-emerald-700",children:"Assigned"})]},e.asset_id))})]}),(()=>{const e=(k.assigned_items||[]).map(e=>{var t;return null===(t=e.asset_type)||void 0===t?void 0:t.toLowerCase()}),t=k.mobile_charger||e.includes("mobile"),s=k.laptop||e.includes("laptop"),a=k.system||e.includes("system")||e.includes("desktop"),n=k.printer||e.includes("printer");return(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"text-sm font-semibold text-slate-600 mb-3",children:"Quick Overview"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(Xk,{className:"w-8 h-8 mx-auto mb-2 ".concat(t?"text-green-500":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Mobile & Charger"}),(0,ds.jsx)(tk,{className:t?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:t?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)($k,{className:"w-8 h-8 mx-auto mb-2 ".concat(s?"text-blue-500":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Laptop"}),(0,ds.jsx)(tk,{className:s?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:s?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(C_,{className:"w-8 h-8 mx-auto mb-2 ".concat(a?"text-purple-500":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"System"}),(0,ds.jsx)(tk,{className:a?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:a?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(vA,{className:"w-8 h-8 mx-auto mb-2 ".concat(n?"text-orange-500":"text-slate-400")}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Printer"}),(0,ds.jsx)(tk,{className:n?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:n?"Assigned":"Not Assigned"})]})]})]})})(),(k.sdpl_number||k.tag||k.sim_mobile_no)&&(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[k.sdpl_number&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"SDPL Number"}),(0,ds.jsx)("p",{className:"font-medium",children:k.sdpl_number})]}),k.tag&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Tag"}),(0,ds.jsx)("p",{className:"font-medium",children:k.tag})]}),k.sim_mobile_no&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"SIM/Mobile No"}),(0,ds.jsx)("p",{className:"font-medium",children:k.sim_mobile_no})]})]})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(C_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No assets assigned to this employee"})]})})]})})]}),(0,ds.jsx)(eo,{open:d,onOpenChange:h,children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit Employee Profile"}),(0,ds.jsx)(oo,{children:"Update employee information"})]}),(0,ds.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-700",children:"Personal Information"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"First Name"}),(0,ds.jsx)(vn,{value:m.first_name||"",onChange:e=>p(u(u({},m),{},{first_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Last Name"}),(0,ds.jsx)(vn,{value:m.last_name||"",onChange:e=>p(u(u({},m),{},{last_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Email"}),(0,ds.jsx)(vn,{type:"email",value:m.email||"",onChange:e=>p(u(u({},m),{},{email:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Phone"}),(0,ds.jsx)(vn,{value:m.phone||"",onChange:e=>p(u(u({},m),{},{phone:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date of Birth"}),(0,ds.jsx)(vn,{type:"date",value:m.date_of_birth||"",onChange:e=>p(u(u({},m),{},{date_of_birth:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Gender"}),(0,ds.jsxs)(yE,{value:m.gender||"",onValueChange:e=>p(u(u({},m),{},{gender:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select gender"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"male",children:"Male"}),(0,ds.jsx)(kE,{value:"female",children:"Female"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-700",children:"Address"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Address"}),(0,ds.jsx)(vn,{value:m.address||"",onChange:e=>p(u(u({},m),{},{address:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"City"}),(0,ds.jsx)(vn,{value:m.city||"",onChange:e=>p(u(u({},m),{},{city:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"State"}),(0,ds.jsx)(vn,{value:m.state||"",onChange:e=>p(u(u({},m),{},{state:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Pincode"}),(0,ds.jsx)(vn,{value:m.pincode||"",onChange:e=>p(u(u({},m),{},{pincode:e.target.value}))})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-700",children:"Employment"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Department"}),(0,ds.jsxs)(yE,{value:m.department_id||"",onValueChange:e=>p(u(u({},m),{},{department_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select department"})}),(0,ds.jsx)(_E,{children:n.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Designation"}),(0,ds.jsxs)(yE,{value:m.designation_id||"",onValueChange:e=>p(u(u({},m),{},{designation_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select designation"})}),(0,ds.jsx)(_E,{children:l.map(e=>(0,ds.jsx)(kE,{value:e.designation_id,children:e.name},e.designation_id))})]})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-700",children:"Emergency Contact"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contact Name"}),(0,ds.jsx)(vn,{value:m.emergency_contact_name||"",onChange:e=>p(u(u({},m),{},{emergency_contact_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contact Phone"}),(0,ds.jsx)(vn,{value:m.emergency_contact_phone||"",onChange:e=>p(u(u({},m),{},{emergency_contact_phone:e.target.value}))})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{x(!0);try{const t=await fetch("".concat(yA,"/employees/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(m)});if(t.ok)ts.success("Employee updated successfully"),h(!1),L();else{const e=await t.json();ts.error(e.detail||"Failed to update employee")}}catch(t){ts.error("Failed to update employee")}finally{x(!1)}},disabled:f,children:[f?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1 animate-spin"}):(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"}),"Save Changes"]})]})]})})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)("p",{className:"text-slate-600",children:"Employee not found"}),(0,ds.jsx)(Dt,{to:"/dashboard/employees",children:(0,ds.jsx)(fn,{className:"mt-4",children:"Back to Directory"})})]});var $,X},bA=Yi("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),wA="https://shardahrms.com/api",NA=()=>{const{employeeId:e}=Ee(),t=Se(),{user:s}=Cs(),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[x,v]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[j,b]=(0,a.useState)([]),[w,N]=(0,a.useState)((new Date).getMonth()+1),[_,k]=(0,a.useState)((new Date).getFullYear());"super_admin"===(null===s||void 0===s?void 0:s.role)||"hr_admin"===(null===s||void 0===s?void 0:s.role)||null===s||void 0===s||s.role;(0,a.useEffect)(()=>{e&&S()},[e]),(0,a.useEffect)(()=>{e&&C()},[e,w,_]);const S=async()=>{r(!0);try{const t=nk(),[s,a,n,r,l,o,d]=await Promise.all([fetch("".concat(wA,"/employees/").concat(e),{credentials:"include",headers:t}),fetch("".concat(wA,"/payroll/employee/").concat(e),{credentials:"include",headers:t}),fetch("".concat(wA,"/leave/balances?employee_id=").concat(e),{credentials:"include",headers:t}),fetch("".concat(wA,"/leave/requests?employee_id=").concat(e,"&limit=20"),{credentials:"include",headers:t}),fetch("".concat(wA,"/insurance?employee_id=").concat(e),{credentials:"include",headers:t}),fetch("".concat(wA,"/employee-assets/").concat(e),{credentials:"include",headers:t}).catch(()=>({ok:!1})),fetch("".concat(wA,"/payroll/payslips?employee_id=").concat(e,"&limit=12"),{credentials:"include",headers:t})]);if(s.ok?i(await s.json()):ts.error("Employee not found"),a.ok&&c(await a.json()),n.ok&&m(await n.json()),r.ok&&f(await r.json()),l.ok){const t=await l.json();v(t.find?t.find(t=>t.employee_id===e):t)}o.ok&&y(await o.json()),d.ok&&b(await d.json())}catch(t){console.error("Error fetching employee data:",t),ts.error("Failed to load employee data")}finally{r(!1)}},C=async()=>{try{const t=nk(),s=await fetch("".concat(wA,"/attendance?employee_id=").concat(e,"&month=").concat(w,"&year=").concat(_),{credentials:"include",headers:t});s.ok&&u(await s.json())}catch(t){console.error("Error fetching attendance:",t)}},E=e=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e):"\u20b90",T=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"present":return"bg-emerald-100 text-emerald-700";case"absent":return"bg-red-100 text-red-700";case"wfh":return"bg-blue-100 text-blue-700";case"leave":return"bg-amber-100 text-amber-700";case"holiday":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-600"}},A=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"approved":return"bg-emerald-100 text-emerald-700";case"pending":return"bg-amber-100 text-amber-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-600"}},P={present:d.filter(e=>"present"===e.status).length,absent:d.filter(e=>"absent"===e.status).length,wfh:d.filter(e=>"wfh"===e.status).length,leave:d.filter(e=>"leave"===e.status).length},D=[];for(let a=1;a<=12;a++)D.push({value:a,label:new Date(2e3,a-1).toLocaleString("default",{month:"long"})});const R=[],O=(new Date).getFullYear();for(let a=O;a>=O-3;a--)R.push(a);return n?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):l?(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"employee-360-page",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)(fn,{variant:"ghost",size:"sm",onClick:()=>t(-1),children:[(0,ds.jsx)(mA,{className:"w-4 h-4 mr-1"})," Back"]}),(0,ds.jsx)("div",{className:"flex-1",children:(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Employee Profile"})})]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-6",children:(0,ds.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,ds.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,ds.jsx)(sk,{className:"w-10 h-10 text-primary"})}),(0,ds.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h2",{className:"text-xl font-bold text-slate-900",children:[l.first_name," ",l.last_name]}),(0,ds.jsx)("p",{className:"text-slate-500",children:l.designation||l.job_title}),(0,ds.jsx)(tk,{className:"mt-2",variant:"outline",children:l.emp_code})]}),(0,ds.jsxs)("div",{className:"space-y-2 text-sm",children:[l.email&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(_x,{className:"w-4 h-4"}),(0,ds.jsx)("span",{children:l.email})]}),l.phone&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(TE,{className:"w-4 h-4"}),(0,ds.jsx)("span",{children:l.phone})]}),l.department_name&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(ak,{className:"w-4 h-4"}),(0,ds.jsx)("span",{children:l.department_name})]})]}),(0,ds.jsxs)("div",{className:"space-y-2 text-sm",children:[l.date_of_joining&&(0,ds.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"}),(0,ds.jsxs)("span",{children:["Joined: ",new Date(l.date_of_joining).toLocaleDateString("en-IN")]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(tk,{className:"active"===l.status?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700",children:l.status}),(0,ds.jsx)(tk,{variant:"outline",children:l.employment_type})]})]})]})]})})}),(0,ds.jsxs)(cA,{defaultValue:"attendance",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"grid w-full grid-cols-2 md:grid-cols-6 gap-1",children:[(0,ds.jsxs)(uA,{value:"attendance",className:"gap-1",children:[(0,ds.jsx)(p_,{className:"w-4 h-4"})," Attendance"]}),(0,ds.jsxs)(uA,{value:"salary",className:"gap-1",children:[(0,ds.jsx)(bA,{className:"w-4 h-4"})," Salary"]}),(0,ds.jsxs)(uA,{value:"leaves",className:"gap-1",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"})," Leaves"]}),(0,ds.jsxs)(uA,{value:"payslips",className:"gap-1",children:[(0,ds.jsx)(M_,{className:"w-4 h-4"})," Payslips"]}),(0,ds.jsxs)(uA,{value:"insurance",className:"gap-1",children:[(0,ds.jsx)(D_,{className:"w-4 h-4"})," Insurance"]}),(0,ds.jsxs)(uA,{value:"assets",className:"gap-1",children:[(0,ds.jsx)(C_,{className:"w-4 h-4"})," Assets"]})]}),(0,ds.jsx)(hA,{value:"attendance",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Attendance Record"}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:String(w),onValueChange:e=>N(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:D.map(e=>(0,ds.jsx)(kE,{value:String(e.value),children:e.label},e.value))})]}),(0,ds.jsxs)(yE,{value:String(_),onValueChange:e=>k(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-24",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:R.map(e=>(0,ds.jsx)(kE,{value:String(e),children:e},e))})]})]})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,ds.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:P.present}),(0,ds.jsx)("p",{className:"text-xs text-emerald-700",children:"Present"})]}),(0,ds.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-red-600",children:P.absent}),(0,ds.jsx)("p",{className:"text-xs text-red-700",children:"Absent"})]}),(0,ds.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:P.wfh}),(0,ds.jsx)("p",{className:"text-xs text-blue-700",children:"WFH"})]}),(0,ds.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:P.leave}),(0,ds.jsx)("p",{className:"text-xs text-amber-700",children:"Leave"})]})]}),(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Date"}),(0,ds.jsx)(gS,{children:"Day"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"Check In"}),(0,ds.jsx)(gS,{children:"Check Out"})]})}),(0,ds.jsx)(xS,{children:d.length>0?d.slice(0,31).map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:e.date}),(0,ds.jsx)(yS,{children:new Date(e.date).toLocaleDateString("en-IN",{weekday:"short"})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:T(e.status),children:e.status})}),(0,ds.jsx)(yS,{children:e.check_in_time||"-"}),(0,ds.jsx)(yS,{children:e.check_out_time||"-"})]},t)):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:5,className:"text-center py-8 text-slate-500",children:"No attendance records for this month"})})})]})})]})]})}),(0,ds.jsx)(hA,{value:"salary",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Salary Structure"}),(0,ds.jsx)(On,{children:"Current salary details and components"})]}),(0,ds.jsx)(Mn,{children:o?(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ds.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Monthly Fixed"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-slate-900",children:E(o.total_fixed||o.gross||o.annual_ctc/12)})]}),(0,ds.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Total Earned"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-slate-900",children:E(o.total_earned||o.gross)})]}),(0,ds.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Deductions"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-red-600",children:E(o.total_deduction||0)})]}),(0,ds.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-emerald-600",children:"Net Payable"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-emerald-700",children:E(o.net_payable||o.gross-(o.total_deduction||0))})]})]}),(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ds.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Earnings"}),(0,ds.jsx)(gS,{className:"text-right",children:"Amount"})]})}),(0,ds.jsx)(xS,{children:o.fixed_components?(0,ds.jsxs)(ds.Fragment,{children:[o.fixed_components.basic>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Basic Salary"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.basic)})]}),o.fixed_components.da>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"DA"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.da)})]}),o.fixed_components.hra>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"HRA"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.hra)})]}),o.fixed_components.conveyance>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Conveyance"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.conveyance)})]}),o.fixed_components.grade_pay>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Grade Pay"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.grade_pay)})]}),o.fixed_components.medical_allowance>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Medical Allowance"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.medical_allowance)})]}),o.fixed_components.other_allowance>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Other Allowance"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.fixed_components.other_allowance)})]}),(0,ds.jsxs)(vS,{className:"bg-slate-50 font-semibold",children:[(0,ds.jsx)(yS,{children:"Total Fixed"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.total_fixed)})]})]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Basic Salary"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.basic)})]}),(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"HRA"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.hra)})]}),(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Special Allowance"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.special_allowance)})]}),(0,ds.jsxs)(vS,{className:"bg-slate-50 font-semibold",children:[(0,ds.jsx)(yS,{children:"Gross Salary"}),(0,ds.jsx)(yS,{className:"text-right",children:E(o.gross)})]})]})})]})}),(0,ds.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-red-50",children:[(0,ds.jsx)(gS,{children:"Deductions"}),(0,ds.jsx)(gS,{className:"text-right",children:"Amount"})]})}),(0,ds.jsx)(xS,{children:o.deductions?(0,ds.jsxs)(ds.Fragment,{children:[o.deductions.epf>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"EPF"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.deductions.epf)})]}),o.deductions.esi>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"ESI"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.deductions.esi)})]}),o.late_deduction>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Late Deduction"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.late_deduction)})]}),o.deductions.sewa>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Sewa"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.deductions.sewa)})]}),o.deductions.other>0&&(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:"Other"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.deductions.other)})]}),(0,ds.jsxs)(vS,{className:"bg-red-50 font-semibold",children:[(0,ds.jsx)(yS,{children:"Total Deductions"}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(o.total_deduction)})]})]}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:2,className:"text-center text-slate-500",children:"No deduction info available"})})})]})})]})]}):(0,ds.jsx)("div",{className:"text-center py-8 text-slate-500",children:"No salary structure assigned"})})]})}),(0,ds.jsx)(hA,{value:"leaves",className:"space-y-4",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Leave Balances"})}),(0,ds.jsx)(Mn,{children:h.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("span",{className:"font-medium",children:e.leave_type_name||e.leave_type_id}),(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsx)("span",{className:"text-lg font-bold text-primary",children:e.available||e.balance||0}),(0,ds.jsxs)("span",{className:"text-slate-400 text-sm",children:[" / ",e.total||e.annual_quota||"-"]})]})]},t))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No leave balances found"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Recent Leave Requests"})}),(0,ds.jsx)(Mn,{children:p.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:p.slice(0,5).map((e,t)=>(0,ds.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ds.jsx)("span",{className:"font-medium text-sm",children:e.leave_type_name||e.leave_type_id}),(0,ds.jsx)(tk,{className:A(e.status),children:e.status})]}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:[e.from_date," to ",e.to_date," (",e.days||1," days)"]})]},t))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No leave requests found"})})]})]})}),(0,ds.jsx)(hA,{value:"payslips",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Payslip History"})}),(0,ds.jsx)(Mn,{children:j.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Month"}),(0,ds.jsx)(gS,{className:"text-right",children:"Gross"}),(0,ds.jsx)(gS,{className:"text-right",children:"Deductions"}),(0,ds.jsx)(gS,{className:"text-right",children:"Net Pay"}),(0,ds.jsx)(gS,{children:"Status"})]})}),(0,ds.jsx)(xS,{children:j.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:new Date(e.year,e.month-1).toLocaleDateString("en-IN",{month:"short",year:"numeric"})}),(0,ds.jsx)(yS,{className:"text-right",children:E(e.gross_salary)}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:E(e.total_deductions)}),(0,ds.jsx)(yS,{className:"text-right font-semibold",children:E(e.net_salary)}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.status})})]},t))})]}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No payslips found"})})]})}),(0,ds.jsx)(hA,{value:"insurance",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Insurance Details"})}),(0,ds.jsx)(Mn,{children:x?(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"ESIC"}),(0,ds.jsx)(tk,{className:x.esic?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:x.esic?"Covered":"Not Covered"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"PMJJBY"}),(0,ds.jsx)(tk,{className:x.pmjjby?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:x.pmjjby?"Covered":"Not Covered"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Accidental Insurance"}),(0,ds.jsx)(tk,{className:x.accidental_insurance?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:x.accidental_insurance?"Covered":"Not Covered"})]}),x.insurance_company&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Company"}),(0,ds.jsx)("p",{className:"font-medium",children:x.insurance_company})]}),x.amount&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Amount"}),(0,ds.jsx)("p",{className:"font-medium",children:E(x.amount)})]}),x.policy_number&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Policy Number"}),(0,ds.jsx)("p",{className:"font-medium",children:x.policy_number})]})]}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No insurance records found"})})]})}),(0,ds.jsx)(hA,{value:"assets",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Assigned Assets"})}),(0,ds.jsx)(Mn,{children:g?(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(TE,{className:"w-8 h-8 mx-auto mb-2 text-slate-400"}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Mobile & Charger"}),(0,ds.jsx)(tk,{className:g.mobile_charger?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:g.mobile_charger?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(T_,{className:"w-8 h-8 mx-auto mb-2 text-slate-400"}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Laptop"}),(0,ds.jsx)(tk,{className:g.laptop?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:g.laptop?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(C_,{className:"w-8 h-8 mx-auto mb-2 text-slate-400"}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"System"}),(0,ds.jsx)(tk,{className:g.system?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:g.system?"Assigned":"Not Assigned"})]}),(0,ds.jsxs)("div",{className:"p-4 border rounded-lg text-center",children:[(0,ds.jsx)(M_,{className:"w-8 h-8 mx-auto mb-2 text-slate-400"}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Printer"}),(0,ds.jsx)(tk,{className:g.printer?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:g.printer?"Assigned":"Not Assigned"})]}),g.sdpl_number&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg col-span-2",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"SDPL Number"}),(0,ds.jsx)("p",{className:"font-medium",children:g.sdpl_number})]}),g.tag&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Tag"}),(0,ds.jsx)("p",{className:"font-medium",children:g.tag})]}),g.sim_mobile_no&&(0,ds.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"SIM/Mobile No"}),(0,ds.jsx)("p",{className:"font-medium",children:g.sim_mobile_no})]})]}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No assets assigned"})})]})})]})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(sk,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("h2",{className:"text-lg font-semibold text-slate-700",children:"Employee Not Found"}),(0,ds.jsxs)(fn,{onClick:()=>t(-1),className:"mt-4",children:[(0,ds.jsx)(mA,{className:"w-4 h-4 mr-2"})," Go Back"]})]})},_A=["className"],kA=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,_A);return(0,ds.jsx)("textarea",u({className:hn("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t},a))});kA.displayName="Textarea";const SA=Yi("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),CA=Yi("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),EA=Yi("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),TA=Yi("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),AA=Yi("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),PA=Yi("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var DA=s(238);const RA="https://shardahrms.com/api",OA=()=>{var e,t,s,n,r,l,i,o,c,d,h,m,p,f,x,v,g,y,j,b,w,N,_,k,S,C,E,T,A,P,D,R,O,M,F,L,I,z,B,U,V;const{user:H}=Cs(),W="super_admin"===(null===H||void 0===H?void 0:H.role)||"hr_admin"===(null===H||void 0===H?void 0:H.role)||"hr_executive"===(null===H||void 0===H?void 0:H.role),[q,Y]=(0,a.useState)(!0),[G,K]=(0,a.useState)(!1),[$,X]=(0,a.useState)(null),[J,Q]=(0,a.useState)(null),[Z,ee]=(0,a.useState)([]),[te,se]=(0,a.useState)([]),[ae,ne]=(0,a.useState)([]),[re,le]=(0,a.useState)(!1),[ie,oe]=(0,a.useState)(null),[ce,de]=(0,a.useState)(null),[ue,he]=(0,a.useState)("current_month"),[me,pe]=(0,a.useState)(""),[fe,xe]=(0,a.useState)(""),[ve,ge]=(0,a.useState)("all"),[ye,je]=(0,a.useState)("calendar"),[be,we]=(0,a.useState)(null),[Ne,_e]=(0,a.useState)(!1),[ke,Se]=(0,a.useState)("all"),[Ce,Ee]=(0,a.useState)(""),[Te,Ae]=(0,a.useState)(""),[Pe,De]=(0,a.useState)(""),[Re,Oe]=(0,a.useState)(!1),[Me,Fe]=(0,a.useState)(null),[Le,Ie]=(0,a.useState)({status:"present",first_in:"",last_out:"",remarks:"",edit_reason:""}),[ze,Be]=(0,a.useState)([]);(0,a.useEffect)(()=>{if("custom"!==ue){const{from:e,to:t}=(e=>{const t=new Date,s=t.getFullYear(),a=t.getMonth();switch(e){case"current_month":default:return{from:"".concat(s,"-").concat(String(a+1).padStart(2,"0"),"-01"),to:t.toISOString().split("T")[0]};case"last_month":const e=0===a?11:a-1,n=0===a?s-1:s,r=new Date(n,e+1,0).getDate();return{from:"".concat(n,"-").concat(String(e+1).padStart(2,"0"),"-01"),to:"".concat(n,"-").concat(String(e+1).padStart(2,"0"),"-").concat(r)};case"last_3_months":return{from:new Date(s,a-3,1).toISOString().split("T")[0],to:t.toISOString().split("T")[0]};case"year_to_date":return{from:"".concat(s,"-01-01"),to:t.toISOString().split("T")[0]};case"custom":return{from:me,to:fe}}})(ue);pe(e),xe(t)}},[ue]),(0,a.useEffect)(()=>{me&&fe&&(W?(qe(),We(),He(),Ue()):Ye())},[me,fe,ve]),(0,a.useEffect)(()=>{if("grid"===ye&&!Te){const e=new Date,t=e.getFullYear(),s=e.getMonth();Ae("".concat(t,"-").concat(String(s+1).padStart(2,"0"),"-01")),De(e.toISOString().split("T")[0])}},[ye]);const Ue=async()=>{try{const e=await fetch("".concat(RA,"/departments"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();Be(t)}}catch(e){console.error("Error fetching departments:",e)}},Ve=async()=>{if(Te&&Pe){_e(!0);try{const e=new URLSearchParams({from_date:Te,to_date:Pe});ke&&"all"!==ke&&e.append("department_id",ke),Ce&&e.append("search",Ce);const t=await fetch("".concat(RA,"/attendance/grid?").concat(e),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();we(e)}else ts.error("Failed to fetch grid data")}catch(e){console.error("Error fetching grid data:",e),ts.error("Failed to fetch grid data")}finally{_e(!1)}}else ts.error("Please select date range")},He=async()=>{if(me&&fe){le(!0);try{const e=new URLSearchParams({from_date:me,to_date:fe}),t=await fetch("".concat(RA,"/attendance/calendar-data?").concat(e),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();ne(e.calendar_data||[])}}catch(e){console.error("Error fetching calendar data:",e)}finally{le(!1)}}},We=async()=>{try{const e=await fetch("".concat(RA,"/employees"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();se(t)}}catch(e){console.error("Error fetching employees:",e)}},qe=async()=>{if(me&&fe){K(!0),Y(!0);try{const e=new URLSearchParams({from_date:me,to_date:fe});ve&&"all"!==ve&&e.append("employee_id",ve);const t=await fetch("".concat(RA,"/attendance/summary?").concat(e),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();X(e)}}catch(e){console.error("Error fetching summary:",e)}finally{K(!1),Y(!1)}}},Ye=async()=>{if(me&&fe){K(!0),Y(!0);try{const e=new URLSearchParams({from_date:me,to_date:fe}),t=await fetch("".concat(RA,"/attendance/my-summary?").concat(e),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();Q(e)}}catch(e){console.error("Error fetching my summary:",e)}finally{K(!1),Y(!1)}}};return!q||$||J?W?(0,ds.jsxs)("div",{className:"space-y-6 p-6",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Attendance Analytics"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Attendance Analytics"}),(0,ds.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:(()=>{if(!me||!fe)return"";const e=new Date(me),t=new Date(fe);return"".concat(e.toLocaleDateString("en-IN",{day:"numeric",month:"short"})," - ").concat(t.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}))})()}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[180px]"})]}),(0,ds.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,ds.jsxs)(yE,{value:ue,onValueChange:he,children:[(0,ds.jsx)(bE,{className:"w-[160px]",children:(0,ds.jsx)(jE,{placeholder:"Select period"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"current_month",children:"Current Month"}),(0,ds.jsx)(kE,{value:"last_month",children:"Last Month"}),(0,ds.jsx)(kE,{value:"last_3_months",children:"Last 3 Months"}),(0,ds.jsx)(kE,{value:"year_to_date",children:"Year to Date"}),(0,ds.jsx)(kE,{value:"custom",children:"Custom Range"})]})]}),"custom"===ue&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(vn,{type:"date",value:me,onChange:e=>pe(e.target.value),className:"w-[140px]"}),(0,ds.jsx)("span",{className:"text-slate-400",children:"to"}),(0,ds.jsx)(vn,{type:"date",value:fe,onChange:e=>xe(e.target.value),className:"w-[140px]"})]}),(0,ds.jsxs)(yE,{value:ve,onValueChange:ge,children:[(0,ds.jsx)(bE,{className:"w-[200px]",children:(0,ds.jsx)(jE,{placeholder:"All Employees"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Employees"}),te.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))]})]}),(0,ds.jsxs)(fn,{variant:"outline",onClick:qe,disabled:G,children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2 ".concat(G?"animate-spin":"")}),"Refresh"]}),(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{var e,t,s,a,n,r,l,i;if(!$)return void ts.error("No data to export");const o=DA.utils.book_new(),c=[["Attendance Analytics Report"],["Period","".concat(me," to ").concat(fe)],["Working Days",$.working_days_in_range],["Holidays",$.holidays_in_range],["Total Employees",$.total_employees],[""],["Key Metrics"],["Attendance Rate","".concat(null===(e=$.overview)||void 0===e?void 0:e.attendance_rate,"%")],["Avg Daily Attendance",null===(t=$.overview)||void 0===t?void 0:t.avg_daily_attendance],["Perfect Days",null===(s=$.overview)||void 0===s?void 0:s.perfect_days_count],["High Absence Days",null===(a=$.overview)||void 0===a?void 0:a.high_absence_days_count],["Late Instances",null===(n=$.overview)||void 0===n?void 0:n.late_instances],["WFH Count",null===(r=$.overview)||void 0===r?void 0:r.wfh_count],["Leave Count",null===(l=$.overview)||void 0===l?void 0:l.leave_count],["Trend",null===(i=$.overview)||void 0===i?void 0:i.trend]],d=DA.utils.aoa_to_sheet(c);if(DA.utils.book_append_sheet(o,d,"Overview"),$.employee_stats){const e=[["Name","Code","Department","Present","Absent","Late","WFH","Leave","Hours"]];$.employee_stats.forEach(t=>{var s;e.push([t.name,t.emp_code,t.department,t.present_days,t.absent_days,t.late_count,t.wfh_count,t.leave_count,null===(s=t.total_hours)||void 0===s?void 0:s.toFixed(1)])});const t=DA.utils.aoa_to_sheet(e);DA.utils.book_append_sheet(o,t,"Employee Stats")}if($.department_analysis){const e=[["Department","Employees","Present Days","Absent Days","Late Count","Attendance Rate"]];$.department_analysis.forEach(t=>{e.push([t.department,t.employees,t.present_days,t.absent_days,t.late_count,"".concat(t.attendance_rate,"%")])});const t=DA.utils.aoa_to_sheet(e);DA.utils.book_append_sheet(o,t,"Department")}DA.writeFile(o,"Attendance_Analytics_".concat(me,"_to_").concat(fe,".xlsx")),ts.success("Report exported successfully")},children:[(0,ds.jsx)(w_,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),$&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("div",{className:"p-3 bg-primary/5 rounded-xl text-sm text-slate-600 border border-primary/10",children:[(0,ds.jsx)("strong",{children:"Period:"})," ",$.from_date," to ",$.to_date," |",(0,ds.jsx)("strong",{children:" Working Days:"})," ",$.working_days_in_range," |",(0,ds.jsx)("strong",{children:" Holidays:"})," ",$.holidays_in_range," |",(0,ds.jsx)("strong",{children:" Employees:"})," ",$.total_employees," |",(0,ds.jsx)("strong",{children:" Trend:"})," ",(0,ds.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(tt=null===(e=$.overview)||void 0===e?void 0:e.trend,"improving"===tt?(0,ds.jsx)(qk,{className:"w-4 h-4 text-emerald-500"}):"declining"===tt?(0,ds.jsx)(SA,{className:"w-4 h-4 text-red-500"}):(0,ds.jsx)(CA,{className:"w-4 h-4 text-slate-400"}))," ",null===(t=$.overview)||void 0===t?void 0:t.trend]})]}),(0,ds.jsxs)(cA,{value:ye,onValueChange:je,children:[(0,ds.jsxs)(dA,{className:"mb-4 flex-wrap h-auto gap-1",children:[(0,ds.jsxs)(uA,{value:"calendar",className:"gap-2",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"}),"Calendar"]}),(0,ds.jsxs)(uA,{value:"grid",className:"gap-2","data-testid":"tab-grid-view",children:[(0,ds.jsx)(EA,{className:"w-4 h-4"}),"Grid View"]}),(0,ds.jsxs)(uA,{value:"overview",className:"gap-2",children:[(0,ds.jsx)(R_,{className:"w-4 h-4"}),"Overview"]}),(0,ds.jsxs)(uA,{value:"patterns",className:"gap-2",children:[(0,ds.jsx)(qk,{className:"w-4 h-4"}),"Patterns"]}),(0,ds.jsxs)(uA,{value:"employees",className:"gap-2",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Employee Insights"]}),(0,ds.jsxs)(uA,{value:"department",className:"gap-2",children:[(0,ds.jsx)(F_,{className:"w-4 h-4"}),"Department"]})]}),(0,ds.jsx)(hA,{value:"calendar",children:re?(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ds.jsx)("div",{className:"lg:col-span-2",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-2",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-5 h-5"}),"Attendance Calendar"]}),(0,ds.jsx)(On,{children:"Click on a date to see detailed attendance breakdown"})]}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,ds.jsx)("div",{className:"text-xs font-semibold text-slate-500 py-2",children:e},e))}),(0,ds.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[ae.length>0&&(()=>{const e=new Date(ae[0].date),t=[];for(let s=0;s<e.getDay();s++)t.push((0,ds.jsx)("div",{className:"aspect-square"},"pad-".concat(s)));return t})(),ae.map(e=>{var t;const s=ie===e.date,a=e.is_sunday,n=e.is_holiday,r=!a&&!n;return(0,ds.jsxs)("div",{onClick:()=>{return r&&(oe((t=e).date),void de(t));var t},className:"\n                                  aspect-square p-1 rounded-lg border text-center flex flex-col justify-center\n                                  ".concat(r?"cursor-pointer hover:shadow-md transition-shadow":"cursor-default","\n                                  ").concat(s?"ring-2 ring-primary ring-offset-2":"","\n                                  ").concat(a?"bg-slate-100":"","\n                                  ").concat(n?"bg-orange-50 border-orange-200":"","\n                                  ").concat(r&&!s?"bg-white hover:bg-slate-50":"","\n                                "),"data-testid":"calendar-day-".concat(e.date),children:[(0,ds.jsx)("div",{className:"text-xs font-semibold text-slate-700 mb-1",children:new Date(e.date).getDate()}),a&&(0,ds.jsx)("div",{className:"text-[9px] text-slate-400",children:"Sun"}),n&&(0,ds.jsxs)("div",{className:"text-[9px] text-orange-600 truncate",title:e.holiday_name,children:[null===(t=e.holiday_name)||void 0===t?void 0:t.slice(0,6),"..."]}),r&&(0,ds.jsxs)("div",{className:"flex flex-col gap-0.5 text-[9px]",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-center gap-0.5",children:[(0,ds.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,ds.jsx)("span",{className:"text-emerald-700 font-medium",children:e.present_count})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-center gap-0.5",children:[(0,ds.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-500"}),(0,ds.jsx)("span",{className:"text-amber-700 font-medium",children:e.late_count})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-center gap-0.5",children:[(0,ds.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,ds.jsx)("span",{className:"text-red-700 font-medium",children:e.absent_count})]})]})]},e.date)})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4 pt-4 border-t",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:"Present"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:"Late"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:"Absent"})]})]})]})]})}),(0,ds.jsx)("div",{className:"lg:col-span-1",children:ce?(0,ds.jsxs)(Pn,{className:"sticky top-4",children:[(0,ds.jsxs)(Dn,{className:"pb-2",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:new Date(ce.date).toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"short",year:"numeric"})}),(0,ds.jsx)(On,{children:(0,ds.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,ds.jsxs)(tk,{className:"bg-emerald-100 text-emerald-700",children:[ce.present_count," Present"]}),(0,ds.jsxs)(tk,{className:"bg-amber-100 text-amber-700",children:[ce.late_count," Late"]}),(0,ds.jsxs)(tk,{className:"bg-red-100 text-red-700",children:[ce.absent_count," Absent"]})]})})]}),(0,ds.jsxs)(Mn,{className:"max-h-[500px] overflow-y-auto",children:[(null===(s=ce.present_employees)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)("div",{className:"mb-4",children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold text-emerald-700 mb-2 flex items-center gap-2",children:[(0,ds.jsx)(Yk,{className:"w-4 h-4"}),"Present (",ce.present_count,")"]}),(0,ds.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:ce.present_employees.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 bg-emerald-50 rounded",children:[(0,ds.jsx)("span",{className:"font-medium truncate flex-1",children:e.name}),(0,ds.jsxs)("span",{className:"text-slate-500 ml-2",children:[e.in_time&&"".concat(e.in_time),e.in_time&&e.out_time&&" - ",e.out_time&&"".concat(e.out_time)]})]},t))})]}),(null===(n=ce.late_employees)||void 0===n?void 0:n.length)>0&&(0,ds.jsxs)("div",{className:"mb-4",children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold text-amber-700 mb-2 flex items-center gap-2",children:[(0,ds.jsx)(ik,{className:"w-4 h-4"}),"Late (",ce.late_count,")"]}),(0,ds.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:ce.late_employees.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 bg-amber-50 rounded",children:[(0,ds.jsx)("span",{className:"font-medium truncate flex-1",children:e.name}),(0,ds.jsxs)("span",{className:"text-slate-500 ml-2",children:[e.in_time&&"".concat(e.in_time),e.in_time&&e.out_time&&" - ",e.out_time&&"".concat(e.out_time)]})]},t))})]}),(null===(r=ce.absent_employees)||void 0===r?void 0:r.length)>0&&(0,ds.jsxs)("div",{className:"mb-4",children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold text-red-700 mb-2 flex items-center gap-2",children:[(0,ds.jsx)(TA,{className:"w-4 h-4"}),"Absent (",ce.absent_count,")"]}),(0,ds.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:ce.absent_employees.map((e,t)=>(0,ds.jsxs)("div",{className:"text-xs p-2 bg-red-50 rounded",children:[(0,ds.jsx)("span",{className:"font-medium",children:e.name}),e.emp_code&&(0,ds.jsxs)("span",{className:"text-slate-400 ml-2",children:["(",e.emp_code,")"]})]},t))})]})]})]}):(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-8 text-center",children:[(0,ds.jsx)(v_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Select a date to view attendance details"})]})})})]})}),(0,ds.jsx)(hA,{value:"grid",children:(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"pt-6",children:(0,ds.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"From Date"}),(0,ds.jsx)(vn,{type:"date",value:Te,onChange:e=>Ae(e.target.value),className:"w-[150px]","data-testid":"grid-from-date"})]}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"To Date"}),(0,ds.jsx)(vn,{type:"date",value:Pe,onChange:e=>De(e.target.value),className:"w-[150px]","data-testid":"grid-to-date"})]}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Department"}),(0,ds.jsxs)(yE,{value:ke,onValueChange:Se,children:[(0,ds.jsx)(bE,{className:"w-[180px]","data-testid":"grid-department-select",children:(0,ds.jsx)(jE,{placeholder:"All Departments"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Departments"}),ze.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))]})]})]}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Search Employee"}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Name or Code...",value:Ce,onChange:e=>Ee(e.target.value),className:"w-[180px] pl-9","data-testid":"grid-search"})]})]}),(0,ds.jsxs)(fn,{onClick:Ve,disabled:Ne,"data-testid":"load-grid-btn",children:[Ne?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2"}),"Load Grid"]}),be&&(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{if(!be||!be.rows.length)return void ts.error("No data to export");const e=DA.utils.book_new(),t=[["Employee Code","Name","Department",...be.dates.map(e=>e.date),"Present","Absent","Late","WFH","Leave"],...be.rows.map(e=>{const t=e.cells.map(e=>"sunday"===e.status?"SUN":"holiday"===e.status?"HOL":"present"===e.status?e.is_late?"P(L)":"P":"absent"===e.status?"A":"wfh"===e.status?"WFH":"leave"===e.status?"L":"half_day"===e.status||"HD"===e.status?"HD":"no_record"===e.status?"-":e.status||"-");return[e.emp_code,e.name,e.department,...t,e.summary.present,e.summary.absent,e.summary.late,e.summary.wfh,e.summary.leave]})],s=DA.utils.aoa_to_sheet(t);DA.utils.book_append_sheet(e,s,"Attendance Grid"),DA.writeFile(e,"Attendance_Grid_".concat(Te,"_to_").concat(Pe,".xlsx")),ts.success("Grid exported successfully")},"data-testid":"export-grid-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-2"}),"Export Excel"]})]})})}),Ne?(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):be?(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(EA,{className:"w-5 h-5 text-primary"}),"Attendance Grid (",be.total_employees," employees)"]}),(0,ds.jsxs)(On,{children:["Click on any cell to edit attendance. Period: ",Te," to ",Pe]})]}),(0,ds.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-emerald-500"})," Present"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-amber-500"})," Late"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-red-500"})," Absent"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-blue-500"})," WFH"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-purple-500"})," Leave"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)("span",{className:"w-3 h-3 rounded bg-slate-300"})," No Record"]})]})]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsx)("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:(0,ds.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,ds.jsx)("thead",{className:"sticky top-0 z-10 bg-slate-100",children:(0,ds.jsxs)("tr",{children:[(0,ds.jsx)("th",{className:"sticky left-0 z-20 bg-slate-100 px-3 py-2 text-left font-semibold border-b border-r min-w-[180px]",children:"Employee"}),be.dates.map(e=>(0,ds.jsxs)("th",{className:"px-1 py-2 text-center border-b min-w-[40px] text-xs ".concat(e.is_sunday?"bg-slate-200":e.is_holiday?"bg-orange-100":""),title:e.is_holiday?e.holiday_name:e.date,children:[(0,ds.jsx)("div",{className:"font-semibold",children:e.day_num}),(0,ds.jsx)("div",{className:"text-[10px] text-slate-500",children:e.day_name})]},e.date)),(0,ds.jsx)("th",{className:"px-2 py-2 text-center border-b border-l bg-emerald-50 text-emerald-700 font-semibold",children:"P"}),(0,ds.jsx)("th",{className:"px-2 py-2 text-center border-b bg-red-50 text-red-700 font-semibold",children:"A"}),(0,ds.jsx)("th",{className:"px-2 py-2 text-center border-b bg-amber-50 text-amber-700 font-semibold",children:"L"})]})}),(0,ds.jsx)("tbody",{children:be.rows.map(e=>(0,ds.jsxs)("tr",{className:"hover:bg-slate-50","data-testid":"grid-row-".concat(e.employee_id),children:[(0,ds.jsxs)("td",{className:"sticky left-0 z-10 bg-white px-3 py-2 border-b border-r",children:[(0,ds.jsx)("div",{className:"font-medium text-slate-900 truncate max-w-[150px]",title:e.name,children:e.name}),(0,ds.jsxs)("div",{className:"text-[10px] text-slate-500",children:[e.emp_code," \u2022 ",e.department]})]}),e.cells.map((t,s)=>{var a;const n="present"===t.status?t.is_late?"bg-amber-100 hover:bg-amber-200":"bg-emerald-100 hover:bg-emerald-200":"absent"===t.status?"bg-red-100 hover:bg-red-200":"wfh"===t.status?"bg-blue-100 hover:bg-blue-200":"leave"===t.status?"bg-purple-100 hover:bg-purple-200":"half_day"===t.status||"HD"===t.status?"bg-orange-100 hover:bg-orange-200":"sunday"===t.status?"bg-slate-200":"holiday"===t.status?"bg-orange-50":"no_record"===t.status?"bg-slate-50 hover:bg-slate-100":"bg-slate-50",r="present"===t.status?t.is_late?"L":"P":"absent"===t.status?"A":"wfh"===t.status?"W":"leave"===t.status?"LV":"half_day"===t.status||"HD"===t.status?"HD":"sunday"===t.status?"\u2013":"holiday"===t.status?"H":"no_record"===t.status?"-":(null===(a=t.status)||void 0===a?void 0:a.charAt(0).toUpperCase())||"-",l=t.is_editable&&"sunday"!==t.status&&"holiday"!==t.status;return(0,ds.jsx)("td",{onClick:()=>l&&((e,t)=>{t.is_editable&&"sunday"!==t.status&&"holiday"!==t.status&&(Fe(u(u({},t),{},{employee_id:e.employee_id,employee_name:e.name,emp_code:e.emp_code})),Ie({status:"no_record"===t.status?"present":t.status,first_in:t.first_in||"",last_out:t.last_out||"",remarks:"",edit_reason:""}),Oe(!0))})(e,t),className:"px-1 py-2 text-center border-b text-xs font-medium ".concat(n," ").concat(l?"cursor-pointer":""," ").concat(t.is_manually_edited?"ring-1 ring-inset ring-blue-400":""),title:"sunday"===t.status?"Sunday":"holiday"===t.status?t.holiday_name:t.first_in?"In: ".concat(t.first_in," | Out: ").concat(t.last_out||"-"):"no_record"===t.status?"No record - Click to add":t.status,"data-testid":"grid-cell-".concat(e.employee_id,"-").concat(t.date),children:r},s)}),(0,ds.jsx)("td",{className:"px-2 py-2 text-center border-b border-l bg-emerald-50 font-semibold text-emerald-700",children:e.summary.present}),(0,ds.jsx)("td",{className:"px-2 py-2 text-center border-b bg-red-50 font-semibold text-red-700",children:e.summary.absent}),(0,ds.jsx)("td",{className:"px-2 py-2 text-center border-b bg-amber-50 font-semibold text-amber-700",children:e.summary.late})]},e.employee_id))})]})})})]}):(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"py-12 text-center",children:[(0,ds.jsx)(EA,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:'Select date range and click "Load Grid"'}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"Grid view shows all employees vs dates in a table format"})]})})]})}),(0,ds.jsx)(hA,{value:"overview",children:(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[(0,ds.jsx)(Pn,{className:"bg-emerald-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[null===(l=$.overview)||void 0===l?void 0:l.attendance_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Attendance Rate"})]})}),(0,ds.jsx)(Pn,{className:"bg-blue-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:null===(i=$.overview)||void 0===i?void 0:i.avg_daily_attendance}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Avg Daily"})]})}),(0,ds.jsx)(Pn,{className:"bg-green-50 border-green-200",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-green-600",children:null===(o=$.overview)||void 0===o?void 0:o.perfect_days_count}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Perfect Days"})]})}),(0,ds.jsx)(Pn,{className:"bg-red-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-red-600",children:null===(c=$.overview)||void 0===c?void 0:c.high_absence_days_count}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"High Absence Days"})]})}),(0,ds.jsx)(Pn,{className:"bg-amber-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:null===(d=$.overview)||void 0===d?void 0:d.late_instances}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Late Instances"})]})}),(0,ds.jsx)(Pn,{className:"bg-indigo-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:null===(h=$.overview)||void 0===h?void 0:h.wfh_count}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"WFH Count"})]})}),(0,ds.jsx)(Pn,{className:"bg-purple-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:null===(m=$.overview)||void 0===m?void 0:m.leave_count}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Leave Count"})]})}),(0,ds.jsx)(Pn,{className:"bg-teal-50",children:(0,ds.jsxs)(Mn,{className:"p-4 text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-teal-600",children:null===(p=$.overview)||void 0===p?void 0:p.punctuality_champions_count}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Punctual"})]})})]}),(0,ds.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm text-slate-600",children:"Most Absent Day"})}),(0,ds.jsx)(Mn,{children:null!==(f=$.key_metrics)&&void 0!==f&&null!==(x=f.most_absent_day)&&void 0!==x&&x.date?(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-bold",children:new Date($.key_metrics.most_absent_day.date).toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"short"})}),(0,ds.jsxs)("p",{className:"text-sm text-red-600",children:[$.key_metrics.most_absent_day.absent_count," absent (",$.key_metrics.most_absent_day.absent_pct,"%)"]})]}):(0,ds.jsx)("p",{className:"text-slate-400",children:"No data"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm text-slate-600",children:"Avg Working Hours"})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("p",{className:"text-lg font-bold",children:[null===(v=$.overview)||void 0===v?void 0:v.avg_daily_hours,"h"]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"per employee per day"})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm text-slate-600",children:"Chronic Absentees"})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-red-600",children:null===(g=$.overview)||void 0===g?void 0:g.chronic_absentees_count}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"employees with 5+ absences"})]})]})]})]})}),(0,ds.jsx)(hA,{value:"patterns",children:(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ds.jsxs)(Pn,{className:null!==(y=$.patterns)&&void 0!==y&&y.monday_blues?"border-amber-300 bg-amber-50":"",children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2",children:["Monday Blues",(null===(j=$.patterns)||void 0===j?void 0:j.monday_blues)&&(0,ds.jsx)(AA,{className:"w-4 h-4 text-amber-500"})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold",children:[null===(b=$.patterns)||void 0===b?void 0:b.monday_absence_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"absence rate on Mondays"}),(null===(w=$.patterns)||void 0===w?void 0:w.monday_blues)&&(0,ds.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Higher than other days!"})]})]}),(0,ds.jsxs)(Pn,{className:null!==(N=$.patterns)&&void 0!==N&&N.friday_flight?"border-amber-300 bg-amber-50":"",children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2",children:["Friday Flight",(null===(_=$.patterns)||void 0===_?void 0:_.friday_flight)&&(0,ds.jsx)(AA,{className:"w-4 h-4 text-amber-500"})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold",children:[null===(k=$.patterns)||void 0===k?void 0:k.friday_absence_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"absence rate on Fridays"}),(null===(S=$.patterns)||void 0===S?void 0:S.friday_flight)&&(0,ds.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Higher than other days!"})]})]}),(0,ds.jsxs)(Pn,{className:null!==(C=$.patterns)&&void 0!==C&&C.pre_holiday_pattern?"border-amber-300 bg-amber-50":"",children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2",children:["Pre-Holiday",(null===(E=$.patterns)||void 0===E?void 0:E.pre_holiday_pattern)&&(0,ds.jsx)(AA,{className:"w-4 h-4 text-amber-500"})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold",children:[null===(T=$.patterns)||void 0===T?void 0:T.pre_holiday_absence_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"absence before holidays"}),(null===(A=$.patterns)||void 0===A?void 0:A.pre_holiday_pattern)&&(0,ds.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Pattern detected!"})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Other Days"})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold",children:[null===(P=$.patterns)||void 0===P?void 0:P.other_days_absence_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"baseline absence rate"})]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-base",children:"High Absence Days"}),(0,ds.jsx)(On,{children:"Days with 4+ employees absent or >10% absence"})]}),(0,ds.jsx)(Mn,{children:(null===(D=$.key_metrics)||void 0===D||null===(R=D.high_absence_days)||void 0===R?void 0:R.length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:$.key_metrics.high_absence_days.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[(0,ds.jsx)("span",{children:new Date(e.date).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})}),(0,ds.jsxs)(tk,{variant:"destructive",children:[e.absent_count," absent (",e.absent_pct,"%)"]})]},t))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No high absence days in this period"})})]})]})}),(0,ds.jsx)(hA,{value:"employees",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-500"}),"Most Late Arrivals"]})}),(0,ds.jsx)(Mn,{children:(null===(O=$.rankings)||void 0===O||null===(M=O.most_late)||void 0===M?void 0:M.filter(e=>e.late_count>0).length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:$.rankings.most_late.filter(e=>e.late_count>0).map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(t<3?"bg-amber-500 text-white":"bg-slate-200"),children:t+1}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})]}),(0,ds.jsxs)(tk,{variant:"destructive",children:[e.late_count,"x"]})]},e.employee_id))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No late arrivals"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(TA,{className:"w-5 h-5 text-red-500"}),"Chronic Absentees (5+ days)"]})}),(0,ds.jsx)(Mn,{children:(null===(F=$.rankings)||void 0===F||null===(L=F.chronic_absentees)||void 0===L?void 0:L.length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:$.rankings.chronic_absentees.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]}),(0,ds.jsxs)(tk,{className:"bg-red-100 text-red-700",children:[e.absent_days," days"]})]},e.employee_id))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No chronic absentees"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(PA,{className:"w-5 h-5 text-emerald-500"}),"Punctuality Champions"]}),(0,ds.jsx)(On,{children:"Zero late arrivals and zero absences"})]}),(0,ds.jsx)(Mn,{children:(null===(I=$.rankings)||void 0===I||null===(z=I.punctuality_champions)||void 0===z?void 0:z.length)>0?(0,ds.jsx)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:$.rankings.punctuality_champions.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-emerald-50 rounded",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(PA,{className:"w-4 h-4 text-emerald-500"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})]}),(0,ds.jsxs)(tk,{className:"bg-emerald-100 text-emerald-700",children:[e.present_days," days"]})]},e.employee_id))}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No punctuality champions yet"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(qk,{className:"w-5 h-5 text-blue-500"}),"Most Hours Worked"]})}),(0,ds.jsx)(Mn,{children:(null===(B=$.rankings)||void 0===B||null===(U=B.most_hours)||void 0===U?void 0:U.filter(e=>e.total_hours>0).length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:$.rankings.most_hours.filter(e=>e.total_hours>0).map((e,t)=>{var s;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(t<3?"bg-blue-500 text-white":"bg-slate-200"),children:t+1}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})]}),(0,ds.jsxs)(tk,{className:"bg-blue-100 text-blue-700",children:[null===(s=e.total_hours)||void 0===s?void 0:s.toFixed(1),"h"]})]},e.employee_id)})}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No hour data"})})]})]})}),(0,ds.jsx)(hA,{value:"department",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-base",children:"Department Performance"}),(0,ds.jsx)(On,{children:"Ranked by attendance rate"})]}),(0,ds.jsx)(Mn,{children:(null===(V=$.department_analysis)||void 0===V?void 0:V.length)>0?(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Rank"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{className:"text-center",children:"Employees"}),(0,ds.jsx)(gS,{className:"text-center",children:"Present"}),(0,ds.jsx)(gS,{className:"text-center",children:"Absent"}),(0,ds.jsx)(gS,{className:"text-center",children:"Late"}),(0,ds.jsx)(gS,{className:"text-center",children:"Attendance Rate"})]})}),(0,ds.jsx)(xS,{children:$.department_analysis.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(0===t?"bg-emerald-500 text-white":t===$.department_analysis.length-1?"bg-red-500 text-white":"bg-slate-200"),children:t+1})}),(0,ds.jsx)(yS,{className:"font-medium",children:e.department}),(0,ds.jsx)(yS,{className:"text-center",children:e.employees}),(0,ds.jsx)(yS,{className:"text-center",children:e.present_days}),(0,ds.jsx)(yS,{className:"text-center",children:e.absent_days}),(0,ds.jsx)(yS,{className:"text-center",children:e.late_count}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsxs)(tk,{className:e.attendance_rate>=90?"bg-emerald-100 text-emerald-700":e.attendance_rate>=75?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700",children:[e.attendance_rate,"%"]})})]},e.department))})]})}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No department data available"})})]})})]})]}),(0,ds.jsx)(eo,{open:Re,onOpenChange:Oe,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit Attendance"}),(0,ds.jsx)(oo,{children:Me&&(0,ds.jsxs)("span",{children:[Me.employee_name," (",Me.emp_code,") - ",Me.date]})})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Status"}),(0,ds.jsxs)(yE,{value:Le.status,onValueChange:e=>Ie(u(u({},Le),{},{status:e})),children:[(0,ds.jsx)(bE,{"data-testid":"grid-edit-status-select",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"present",children:"Present"}),(0,ds.jsx)(kE,{value:"absent",children:"Absent"}),(0,ds.jsx)(kE,{value:"half_day",children:"Half Day"}),(0,ds.jsx)(kE,{value:"wfh",children:"Work From Home"}),(0,ds.jsx)(kE,{value:"tour",children:"On Tour"}),(0,ds.jsx)(kE,{value:"leave",children:"Leave"})]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"In Time"}),(0,ds.jsx)(vn,{type:"time",value:Le.first_in,onChange:e=>Ie(u(u({},Le),{},{first_in:e.target.value})),"data-testid":"grid-edit-in-time"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Out Time"}),(0,ds.jsx)(vn,{type:"time",value:Le.last_out,onChange:e=>Ie(u(u({},Le),{},{last_out:e.target.value})),"data-testid":"grid-edit-out-time"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Remarks"}),(0,ds.jsx)(vn,{value:Le.remarks,onChange:e=>Ie(u(u({},Le),{},{remarks:e.target.value})),placeholder:"Optional remarks","data-testid":"grid-edit-remarks"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-red-600",children:"Reason for Edit *"}),(0,ds.jsx)(kA,{value:Le.edit_reason,onChange:e=>Ie(u(u({},Le),{},{edit_reason:e.target.value})),placeholder:"Explain why this record is being edited...",rows:2,"data-testid":"grid-edit-reason"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Oe(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(Me)if(Le.edit_reason)try{let e;if(e=Me.attendance_id?await fetch("".concat(RA,"/attendance/").concat(Me.attendance_id),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(Le)}):await fetch("".concat(RA,"/attendance/manual"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u({employee_id:Me.employee_id,date:Me.date},Le))}),e.ok)ts.success("Attendance updated"),Oe(!1),Fe(null),Ve();else{const t=await e.json();ts.error(t.detail||"Failed to update attendance")}}catch(e){ts.error("Failed to update attendance")}else ts.error("Please provide a reason for the edit")},"data-testid":"save-grid-edit-btn",children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"}),"Save"]})]})]})})]}):(0,ds.jsxs)("div",{className:"space-y-6 p-6",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// My Attendance"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"My Attendance"}),(0,ds.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Your personal attendance summary"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[140px]"})]}),(0,ds.jsxs)(yE,{value:ue,onValueChange:he,children:[(0,ds.jsx)(bE,{className:"w-[160px]",children:(0,ds.jsx)(jE,{placeholder:"Select period"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"current_month",children:"Current Month"}),(0,ds.jsx)(kE,{value:"last_month",children:"Last Month"}),(0,ds.jsx)(kE,{value:"last_3_months",children:"Last 3 Months"}),(0,ds.jsx)(kE,{value:"year_to_date",children:"Year to Date"})]})]})]}),J&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("div",{className:"p-3 bg-primary/5 rounded-xl text-sm text-slate-600 border border-primary/10",children:[(0,ds.jsx)("strong",{children:"Period:"})," ",J.from_date," to ",J.to_date," |",(0,ds.jsx)("strong",{children:" Working Days:"})," ",J.working_days]}),(0,ds.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 stagger-children",children:[{value:(null===(Ge=J.summary)||void 0===Ge?void 0:Ge.present_days)||0,label:"Present Days",color:"emerald"},{value:(null===(Ke=J.summary)||void 0===Ke?void 0:Ke.absent_days)||0,label:"Absent Days",color:"rose"},{value:(null===($e=J.summary)||void 0===$e?void 0:$e.late_count)||0,label:"Late Instances",color:"amber"},{value:(null===(Xe=J.summary)||void 0===Xe?void 0:Xe.wfh_count)||0,label:"WFH",color:"blue"},{value:(null===(Je=J.summary)||void 0===Je?void 0:Je.leave_count)||0,label:"Leave",color:"purple"}].map((e,t)=>(0,ds.jsxs)("div",{className:"premium-stat stat-".concat(e.color),children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:e.value}),(0,ds.jsx)("p",{className:"text-xs font-medium text-slate-500 mt-0.5",children:e.label})]},t))}),(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)("span",{className:"text-sm font-medium text-slate-500",children:"Attendance Rate"}),(0,ds.jsxs)("span",{className:"text-2xl font-bold text-emerald-600",children:[null===(Qe=J.summary)||void 0===Qe?void 0:Qe.attendance_rate,"%"]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)("span",{className:"text-sm font-medium text-slate-500",children:"Avg Hours/Day"}),(0,ds.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[null===(Ze=J.summary)||void 0===Ze?void 0:Ze.avg_hours_per_day,"h"]})]})})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Attendance Records"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Date"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"In Time"}),(0,ds.jsx)(gS,{children:"Out Time"}),(0,ds.jsx)(gS,{children:"Hours"}),(0,ds.jsx)(gS,{children:"Late"})]})}),(0,ds.jsx)(xS,{children:null===(et=J.attendance_records)||void 0===et?void 0:et.sort((e,t)=>new Date(t.date)-new Date(e.date)).map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"present"===e.status?"bg-emerald-100 text-emerald-700":"wfh"===e.status?"bg-blue-100 text-blue-700":"half_day"===e.status||"HD"===e.status?"bg-amber-100 text-amber-700":"leave"===e.status?"bg-purple-100 text-purple-700":"bg-slate-100 text-slate-700",children:"half_day"===e.status||"HD"===e.status?"Half Day":e.status})}),(0,ds.jsx)(yS,{className:"font-mono",children:e.first_in||"-"}),(0,ds.jsx)(yS,{className:"font-mono",children:e.last_out||"-"}),(0,ds.jsx)(yS,{children:e.total_hours?"".concat(e.total_hours,"h"):"-"}),(0,ds.jsx)(yS,{children:e.is_late?(0,ds.jsxs)(tk,{variant:"destructive",children:[e.late_minutes,"m"]}):"-"})]},t))})]})})})]})]})]}):(0,ds.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,ds.jsx)(SE,{className:"w-8 h-8 text-primary animate-spin"})});var Ge,Ke,$e,Xe,Je,Qe,Ze,et,tt},MA=["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],FA=["__scopeSwitch"],LA=["__scopeSwitch","control","checked","bubbles"];var IA="Switch",[zA,BA]=Kn(IA),[UA,VA]=zA(IA),HA=a.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:r,defaultChecked:i,required:o,disabled:c,value:d="on",onCheckedChange:h,form:m}=e,p=l(e,MA),[f,x]=a.useState(null),v=Rs(t,e=>x(e)),g=a.useRef(!1),y=!f||(m||!!f.closest("form")),[j,b]=tr({prop:r,defaultProp:null!==i&&void 0!==i&&i,onChange:h,caller:IA});return(0,ds.jsxs)(UA,{scope:s,checked:j,disabled:c,children:[(0,ds.jsx)(cr.button,u(u({type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":GA(j),"data-disabled":c?"":void 0,disabled:c,value:d},p),{},{ref:v,onClick:qn(e.onClick,e=>{b(e=>!e),y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})),y&&(0,ds.jsx)(YA,{control:f,bubbles:!g.current,name:n,value:d,checked:j,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});HA.displayName=IA;var WA="SwitchThumb",qA=a.forwardRef((e,t)=>{const{__scopeSwitch:s}=e,a=l(e,FA),n=VA(WA,s);return(0,ds.jsx)(cr.span,u(u({"data-state":GA(n.checked),"data-disabled":n.disabled?"":void 0},a),{},{ref:t}))});qA.displayName=WA;var YA=a.forwardRef((e,t)=>{let{__scopeSwitch:s,control:n,checked:r,bubbles:i=!0}=e,o=l(e,LA);const c=a.useRef(null),d=Rs(c,t),h=SS(r),m=yy(n);return a.useEffect(()=>{const e=c.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(h!==r&&s){const t=new Event("click",{bubbles:i});s.call(e,r),e.dispatchEvent(t)}},[h,r,i]),(0,ds.jsx)("input",u(u({type:"checkbox","aria-hidden":!0,defaultChecked:r},o),{},{tabIndex:-1,ref:d,style:u(u(u({},o.style),m),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function GA(e){return e?"checked":"unchecked"}YA.displayName="SwitchBubbleInput";var KA=HA,$A=qA;const XA=["className"],JA=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,XA);return(0,ds.jsx)(KA,u(u({className:hn("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s)},a),{},{ref:t,children:(0,ds.jsx)($A,{className:hn("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}))});JA.displayName=KA.displayName;const QA=Yi("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ZA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function eP(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const tP={date:eP({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:eP({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:eP({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},sP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function aP(e){return(t,s)=>{let a;if("formatting"===(null!==s&&void 0!==s&&s.context?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,n=null!==s&&void 0!==s&&s.width?String(s.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{const t=e.defaultWidth,n=null!==s&&void 0!==s&&s.width?String(s.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}const nP={ordinalNumber:(e,t)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:aP({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:aP({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:aP({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:aP({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:aP({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function rP(e){return function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(n);if(!r)return null;const l=r[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(i)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return}(i,e=>e.test(l)):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s;return}(i,e=>e.test(l));let c;c=e.valueCallback?e.valueCallback(o):o,c=s.valueCallback?s.valueCallback(c):c;return{value:c,rest:t.slice(l.length)}}}const lP={ordinalNumber:(iP={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.match(iP.matchPattern);if(!s)return null;const a=s[0],n=e.match(iP.parsePattern);if(!n)return null;let r=iP.valueCallback?iP.valueCallback(n[0]):n[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(a.length)}}),era:rP({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:rP({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:rP({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:rP({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:rP({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var iP;const oP={code:"en-US",formatDistance:(e,t,s)=>{let a;const n=ZA[e];return a="string"===typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),null!==s&&void 0!==s&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a},formatLong:tP,formatRelative:(e,t,s,a)=>sP[e],localize:nP,match:lP,options:{weekStartsOn:0,firstWeekContainsDate:1}};let cP={};function dP(){return cP}Math.pow(10,8);const uP=6048e5,hP=Symbol.for("constructDateFrom");function mP(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&hP in e?e[hP](t):e instanceof Date?new e.constructor(t):new Date(t)}function pP(e,t){return mP(t||e,e)}function fP(e){const t=pP(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function xP(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];const n=mP.bind(null,e||s.find(e=>"object"===typeof e));return s.map(n)}function vP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in);return s.setHours(0,0,0,0),s}function gP(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t),r=vP(a),l=vP(n),i=+r-fP(r),o=+l-fP(l);return Math.round((i-o)/864e5)}function yP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}function jP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in);return gP(s,yP(s))+1}function bP(e,t){var s,a,n,r,l,i;const o=dP(),c=null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==r?r:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:o.weekStartsOn)&&void 0!==a?a:null===(i=o.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:0,d=pP(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function wP(e,t){return bP(e,u(u({},t),{},{weekStartsOn:1}))}function NP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=s.getFullYear(),n=mP(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=wP(n),l=mP(s,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const i=wP(l);return s.getTime()>=r.getTime()?a+1:s.getTime()>=i.getTime()?a:a-1}function _P(e,t){const s=NP(e,t),a=mP((null===t||void 0===t?void 0:t.in)||e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),wP(a)}function kP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=+wP(s)-+_P(s);return Math.round(a/uP)+1}function SP(e,t){var s,a,n,r,l,i;const o=pP(e,null===t||void 0===t?void 0:t.in),c=o.getFullYear(),d=dP(),u=null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:d.firstWeekContainsDate)&&void 0!==a?a:null===(i=d.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:1,h=mP((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const m=bP(h,t),p=mP((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,u),p.setHours(0,0,0,0);const f=bP(p,t);return+o>=+m?c+1:+o>=+f?c:c-1}function CP(e,t){var s,a,n,r,l,i;const o=dP(),c=null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:o.firstWeekContainsDate)&&void 0!==a?a:null===(i=o.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:1,d=SP(e,t),u=mP((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return bP(u,t)}function EP(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=+bP(s,t)-+CP(s,t);return Math.round(a/uP)+1}function TP(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const AP={y(e,t){const s=e.getFullYear(),a=s>0?s:1-s;return TP("yy"===t?a%100:a,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):TP(s+1,2)},d:(e,t)=>TP(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>TP(e.getHours()%12||12,t.length),H:(e,t)=>TP(e.getHours(),t.length),m:(e,t)=>TP(e.getMinutes(),t.length),s:(e,t)=>TP(e.getSeconds(),t.length),S(e,t){const s=t.length,a=e.getMilliseconds();return TP(Math.trunc(a*Math.pow(10,s-3)),t.length)}},PP="midnight",DP="noon",RP="morning",OP="afternoon",MP="evening",FP="night",LP={G:function(e,t,s){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return s.ordinalNumber(a,{unit:"year"})}return AP.y(e,t)},Y:function(e,t,s,a){const n=SP(e,a),r=n>0?n:1-n;if("YY"===t){return TP(r%100,2)}return"Yo"===t?s.ordinalNumber(r,{unit:"year"}):TP(r,t.length)},R:function(e,t){return TP(NP(e),t.length)},u:function(e,t){return TP(e.getFullYear(),t.length)},Q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return TP(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return TP(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){const a=e.getMonth();switch(t){case"M":case"MM":return AP.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return TP(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){const n=EP(e,a);return"wo"===t?s.ordinalNumber(n,{unit:"week"}):TP(n,t.length)},I:function(e,t,s){const a=kP(e);return"Io"===t?s.ordinalNumber(a,{unit:"week"}):TP(a,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):AP.d(e,t)},D:function(e,t,s){const a=jP(e);return"Do"===t?s.ordinalNumber(a,{unit:"dayOfYear"}):TP(a,t.length)},E:function(e,t,s){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){const n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return TP(r,2);case"eo":return s.ordinalNumber(r,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){const n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return TP(r,t.length);case"co":return s.ordinalNumber(r,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,s){const a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return TP(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const a=e.getHours();let n;switch(n=12===a?DP:0===a?PP:a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,s){const a=e.getHours();let n;switch(n=a>=17?MP:a>=12?OP:a>=4?RP:FP,t){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return AP.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):AP.H(e,t)},K:function(e,t,s){const a=e.getHours()%12;return"Ko"===t?s.ordinalNumber(a,{unit:"hour"}):TP(a,t.length)},k:function(e,t,s){let a=e.getHours();return 0===a&&(a=24),"ko"===t?s.ordinalNumber(a,{unit:"hour"}):TP(a,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):AP.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):AP.s(e,t)},S:function(e,t){return AP.S(e,t)},X:function(e,t,s){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return zP(a);case"XXXX":case"XX":return BP(a);default:return BP(a,":")}},x:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"x":return zP(a);case"xxxx":case"xx":return BP(a);default:return BP(a,":")}},O:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IP(a,":");default:return"GMT"+BP(a,":")}},z:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IP(a,":");default:return"GMT"+BP(a,":")}},t:function(e,t,s){return TP(Math.trunc(+e/1e3),t.length)},T:function(e,t,s){return TP(+e,t.length)}};function IP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),r=a%60;return 0===r?s+String(n):s+String(n)+t+TP(r,2)}function zP(e,t){if(e%60===0){return(e>0?"-":"+")+TP(Math.abs(e)/60,2)}return BP(e,t)}function BP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=e>0?"-":"+",a=Math.abs(e);return s+TP(Math.trunc(a/60),2)+t+TP(a%60,2)}const UP=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},VP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},HP={p:VP,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return UP(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",UP(a,t)).replace("{{time}}",VP(n,t))}},WP=/^D+$/,qP=/^Y+$/,YP=["D","DD","YY","YYYY"];function GP(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function KP(e){return!(!GP(e)&&"number"!==typeof e||isNaN(+pP(e)))}const $P=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JP=/^'([^]*?)'?$/,QP=/''/g,ZP=/[a-zA-Z]/;function eD(e,t,s){var a,n,r,l,i,o,c,d,u,h,m,p,f,x;const v=dP(),g=null!==(a=null!==(n=null===s||void 0===s?void 0:s.locale)&&void 0!==n?n:v.locale)&&void 0!==a?a:oP,y=null!==(r=null!==(l=null!==(i=null!==(o=null===s||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:null===s||void 0===s||null===(c=s.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:v.firstWeekContainsDate)&&void 0!==l?l:null===(d=v.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==r?r:1,j=null!==(u=null!==(h=null!==(m=null!==(p=null===s||void 0===s?void 0:s.weekStartsOn)&&void 0!==p?p:null===s||void 0===s||null===(f=s.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==m?m:v.weekStartsOn)&&void 0!==h?h:null===(x=v.locale)||void 0===x||null===(x=x.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==u?u:0,b=pP(e,null===s||void 0===s?void 0:s.in);if(!KP(b))throw new RangeError("Invalid time value");let w=t.match(XP).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,HP[t])(e,g.formatLong)}return e}).join("").match($P).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:tD(e)};if(LP[t])return{isToken:!0,value:e};if(t.match(ZP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});g.localize.preprocessor&&(w=g.localize.preprocessor(b,w));const N={firstWeekContainsDate:y,weekStartsOn:j,locale:g};return w.map(a=>{if(!a.isToken)return a.value;const n=a.value;(null!==s&&void 0!==s&&s.useAdditionalWeekYearTokens||!function(e){return qP.test(e)}(n))&&(null!==s&&void 0!==s&&s.useAdditionalDayOfYearTokens||!function(e){return WP.test(e)}(n))||function(e,t,s){const a=function(e,t,s){const a="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(a," to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,s);if(console.warn(a),YP.includes(e))throw new RangeError(a)}(n,t,String(e));return(0,LP[n[0]])(b,n,g.localize,N)}).join("")}function tD(e){const t=e.match(JP);return t?t[1].replace(QP,"'"):e}function sD(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in);return s.setDate(1),s.setHours(0,0,0,0),s}function aD(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function nD(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t);return a.getFullYear()===n.getFullYear()}function rD(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=s.getFullYear(),n=s.getMonth(),r=mP(s,0);return r.setFullYear(a,n+1,0),r.setHours(0,0,0,0),r.getDate()}function lD(e,t,s){const a=pP(e,null===s||void 0===s?void 0:s.in),n=a.getFullYear(),r=a.getDate(),l=mP((null===s||void 0===s?void 0:s.in)||e,0);l.setFullYear(n,t,15),l.setHours(0,0,0,0);const i=rD(l);return a.setMonth(t,Math.min(r,i)),a}function iD(e,t,s){const a=pP(e,null===s||void 0===s?void 0:s.in);return isNaN(+a)?mP((null===s||void 0===s?void 0:s.in)||e,NaN):(a.setFullYear(t),a)}function oD(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t);return 12*(a.getFullYear()-n.getFullYear())+(a.getMonth()-n.getMonth())}function cD(e,t,s){const a=pP(e,null===s||void 0===s?void 0:s.in);if(isNaN(t))return mP((null===s||void 0===s?void 0:s.in)||e,NaN);if(!t)return a;const n=a.getDate(),r=mP((null===s||void 0===s?void 0:s.in)||e,a.getTime());r.setMonth(a.getMonth()+t+1,0);return n>=r.getDate()?r:(a.setFullYear(r.getFullYear(),r.getMonth(),n),a)}function dD(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function uD(e,t){return+pP(e)<+pP(t)}function hD(e,t,s){const a=pP(e,null===s||void 0===s?void 0:s.in);return isNaN(t)?mP((null===s||void 0===s?void 0:s.in)||e,NaN):t?(a.setDate(a.getDate()+t),a):a}function mD(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t);return+vP(a)===+vP(n)}function pD(e,t){return+pP(e)>+pP(t)}function fD(e,t,s){return hD(e,-t,s)}function xD(e,t,s){return hD(e,7*t,s)}function vD(e,t,s){return cD(e,12*t,s)}function gD(e,t){var s,a,n,r,l,i;const o=dP(),c=null!==(s=null!==(a=null!==(n=null!==(r=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==r?r:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:o.weekStartsOn)&&void 0!==a?a:null===(i=o.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:0,d=pP(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=6+(u<c?-7:0)-(u-c);return d.setDate(d.getDate()+h),d.setHours(23,59,59,999),d}function yD(e,t){return gD(e,u(u({},t),{},{weekStartsOn:1}))}function jD(e,t){let s,a=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{a||"object"!==typeof e||(a=mP.bind(null,e));const t=pP(e,a);(!s||s<t||isNaN(+t))&&(s=t)}),mP(a,s||NaN)}function bD(e,t){let s,a=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{a||"object"!==typeof e||(a=mP.bind(null,e));const t=pP(e,a);(!s||s>t||isNaN(+t))&&(s=t)}),mP(a,s||NaN)}function wD(e){return Math.trunc(+pP(e)/1e3)}function ND(e,t,s){const[a,n]=xP(null===s||void 0===s?void 0:s.in,e,t),r=bP(a,s),l=bP(n,s),i=+r-fP(r),o=+l-fP(l);return Math.round((i-o)/uP)}function _D(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(0,0,0,0),pP(s,null===t||void 0===t?void 0:t.in)}function kD(e,t){const s=pP(e,null===t||void 0===t?void 0:t.in);return ND(_D(s,t),sD(s,t),t)+1}var SD=function(){return SD=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},SD.apply(this,arguments)};function CD(e,t,s){if(s||2===arguments.length)for(var a,n=0,r=t.length;n<r;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function ED(e){return"multiple"===e.mode}function TD(e){return"range"===e.mode}function AD(e){return"single"===e.mode}"function"===typeof SuppressedError&&SuppressedError;var PD={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var DD=Object.freeze({__proto__:null,formatCaption:function(e,t){return eD(e,"LLLL y",t)},formatDay:function(e,t){return eD(e,"d",t)},formatMonthCaption:function(e,t){return eD(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return eD(e,"cccccc",t)},formatYearCaption:function(e,t){return eD(e,"yyyy",t)}}),RD=Object.freeze({__proto__:null,labelDay:function(e,t,s){return eD(e,"do MMMM (EEEE)",s)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return eD(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});function OD(e){var t=e.fromYear,s=e.toYear,a=e.fromMonth,n=e.toMonth,r=e.fromDate,l=e.toDate;return a?r=sD(a):t&&(r=new Date(t,0,1)),n?l=aD(n):s&&(l=new Date(s,11,31)),{fromDate:r?vP(r):void 0,toDate:l?vP(l):void 0}}var MD=(0,a.createContext)(void 0);function FD(e){var t,s,a=e.initialProps,n=function(){var e=PD,t=oP,s=new Date;return{captionLayout:"buttons",classNames:e,formatters:DD,labels:RD,locale:t,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:s,mode:"default"}}(),r=OD(a),l=r.fromDate,i=r.toDate,o=null!==(t=a.captionLayout)&&void 0!==t?t:n.captionLayout;"buttons"===o||l&&i||(o="buttons"),(AD(a)||ED(a)||TD(a))&&(s=a.onSelect);var c=SD(SD(SD({},n),a),{captionLayout:o,classNames:SD(SD({},n.classNames),a.classNames),components:SD({},a.components),formatters:SD(SD({},n.formatters),a.formatters),fromDate:l,labels:SD(SD({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:SD(SD({},n.modifiers),a.modifiers),modifiersClassNames:SD(SD({},n.modifiersClassNames),a.modifiersClassNames),onSelect:s,styles:SD(SD({},n.styles),a.styles),toDate:i});return(0,ds.jsx)(MD.Provider,{value:c,children:e.children})}function LD(){var e=(0,a.useContext)(MD);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function ID(e){var t=LD(),s=t.locale,a=t.classNames,n=t.styles,r=t.formatters.formatCaption;return(0,ds.jsx)("div",{className:a.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:r(e.displayMonth,{locale:s})})}function zD(e){return(0,ds.jsx)("svg",SD({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:(0,ds.jsx)("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BD(e){var t,s,a=e.onChange,n=e.value,r=e.children,l=e.caption,i=e.className,o=e.style,c=LD(),d=null!==(s=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==s?s:zD;return(0,ds.jsxs)("div",{className:i,style:o,children:[(0,ds.jsx)("span",{className:c.classNames.vhidden,children:e["aria-label"]}),(0,ds.jsx)("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:n,onChange:a,children:r}),(0,ds.jsxs)("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[l,(0,ds.jsx)(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function UD(e){var t,s=LD(),a=s.fromDate,n=s.toDate,r=s.styles,l=s.locale,i=s.formatters.formatMonthCaption,o=s.classNames,c=s.components,d=s.labels.labelMonthDropdown;if(!a)return(0,ds.jsx)(ds.Fragment,{});if(!n)return(0,ds.jsx)(ds.Fragment,{});var u=[];if(nD(a,n))for(var h=sD(a),m=a.getMonth();m<=n.getMonth();m++)u.push(lD(h,m));else for(h=sD(new Date),m=0;m<=11;m++)u.push(lD(h,m));var p=null!==(t=null===c||void 0===c?void 0:c.Dropdown)&&void 0!==t?t:BD;return(0,ds.jsx)(p,{name:"months","aria-label":d(),className:o.dropdown_month,style:r.dropdown_month,onChange:function(t){var s=Number(t.target.value),a=lD(sD(e.displayMonth),s);e.onChange(a)},value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:l}),children:u.map(function(e){return(0,ds.jsx)("option",{value:e.getMonth(),children:i(e,{locale:l})},e.getMonth())})})}function VD(e){var t,s=e.displayMonth,a=LD(),n=a.fromDate,r=a.toDate,l=a.locale,i=a.styles,o=a.classNames,c=a.components,d=a.formatters.formatYearCaption,u=a.labels.labelYearDropdown,h=[];if(!n)return(0,ds.jsx)(ds.Fragment,{});if(!r)return(0,ds.jsx)(ds.Fragment,{});for(var m=n.getFullYear(),p=r.getFullYear(),f=m;f<=p;f++)h.push(iD(yP(new Date),f));var x=null!==(t=null===c||void 0===c?void 0:c.Dropdown)&&void 0!==t?t:BD;return(0,ds.jsx)(x,{name:"years","aria-label":u(),className:o.dropdown_year,style:i.dropdown_year,onChange:function(t){var a=iD(sD(s),Number(t.target.value));e.onChange(a)},value:s.getFullYear(),caption:d(s,{locale:l}),children:h.map(function(e){return(0,ds.jsx)("option",{value:e.getFullYear(),children:d(e,{locale:l})},e.getFullYear())})})}function HD(){var e=LD(),t=function(e){var t=e.month,s=e.defaultMonth,a=e.today,n=t||s||a||new Date,r=e.toDate,l=e.fromDate,i=e.numberOfMonths,o=void 0===i?1:i;return r&&oD(r,n)<0&&(n=cD(r,-1*(o-1))),l&&oD(n,l)<0&&(n=l),sD(n)}(e),s=function(e,t){var s=(0,a.useState)(e),n=s[0];return[void 0===t?n:t,s[1]]}(t,e.month),n=s[0],r=s[1];return[n,function(t){var s;if(!e.disableNavigation){var a=sD(t);r(a),null===(s=e.onMonthChange)||void 0===s||s.call(e,a)}}]}var WD=(0,a.createContext)(void 0);function qD(e){var t=LD(),s=HD(),a=s[0],n=s[1],r=function(e,t){for(var s=t.reverseMonths,a=t.numberOfMonths,n=sD(e),r=oD(sD(cD(n,a)),n),l=[],i=0;i<r;i++){var o=cD(n,i);l.push(o)}return s&&(l=l.reverse()),l}(a,t),l=function(e,t){if(!t.disableNavigation){var s=t.toDate,a=t.pagedNavigation,n=t.numberOfMonths,r=void 0===n?1:n,l=a?r:1,i=sD(e);if(!s)return cD(i,l);if(!(oD(s,e)<r))return cD(i,l)}}(a,t),i=function(e,t){if(!t.disableNavigation){var s=t.fromDate,a=t.pagedNavigation,n=t.numberOfMonths,r=a?void 0===n?1:n:1,l=sD(e);if(!s)return cD(l,-r);if(!(oD(l,s)<=0))return cD(l,-r)}}(a,t),o=function(e){return r.some(function(t){return dD(e,t)})},c={currentMonth:a,displayMonths:r,goToMonth:n,goToDate:function(e,s){o(e)||(s&&uD(e,s)?n(cD(e,1+-1*t.numberOfMonths)):n(e))},previousMonth:i,nextMonth:l,isDateDisplayed:o};return(0,ds.jsx)(WD.Provider,{value:c,children:e.children})}function YD(){var e=(0,a.useContext)(WD);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function GD(e){var t,s=LD(),a=s.classNames,n=s.styles,r=s.components,l=YD().goToMonth,i=function(t){l(cD(t,e.displayIndex?-e.displayIndex:0))},o=null!==(t=null===r||void 0===r?void 0:r.CaptionLabel)&&void 0!==t?t:ID,c=(0,ds.jsx)(o,{id:e.id,displayMonth:e.displayMonth});return(0,ds.jsxs)("div",{className:a.caption_dropdowns,style:n.caption_dropdowns,children:[(0,ds.jsx)("div",{className:a.vhidden,children:c}),(0,ds.jsx)(UD,{onChange:i,displayMonth:e.displayMonth}),(0,ds.jsx)(VD,{onChange:i,displayMonth:e.displayMonth})]})}function KD(e){return(0,ds.jsx)("svg",SD({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,ds.jsx)("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function $D(e){return(0,ds.jsx)("svg",SD({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,ds.jsx)("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var XD=(0,a.forwardRef)(function(e,t){var s=LD(),a=s.classNames,n=s.styles,r=[a.button_reset,a.button];e.className&&r.push(e.className);var l=r.join(" "),i=SD(SD({},n.button_reset),n.button);return e.style&&Object.assign(i,e.style),(0,ds.jsx)("button",SD({},e,{ref:t,type:"button",className:l,style:i}))});function JD(e){var t,s,a=LD(),n=a.dir,r=a.locale,l=a.classNames,i=a.styles,o=a.labels,c=o.labelPrevious,d=o.labelNext,u=a.components;if(!e.nextMonth&&!e.previousMonth)return(0,ds.jsx)(ds.Fragment,{});var h=c(e.previousMonth,{locale:r}),m=[l.nav_button,l.nav_button_previous].join(" "),p=d(e.nextMonth,{locale:r}),f=[l.nav_button,l.nav_button_next].join(" "),x=null!==(t=null===u||void 0===u?void 0:u.IconRight)&&void 0!==t?t:$D,v=null!==(s=null===u||void 0===u?void 0:u.IconLeft)&&void 0!==s?s:KD;return(0,ds.jsxs)("div",{className:l.nav,style:i.nav,children:[!e.hidePrevious&&(0,ds.jsx)(XD,{name:"previous-month","aria-label":h,className:m,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===n?(0,ds.jsx)(x,{className:l.nav_icon,style:i.nav_icon}):(0,ds.jsx)(v,{className:l.nav_icon,style:i.nav_icon})}),!e.hideNext&&(0,ds.jsx)(XD,{name:"next-month","aria-label":p,className:f,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===n?(0,ds.jsx)(v,{className:l.nav_icon,style:i.nav_icon}):(0,ds.jsx)(x,{className:l.nav_icon,style:i.nav_icon})})]})}function QD(e){var t=LD().numberOfMonths,s=YD(),a=s.previousMonth,n=s.nextMonth,r=s.goToMonth,l=s.displayMonths,i=l.findIndex(function(t){return dD(e.displayMonth,t)}),o=0===i,c=i===l.length-1,d=t>1&&(o||!c),u=t>1&&(c||!o);return(0,ds.jsx)(JD,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:n,previousMonth:a,onPreviousClick:function(){a&&r(a)},onNextClick:function(){n&&r(n)}})}function ZD(e){var t,s,a=LD(),n=a.classNames,r=a.disableNavigation,l=a.styles,i=a.captionLayout,o=a.components,c=null!==(t=null===o||void 0===o?void 0:o.CaptionLabel)&&void 0!==t?t:ID;return s=r?(0,ds.jsx)(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===i?(0,ds.jsx)(GD,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===i?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(GD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),(0,ds.jsx)(QD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,ds.jsx)(QD,{displayMonth:e.displayMonth,id:e.id})]}),(0,ds.jsx)("div",{className:n.caption,style:l.caption,children:s})}function eR(e){var t=LD(),s=t.footer,a=t.styles,n=t.classNames.tfoot;return s?(0,ds.jsx)("tfoot",{className:n,style:a.tfoot,children:(0,ds.jsx)("tr",{children:(0,ds.jsx)("td",{colSpan:8,children:s})})}):(0,ds.jsx)(ds.Fragment,{})}function tR(){var e=LD(),t=e.classNames,s=e.styles,a=e.showWeekNumber,n=e.locale,r=e.weekStartsOn,l=e.ISOWeek,i=e.formatters.formatWeekdayName,o=e.labels.labelWeekday,c=function(e,t,s){for(var a=s?wP(new Date):bP(new Date,{locale:e,weekStartsOn:t}),n=[],r=0;r<7;r++){var l=hD(a,r);n.push(l)}return n}(n,r,l);return(0,ds.jsxs)("tr",{style:s.head_row,className:t.head_row,children:[a&&(0,ds.jsx)("td",{style:s.head_cell,className:t.head_cell}),c.map(function(e,a){return(0,ds.jsx)("th",{scope:"col",className:t.head_cell,style:s.head_cell,"aria-label":o(e,{locale:n}),children:i(e,{locale:n})},a)})]})}function sR(){var e,t=LD(),s=t.classNames,a=t.styles,n=t.components,r=null!==(e=null===n||void 0===n?void 0:n.HeadRow)&&void 0!==e?e:tR;return(0,ds.jsx)("thead",{style:a.head,className:s.head,children:(0,ds.jsx)(r,{})})}function aR(e){var t=LD(),s=t.locale,a=t.formatters.formatDay;return(0,ds.jsx)(ds.Fragment,{children:a(e.date,{locale:s})})}var nR=(0,a.createContext)(void 0);function rR(e){if(!ED(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return(0,ds.jsx)(nR.Provider,{value:t,children:e.children})}return(0,ds.jsx)(lR,{initialProps:e.initialProps,children:e.children})}function lR(e){var t=e.initialProps,s=e.children,a=t.selected,n=t.min,r=t.max,l={disabled:[]};a&&l.disabled.push(function(e){var t=r&&a.length>r-1,s=a.some(function(t){return mD(t,e)});return Boolean(t&&!s)});var i={selected:a,onDayClick:function(e,s,l){var i,o;if((null===(i=t.onDayClick)||void 0===i||i.call(t,e,s,l),!Boolean(s.selected&&n&&(null===a||void 0===a?void 0:a.length)===n))&&!Boolean(!s.selected&&r&&(null===a||void 0===a?void 0:a.length)===r)){var c=a?CD([],a,!0):[];if(s.selected){var d=c.findIndex(function(t){return mD(e,t)});c.splice(d,1)}else c.push(e);null===(o=t.onSelect)||void 0===o||o.call(t,c,e,s,l)}},modifiers:l};return(0,ds.jsx)(nR.Provider,{value:i,children:s})}function iR(){var e=(0,a.useContext)(nR);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var oR,cR=(0,a.createContext)(void 0);function dR(e){if(!TD(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return(0,ds.jsx)(cR.Provider,{value:t,children:e.children})}return(0,ds.jsx)(uR,{initialProps:e.initialProps,children:e.children})}function uR(e){var t=e.initialProps,s=e.children,a=t.selected,n=a||{},r=n.from,l=n.to,i=t.min,o=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(r?(c.range_start=[r],l?(c.range_end=[l],mD(r,l)||(c.range_middle=[{after:r,before:l}])):c.range_end=[r]):l&&(c.range_start=[l],c.range_end=[l]),i&&(r&&!l&&c.disabled.push({after:fD(r,i-1),before:hD(r,i-1)}),r&&l&&c.disabled.push({after:r,before:hD(r,i-1)}),!r&&l&&c.disabled.push({after:fD(l,i-1),before:hD(l,i-1)})),o){if(r&&!l&&(c.disabled.push({before:hD(r,1-o)}),c.disabled.push({after:hD(r,o-1)})),r&&l){var d=o-(gP(l,r)+1);c.disabled.push({before:fD(r,d)}),c.disabled.push({after:hD(l,d)})}!r&&l&&(c.disabled.push({before:hD(l,1-o)}),c.disabled.push({after:hD(l,o-1)}))}return(0,ds.jsx)(cR.Provider,{value:{selected:a,onDayClick:function(e,s,n){var r,l;null===(r=t.onDayClick)||void 0===r||r.call(t,e,s,n);var i=function(e,t){var s=t||{},a=s.from,n=s.to;if(a&&n){if(mD(n,e)&&mD(a,e))return;if(mD(n,e))return{from:n,to:void 0};if(mD(a,e))return;return pD(a,e)?{from:e,to:n}:{from:a,to:e}}return n?pD(e,n)?{from:n,to:e}:{from:e,to:n}:a?uD(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}(e,a);null===(l=t.onSelect)||void 0===l||l.call(t,i,e,s,n)},modifiers:c},children:s})}function hR(){var e=(0,a.useContext)(cR);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function mR(e){return Array.isArray(e)?CD([],e,!0):void 0!==e?[e]:[]}!function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"}(oR||(oR={}));var pR=oR.Selected,fR=oR.Disabled,xR=oR.Hidden,vR=oR.Today,gR=oR.RangeEnd,yR=oR.RangeMiddle,jR=oR.RangeStart,bR=oR.Outside;var wR=(0,a.createContext)(void 0);function NR(e){var t=LD(),s=function(e,t,s){var a,n=((a={})[pR]=mR(e.selected),a[fR]=mR(e.disabled),a[xR]=mR(e.hidden),a[vR]=[e.today],a[gR]=[],a[yR]=[],a[jR]=[],a[bR]=[],a);return e.fromDate&&n[fR].push({before:e.fromDate}),e.toDate&&n[fR].push({after:e.toDate}),ED(e)?n[fR]=n[fR].concat(t.modifiers[fR]):TD(e)&&(n[fR]=n[fR].concat(s.modifiers[fR]),n[jR]=s.modifiers[jR],n[yR]=s.modifiers[yR],n[gR]=s.modifiers[gR]),n}(t,iR(),hR()),a=function(e){var t={};return Object.entries(e).forEach(function(e){var s=e[0],a=e[1];t[s]=mR(a)}),t}(t.modifiers),n=SD(SD({},s),a);return(0,ds.jsx)(wR.Provider,{value:n,children:e.children})}function _R(){var e=(0,a.useContext)(wR);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function kR(e,t){return t.some(function(t){if("boolean"===typeof t)return t;if(GP(t))return mD(e,t);if(function(e){return Array.isArray(e)&&e.every(GP)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"===typeof e&&"from"in e)}(t))return function(e,t){var s,a=t.from,n=t.to;return a&&n?(gP(n,a)<0&&(a=(s=[n,a])[0],n=s[1]),gP(e,a)>=0&&gP(n,e)>=0):n?mD(n,e):!!a&&mD(a,e)}(e,t);if(function(e){return Boolean(e&&"object"===typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"===typeof e&&"before"in e&&"after"in e)}(t)){var s=gP(t.before,e)>0,a=gP(t.after,e)<0;return pD(t.before,t.after)?a&&s:s||a}return function(e){return Boolean(e&&"object"===typeof e&&"after"in e)}(t)?gP(e,t.after)>0:function(e){return Boolean(e&&"object"===typeof e&&"before"in e)}(t)?gP(t.before,e)>0:"function"===typeof t&&t(e)})}function SR(e,t,s){var a=Object.keys(t).reduce(function(s,a){var n=t[a];return kR(e,n)&&s.push(a),s},[]),n={};return a.forEach(function(e){return n[e]=!0}),s&&!dD(e,s)&&(n.outside=!0),n}function CR(e,t){var s=t.moveBy,a=t.direction,n=t.context,r=t.modifiers,l=t.retry,i=void 0===l?{count:0,lastFocused:e}:l,o=n.weekStartsOn,c=n.fromDate,d=n.toDate,u=n.locale,h={day:hD,week:xD,month:cD,year:vD,startOfWeek:function(e){return n.ISOWeek?wP(e):bP(e,{locale:u,weekStartsOn:o})},endOfWeek:function(e){return n.ISOWeek?yD(e):gD(e,{locale:u,weekStartsOn:o})}}[s](e,"after"===a?1:-1);"before"===a&&c?h=jD([c,h]):"after"===a&&d&&(h=bD([d,h]));var m=!0;if(r){var p=SR(h,r);m=!p.disabled&&!p.hidden}return m?h:i.count>365?i.lastFocused:CR(h,{moveBy:s,direction:a,context:n,modifiers:r,retry:SD(SD({},i),{count:i.count+1})})}var ER=(0,a.createContext)(void 0);function TR(e){var t=YD(),s=_R(),n=(0,a.useState)(),r=n[0],l=n[1],i=(0,a.useState)(),o=i[0],c=i[1],d=function(e,t){for(var s,a,n=sD(e[0]),r=aD(e[e.length-1]),l=n;l<=r;){var i=SR(l,t);if(i.disabled||i.hidden)l=hD(l,1);else{if(i.selected)return l;i.today&&!a&&(a=l),s||(s=l),l=hD(l,1)}}return a||s}(t.displayMonths,s),u=(null!==r&&void 0!==r?r:o&&t.isDateDisplayed(o))?o:d,h=function(e){l(e)},m=LD(),p=function(e,a){if(r){var n=CR(r,{moveBy:e,direction:a,context:m,modifiers:s});mD(r,n)||(t.goToDate(n,r),h(n))}},f={focusedDay:r,focusTarget:u,blur:function(){c(r),l(void 0)},focus:h,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return(0,ds.jsx)(ER.Provider,{value:f,children:e.children})}function AR(){var e=(0,a.useContext)(ER);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var PR=(0,a.createContext)(void 0);function DR(e){if(!AD(e.initialProps)){var t={selected:void 0};return(0,ds.jsx)(PR.Provider,{value:t,children:e.children})}return(0,ds.jsx)(RR,{initialProps:e.initialProps,children:e.children})}function RR(e){var t=e.initialProps,s=e.children,a={selected:t.selected,onDayClick:function(e,s,a){var n,r,l;null===(n=t.onDayClick)||void 0===n||n.call(t,e,s,a),!s.selected||t.required?null===(l=t.onSelect)||void 0===l||l.call(t,e,e,s,a):null===(r=t.onSelect)||void 0===r||r.call(t,void 0,e,s,a)}};return(0,ds.jsx)(PR.Provider,{value:a,children:s})}function OR(){var e=(0,a.useContext)(PR);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function MR(e,t){var s=[e.classNames.day];return Object.keys(t).forEach(function(t){var a=e.modifiersClassNames[t];if(a)s.push(a);else if(function(e){return Object.values(oR).includes(e)}(t)){var n=e.classNames["day_".concat(t)];n&&s.push(n)}}),s}function FR(e,t,s){var n,r,l,i=LD(),o=AR(),c=function(e,t){return SR(e,_R(),t)}(e,t),d=function(e,t){var s=LD(),a=OR(),n=iR(),r=hR(),l=AR(),i=l.focusDayAfter,o=l.focusDayBefore,c=l.focusWeekAfter,d=l.focusWeekBefore,u=l.blur,h=l.focus,m=l.focusMonthBefore,p=l.focusMonthAfter,f=l.focusYearBefore,x=l.focusYearAfter,v=l.focusStartOfWeek,g=l.focusEndOfWeek,y={onClick:function(l){var i,o,c,d;AD(s)?null===(i=a.onDayClick)||void 0===i||i.call(a,e,t,l):ED(s)?null===(o=n.onDayClick)||void 0===o||o.call(n,e,t,l):TD(s)?null===(c=r.onDayClick)||void 0===c||c.call(r,e,t,l):null===(d=s.onDayClick)||void 0===d||d.call(s,e,t,l)},onFocus:function(a){var n;h(e),null===(n=s.onDayFocus)||void 0===n||n.call(s,e,t,a)},onBlur:function(a){var n;u(),null===(n=s.onDayBlur)||void 0===n||n.call(s,e,t,a)},onKeyDown:function(a){var n;switch(a.key){case"ArrowLeft":a.preventDefault(),a.stopPropagation(),"rtl"===s.dir?i():o();break;case"ArrowRight":a.preventDefault(),a.stopPropagation(),"rtl"===s.dir?o():i();break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),c();break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),d();break;case"PageUp":a.preventDefault(),a.stopPropagation(),a.shiftKey?f():m();break;case"PageDown":a.preventDefault(),a.stopPropagation(),a.shiftKey?x():p();break;case"Home":a.preventDefault(),a.stopPropagation(),v();break;case"End":a.preventDefault(),a.stopPropagation(),g()}null===(n=s.onDayKeyDown)||void 0===n||n.call(s,e,t,a)},onKeyUp:function(a){var n;null===(n=s.onDayKeyUp)||void 0===n||n.call(s,e,t,a)},onMouseEnter:function(a){var n;null===(n=s.onDayMouseEnter)||void 0===n||n.call(s,e,t,a)},onMouseLeave:function(a){var n;null===(n=s.onDayMouseLeave)||void 0===n||n.call(s,e,t,a)},onPointerEnter:function(a){var n;null===(n=s.onDayPointerEnter)||void 0===n||n.call(s,e,t,a)},onPointerLeave:function(a){var n;null===(n=s.onDayPointerLeave)||void 0===n||n.call(s,e,t,a)},onTouchCancel:function(a){var n;null===(n=s.onDayTouchCancel)||void 0===n||n.call(s,e,t,a)},onTouchEnd:function(a){var n;null===(n=s.onDayTouchEnd)||void 0===n||n.call(s,e,t,a)},onTouchMove:function(a){var n;null===(n=s.onDayTouchMove)||void 0===n||n.call(s,e,t,a)},onTouchStart:function(a){var n;null===(n=s.onDayTouchStart)||void 0===n||n.call(s,e,t,a)}};return y}(e,c),u=function(){var e=LD(),t=OR(),s=iR(),a=hR();return AD(e)?t.selected:ED(e)?s.selected:TD(e)?a.selected:void 0}(),h=Boolean(i.onDayClick||"default"!==i.mode);(0,a.useEffect)(function(){var t;c.outside||o.focusedDay&&h&&mD(o.focusedDay,e)&&(null===(t=s.current)||void 0===t||t.focus())},[o.focusedDay,e,s,h,c.outside]);var m=MR(i,c).join(" "),p=function(e,t){var s=SD({},e.styles.day);return Object.keys(t).forEach(function(t){var a;s=SD(SD({},s),null===(a=e.modifiersStyles)||void 0===a?void 0:a[t])}),s}(i,c),f=Boolean(c.outside&&!i.showOutsideDays||c.hidden),x=null!==(l=null===(r=i.components)||void 0===r?void 0:r.DayContent)&&void 0!==l?l:aR,v={style:p,className:m,children:(0,ds.jsx)(x,{date:e,displayMonth:t,activeModifiers:c}),role:"gridcell"},g=o.focusTarget&&mD(o.focusTarget,e)&&!c.outside,y=o.focusedDay&&mD(o.focusedDay,e),j=SD(SD(SD({},v),((n={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,n.tabIndex=y||g?0:-1,n)),d);return{isButton:h,isHidden:f,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:v}}function LR(e){var t=(0,a.useRef)(null),s=FR(e.date,e.displayMonth,t);return s.isHidden?(0,ds.jsx)("div",{role:"gridcell"}):s.isButton?(0,ds.jsx)(XD,SD({name:"day",ref:t},s.buttonProps)):(0,ds.jsx)("div",SD({},s.divProps))}function IR(e){var t=e.number,s=e.dates,a=LD(),n=a.onWeekNumberClick,r=a.styles,l=a.classNames,i=a.locale,o=a.labels.labelWeekNumber,c=(0,a.formatters.formatWeekNumber)(Number(t),{locale:i});if(!n)return(0,ds.jsx)("span",{className:l.weeknumber,style:r.weeknumber,children:c});var d=o(Number(t),{locale:i});return(0,ds.jsx)(XD,{name:"week-number","aria-label":d,className:l.weeknumber,style:r.weeknumber,onClick:function(e){n(t,s,e)},children:c})}function zR(e){var t,s,a,n=LD(),r=n.styles,l=n.classNames,i=n.showWeekNumber,o=n.components,c=null!==(t=null===o||void 0===o?void 0:o.Day)&&void 0!==t?t:LR,d=null!==(s=null===o||void 0===o?void 0:o.WeekNumber)&&void 0!==s?s:IR;return i&&(a=(0,ds.jsx)("td",{className:l.cell,style:r.cell,children:(0,ds.jsx)(d,{number:e.weekNumber,dates:e.dates})})),(0,ds.jsxs)("tr",{className:l.row,style:r.row,children:[a,e.dates.map(function(t){return(0,ds.jsx)("td",{className:l.cell,style:r.cell,role:"presentation",children:(0,ds.jsx)(c,{displayMonth:e.displayMonth,date:t})},wD(t))})]})}function BR(e,t,s){for(var a=(null===s||void 0===s?void 0:s.ISOWeek)?yD(t):gD(t,s),n=(null===s||void 0===s?void 0:s.ISOWeek)?wP(e):bP(e,s),r=gP(a,n),l=[],i=0;i<=r;i++)l.push(hD(n,i));return l.reduce(function(e,t){var a=(null===s||void 0===s?void 0:s.ISOWeek)?kP(t):EP(t,s),n=e.find(function(e){return e.weekNumber===a});return n?(n.dates.push(t),e):(e.push({weekNumber:a,dates:[t]}),e)},[])}function UR(e){var t,s,a,n=LD(),r=n.locale,l=n.classNames,i=n.styles,o=n.hideHead,c=n.fixedWeeks,d=n.components,u=n.weekStartsOn,h=n.firstWeekContainsDate,m=n.ISOWeek,p=function(e,t){var s=BR(sD(e),aD(e),t);if(null===t||void 0===t?void 0:t.useFixedWeeks){var a=kD(e,t);if(a<6){var n=s[s.length-1],r=n.dates[n.dates.length-1],l=xD(r,6-a),i=BR(xD(r,1),l,t);s.push.apply(s,i)}}return s}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:m,locale:r,weekStartsOn:u,firstWeekContainsDate:h}),f=null!==(t=null===d||void 0===d?void 0:d.Head)&&void 0!==t?t:sR,x=null!==(s=null===d||void 0===d?void 0:d.Row)&&void 0!==s?s:zR,v=null!==(a=null===d||void 0===d?void 0:d.Footer)&&void 0!==a?a:eR;return(0,ds.jsxs)("table",{id:e.id,className:l.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!o&&(0,ds.jsx)(f,{}),(0,ds.jsx)("tbody",{className:l.tbody,style:i.tbody,children:p.map(function(t){return(0,ds.jsx)(x,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),(0,ds.jsx)(v,{displayMonth:e.displayMonth})]})}var VR="undefined"!==typeof window&&window.document&&window.document.createElement?a.useLayoutEffect:a.useEffect,HR=!1,WR=0;function qR(){return"react-day-picker-".concat(++WR)}function YR(e){var t,s,n=LD(),r=n.dir,l=n.classNames,i=n.styles,o=n.components,c=YD().displayMonths,d=function(e){var t,s=null!==e&&void 0!==e?e:HR?qR():null,n=(0,a.useState)(s),r=n[0],l=n[1];return VR(function(){null===r&&l(qR())},[]),(0,a.useEffect)(function(){!1===HR&&(HR=!0)},[]),null!==(t=null!==e&&void 0!==e?e:r)&&void 0!==t?t:void 0}(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,h=[l.month],m=i.month,p=0===e.displayIndex,f=e.displayIndex===c.length-1,x=!p&&!f;"rtl"===r&&(f=(t=[p,f])[0],p=t[1]),p&&(h.push(l.caption_start),m=SD(SD({},m),i.caption_start)),f&&(h.push(l.caption_end),m=SD(SD({},m),i.caption_end)),x&&(h.push(l.caption_between),m=SD(SD({},m),i.caption_between));var v=null!==(s=null===o||void 0===o?void 0:o.Caption)&&void 0!==s?s:ZD;return(0,ds.jsxs)("div",{className:h.join(" "),style:m,children:[(0,ds.jsx)(v,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,ds.jsx)(UR,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function GR(e){var t=LD(),s=t.classNames,a=t.styles;return(0,ds.jsx)("div",{className:s.months,style:a.months,children:e.children})}function KR(e){var t,s,n=e.initialProps,r=LD(),l=AR(),i=YD(),o=(0,a.useState)(!1),c=o[0],d=o[1];(0,a.useEffect)(function(){r.initialFocus&&l.focusTarget&&(c||(l.focus(l.focusTarget),d(!0)))},[r.initialFocus,c,l.focus,l.focusTarget,l]);var u=[r.classNames.root,r.className];r.numberOfMonths>1&&u.push(r.classNames.multiple_months),r.showWeekNumber&&u.push(r.classNames.with_weeknumber);var h=SD(SD({},r.styles.root),r.style),m=Object.keys(n).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var s;return SD(SD({},e),((s={})[t]=n[t],s))},{}),p=null!==(s=null===(t=n.components)||void 0===t?void 0:t.Months)&&void 0!==s?s:GR;return(0,ds.jsx)("div",SD({className:u.join(" "),style:h,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:(0,ds.jsx)(p,{children:i.displayMonths.map(function(e,t){return(0,ds.jsx)(YR,{displayIndex:t,displayMonth:e},t)})})}))}function $R(e){var t=e.children,s=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["children"]);return(0,ds.jsx)(FD,{initialProps:s,children:(0,ds.jsx)(qD,{children:(0,ds.jsx)(DR,{initialProps:s,children:(0,ds.jsx)(rR,{initialProps:s,children:(0,ds.jsx)(dR,{initialProps:s,children:(0,ds.jsx)(NR,{children:(0,ds.jsx)(TR,{children:t})})})})})})})}function XR(e){return(0,ds.jsx)($R,SD({},e,{children:(0,ds.jsx)(KR,{initialProps:e})}))}const JR=["className","classNames","showOutsideDays"],QR=["className"],ZR=["className"];function eO(e){let{className:t,classNames:s,showOutsideDays:a=!0}=e,n=l(e,JR);return(0,ds.jsx)(XR,u({showOutsideDays:a,className:hn("p-3",t),classNames:u({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:hn(pn({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:hn("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:hn(pn({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},s),components:{IconLeft:e=>{let{className:t}=e,s=l(e,QR);return(0,ds.jsx)(QA,u({className:hn("h-4 w-4",t)},s))},IconRight:e=>{let{className:t}=e,s=l(e,ZR);return(0,ds.jsx)($w,u({className:hn("h-4 w-4",t)},s))}}},n))}eO.displayName="Calendar";const tO=["children"],sO=["children"];function aO(e){const t=nO(e),s=a.forwardRef((e,s)=>{const{children:n}=e,r=l(e,tO),i=a.Children.toArray(n),o=i.find(lO);if(o){const e=o.props.children,n=i.map(t=>t===o?a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null:t);return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null}))}return(0,ds.jsx)(t,u(u({},r),{},{ref:s,children:n}))});return s.displayName="".concat(e,".Slot"),s}function nO(e){const t=a.forwardRef((e,t)=>{const{children:s}=e,n=l(e,sO);if(a.isValidElement(s)){const e=function(e){var t,s;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null===(s=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===s?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),r=function(e,t){const s=u({},t);for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(s[a]=n):"style"===a?s[a]=u(u({},n),r):"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return u(u({},e),s)}(n,s.props);return s.type!==a.Fragment&&(r.ref=t?Ds(t,e):e),a.cloneElement(s,r)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var rO=Symbol("radix.slottable");function lO(e){return a.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===rO}const iO=["__scopePopover"],oO=["__scopePopover"],cO=["forceMount"],dO=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],uO=["__scopePopover"],hO=["__scopePopover"];var mO="Popover",[pO,fO]=Kn(mO,[ky]),xO=ky(),[vO,gO]=pO(mO),yO=e=>{const{__scopePopover:t,children:s,open:n,defaultOpen:r,onOpenChange:l,modal:i=!1}=e,o=xO(t),c=a.useRef(null),[d,h]=a.useState(!1),[m,p]=tr({prop:n,defaultProp:null!==r&&void 0!==r&&r,onChange:l,caller:mO});return(0,ds.jsx)(Uy,u(u({},o),{},{children:(0,ds.jsx)(vO,{scope:t,contentId:Zn(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:d,onCustomAnchorAdd:a.useCallback(()=>h(!0),[]),onCustomAnchorRemove:a.useCallback(()=>h(!1),[]),modal:i,children:s})}))};yO.displayName=mO;var jO="PopoverAnchor",bO=a.forwardRef((e,t)=>{const{__scopePopover:s}=e,n=l(e,iO),r=gO(jO,s),i=xO(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=r;return a.useEffect(()=>(o(),()=>c()),[o,c]),(0,ds.jsx)(Vy,u(u(u({},i),n),{},{ref:t}))});bO.displayName=jO;var wO="PopoverTrigger",NO=a.forwardRef((e,t)=>{const{__scopePopover:s}=e,a=l(e,oO),n=gO(wO,s),r=xO(s),i=Rs(t,n.triggerRef),o=(0,ds.jsx)(cr.button,u(u({type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":LO(n.open)},a),{},{ref:i,onClick:qn(e.onClick,n.onOpenToggle)}));return n.hasCustomAnchor?o:(0,ds.jsx)(Vy,u(u({asChild:!0},r),{},{children:o}))});NO.displayName=wO;var _O="PopoverPortal",[kO,SO]=pO(_O,{forceMount:void 0}),CO=e=>{const{__scopePopover:t,forceMount:s,children:a,container:n}=e,r=gO(_O,t);return(0,ds.jsx)(kO,{scope:t,forceMount:s,children:(0,ds.jsx)(Mr,{present:s||r.open,children:(0,ds.jsx)(Or,{asChild:!0,container:n,children:a})})})};CO.displayName=_O;var EO="PopoverContent",TO=a.forwardRef((e,t)=>{const s=SO(EO,e.__scopePopover),{forceMount:a=s.forceMount}=e,n=l(e,cO),r=gO(EO,e.__scopePopover);return(0,ds.jsx)(Mr,{present:a||r.open,children:r.modal?(0,ds.jsx)(PO,u(u({},n),{},{ref:t})):(0,ds.jsx)(DO,u(u({},n),{},{ref:t}))})});TO.displayName=EO;var AO=aO("PopoverContent.RemoveScroll"),PO=a.forwardRef((e,t)=>{const s=gO(EO,e.__scopePopover),n=a.useRef(null),r=Rs(t,n),l=a.useRef(!1);return a.useEffect(()=>{const e=n.current;if(e)return Il(e)},[]),(0,ds.jsx)(Al,{as:AO,allowPinchZoom:!0,children:(0,ds.jsx)(RO,u(u({},e),{},{ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qn(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),l.current||null===(t=s.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:qn(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,a=2===t.button||s;l.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:qn(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})}))})}),DO=a.forwardRef((e,t)=>{const s=gO(EO,e.__scopePopover),n=a.useRef(!1),r=a.useRef(!1);return(0,ds.jsx)(RO,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,l;(null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented)||(n.current||null===(l=s.triggerRef.current)||void 0===l||l.focus(),t.preventDefault());n.current=!1,r.current=!1},onInteractOutside:t=>{var a,l;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const i=t.target;(null===(l=s.triggerRef.current)||void 0===l?void 0:l.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}}))}),RO=a.forwardRef((e,t)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h}=e,m=l(e,dO),p=gO(EO,s),f=xO(s);return Ir(),(0,ds.jsx)(Sr,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:r,children:(0,ds.jsx)(gr,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:(0,ds.jsx)(Hy,u(u(u({"data-state":LO(p.open),role:"dialog",id:p.contentId},f),m),{},{ref:t,style:u(u({},m.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),OO="PopoverClose",MO=a.forwardRef((e,t)=>{const{__scopePopover:s}=e,a=l(e,uO),n=gO(OO,s);return(0,ds.jsx)(cr.button,u(u({type:"button"},a),{},{ref:t,onClick:qn(e.onClick,()=>n.onOpenChange(!1))}))});MO.displayName=OO;var FO=a.forwardRef((e,t)=>{const{__scopePopover:s}=e,a=l(e,hO),n=xO(s);return(0,ds.jsx)(Wy,u(u(u({},n),a),{},{ref:t}))});function LO(e){return e?"open":"closed"}FO.displayName="PopoverArrow";var IO=CO,zO=TO;const BO=["className","align","sideOffset"],UO=yO,VO=NO,HO=a.forwardRef((e,t)=>{let{className:s,align:a="center",sideOffset:n=4}=e,r=l(e,BO);return(0,ds.jsx)(IO,{children:(0,ds.jsx)(zO,u({ref:t,align:a,sideOffset:n,className:hn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s)},r))})});HO.displayName=zO.displayName;const WO=["code"],qO="https://shardahrms.com/api",YO=()=>{var e;const{user:t}=Cs(),[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[m,p]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),[b,w]=(0,a.useState)({}),[N,_]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),[C,E]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),[P,D]=(0,a.useState)({leave_type_id:"",from_date:null,to_date:null,is_half_day:!1,half_day_type:"",reason:""}),R="super_admin"===(null===t||void 0===t?void 0:t.role)||"hr_admin"===(null===t||void 0===t?void 0:t.role)||"hr_executive"===(null===t||void 0===t?void 0:t.role),O="super_admin"===(null===t||void 0===t?void 0:t.role)||"hr_admin"===(null===t||void 0===t?void 0:t.role),M="manager"===(null===t||void 0===t?void 0:t.role)||"team_lead"===(null===t||void 0===t?void 0:t.role)||R;(0,a.useEffect)(()=>{F()},[]);const F=async()=>{try{const e=nk(),[t,s,a,r]=await Promise.all([fetch("".concat(qO,"/leave-types"),{credentials:"include",headers:e}),fetch("".concat(qO,"/leave/balance"),{credentials:"include",headers:e}),fetch("".concat(qO,"/leave/my-requests"),{credentials:"include",headers:e}),fetch("".concat(qO,"/leave/accrual-rules"),{credentials:"include",headers:e})]);if(t.ok&&n(await t.json()),s.ok&&i(await s.json()),a.ok&&c(await a.json()),r.ok&&w(await r.json()),M){const t=await fetch("".concat(qO,"/leave/pending-approvals"),{credentials:"include",headers:e});t.ok&&h(await t.json())}if(R){const t=await fetch("".concat(qO,"/leave/balances/all"),{credentials:"include",headers:e});t.ok&&j(await t.json())}}catch(e){console.error("Error fetching data:",e)}finally{p(!1)}},L=e=>{const t=s.find(t=>t.leave_type_id===e);return(null===t||void 0===t?void 0:t.name)||e},I={pending:"bg-amber-50 text-amber-700 border-amber-200",approved:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-600 border-slate-200"},z={pending:ik,approved:Yk,rejected:TA,cancelled:TA};return m?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"leave-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Leave Management"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Leave Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Apply for leave and track your requests"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)(eo,{open:f,onOpenChange:x,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"apply-leave-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Apply Leave"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Apply for Leave"}),(0,ds.jsx)(oo,{children:"Submit your leave request for approval"})]}),(0,ds.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Leave Type *"}),(0,ds.jsxs)(yE,{value:P.leave_type_id,onValueChange:e=>D(u(u({},P),{},{leave_type_id:e})),children:[(0,ds.jsx)(bE,{"data-testid":"select-leave-type",children:(0,ds.jsx)(jE,{placeholder:"Select leave type"})}),(0,ds.jsx)(_E,{children:s.map(e=>(0,ds.jsxs)(kE,{value:e.leave_type_id,children:[e.name," (",e.code,")"]},e.leave_type_id))})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"From Date *"}),(0,ds.jsxs)(UO,{children:[(0,ds.jsx)(VO,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start text-left font-normal","data-testid":"from-date-btn",children:[(0,ds.jsx)(v_,{className:"mr-2 h-4 w-4"}),P.from_date?eD(P.from_date,"dd/MM/yyyy"):"Select date"]})}),(0,ds.jsx)(HO,{className:"w-auto p-0",children:(0,ds.jsx)(eO,{mode:"single",selected:P.from_date,onSelect:e=>D(u(u({},P),{},{from_date:e,to_date:e}))})})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"To Date *"}),(0,ds.jsxs)(UO,{children:[(0,ds.jsx)(VO,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"outline",className:"w-full justify-start text-left font-normal","data-testid":"to-date-btn",children:[(0,ds.jsx)(v_,{className:"mr-2 h-4 w-4"}),P.to_date?eD(P.to_date,"dd/MM/yyyy"):"Select date"]})}),(0,ds.jsx)(HO,{className:"w-auto p-0",children:(0,ds.jsx)(eO,{mode:"single",selected:P.to_date,onSelect:e=>D(u(u({},P),{},{to_date:e})),disabled:e=>P.from_date&&e<P.from_date})})]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)(_n,{htmlFor:"half-day",children:"Half Day Leave"}),(0,ds.jsx)(JA,{id:"half-day",checked:P.is_half_day,onCheckedChange:e=>D(u(u({},P),{},{is_half_day:e}))})]}),P.is_half_day&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Half Day Type"}),(0,ds.jsxs)(yE,{value:P.half_day_type,onValueChange:e=>D(u(u({},P),{},{half_day_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select half"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"first_half",children:"First Half"}),(0,ds.jsx)(kE,{value:"second_half",children:"Second Half"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Reason *"}),(0,ds.jsx)(kA,{value:P.reason,onChange:e=>D(u(u({},P),{},{reason:e.target.value})),placeholder:"Enter reason for leave...",rows:3,"data-testid":"leave-reason"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(P.leave_type_id&&P.from_date&&P.to_date&&P.reason){g(!0);try{const e=await fetch("".concat(qO,"/leave/apply"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u(u({},P),{},{from_date:eD(P.from_date,"yyyy-MM-dd"),to_date:eD(P.to_date,"yyyy-MM-dd")}))});if(e.ok)ts.success("Leave applied successfully"),x(!1),D({leave_type_id:"",from_date:null,to_date:null,is_half_day:!1,half_day_type:"",reason:""}),F();else{const t=await e.json();ts.error(t.detail||"Failed to apply leave")}}catch(e){ts.error("Failed to apply leave")}finally{g(!1)}}else ts.error("Please fill all required fields")},disabled:v,"data-testid":"submit-leave-btn",children:v?"Submitting...":"Submit Request"})]})]})]})]}),(0,ds.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:s.slice(0,6).map(e=>{var t,s,a;const n=r.find(t=>t.leave_type_id===e.leave_type_id)||{},l=(null===(t=e.code)||void 0===t?void 0:t.toUpperCase())||(null===(s=e.leave_type_id)||void 0===s?void 0:s.replace("lt_","").toUpperCase()),i=null===(a=b[l])||void 0===a?void 0:a.annual_quota,o=void 0!==i?i:e.annual_quota,c=void 0!==n.available?n.available:o,d=void 0!==n.opening_balance&&void 0!==n.accrued?n.opening_balance+n.accrued:o;return(0,ds.jsx)(Pn,{className:"card-hover","data-testid":"balance-".concat(e.code),children:(0,ds.jsxs)(Mn,{className:"p-4",children:[(0,ds.jsx)("p",{className:"text-xs font-medium text-slate-500 mb-1",children:e.code}),(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:c}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500 mb-2",children:["of ",d," days"]}),(0,ds.jsx)(Bk,{value:c/(d||1)*100,className:"h-1.5"})]})},e.leave_type_id)})}),(0,ds.jsxs)(cA,{defaultValue:"my-requests",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsxs)(uA,{value:"my-requests","data-testid":"tab-my-requests",children:["My Requests",o.filter(e=>"pending"===e.status).length>0&&(0,ds.jsx)(tk,{className:"ml-2 h-5 px-1.5",children:o.filter(e=>"pending"===e.status).length})]}),M&&(0,ds.jsxs)(uA,{value:"approvals","data-testid":"tab-approvals",children:["Pending Approvals",d.length>0&&(0,ds.jsx)(tk,{variant:"destructive",className:"ml-2 h-5 px-1.5",children:d.length})]}),R&&(0,ds.jsxs)(uA,{value:"manage-balances","data-testid":"tab-manage-balances",children:[(0,ds.jsx)(k_,{className:"w-4 h-4 mr-1"}),"Manage Balances"]}),O&&(0,ds.jsxs)(uA,{value:"leave-rules","data-testid":"tab-leave-rules",children:[(0,ds.jsx)(z_,{className:"w-4 h-4 mr-1"}),"Leave Rules"]})]}),(0,ds.jsx)(hA,{value:"my-requests",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"My Leave Requests"}),(0,ds.jsx)(On,{children:"Track the status of your leave applications"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:o.length>0?o.map(e=>{const t=z[e.status];return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg","data-testid":"leave-request-".concat(e.leave_id),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("approved"===e.status?"bg-emerald-100":"rejected"===e.status?"bg-red-100":"bg-amber-100"),children:(0,ds.jsx)(t,{className:"w-5 h-5 ".concat("approved"===e.status?"text-emerald-600":"rejected"===e.status?"text-red-600":"text-amber-600")})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:L(e.leave_type_id)}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.from_date," to ",e.to_date," (",e.days," ",1===e.days?"day":"days",")"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.reason})]})]}),(0,ds.jsx)(tk,{className:I[e.status],children:e.status})]},e.leave_id)}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No leave requests yet"}),(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>x(!0),children:"Apply for Leave"})]})})})]})}),M&&(0,ds.jsx)(hA,{value:"approvals",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Pending Approvals"}),(0,ds.jsx)(On,{children:"Leave requests awaiting your approval"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:d.length>0?d.map(e=>(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-slate-50 rounded-lg gap-4","data-testid":"approval-".concat(e.leave_id),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-slate-900",children:[e.employee_name||e.employee_id,e.emp_code&&(0,ds.jsxs)("span",{className:"text-xs text-slate-400 ml-2",children:["(",e.emp_code,")"]})]}),(0,ds.jsx)("p",{className:"text-sm text-primary font-medium mt-0.5",children:L(e.leave_type_id)}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.from_date," to ",e.to_date," (",e.days," days)"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.reason})]})]}),(0,ds.jsxs)("div",{className:"flex gap-2 sm:flex-shrink-0",children:[(0,ds.jsxs)(fn,{size:"sm",onClick:()=>(async e=>{try{const t=await fetch("".concat(qO,"/leave/").concat(e,"/approve"),{method:"PUT",credentials:"include",headers:nk()});if(t.ok)ts.success("Leave approved"),F();else{const e=await t.json();ts.error(e.detail||"Failed to approve leave")}}catch(t){ts.error("Failed to approve leave")}})(e.leave_id),className:"gap-1","data-testid":"approve-".concat(e.leave_id),children:[(0,ds.jsx)(Yk,{className:"w-4 h-4"}),"Approve"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{const t=window.prompt("Enter rejection reason:");if(t)try{const s=await fetch("".concat(qO,"/leave/").concat(e,"/reject?rejection_reason=").concat(encodeURIComponent(t)),{method:"PUT",credentials:"include",headers:nk()});if(s.ok)ts.success("Leave rejected"),F();else{const e=await s.json();ts.error(e.detail||"Failed to reject leave")}}catch(s){ts.error("Failed to reject leave")}})(e.leave_id),className:"gap-1 text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":"reject-".concat(e.leave_id),children:[(0,ds.jsx)(TA,{className:"w-4 h-4"}),"Reject"]})]})]},e.leave_id)):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(Yk,{className:"w-12 h-12 text-emerald-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No pending approvals"})]})})})]})}),R&&(0,ds.jsx)(hA,{value:"manage-balances",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Employee Leave Balances"}),(0,ds.jsx)(On,{children:"View and edit leave balances for all employees"})]}),(0,ds.jsxs)(fn,{onClick:async()=>{if(window.confirm("Run leave accrual for current month? This will add accrued leaves to all eligible employees."))try{const e=await fetch("".concat(qO,"/leave/run-accrual"),{method:"POST",credentials:"include",headers:nk()});if(e.ok){const t=await e.json();ts.success("Accrual completed: ".concat(t.accruals_processed," records processed")),F()}else{const t=await e.json();ts.error(t.detail||"Failed to run accrual")}}catch(e){ts.error("Failed to run accrual")}},variant:"outline",size:"sm",className:"gap-2",children:[(0,ds.jsx)(SE,{className:"w-4 h-4"}),"Run Monthly Accrual"]})]})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Emp Code"}),(0,ds.jsx)(gS,{className:"text-center",children:"CL"}),(0,ds.jsx)(gS,{className:"text-center",children:"SL"}),(0,ds.jsx)(gS,{className:"text-center",children:"EL"}),(0,ds.jsx)(gS,{className:"text-center",children:"CO"}),(0,ds.jsx)(gS,{className:"text-center",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:y.length>0?y.map(e=>{const t=t=>{var s;return(null===(s=e.balances)||void 0===s?void 0:s.find(e=>e.leave_type_id===t))||{}};return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.employee_name}),(0,ds.jsx)(yS,{children:e.emp_code}),(0,ds.jsxs)(yS,{className:"text-center",children:[(0,ds.jsx)("span",{className:"text-emerald-600 font-medium",children:t("lt_cl").available||0}),(0,ds.jsxs)("span",{className:"text-slate-400 text-xs",children:["/",t("lt_cl").opening_balance||0]})]}),(0,ds.jsxs)(yS,{className:"text-center",children:[(0,ds.jsx)("span",{className:"text-emerald-600 font-medium",children:t("lt_sl").available||0}),(0,ds.jsxs)("span",{className:"text-slate-400 text-xs",children:["/",t("lt_sl").opening_balance||0]})]}),(0,ds.jsxs)(yS,{className:"text-center",children:[(0,ds.jsx)("span",{className:"text-emerald-600 font-medium",children:t("lt_el").available||0}),(0,ds.jsxs)("span",{className:"text-slate-400 text-xs",children:["/",t("lt_el").opening_balance||0]})]}),(0,ds.jsxs)(yS,{className:"text-center",children:[(0,ds.jsx)("span",{className:"text-emerald-600 font-medium",children:t("lt_co").available||0}),(0,ds.jsxs)("span",{className:"text-slate-400 text-xs",children:["/",t("lt_co").opening_balance||0]})]}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)("div",{className:"flex gap-1 justify-center",children:["lt_cl","lt_sl","lt_el","lt_co"].map(s=>{const a=t(s);return(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>((e,t)=>{_({employee_id:e.employee_id,emp_code:e.emp_code,employee_name:e.employee_name,leave_type_id:t.leave_type_id,opening_balance:t.opening_balance||0,accrued:t.accrued||0,used:t.used||0,pending:t.pending||0,available:t.available||0}),E(!0)})(e,u(u({},a),{},{leave_type_id:s})),title:"Edit ".concat(s.replace("lt_","").toUpperCase()),children:(0,ds.jsx)(pA,{className:"w-3 h-3"})},s)})})})]},e.employee_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:7,className:"text-center py-8 text-slate-500",children:"No employee balances found. Import leave balances from Bulk Import section."})})})]})})})]})}),O&&(0,ds.jsx)(hA,{value:"leave-rules",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Leave Accrual Rules"}),(0,ds.jsx)(On,{children:"Configure how employees earn and use different types of leaves"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"grid gap-4",children:[Object.entries(b).map(e=>{let[t,s]=e;return(0,ds.jsxs)("div",{className:"border rounded-lg p-4 bg-slate-50",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-semibold text-slate-900",children:s.name||t}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:["Code: ",t]})]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>((e,t)=>{S(u({code:e},t)),A(!0)})(t,s),className:"gap-1",children:[(0,ds.jsx)(pA,{className:"w-4 h-4"}),"Edit"]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Annual Quota:"}),(0,ds.jsxs)("span",{className:"ml-2 font-medium",children:[s.annual_quota||0," days"]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Accrual Type:"}),(0,ds.jsx)("span",{className:"ml-2 font-medium capitalize",children:s.accrual_type||"None"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Accrual Rate:"}),(0,ds.jsxs)("span",{className:"ml-2 font-medium",children:[s.accrual_rate||0,"/period"]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Carry Forward:"}),(0,ds.jsx)("span",{className:"ml-2 font-medium ".concat(s.carry_forward?"text-emerald-600":"text-slate-400"),children:s.carry_forward?"Yes (max ".concat(s.max_carry_forward,")"):"No"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Encashment:"}),(0,ds.jsx)("span",{className:"ml-2 font-medium ".concat(s.encashment_allowed?"text-emerald-600":"text-slate-400"),children:s.encashment_allowed?"Allowed":"Not Allowed"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Probation:"}),(0,ds.jsx)("span",{className:"ml-2 font-medium ".concat(s.probation_eligible?"text-emerald-600":"text-amber-600"),children:s.probation_eligible?"Eligible":"Not Eligible"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Max Consecutive:"}),(0,ds.jsxs)("span",{className:"ml-2 font-medium",children:[s.max_consecutive_days||"-"," days"]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Advance Notice:"}),(0,ds.jsxs)("span",{className:"ml-2 font-medium",children:[s.advance_notice_days||0," days"]})]})]})]},t)}),0===Object.keys(b).length&&(0,ds.jsx)("div",{className:"text-center py-8 text-slate-500",children:"No leave rules configured. Default rules will be applied."})]})})]})})]}),(0,ds.jsx)(eo,{open:C,onOpenChange:E,children:(0,ds.jsxs)(no,{className:"max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Edit Leave Balance"}),(0,ds.jsxs)(oo,{children:[null===N||void 0===N?void 0:N.employee_name," (",null===N||void 0===N?void 0:N.emp_code,") - ",null===N||void 0===N||null===(e=N.leave_type_id)||void 0===e?void 0:e.replace("lt_","").toUpperCase()]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Opening Balance"}),(0,ds.jsx)(vn,{type:"number",step:"0.5",value:(null===N||void 0===N?void 0:N.opening_balance)||0,onChange:e=>_(u(u({},N),{},{opening_balance:parseFloat(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Accrued"}),(0,ds.jsx)(vn,{type:"number",step:"0.5",value:(null===N||void 0===N?void 0:N.accrued)||0,onChange:e=>_(u(u({},N),{},{accrued:parseFloat(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Used"}),(0,ds.jsx)(vn,{type:"number",step:"0.5",value:(null===N||void 0===N?void 0:N.used)||0,onChange:e=>_(u(u({},N),{},{used:parseFloat(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Pending"}),(0,ds.jsx)(vn,{type:"number",step:"0.5",value:(null===N||void 0===N?void 0:N.pending)||0,onChange:e=>_(u(u({},N),{},{pending:parseFloat(e.target.value)||0}))})]})]}),(0,ds.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg",children:[(0,ds.jsx)("span",{className:"text-sm text-slate-500",children:"Available Balance: "}),(0,ds.jsxs)("span",{className:"font-semibold text-emerald-600",children:[(((null===N||void 0===N?void 0:N.opening_balance)||0)+((null===N||void 0===N?void 0:N.accrued)||0)-((null===N||void 0===N?void 0:N.used)||0)-((null===N||void 0===N?void 0:N.pending)||0)).toFixed(1)," days"]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(N)try{const e=await fetch("".concat(qO,"/leave/balances/").concat(N.employee_id),{method:"PUT",credentials:"include",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),body:JSON.stringify(N)});if(e.ok)ts.success("Leave balance updated"),E(!1),_(null),F();else{const t=await e.json();ts.error(t.detail||"Failed to update balance")}}catch(e){ts.error("Failed to update balance")}},className:"gap-2",children:[(0,ds.jsx)(gA,{className:"w-4 h-4"}),"Save Changes"]})]})]})}),(0,ds.jsx)(eo,{open:T,onOpenChange:A,children:(0,ds.jsxs)(no,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{style:{fontFamily:"Manrope, sans-serif"},children:["Edit Leave Rule - ",(null===k||void 0===k?void 0:k.name)||(null===k||void 0===k?void 0:k.code)]}),(0,ds.jsx)(oo,{children:"Configure accrual and usage rules for this leave type"})]}),(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-900",children:"Basic Settings"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Leave Name"}),(0,ds.jsx)(vn,{value:(null===k||void 0===k?void 0:k.name)||"",onChange:e=>S(u(u({},k),{},{name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Annual Quota (days)"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.annual_quota)||0,onChange:e=>S(u(u({},k),{},{annual_quota:parseInt(e.target.value)||0}))})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-900",children:"Accrual Settings"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Accrual Type"}),(0,ds.jsxs)(yE,{value:(null===k||void 0===k?void 0:k.accrual_type)||"none",onValueChange:e=>S(u(u({},k),{},{accrual_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"none",children:"None (Manual)"}),(0,ds.jsx)(kE,{value:"monthly",children:"Monthly"}),(0,ds.jsx)(kE,{value:"quarterly",children:"Quarterly"}),(0,ds.jsx)(kE,{value:"yearly",children:"Yearly (Credited at start)"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Accrual Rate (per period)"}),(0,ds.jsx)(vn,{type:"number",step:"0.25",value:(null===k||void 0===k?void 0:k.accrual_rate)||0,onChange:e=>S(u(u({},k),{},{accrual_rate:parseFloat(e.target.value)||0}))})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-900",children:"Carry Forward & Encashment"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"carry_forward",checked:(null===k||void 0===k?void 0:k.carry_forward)||!1,onChange:e=>S(u(u({},k),{},{carry_forward:e.target.checked})),className:"rounded border-slate-300"}),(0,ds.jsx)(_n,{htmlFor:"carry_forward",children:"Allow Carry Forward"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max Carry Forward (days)"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.max_carry_forward)||0,onChange:e=>S(u(u({},k),{},{max_carry_forward:parseInt(e.target.value)||0})),disabled:!(null!==k&&void 0!==k&&k.carry_forward)})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"encashment_allowed",checked:(null===k||void 0===k?void 0:k.encashment_allowed)||!1,onChange:e=>S(u(u({},k),{},{encashment_allowed:e.target.checked})),className:"rounded border-slate-300"}),(0,ds.jsx)(_n,{htmlFor:"encashment_allowed",children:"Allow Encashment"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Encashment Rate (%)"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.encashment_rate)||0,onChange:e=>S(u(u({},k),{},{encashment_rate:parseInt(e.target.value)||0})),disabled:!(null!==k&&void 0!==k&&k.encashment_allowed)})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-medium mb-3 text-slate-900",children:"Eligibility & Restrictions"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"probation_eligible",checked:(null===k||void 0===k?void 0:k.probation_eligible)||!1,onChange:e=>S(u(u({},k),{},{probation_eligible:e.target.checked})),className:"rounded border-slate-300"}),(0,ds.jsx)(_n,{htmlFor:"probation_eligible",children:"Probation Eligible"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Min Service Days Required"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.min_service_days)||0,onChange:e=>S(u(u({},k),{},{min_service_days:parseInt(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max Consecutive Days"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.max_consecutive_days)||0,onChange:e=>S(u(u({},k),{},{max_consecutive_days:parseInt(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Advance Notice (days)"}),(0,ds.jsx)(vn,{type:"number",value:(null===k||void 0===k?void 0:k.advance_notice_days)||0,onChange:e=>S(u(u({},k),{},{advance_notice_days:parseInt(e.target.value)||0}))})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"can_be_half_day",checked:(null===k||void 0===k?void 0:k.can_be_half_day)||!1,onChange:e=>S(u(u({},k),{},{can_be_half_day:e.target.checked})),className:"rounded border-slate-300"}),(0,ds.jsx)(_n,{htmlFor:"can_be_half_day",children:"Allow Half Day"})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(!k)return;const{code:e}=k,t=l(k,WO);try{const s=await fetch("".concat(qO,"/leave/accrual-rules/").concat(e),{method:"PUT",credentials:"include",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),body:JSON.stringify(t)});if(s.ok)ts.success("Leave rule for ".concat(e," updated")),A(!1),S(null),F();else{const e=await s.json();ts.error(e.detail||"Failed to update rule")}}catch(s){ts.error("Failed to update rule")}},className:"gap-2",children:[(0,ds.jsx)(gA,{className:"w-4 h-4"}),"Save Rule"]})]})]})})]})},GO=Yi("cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]),KO=Yi("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),$O="https://shardahrms.com/api",XO=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)("all"),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({title:"",content:"",category:"general",priority:"normal",requires_acknowledgment:!1,is_pinned:!1}),f="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"hr_executive"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{x()},[o]);const x=async()=>{try{let e="".concat($O,"/announcements");"all"!==o&&(e+="?category=".concat(o));const t=await fetch(e,{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();s(e)}}catch(e){console.error("Error fetching announcements:",e)}finally{r(!1)}},v={general:{label:"General",icon:j_,color:"bg-slate-100 text-slate-700"},policy:{label:"Policy Update",icon:AA,color:"bg-amber-100 text-amber-700"},event:{label:"Event",icon:v_,color:"bg-purple-100 text-purple-700"},birthday:{label:"Birthday",icon:GO,color:"bg-pink-100 text-pink-700"},anniversary:{label:"Anniversary",icon:Zk,color:"bg-blue-100 text-blue-700"}},g={low:{color:"bg-slate-100 text-slate-600"},normal:{color:"bg-blue-100 text-blue-700"},high:{color:"bg-amber-100 text-amber-700"},urgent:{color:"bg-red-100 text-red-700"}};return n?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"announcements-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Announcements"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Announcements"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Company news and updates"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)("div",{className:"flex gap-3",children:[(0,ds.jsxs)(yE,{value:o,onValueChange:c,children:[(0,ds.jsx)(bE,{className:"w-40","data-testid":"filter-category",children:(0,ds.jsx)(jE,{placeholder:"All Categories"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Categories"}),(0,ds.jsx)(kE,{value:"general",children:"General"}),(0,ds.jsx)(kE,{value:"policy",children:"Policy Updates"}),(0,ds.jsx)(kE,{value:"event",children:"Events"}),(0,ds.jsx)(kE,{value:"birthday",children:"Birthdays"}),(0,ds.jsx)(kE,{value:"anniversary",children:"Anniversaries"})]})]}),f&&(0,ds.jsxs)(eo,{open:l,onOpenChange:i,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"create-announcement-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"New Announcement"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create Announcement"}),(0,ds.jsx)(oo,{children:"Publish a new announcement for employees"})]}),(0,ds.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:m.title,onChange:e=>p(u(u({},m),{},{title:e.target.value})),placeholder:"Announcement title","data-testid":"input-title"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Content *"}),(0,ds.jsx)(kA,{value:m.content,onChange:e=>p(u(u({},m),{},{content:e.target.value})),placeholder:"Write your announcement...",rows:5,"data-testid":"input-content"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:m.category,onValueChange:e=>p(u(u({},m),{},{category:e})),children:[(0,ds.jsx)(bE,{"data-testid":"select-category",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"general",children:"General"}),(0,ds.jsx)(kE,{value:"policy",children:"Policy Update"}),(0,ds.jsx)(kE,{value:"event",children:"Event"}),(0,ds.jsx)(kE,{value:"birthday",children:"Birthday"}),(0,ds.jsx)(kE,{value:"anniversary",children:"Anniversary"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Priority"}),(0,ds.jsxs)(yE,{value:m.priority,onValueChange:e=>p(u(u({},m),{},{priority:e})),children:[(0,ds.jsx)(bE,{"data-testid":"select-priority",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"low",children:"Low"}),(0,ds.jsx)(kE,{value:"normal",children:"Normal"}),(0,ds.jsx)(kE,{value:"high",children:"High"}),(0,ds.jsx)(kE,{value:"urgent",children:"Urgent"})]})]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(KO,{className:"w-4 h-4 text-slate-500"}),(0,ds.jsx)(_n,{htmlFor:"pinned",children:"Pin this announcement"})]}),(0,ds.jsx)(JA,{id:"pinned",checked:m.is_pinned,onCheckedChange:e=>p(u(u({},m),{},{is_pinned:e}))})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(Yk,{className:"w-4 h-4 text-slate-500"}),(0,ds.jsx)(_n,{htmlFor:"ack",children:"Require acknowledgment"})]}),(0,ds.jsx)(JA,{id:"ack",checked:m.requires_acknowledgment,onCheckedChange:e=>p(u(u({},m),{},{requires_acknowledgment:e}))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(m.title&&m.content){h(!0);try{const e=await fetch("".concat($O,"/announcements"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(m)});if(e.ok)ts.success("Announcement published"),i(!1),p({title:"",content:"",category:"general",priority:"normal",requires_acknowledgment:!1,is_pinned:!1}),x();else{const t=await e.json();ts.error(t.detail||"Failed to create announcement")}}catch(e){ts.error("Failed to create announcement")}finally{h(!1)}}else ts.error("Please fill all required fields")},disabled:d,"data-testid":"publish-btn",children:d?"Publishing...":"Publish"})]})]})]})]})]}),(0,ds.jsx)("div",{className:"space-y-4",children:t.length>0?t.map(t=>{var s,a;const n=v[t.category]||v.general,r=n.icon,l=g[t.priority]||g.normal,i=null===(s=t.acknowledged_by)||void 0===s?void 0:s.includes(null===e||void 0===e?void 0:e.user_id),o=t.requires_acknowledgment&&!i;return(0,ds.jsx)(Pn,{className:"overflow-hidden ".concat(t.is_pinned?"border-primary/30 bg-primary/5":""),"data-testid":"announcement-".concat(t.announcement_id),children:(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)("div",{className:"flex",children:[(t.is_pinned||"urgent"===t.priority)&&(0,ds.jsx)("div",{className:"w-1 ".concat("urgent"===t.priority?"bg-red-500":"bg-primary")}),(0,ds.jsx)("div",{className:"flex-1 p-6",children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[t.is_pinned&&(0,ds.jsxs)(tk,{variant:"outline",className:"gap-1 bg-primary/10 text-primary border-primary/30",children:[(0,ds.jsx)(KO,{className:"w-3 h-3"}),"Pinned"]}),(0,ds.jsxs)(tk,{className:n.color,children:[(0,ds.jsx)(r,{className:"w-3 h-3 mr-1"}),n.label]}),"normal"!==t.priority&&(0,ds.jsx)(tk,{className:l.color,children:t.priority})]}),(0,ds.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",style:{fontFamily:"Manrope, sans-serif"},children:t.title}),(0,ds.jsx)("p",{className:"text-slate-600 whitespace-pre-wrap mb-4",children:t.content}),(0,ds.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-500",children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"}),(c=t.published_at,new Date(c).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))]}),(null===(a=t.read_by)||void 0===a?void 0:a.length)>0&&(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),t.read_by.length," read"]})]})]}),o&&(0,ds.jsxs)(fn,{onClick:()=>(async e=>{try{(await fetch("".concat($O,"/announcements/").concat(e,"/acknowledge"),{method:"PUT",credentials:"include"})).ok&&(ts.success("Acknowledged"),x())}catch(t){ts.error("Failed to acknowledge")}})(t.announcement_id),className:"gap-2 shrink-0","data-testid":"ack-".concat(t.announcement_id),children:[(0,ds.jsx)(Yk,{className:"w-4 h-4"}),"Acknowledge"]}),i&&(0,ds.jsxs)(tk,{variant:"outline",className:"gap-1 bg-emerald-50 text-emerald-700 border-emerald-200 shrink-0",children:[(0,ds.jsx)(Yk,{className:"w-3 h-3"}),"Acknowledged"]})]})})]})})},t.announcement_id);var c}):(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-12 text-center",children:[(0,ds.jsx)(j_,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Announcements"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"all"!==o?"No announcements in this category":"No announcements have been published yet"}),f&&(0,ds.jsx)(fn,{onClick:()=>i(!0),children:"Create First Announcement"})]})})})]})},JO=Yi("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),QO=()=>{var e;const{user:t}=Cs();return(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"settings-page",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Settings"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage your account and preferences"})]}),(0,ds.jsxs)(cA,{defaultValue:"profile",className:"space-y-6",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsxs)(uA,{value:"profile",className:"gap-2","data-testid":"tab-profile",children:[(0,ds.jsx)(sk,{className:"w-4 h-4"}),"Profile"]}),(0,ds.jsxs)(uA,{value:"security",className:"gap-2","data-testid":"tab-security",children:[(0,ds.jsx)(D_,{className:"w-4 h-4"}),"Security"]}),(0,ds.jsxs)(uA,{value:"notifications",className:"gap-2","data-testid":"tab-notifications",children:[(0,ds.jsx)(ok,{className:"w-4 h-4"}),"Notifications"]})]}),(0,ds.jsx)(hA,{value:"profile",children:(0,ds.jsxs)("div",{className:"grid gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Profile Information"}),(0,ds.jsx)(On,{children:"Update your personal details"})]}),(0,ds.jsxs)(Mn,{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ds.jsxs)(av,{className:"h-20 w-20",children:[(0,ds.jsx)(nv,{src:null===t||void 0===t?void 0:t.picture}),(0,ds.jsx)(rv,{className:"bg-primary text-white text-xl",children:(s=null===t||void 0===t?void 0:t.name,s?s.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(fn,{variant:"outline",size:"sm",children:"Change Photo"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"JPG, PNG or GIF. Max 2MB"})]})]}),(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Full Name"}),(0,ds.jsx)(vn,{defaultValue:null===t||void 0===t?void 0:t.name,"data-testid":"input-name"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Email"}),(0,ds.jsx)(vn,{defaultValue:null===t||void 0===t?void 0:t.email,disabled:!0,"data-testid":"input-email"})]})]}),(0,ds.jsx)("div",{className:"flex justify-end",children:(0,ds.jsx)(fn,{"data-testid":"save-profile-btn",children:"Save Changes"})})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(D_,{className:"w-5 h-5 text-primary"}),"Role & Permissions"]}),(0,ds.jsx)(On,{children:"Your access level in the system"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Current Role"}),(0,ds.jsx)(tk,{className:"text-sm capitalize",children:null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.replace("_"," ")})]}),(null===t||void 0===t?void 0:t.employee_id)&&(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Employee ID"}),(0,ds.jsx)("p",{className:"font-mono text-sm",children:t.employee_id})]}),(null===t||void 0===t?void 0:t.department_id)&&(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Department"}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(F_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("span",{className:"text-sm",children:t.department_id})]})]})]})})]})]})}),(0,ds.jsx)(hA,{value:"security",children:(0,ds.jsxs)("div",{className:"grid gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(JO,{className:"w-5 h-5 text-primary"}),"Change Password"]}),(0,ds.jsx)(On,{children:"Update your password to keep your account secure"})]}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Current Password"}),(0,ds.jsx)(vn,{type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","data-testid":"input-current-password"})]}),(0,ds.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"New Password"}),(0,ds.jsx)(vn,{type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","data-testid":"input-new-password"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Confirm New Password"}),(0,ds.jsx)(vn,{type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","data-testid":"input-confirm-password"})]})]}),(0,ds.jsx)("div",{className:"flex justify-end",children:(0,ds.jsx)(fn,{variant:"outline","data-testid":"update-password-btn",children:"Update Password"})})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Active Session"}),(0,ds.jsx)(On,{children:"Your current login session"})]}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsx)("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Current Session"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Browser \u2022 Active now"})]}),(0,ds.jsx)(tk,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200",children:"Active"})]})}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-3",children:"Only one session can be active at a time for security."})]})]})]})}),(0,ds.jsx)(hA,{value:"notifications",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(ok,{className:"w-5 h-5 text-primary"}),"Notification Preferences"]}),(0,ds.jsx)(On,{children:"Choose what notifications you receive"})]}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Leave Requests"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Get notified about leave approvals and rejections"})]}),(0,ds.jsx)(tk,{children:"Enabled"})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Attendance Alerts"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Notifications for missed punches and anomalies"})]}),(0,ds.jsx)(tk,{children:"Enabled"})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Announcements"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Company-wide announcements and updates"})]}),(0,ds.jsx)(tk,{children:"Enabled"})]})]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-4",children:"All notifications are in-app only. Email notifications are not available."})]})]})})]})]});var s},ZO=Yi("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),eM="https://shardahrms.com/api",tM=()=>{var e,t,n,r,l,i,o,c,d,h,m,p,f,x,v,g,y,j,b,w,N,_,k,S,C,E,T,A,P,D,R,O,M,F,L,I,z,B,U,V,H,W,q,Y,G,K,$,X,J,Q,Z,ee,te,se,ae,ne,re,le,ie,oe,ce,de,ue,he,me,pe,fe,xe,ve,ge,ye,je,be,we,Ne,_e,ke,Se,Ce,Ee,Te,Ae,Pe,De,Re;const{user:Oe}=Cs(),[Me,Fe]=(0,a.useState)([]),[Le,Ie]=(0,a.useState)([]),[ze,Be]=(0,a.useState)([]),[Ue,Ve]=(0,a.useState)([]),[He,We]=(0,a.useState)(!1),[qe,Ye]=(0,a.useState)(""),[Ge,Ke]=(0,a.useState)(null),[$e,Xe]=(0,a.useState)(null),[Je,Qe]=(0,a.useState)(null),[Ze,et]=(0,a.useState)(!1),[tt,st]=(0,a.useState)(!0),[at,nt]=(0,a.useState)(!1),[rt,lt]=(0,a.useState)((new Date).getMonth()+1),[it,ot]=(0,a.useState)((new Date).getFullYear()),[ct,dt]=(0,a.useState)(null),[ut,ht]=(0,a.useState)(null),[mt,pt]=(0,a.useState)([]),[ft,xt]=(0,a.useState)({financial_year_start:"04-01",annual_quotas:{CL:6,SL:6,EL:12},carry_forward:{CL:!1,SL:!1,EL:!0,max_el_accumulation:30},sunday_leave_rules:{enabled:!0,weekly_threshold:2,monthly_threshold:6,auto_apply:!0}}),[vt,gt]=(0,a.useState)({}),[yt,jt]=(0,a.useState)({attendance:!0,leaves:!1,earnings:!0,deductions:!0}),[bt,wt]=(0,a.useState)([]),[Nt,_t]=(0,a.useState)(!1),[kt,St]=(0,a.useState)({name:"",description:"",condition_type:"late_count",condition_threshold:3,condition_operator:"greater_than",action_type:"percentage_deduction",action_value:5,apply_per_occurrence:!1}),[Ct,Et]=(0,a.useState)(!1),[Tt,At]=(0,a.useState)(null),[Pt,Dt]=(0,a.useState)({basic:0,da:0,hra:0,conveyance:0,grade_pay:0,other_allowance:0,medical_allowance:0,epf_applicable:!0,esi_applicable:!0,sewa_applicable:!0,sewa_advance:0,other_deduction:0,reason:""}),[Rt,Ot]=(0,a.useState)(!1),[Mt,Ft]=(0,a.useState)([]),[Lt,It]=(0,a.useState)([]),[zt,Bt]=(0,a.useState)(!1),[Ut,Vt]=(0,a.useState)(!1),[Ht,Wt]=(0,a.useState)(null),[qt,Yt]=(0,a.useState)(null),[Gt,Kt]=(0,a.useState)(!1),[$t,Xt]=(0,a.useState)([]),[Jt,Qt]=(0,a.useState)(!1),[Zt,es]=(0,a.useState)({employee_id:"",total_amount:0,monthly_amount:0,duration_months:0,reason:""}),[ss,as]=(0,a.useState)([]),[ns,rs]=(0,a.useState)([]),[ls,is]=(0,a.useState)(!1),[os,cs]=(0,a.useState)({employee_id:"",amount:0,reason:"",category:"other"}),[us,hs]=(0,a.useState)(!1),[ms,ps]=(0,a.useState)(null),[fs,xs]=(0,a.useState)({}),vs="super_admin"===(null===Oe||void 0===Oe?void 0:Oe.role)||"hr_admin"===(null===Oe||void 0===Oe?void 0:Oe.role)||"finance"===(null===Oe||void 0===Oe?void 0:Oe.role)||"hr_executive"===(null===Oe||void 0===Oe?void 0:Oe.role),gs="super_admin"===(null===Oe||void 0===Oe?void 0:Oe.role)||"finance"===(null===Oe||void 0===Oe?void 0:Oe.role);(0,a.useEffect)(()=>{ys()},[]),(0,a.useEffect)(()=>{vs&&(ws(),_s(),js(),bs())},[rt,it]);const ys=async()=>{try{const e=nk(),[t,s,a,n,r,l,i]=await Promise.all([vs?fetch("".concat(eM,"/payroll/runs"),{credentials:"include",headers:e}):Promise.resolve({ok:!1}),fetch("".concat(eM,"/payroll/my-payslips"),{credentials:"include",headers:e}),vs?fetch("".concat(eM,"/payroll/rules"),{credentials:"include",headers:e}):Promise.resolve({ok:!1}),vs?fetch("".concat(eM,"/payroll/leave-type-rules"),{credentials:"include",headers:e}):Promise.resolve({ok:!1}),vs?fetch("".concat(eM,"/payroll/custom-rules"),{credentials:"include",headers:e}):Promise.resolve({ok:!1}),vs?fetch("".concat(eM,"/payroll/leave-policy-rules"),{credentials:"include",headers:e}):Promise.resolve({ok:!1}),vs?fetch("".concat(eM,"/employees"),{credentials:"include",headers:e}):Promise.resolve({ok:!1})]);if(t.ok&&Fe(await t.json()),s.ok&&Ie(await s.json()),a.ok&&dt(await a.json()),n.ok&&pt(await n.json()),r.ok&&wt(await r.json()),l.ok&&xt(await l.json()),i.ok){const e=await i.json();as(e.employees||e||[])}}catch(e){console.error("Error fetching payroll data:",e)}finally{st(!1)}},js=async()=>{try{const e=await fetch("".concat(eM,"/payroll/sewa-advances"),{credentials:"include",headers:nk()});e.ok&&Xt(await e.json())}catch(e){console.error("Error fetching SEWA advances:",e)}},bs=async()=>{try{const e=await fetch("".concat(eM,"/payroll/one-time-deductions?month=").concat(rt,"&year=").concat(it),{credentials:"include",headers:nk()});e.ok&&rs(await e.json())}catch(e){console.error("Error fetching one-time deductions:",e)}},ws=async()=>{try{const e=await fetch("".concat(eM,"/payroll/all-employees-pay?month=").concat(rt,"&year=").concat(it),{credentials:"include",headers:nk()});e.ok&&Be(await e.json())}catch(e){console.error("Error fetching employees pay:",e)}},Ns=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";We(!0);try{const t=new URLSearchParams({limit:"500"});e&&t.append("search",e);const s=await fetch("".concat(eM,"/payroll/all-salary-structures?").concat(t),{credentials:"include",headers:nk()});if(s.ok){const e=await s.json();Ve(e.data||[])}}catch(t){console.error("Error fetching salary structures:",t),ts.error("Failed to load salary structures")}finally{We(!1)}},_s=async()=>{try{const e=await fetch("".concat(eM,"/payroll/salary-change-requests?status=pending"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();Ft(t.requests||[])}}catch(e){console.error("Error fetching change requests:",e)}},ks=async e=>{et(!0);try{const t=await fetch("".concat(eM,"/payroll/employee-breakdown/").concat(e,"?month=").concat(rt,"&year=").concat(it),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();Qe(e)}else ts.error("Failed to fetch breakdown")}catch(t){ts.error("Failed to fetch employee breakdown")}finally{et(!1)}},Ss=e=>{jt(t=>u(u({},t),{},{[e]:!t[e]}))},Es=async e=>{Kt(!0);try{const t=await fetch("".concat(eM,"/payroll/runs/").concat(e),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();Yt(e),Vt(!0)}else ts.error("Failed to fetch payroll details")}catch(t){ts.error("Failed to fetch payroll details")}finally{Kt(!1)}},Ts=e=>{Wt(e),"processed"===e.status||"locked"===e.status?Es(e.payroll_id):ts.info("Process the payroll first to view details")},As=async e=>{try{(await fetch("".concat(eM,"/payroll/rules/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ct[e])})).ok?(ts.success("".concat(e.replace(/_/g," ")," rules saved")),ht(null)):ts.error("Failed to save rules")}catch(t){ts.error("Failed to save rules")}},Ps=(e,t,s)=>{dt(a=>{const n=u({},a);let r=n[e];const l=t.split(".");for(let e=0;e<l.length-1;e++)r=r[l[e]];return r[l[l.length-1]]=s,n})},Ds=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),Rs=e=>new Date(2e3,e-1,1).toLocaleString("en-IN",{month:"long"}),Os={draft:"bg-slate-100 text-slate-700",processing:"bg-blue-100 text-blue-700",processed:"bg-emerald-100 text-emerald-700",locked:"bg-purple-100 text-purple-700"};if(tt)return(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})});const Ms=e=>{let{title:t,section:s,children:a}=e;return(0,ds.jsxs)(Pn,{className:"mb-4",children:[(0,ds.jsx)(Dn,{className:"cursor-pointer hover:bg-slate-50 transition-colors pb-3",onClick:()=>(e=>{gt(t=>u(u({},t),{},{[e]:!t[e]}))})(s),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(z_,{className:"w-5 h-5 text-primary"}),t]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[ut===s?(0,ds.jsxs)(fn,{size:"sm",onClick:e=>{e.stopPropagation(),As(s)},children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]}):(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),ht(s)},children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"})," Edit"]}),vt[s]?(0,ds.jsx)(uE,{className:"w-5 h-5"}):(0,ds.jsx)(dE,{className:"w-5 h-5"})]})]})}),vt[s]&&(0,ds.jsx)(Mn,{children:a})]})};return(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"payroll-page",children:[(0,ds.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Payroll"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Payroll"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage payroll, rules, and view salary slips"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]})}),(0,ds.jsxs)(cA,{defaultValue:vs?"runs":"my-payslips",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border flex-wrap h-auto",children:[vs&&(0,ds.jsx)(uA,{value:"runs","data-testid":"tab-runs",children:"Payroll Runs"}),vs&&(0,ds.jsx)(uA,{value:"employees-pay","data-testid":"tab-employees-pay",children:"All Employees"}),vs&&(0,ds.jsx)(uA,{value:"salary-structures","data-testid":"tab-salary-structures",children:"Salary Structures"}),vs&&(0,ds.jsx)(uA,{value:"sewa-advances","data-testid":"tab-sewa-advances",children:"SEWA Advances"}),vs&&(0,ds.jsx)(uA,{value:"deductions","data-testid":"tab-deductions",children:"One-time Deductions"}),(0,ds.jsx)(uA,{value:"my-payslips","data-testid":"tab-my-payslips",children:"My Payslips"}),vs&&(0,ds.jsx)(uA,{value:"rules","data-testid":"tab-rules",children:"Payroll Rules"}),vs&&(0,ds.jsx)(uA,{value:"config","data-testid":"tab-config",children:"Statutory Config"})]}),vs&&(0,ds.jsx)(hA,{value:"runs",children:(0,ds.jsxs)("div",{className:"grid gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Create Payroll Run"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Month"}),(0,ds.jsxs)(yE,{value:String(rt),onValueChange:e=>lt(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[...Array(12)].map((e,t)=>(0,ds.jsx)(kE,{value:String(t+1),children:Rs(t+1)},t+1))})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Year"}),(0,ds.jsxs)(yE,{value:String(it),onValueChange:e=>ot(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[2024,2025,2026].map(e=>(0,ds.jsx)(kE,{value:String(e),children:e},e))})]})]}),(0,ds.jsx)(fn,{onClick:async()=>{try{const e=await fetch("".concat(eM,"/payroll/runs?month=").concat(rt,"&year=").concat(it),{method:"POST",credentials:"include",headers:nk()});if(e.ok)ts.success("Payroll run created"),ys();else{const t=await e.json();ts.error(t.detail||"Failed to create payroll")}}catch(e){ts.error("Failed to create payroll")}},"data-testid":"create-payroll-btn",children:"Create Payroll"})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Payroll History"})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Period"}),(0,ds.jsx)(gS,{children:"Employees"}),(0,ds.jsx)(gS,{children:"Gross"}),(0,ds.jsx)(gS,{children:"Net"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:Me.length>0?Me.map(e=>(0,ds.jsxs)(vS,{className:"".concat("processed"===e.status||"locked"===e.status?"cursor-pointer hover:bg-slate-100":""),onClick:()=>("processed"===e.status||"locked"===e.status)&&Ts(e),"data-testid":"payroll-run-".concat(e.payroll_id),children:[(0,ds.jsxs)(yS,{className:"font-medium",children:[Rs(e.month)," ",e.year]}),(0,ds.jsx)(yS,{children:e.total_employees}),(0,ds.jsx)(yS,{children:Ds(e.total_gross)}),(0,ds.jsx)(yS,{children:Ds(e.total_net)}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:Os[e.status],children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,ds.jsxs)("div",{className:"flex justify-end gap-2",children:[("processed"===e.status||"locked"===e.status)&&(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>Ts(e),className:"gap-1","data-testid":"view-payroll-".concat(e.payroll_id),children:[(0,ds.jsx)(xA,{className:"w-3 h-3"}),"View"]}),"draft"===e.status&&(0,ds.jsxs)(fn,{size:"sm",onClick:()=>(async e=>{nt(!0);try{const t=await fetch("".concat(eM,"/payroll/runs/").concat(e,"/process"),{method:"POST",credentials:"include",headers:nk()});if(t.ok){const e=await t.json();ts.success(e.message),ys(),ws()}else{const e=await t.json();ts.error(e.detail||"Failed to process payroll")}}catch(t){ts.error("Failed to process payroll")}finally{nt(!1)}})(e.payroll_id),disabled:at,className:"gap-1",children:[(0,ds.jsx)(ZO,{className:"w-3 h-3"}),"Process"]}),"processed"===e.status&&(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{const t=await fetch("".concat(eM,"/payroll/runs/").concat(e,"/lock"),{method:"POST",credentials:"include",headers:nk()});if(t.ok)ts.success("Payroll locked"),ys();else{const e=await t.json();ts.error(e.detail||"Failed to lock payroll")}}catch(t){ts.error("Failed to lock payroll")}})(e.payroll_id),className:"gap-1",children:[(0,ds.jsx)(kx,{className:"w-3 h-3"}),"Lock"]}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this payroll run and all associated payslips? This action cannot be undone."))try{const t=await fetch("".concat(eM,"/payroll/runs/").concat(e),{method:"DELETE",credentials:"include",headers:nk()});if(t.ok){const e=await t.json();ts.success("Payroll deleted (".concat(e.payslips_deleted," payslips removed)")),ys()}else{const e=await t.json();ts.error(e.detail||"Failed to delete payroll")}}catch(t){ts.error("Failed to delete payroll")}})(e.payroll_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete payroll",children:(0,ds.jsx)(dk,{className:"w-3 h-3"})})]})})]},e.payroll_id)):(0,ds.jsx)(vS,{children:(0,ds.jsxs)(yS,{colSpan:6,className:"text-center py-8",children:[(0,ds.jsx)(v_,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No payroll runs yet"})]})})})]})})]})]})}),vs&&(0,ds.jsx)(hA,{value:"employees-pay",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"}),"Employee Pay Information"]}),(0,ds.jsx)(On,{children:"View salary details for all employees"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:String(rt),onValueChange:e=>lt(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-36",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[...Array(12)].map((e,t)=>(0,ds.jsx)(kE,{value:String(t+1),children:Rs(t+1)},t+1))})]}),(0,ds.jsxs)(yE,{value:String(it),onValueChange:e=>ot(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-28",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[2024,2025,2026].map(e=>(0,ds.jsx)(kE,{value:String(e),children:e},e))})]})]})]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{children:"Days"}),(0,ds.jsx)(gS,{children:"Gross"}),(0,ds.jsx)(gS,{children:"Deductions"}),(0,ds.jsx)(gS,{children:"Net"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:ze.length>0?ze.map(e=>(0,ds.jsxs)(vS,{className:"cursor-pointer hover:bg-slate-100",onClick:()=>ks(e.employee_id),children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name||e.employee_id}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.employee_code})]})}),(0,ds.jsx)(yS,{children:e.department||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("span",{className:"text-sm",children:[e.paid_days,"/",e.working_days]})}),(0,ds.jsx)(yS,{children:Ds(e.gross_salary)}),(0,ds.jsx)(yS,{className:"text-red-600",children:Ds(e.total_deductions)}),(0,ds.jsx)(yS,{className:"font-semibold text-emerald-600",children:Ds(e.net_salary)}),(0,ds.jsx)(yS,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>ks(e.employee_id),className:"gap-1",children:[(0,ds.jsx)(xA,{className:"w-4 h-4"}),"Breakdown"]})})]},e.payslip_id)):(0,ds.jsx)(vS,{children:(0,ds.jsxs)(yS,{colSpan:7,className:"text-center py-8",children:[(0,ds.jsx)(ik,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No payroll data for this period"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Process payroll to see employee pay details"})]})})})]})})]})}),vs&&(0,ds.jsx)(hA,{value:"salary-structures",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(bA,{className:"w-5 h-5 text-primary"}),"All Salary Structures"]}),(0,ds.jsx)(On,{children:"View salary details for all employees"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsx)(vn,{placeholder:"Search by name, code, email...",value:qe,onChange:e=>Ye(e.target.value),className:"w-64","data-testid":"salary-search-input"}),(0,ds.jsx)(fn,{onClick:()=>Ns(qe),"data-testid":"salary-search-btn",children:"Search"}),(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{Ye(""),Ns("")},"data-testid":"salary-clear-btn",children:"Clear"})]})]})}),(0,ds.jsx)(Mn,{children:He?(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(SE,{className:"w-8 h-8 text-primary animate-spin mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Loading salary structures..."})]}):Ue.length>0?(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Emp Code"}),(0,ds.jsx)(gS,{children:"Employee Name"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{className:"text-right",children:"Gross Salary"}),(0,ds.jsx)(gS,{className:"text-right",children:"Basic"}),(0,ds.jsx)(gS,{children:"Data Source"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:Ue.map(e=>(0,ds.jsxs)(vS,{className:"hover:bg-slate-50","data-testid":"salary-row-".concat(e.employee_id),children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.emp_code||"-"}),(0,ds.jsx)(yS,{children:e.employee_name||"-"}),(0,ds.jsx)(yS,{children:e.department||"-"}),(0,ds.jsx)(yS,{className:"text-right font-semibold",children:e.gross_salary?Ds(e.gross_salary):"-"}),(0,ds.jsx)(yS,{className:"text-right",children:e.basic_salary?Ds(e.basic_salary):"-"}),(0,ds.jsx)(yS,{children:e.has_salary_data?(0,ds.jsx)(tk,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:e.salary_source||"Available"}):(0,ds.jsx)(tk,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"No Data"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{At(e);try{const t=await fetch("".concat(eM,"/payroll/employee/").concat(e.employee_id),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json(),s=(null===e||void 0===e?void 0:e.fixed_components)||{},a=(null===e||void 0===e?void 0:e.deduction_config)||{},n=(null===e||void 0===e?void 0:e.fixed_deductions)||{};Dt({basic:s.basic||(null===e||void 0===e?void 0:e.basic)||0,da:s.da||(null===e||void 0===e?void 0:e.da)||0,hra:s.hra||(null===e||void 0===e?void 0:e.hra)||0,conveyance:s.conveyance||(null===e||void 0===e?void 0:e.conveyance)||0,grade_pay:s.grade_pay||0,other_allowance:s.other_allowance||(null===e||void 0===e?void 0:e.other_allowance)||0,medical_allowance:s.medical_allowance||0,epf_applicable:!1!==a.epf_applicable,esi_applicable:!1!==a.esi_applicable,sewa_applicable:!1!==a.sewa_applicable,sewa_advance:n.sewa_advance||0,other_deduction:n.other_deduction||0,reason:""})}else Dt({basic:0,da:0,hra:0,conveyance:0,grade_pay:0,other_allowance:0,medical_allowance:0,epf_applicable:!0,esi_applicable:!0,sewa_applicable:!0,sewa_advance:0,other_deduction:0,reason:""})}catch(t){console.error("Error fetching salary:",t)}Et(!0)})(e),"data-testid":"edit-salary-".concat(e.employee_id),children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{const t=await fetch("".concat(eM,"/payroll/employee/").concat(e,"/salary-history"),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();It(e),Bt(!0)}}catch(t){ts.error("Failed to fetch salary history")}})(e.employee_id),"data-testid":"salary-history-".concat(e.employee_id),children:(0,ds.jsx)(p_,{className:"w-4 h-4"})})]})})]},e.employee_id))})]})}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(k_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:"No salary structures found"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"Click Search or use Bulk Import to add salary data"}),(0,ds.jsx)(fn,{onClick:()=>Ns(""),className:"mt-4","data-testid":"load-salary-btn",children:"Load All Salaries"})]})})]})}),vs&&(0,ds.jsx)(hA,{value:"sewa-advances",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(g_,{className:"w-5 h-5 text-primary"}),"SEWA Advance Management"]}),(0,ds.jsx)(On,{children:"Manage employee SEWA advances with automatic monthly deductions"})]}),(0,ds.jsxs)(fn,{onClick:()=>Qt(!0),"data-testid":"add-sewa-advance-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," Add SEWA Advance"]})]})}),(0,ds.jsx)(Mn,{children:$t.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Total Amount"}),(0,ds.jsx)(gS,{children:"Monthly Deduction"}),(0,ds.jsx)(gS,{children:"Paid"}),(0,ds.jsx)(gS,{children:"Remaining"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:$t.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:Ds(e.total_amount)}),(0,ds.jsx)(yS,{children:Ds(e.monthly_amount)}),(0,ds.jsx)(yS,{className:"text-emerald-600",children:Ds(e.total_paid)}),(0,ds.jsx)(yS,{className:"text-amber-600",children:Ds(e.remaining_amount)}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_active?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600",children:e.status||(e.is_active?"Active":"Completed")})}),(0,ds.jsx)(yS,{className:"text-right",children:e.is_active&&(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(window.confirm("Cancel this SEWA advance?"))try{(await fetch("".concat(eM,"/payroll/sewa-advances/").concat(e),{method:"DELETE",headers:nk(),credentials:"include"})).ok&&(ts.success("SEWA advance cancelled"),js())}catch(t){ts.error("Failed to cancel SEWA advance")}})(e.advance_id),className:"text-red-600",children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})})]},e.advance_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(g_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No SEWA advances configured"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Add advances for employees who need to repay SEWA"})]})})]})}),vs&&(0,ds.jsx)(hA,{value:"deductions",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(ik,{className:"w-5 h-5 text-primary"}),"One-time Deductions for ",Rs(rt)," ",it]}),(0,ds.jsx)(On,{children:"Add loan EMIs, advance recoveries, or other deductions for specific employees"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:String(rt),onValueChange:e=>lt(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-36",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[...Array(12)].map((e,t)=>(0,ds.jsx)(kE,{value:String(t+1),children:Rs(t+1)},t+1))})]}),(0,ds.jsxs)(fn,{onClick:()=>is(!0),"data-testid":"add-deduction-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," Add Deduction"]})]})]})}),(0,ds.jsx)(Mn,{children:ns.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Category"}),(0,ds.jsx)(gS,{children:"Amount"}),(0,ds.jsx)(gS,{children:"Reason"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:ns.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:"loan_emi"===e.category?"Loan EMI":"advance_recovery"===e.category?"Advance Recovery":"penalty"===e.category?"Penalty":"Other"})}),(0,ds.jsx)(yS,{className:"text-red-600 font-medium",children:Ds(e.amount)}),(0,ds.jsx)(yS,{children:e.reason||"-"}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(window.confirm("Remove this deduction?"))try{(await fetch("".concat(eM,"/payroll/one-time-deductions/").concat(e),{method:"DELETE",headers:nk(),credentials:"include"})).ok&&(ts.success("Deduction removed"),bs())}catch(t){ts.error("Failed to remove deduction")}})(e.deduction_id),className:"text-red-600",children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})})]},e.deduction_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(ik,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No one-time deductions for this month"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Add deductions like loan EMIs or advance recoveries"})]})})]})}),(0,ds.jsx)(hA,{value:"my-payslips",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(M_,{className:"w-5 h-5 text-primary"}),"My Salary Slips"]}),(0,ds.jsx)(On,{children:"View and download your payslips"})]}),(0,ds.jsx)(Mn,{children:Le.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:Le.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors","data-testid":"payslip-".concat(e.payslip_id),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4 cursor-pointer flex-1",onClick:()=>Ke(e),children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(bA,{className:"w-6 h-6 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-slate-900",children:[Rs(e.month)," ",e.year]}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.paid_days," days worked"]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:Ds(e.net_salary)}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Net Pay"})]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),window.open("".concat(eM,"/payroll/payslip/").concat(e.payslip_id,"/pdf"),"_blank")},"data-testid":"download-payslip-".concat(e.payslip_id),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-1"}),"PDF"]})]})]},e.payslip_id))}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No payslips available"})]})})]})}),vs&&ct&&(0,ds.jsx)(hA,{value:"rules",children:(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)(Ms,{title:"Attendance Rules",section:"attendance_rules",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Grace Period (minutes)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(e=ct.attendance_rules)||void 0===e?void 0:e.grace_period_minutes)||15,onChange:e=>Ps("attendance_rules","grace_period_minutes",Number(e.target.value)),disabled:"attendance_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Min Hours for Full Day"}),(0,ds.jsx)(vn,{type:"number",value:(null===(t=ct.attendance_rules)||void 0===t||null===(n=t.half_day_rules)||void 0===n?void 0:n.min_hours_for_full_day)||8,onChange:e=>Ps("attendance_rules","half_day_rules.min_hours_for_full_day",Number(e.target.value)),disabled:"attendance_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Min Hours for Half Day"}),(0,ds.jsx)(vn,{type:"number",value:(null===(r=ct.attendance_rules)||void 0===r||null===(l=r.half_day_rules)||void 0===l?void 0:l.min_hours_for_half_day)||4,onChange:e=>Ps("attendance_rules","half_day_rules.min_hours_for_half_day",Number(e.target.value)),disabled:"attendance_rules"!==ut})]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Half Day Deduction %"}),(0,ds.jsx)(vn,{type:"number",value:(null===(i=ct.attendance_rules)||void 0===i||null===(o=i.half_day_rules)||void 0===o?void 0:o.half_day_deduction_percent)||50,onChange:e=>Ps("attendance_rules","half_day_rules.half_day_deduction_percent",Number(e.target.value)),disabled:"attendance_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Absent Day Multiplier"}),(0,ds.jsx)(vn,{type:"number",step:"0.5",value:(null===(c=ct.attendance_rules)||void 0===c||null===(d=c.absent_deduction)||void 0===d?void 0:d.multiplier)||1,onChange:e=>Ps("attendance_rules","absent_deduction.multiplier",Number(e.target.value)),disabled:"attendance_rules"!==ut}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"1 = 1 day deduction, 1.5 = 1.5 days, 2 = 2 days"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:null===(h=ct.attendance_rules)||void 0===h||null===(m=h.late_coming_deduction)||void 0===m?void 0:m.enabled,onCheckedChange:e=>Ps("attendance_rules","late_coming_deduction.enabled",e),disabled:"attendance_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable Late Coming Deduction"})]})]})]})}),(0,ds.jsxs)(Pn,{className:"mb-4",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-5 h-5 text-primary"}),"Leave Type Payroll Rules"]}),(0,ds.jsxs)(fn,{size:"sm",onClick:async()=>{try{(await fetch("".concat(eM,"/payroll/leave-type-rules"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(mt)})).ok?ts.success("Leave type rules saved"):ts.error("Failed to save leave type rules")}catch(e){ts.error("Failed to save leave type rules")}},children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]})]})}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Leave Type"}),(0,ds.jsx)(gS,{children:"Code"}),(0,ds.jsx)(gS,{children:"Paid Leave"}),(0,ds.jsx)(gS,{children:"Deduction %"})]})}),(0,ds.jsx)(xS,{children:mt.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.name}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.code})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(JA,{checked:e.is_paid,onCheckedChange:e=>{const s=[...mt];s[t].is_paid=e,s[t].deduction_percent=e?0:100,pt(s)}})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(vn,{type:"number",className:"w-24",value:e.deduction_percent,onChange:e=>{const s=[...mt];s[t].deduction_percent=Number(e.target.value),pt(s)}})})]},e.leave_type_id||t))})]})})]}),(0,ds.jsxs)(Pn,{className:"mb-4",children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-5 h-5 text-primary"}),"Leave Policy Rules"]}),(0,ds.jsxs)(fn,{size:"sm",onClick:async()=>{try{(await fetch("".concat(eM,"/payroll/leave-policy-rules"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(ft)})).ok?ts.success("Leave policy rules saved"):ts.error("Failed to save leave policy rules")}catch(e){ts.error("Failed to save leave policy rules")}},children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]})]}),(0,ds.jsx)(On,{children:"Configure annual leave quotas, carry forward rules, and Sunday leave penalties"})]}),(0,ds.jsxs)(Mn,{className:"space-y-6",children:[(0,ds.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Financial Year Start"}),(0,ds.jsx)(vn,{value:ft.financial_year_start||"04-01",onChange:e=>xt(u(u({},ft),{},{financial_year_start:e.target.value})),placeholder:"04-01"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Format: MM-DD (e.g., 04-01 for April 1st)"})]})}),(0,ds.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ds.jsx)("h4",{className:"font-medium mb-3",children:"Annual Leave Quotas"}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Casual Leave (CL)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(p=ft.annual_quotas)||void 0===p?void 0:p.CL)||6,onChange:e=>xt(u(u({},ft),{},{annual_quotas:u(u({},ft.annual_quotas),{},{CL:Number(e.target.value)})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Sick Leave (SL)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(f=ft.annual_quotas)||void 0===f?void 0:f.SL)||6,onChange:e=>xt(u(u({},ft),{},{annual_quotas:u(u({},ft.annual_quotas),{},{SL:Number(e.target.value)})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Earned Leave (EL)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(x=ft.annual_quotas)||void 0===x?void 0:x.EL)||12,onChange:e=>xt(u(u({},ft),{},{annual_quotas:u(u({},ft.annual_quotas),{},{EL:Number(e.target.value)})}))})]})]})]}),(0,ds.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ds.jsx)("h4",{className:"font-medium mb-3",children:"Carry Forward Rules"}),(0,ds.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:(null===(v=ft.carry_forward)||void 0===v?void 0:v.CL)||!1,onCheckedChange:e=>xt(u(u({},ft),{},{carry_forward:u(u({},ft.carry_forward),{},{CL:e})}))}),(0,ds.jsx)(_n,{children:"CL Carries Forward"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:(null===(g=ft.carry_forward)||void 0===g?void 0:g.SL)||!1,onCheckedChange:e=>xt(u(u({},ft),{},{carry_forward:u(u({},ft.carry_forward),{},{SL:e})}))}),(0,ds.jsx)(_n,{children:"SL Carries Forward"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:(null===(y=ft.carry_forward)||void 0===y?void 0:y.EL)||!0,onCheckedChange:e=>xt(u(u({},ft),{},{carry_forward:u(u({},ft.carry_forward),{},{EL:e})}))}),(0,ds.jsx)(_n,{children:"EL Carries Forward"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max EL Accumulation"}),(0,ds.jsx)(vn,{type:"number",value:(null===(j=ft.carry_forward)||void 0===j?void 0:j.max_el_accumulation)||30,onChange:e=>xt(u(u({},ft),{},{carry_forward:u(u({},ft.carry_forward),{},{max_el_accumulation:Number(e.target.value)})}))})]})]})]}),(0,ds.jsxs)("div",{className:"border rounded-lg p-4 bg-amber-50",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ds.jsx)("h4",{className:"font-medium text-amber-800",children:"Sunday Leave Penalty Rules"}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:(null===(b=ft.sunday_leave_rules)||void 0===b?void 0:b.enabled)||!1,onCheckedChange:e=>xt(u(u({},ft),{},{sunday_leave_rules:u(u({},ft.sunday_leave_rules),{},{enabled:e})}))}),(0,ds.jsx)(_n,{className:"text-amber-800",children:"Enabled"})]})]}),(0,ds.jsx)("p",{className:"text-sm text-amber-700 mb-4",children:"Automatically mark Sunday as leave if employee exceeds leave thresholds"}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Weekly Threshold"}),(0,ds.jsx)(vn,{type:"number",value:(null===(w=ft.sunday_leave_rules)||void 0===w?void 0:w.weekly_threshold)||2,onChange:e=>xt(u(u({},ft),{},{sunday_leave_rules:u(u({},ft.sunday_leave_rules),{},{weekly_threshold:Number(e.target.value)})}))}),(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"If > this many leaves in a week"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Monthly Threshold"}),(0,ds.jsx)(vn,{type:"number",value:(null===(N=ft.sunday_leave_rules)||void 0===N?void 0:N.monthly_threshold)||6,onChange:e=>xt(u(u({},ft),{},{sunday_leave_rules:u(u({},ft.sunday_leave_rules),{},{monthly_threshold:Number(e.target.value)})}))}),(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"If > this many leaves in a month"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,ds.jsx)(JA,{checked:(null===(_=ft.sunday_leave_rules)||void 0===_?void 0:_.auto_apply)||!0,onCheckedChange:e=>xt(u(u({},ft),{},{sunday_leave_rules:u(u({},ft.sunday_leave_rules),{},{auto_apply:e})}))}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{children:"Auto Apply"}),(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"Auto-trigger with HR warning"})]})]})]})]})]})]}),(0,ds.jsx)(Ms,{title:"Overtime Rules",section:"overtime_rules",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,ds.jsx)(JA,{checked:null===(k=ct.overtime_rules)||void 0===k?void 0:k.enabled,onCheckedChange:e=>Ps("overtime_rules","enabled",e),disabled:"overtime_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable Overtime"})]}),(0,ds.jsx)(_n,{children:"Weekday Multiplier"}),(0,ds.jsx)(vn,{type:"number",step:"0.1",value:(null===(S=ct.overtime_rules)||void 0===S?void 0:S.weekday_multiplier)||1.5,onChange:e=>Ps("overtime_rules","weekday_multiplier",Number(e.target.value)),disabled:"overtime_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Weekend Multiplier"}),(0,ds.jsx)(vn,{type:"number",step:"0.1",value:(null===(C=ct.overtime_rules)||void 0===C?void 0:C.weekend_multiplier)||2,onChange:e=>Ps("overtime_rules","weekend_multiplier",Number(e.target.value)),disabled:"overtime_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Holiday Multiplier"}),(0,ds.jsx)(vn,{type:"number",step:"0.1",value:(null===(E=ct.overtime_rules)||void 0===E?void 0:E.holiday_multiplier)||2.5,onChange:e=>Ps("overtime_rules","holiday_multiplier",Number(e.target.value)),disabled:"overtime_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max OT Hours/Day"}),(0,ds.jsx)(vn,{type:"number",value:(null===(T=ct.overtime_rules)||void 0===T?void 0:T.max_ot_hours_per_day)||4,onChange:e=>Ps("overtime_rules","max_ot_hours_per_day",Number(e.target.value)),disabled:"overtime_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max OT Hours/Month"}),(0,ds.jsx)(vn,{type:"number",value:(null===(A=ct.overtime_rules)||void 0===A?void 0:A.max_ot_hours_per_month)||50,onChange:e=>Ps("overtime_rules","max_ot_hours_per_month",Number(e.target.value)),disabled:"overtime_rules"!==ut})]})]})}),(0,ds.jsx)(Ms,{title:"Salary Components",section:"salary_components",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Basic % of CTC"}),(0,ds.jsx)(vn,{type:"number",value:(null===(P=ct.salary_components)||void 0===P?void 0:P.basic_percent_of_ctc)||40,onChange:e=>Ps("salary_components","basic_percent_of_ctc",Number(e.target.value)),disabled:"salary_components"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"HRA % of Basic"}),(0,ds.jsx)(vn,{type:"number",value:(null===(D=ct.salary_components)||void 0===D?void 0:D.hra_percent_of_basic)||40,onChange:e=>Ps("salary_components","hra_percent_of_basic",Number(e.target.value)),disabled:"salary_components"!==ut})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,ds.jsx)(JA,{checked:null===(R=ct.salary_components)||void 0===R?void 0:R.special_allowance_auto_calculate,onCheckedChange:e=>Ps("salary_components","special_allowance_auto_calculate",e),disabled:"salary_components"!==ut}),(0,ds.jsx)(_n,{children:"Auto-calculate Special Allowance"})]})]})}),(0,ds.jsx)(Ms,{title:"Bonus & Incentives",section:"bonus_rules",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:null===(O=ct.bonus_rules)||void 0===O?void 0:O.statutory_bonus_enabled,onCheckedChange:e=>Ps("bonus_rules","statutory_bonus_enabled",e),disabled:"bonus_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable Statutory Bonus"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Statutory Bonus %"}),(0,ds.jsx)(vn,{type:"number",step:"0.01",value:(null===(M=ct.bonus_rules)||void 0===M?void 0:M.statutory_bonus_percent)||8.33,onChange:e=>Ps("bonus_rules","statutory_bonus_percent",Number(e.target.value)),disabled:"bonus_rules"!==ut})]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Statutory Bonus Ceiling (Monthly Basic)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(F=ct.bonus_rules)||void 0===F?void 0:F.statutory_bonus_ceiling)||7e3,onChange:e=>Ps("bonus_rules","statutory_bonus_ceiling",Number(e.target.value)),disabled:"bonus_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Annual Increment Month"}),(0,ds.jsxs)(yE,{value:String((null===(L=ct.bonus_rules)||void 0===L?void 0:L.annual_increment_month)||4),onValueChange:e=>Ps("bonus_rules","annual_increment_month",Number(e)),disabled:"bonus_rules"!==ut,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:[...Array(12)].map((e,t)=>(0,ds.jsx)(kE,{value:String(t+1),children:Rs(t+1)},t+1))})]})]})]})]})}),(0,ds.jsxs)(Pn,{className:"mb-4",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(ik,{className:"w-5 h-5 text-amber-500"}),"Custom Deduction Rules"]}),(0,ds.jsx)(On,{children:"Define automatic deductions based on attendance patterns"})]}),(0,ds.jsxs)(fn,{size:"sm",className:"gap-1",onClick:()=>_t(!0),children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Rule"]})]})}),(0,ds.jsx)(Mn,{children:bt.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:bt.map(e=>{var t,s,a;return(0,ds.jsx)("div",{className:"p-4 rounded-lg border ".concat(e.is_active?"bg-white border-slate-200":"bg-slate-50 border-slate-100 opacity-60"),children:(0,ds.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)("p",{className:"font-medium",children:e.name}),e.is_default&&(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:"Default"})]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-2",children:e.description}),(0,ds.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ds.jsxs)(tk,{className:"bg-blue-100 text-blue-700",children:["If ",null===(t=e.condition_type)||void 0===t?void 0:t.replace(/_/g," ")," ",null===(s=e.condition_operator)||void 0===s?void 0:s.replace(/_/g," ")," ",e.condition_threshold]}),(0,ds.jsxs)(tk,{className:"bg-amber-100 text-amber-700",children:["Then ",null===(a=e.action_type)||void 0===a?void 0:a.replace(/_/g," "),": ","percentage_deduction"===e.action_type?"".concat(e.action_value,"%"):"\u20b9".concat(e.action_value)]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:e.is_active,onCheckedChange:()=>(async e=>{try{(await fetch("".concat(eM,"/payroll/custom-rules/").concat(e,"/toggle"),{method:"PUT",credentials:"include"})).ok&&(ts.success("Rule toggled"),ys())}catch(t){ts.error("Failed to toggle rule")}})(e.rule_id)}),!e.is_default&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>(async e=>{if(window.confirm("Delete this rule?"))try{(await fetch("".concat(eM,"/payroll/custom-rules/").concat(e),{method:"DELETE",credentials:"include"})).ok&&(ts.success("Rule deleted"),ys())}catch(t){ts.error("Failed to delete rule")}})(e.rule_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})]})},e.rule_id)})}):(0,ds.jsxs)("div",{className:"text-center py-6",children:[(0,ds.jsx)(ik,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No custom deduction rules defined"}),(0,ds.jsx)(fn,{variant:"outline",onClick:()=>_t(!0),children:"Add First Rule"})]})})]})]})}),vs&&ct&&(0,ds.jsx)(hA,{value:"config",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"PF Configuration"}),"pf_rules"===ut?(0,ds.jsxs)(fn,{size:"sm",onClick:()=>As("pf_rules"),children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]}):(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>ht("pf_rules"),children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"})," Edit"]})]})}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:null===(I=ct.pf_rules)||void 0===I?void 0:I.enabled,onCheckedChange:e=>Ps("pf_rules","enabled",e),disabled:"pf_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable PF"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee Contribution %"}),(0,ds.jsx)(vn,{type:"number",step:"0.01",value:(null===(z=ct.pf_rules)||void 0===z?void 0:z.employee_contribution_percent)||12,onChange:e=>Ps("pf_rules","employee_contribution_percent",Number(e.target.value)),disabled:"pf_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employer Contribution %"}),(0,ds.jsx)(vn,{type:"number",step:"0.01",value:(null===(B=ct.pf_rules)||void 0===B?void 0:B.employer_contribution_percent)||12,onChange:e=>Ps("pf_rules","employer_contribution_percent",Number(e.target.value)),disabled:"pf_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Wage Ceiling (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(U=ct.pf_rules)||void 0===U?void 0:U.wage_ceiling)||15e3,onChange:e=>Ps("pf_rules","wage_ceiling",Number(e.target.value)),disabled:"pf_rules"!==ut})]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"ESI Configuration"}),"esi_rules"===ut?(0,ds.jsxs)(fn,{size:"sm",onClick:()=>As("esi_rules"),children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]}):(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>ht("esi_rules"),children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"})," Edit"]})]})}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:null===(V=ct.esi_rules)||void 0===V?void 0:V.enabled,onCheckedChange:e=>Ps("esi_rules","enabled",e),disabled:"esi_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable ESI"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee Contribution %"}),(0,ds.jsx)(vn,{type:"number",step:"0.01",value:(null===(H=ct.esi_rules)||void 0===H?void 0:H.employee_contribution_percent)||.75,onChange:e=>Ps("esi_rules","employee_contribution_percent",Number(e.target.value)),disabled:"esi_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employer Contribution %"}),(0,ds.jsx)(vn,{type:"number",step:"0.01",value:(null===(W=ct.esi_rules)||void 0===W?void 0:W.employer_contribution_percent)||3.25,onChange:e=>Ps("esi_rules","employer_contribution_percent",Number(e.target.value)),disabled:"esi_rules"!==ut})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Wage Ceiling (\u20b9/month)"}),(0,ds.jsx)(vn,{type:"number",value:(null===(q=ct.esi_rules)||void 0===q?void 0:q.wage_ceiling)||21e3,onChange:e=>Ps("esi_rules","wage_ceiling",Number(e.target.value)),disabled:"esi_rules"!==ut})]})]})]}),(0,ds.jsxs)(Pn,{className:"md:col-span-2",children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Professional Tax Slabs"}),"pt_rules"===ut?(0,ds.jsxs)(fn,{size:"sm",onClick:()=>As("pt_rules"),children:[(0,ds.jsx)(gA,{className:"w-4 h-4 mr-1"})," Save"]}):(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>ht("pt_rules"),children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"})," Edit"]})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,ds.jsx)(JA,{checked:null===(Y=ct.pt_rules)||void 0===Y?void 0:Y.enabled,onCheckedChange:e=>Ps("pt_rules","enabled",e),disabled:"pt_rules"!==ut}),(0,ds.jsx)(_n,{children:"Enable Professional Tax"})]}),(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Min Salary (\u20b9)"}),(0,ds.jsx)(gS,{children:"Max Salary (\u20b9)"}),(0,ds.jsx)(gS,{children:"PT Amount (\u20b9)"})]})}),(0,ds.jsx)(xS,{children:null===(G=ct.pt_rules)||void 0===G||null===(K=G.slabs)||void 0===K?void 0:K.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:Ds(e.min)}),(0,ds.jsx)(yS,{children:e.max>=999999999?"\u221e":Ds(e.max)}),(0,ds.jsx)(yS,{children:Ds(e.amount)})]},t))})]})]})]})]})})]}),(0,ds.jsx)(eo,{open:!!Ge,onOpenChange:()=>Ke(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)(io,{children:["Salary Slip - ",Ge&&"".concat(Rs(Ge.month)," ").concat(Ge.year)]})}),Ge&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Earnings"}),(0,ds.jsxs)("div",{className:"space-y-2 bg-emerald-50 p-3 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"Basic"}),(0,ds.jsx)("span",{children:Ds(Ge.basic)})]}),(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"HRA"}),(0,ds.jsx)("span",{children:Ds(Ge.hra)})]}),(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"Special Allowance"}),(0,ds.jsx)("span",{children:Ds(Ge.special_allowance)})]}),(0,ds.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,ds.jsx)("span",{children:"Gross Salary"}),(0,ds.jsx)("span",{children:Ds(Ge.gross_salary)})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Deductions"}),(0,ds.jsxs)("div",{className:"space-y-2 bg-red-50 p-3 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"PF (Employee)"}),(0,ds.jsx)("span",{children:Ds(Ge.pf_employee)})]}),(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"ESI (Employee)"}),(0,ds.jsx)("span",{children:Ds(Ge.esi_employee)})]}),(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"Professional Tax"}),(0,ds.jsx)("span",{children:Ds(Ge.professional_tax)})]}),(0,ds.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,ds.jsx)("span",{children:"Total Deductions"}),(0,ds.jsx)("span",{children:Ds(Ge.total_deductions)})]})]})]}),(0,ds.jsx)("div",{className:"bg-primary/10 p-4 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)("span",{className:"font-semibold text-slate-700",children:"Net Salary"}),(0,ds.jsx)("span",{className:"text-2xl font-bold text-primary",children:Ds(Ge.net_salary)})]})}),(0,ds.jsxs)("div",{className:"flex justify-between text-sm text-slate-600 bg-slate-50 p-3 rounded-lg",children:[(0,ds.jsxs)("span",{children:["Working Days: ",Ge.working_days]}),(0,ds.jsxs)("span",{children:["Present: ",Ge.present_days]}),(0,ds.jsxs)("span",{children:["LWP: ",Ge.lwp_days]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Ke(null),children:"Close"}),(0,ds.jsxs)(fn,{className:"gap-2",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Download PDF"]})]})]})}),(0,ds.jsx)(eo,{open:!!$e,onOpenChange:()=>Xe(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Employee Salary Details"}),(0,ds.jsxs)(oo,{children:[null===$e||void 0===$e||null===($=$e.employee)||void 0===$?void 0:$.first_name," ",null===$e||void 0===$e||null===(X=$e.employee)||void 0===X?void 0:X.last_name]})]}),$e&&(0,ds.jsxs)("div",{className:"space-y-4",children:[$e.salary_structure&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Current Salary Structure"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Gross Salary"}),(0,ds.jsx)("p",{className:"text-lg font-semibold",children:Ds($e.salary_structure.gross)})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Effective From"}),(0,ds.jsx)("p",{className:"font-medium",children:$e.salary_structure.effective_from})]})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Recent Payslips"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Period"}),(0,ds.jsx)(gS,{children:"Gross"}),(0,ds.jsx)(gS,{children:"Deductions"}),(0,ds.jsx)(gS,{children:"Net"})]})}),(0,ds.jsx)(xS,{children:null===(J=$e.payslips)||void 0===J?void 0:J.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsxs)(yS,{children:[Rs(e.month)," ",e.year]}),(0,ds.jsx)(yS,{children:Ds(e.gross_salary)}),(0,ds.jsx)(yS,{className:"text-red-600",children:Ds(e.total_deductions)}),(0,ds.jsx)(yS,{className:"font-semibold text-emerald-600",children:Ds(e.net_salary)})]},e.payslip_id))})]})})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Xe(null),children:"Close"})})]})}),(0,ds.jsx)(eo,{open:!!Je,onOpenChange:()=>Qe(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(bA,{className:"w-5 h-5 text-primary"}),"Salary Breakdown"]}),(0,ds.jsxs)(oo,{children:[null===Je||void 0===Je||null===(Q=Je.employee)||void 0===Q?void 0:Q.name," - ",Rs(null===Je||void 0===Je||null===(Z=Je.period)||void 0===Z?void 0:Z.month)," ",null===Je||void 0===Je||null===(ee=Je.period)||void 0===ee?void 0:ee.year]})]}),Ze?(0,ds.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):Je&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-semibold text-lg",children:null===(te=Je.employee)||void 0===te?void 0:te.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[null===(se=Je.employee)||void 0===se?void 0:se.department," \u2022 ",null===(ae=Je.employee)||void 0===ae?void 0:ae.designation]})]}),(0,ds.jsx)(tk,{variant:"outline",children:null===(ne=Je.employee)||void 0===ne?void 0:ne.employee_code})]}),(0,ds.jsxs)("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-600 mb-1",children:"Net Salary"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-emerald-600",children:Ds(null===(re=Je.totals)||void 0===re?void 0:re.net_salary)})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2 cursor-pointer hover:bg-slate-50",onClick:()=>Ss("attendance"),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-4 h-4 text-blue-500"}),"Attendance Summary"]}),yt.attendance?(0,ds.jsx)(uE,{className:"w-4 h-4"}):(0,ds.jsx)(dE,{className:"w-4 h-4"})]})}),yt.attendance&&(0,ds.jsxs)(Mn,{className:"pt-0",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:[(0,ds.jsxs)("div",{className:"p-2 bg-emerald-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-emerald-600",children:(null===(le=Je.attendance_summary)||void 0===le?void 0:le.present_days)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Present"})]}),(0,ds.jsxs)("div",{className:"p-2 bg-red-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-red-600",children:(null===(ie=Je.attendance_summary)||void 0===ie?void 0:ie.absent_days)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Absent"})]}),(0,ds.jsxs)("div",{className:"p-2 bg-amber-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-amber-600",children:(null===(oe=Je.attendance_summary)||void 0===oe?void 0:oe.half_days)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Half Days"})]}),(0,ds.jsxs)("div",{className:"p-2 bg-blue-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-blue-600",children:(null===(ce=Je.attendance_summary)||void 0===ce?void 0:ce.paid_leave_days)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Paid Leave"})]}),(0,ds.jsxs)("div",{className:"p-2 bg-purple-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-purple-600",children:(null===(de=Je.attendance_summary)||void 0===de?void 0:de.unpaid_leave_days)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"LWP"})]}),(0,ds.jsxs)("div",{className:"p-2 bg-orange-50 rounded text-center",children:[(0,ds.jsx)("p",{className:"text-xl font-bold text-orange-600",children:(null===(ue=Je.attendance_summary)||void 0===ue?void 0:ue.late_arrivals)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Late"})]})]}),(0,ds.jsxs)("div",{className:"mt-3 p-2 bg-slate-100 rounded flex justify-between text-sm",children:[(0,ds.jsx)("span",{children:"Effective Working Days:"}),(0,ds.jsxs)("span",{className:"font-semibold",children:[(null===(he=Je.attendance_summary)||void 0===he||null===(me=he.effective_working_days)||void 0===me?void 0:me.toFixed(1))||0," / ",null===(pe=Je.period)||void 0===pe?void 0:pe.working_days]})]})]})]}),(null===(fe=Je.leave_breakdown)||void 0===fe?void 0:fe.length)>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2 cursor-pointer hover:bg-slate-50",onClick:()=>Ss("leaves"),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2",children:[(0,ds.jsx)(p_,{className:"w-4 h-4 text-purple-500"}),"Leave Details (",Je.leave_breakdown.length,")"]}),yt.leaves?(0,ds.jsx)(uE,{className:"w-4 h-4"}):(0,ds.jsx)(dE,{className:"w-4 h-4"})]})}),yt.leaves&&(0,ds.jsx)(Mn,{className:"pt-0",children:(0,ds.jsx)("div",{className:"space-y-2",children:Je.leave_breakdown.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-sm",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"font-medium",children:e.leave_type}),(0,ds.jsxs)("span",{className:"text-slate-500 ml-2",children:["(",e.start_date," - ",e.end_date,")"]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsxs)("span",{children:[e.days," day(s)"]}),(0,ds.jsx)(tk,{className:e.is_paid?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700",children:e.is_paid?"Paid":"Unpaid"})]})]},t))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2 cursor-pointer hover:bg-slate-50",onClick:()=>Ss("earnings"),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2 text-emerald-600",children:[(0,ds.jsx)(bA,{className:"w-4 h-4"}),"Earnings"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"font-semibold text-emerald-600",children:Ds(null===(xe=Je.totals)||void 0===xe?void 0:xe.gross_salary)}),yt.earnings?(0,ds.jsx)(uE,{className:"w-4 h-4"}):(0,ds.jsx)(dE,{className:"w-4 h-4"})]})]})}),yt.earnings&&(0,ds.jsx)(Mn,{className:"pt-0",children:(0,ds.jsx)("div",{className:"space-y-2",children:Object.entries(Je.earnings_breakdown||{}).map(e=>{let[t,s]=e;return s>0&&(0,ds.jsxs)("div",{className:"flex justify-between text-sm p-2 bg-emerald-50 rounded",children:[(0,ds.jsx)("span",{className:"capitalize",children:t.replace(/_/g," ")}),(0,ds.jsx)("span",{className:"font-medium",children:Ds(s)})]},t)})})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2 cursor-pointer hover:bg-slate-50",onClick:()=>Ss("deductions"),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2 text-red-600",children:[(0,ds.jsx)(ik,{className:"w-4 h-4"}),"Deductions"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"font-semibold text-red-600",children:Ds(null===(ve=Je.totals)||void 0===ve?void 0:ve.total_deductions)}),yt.deductions?(0,ds.jsx)(uE,{className:"w-4 h-4"}):(0,ds.jsx)(dE,{className:"w-4 h-4"})]})]})}),yt.deductions&&(0,ds.jsxs)(Mn,{className:"pt-0 space-y-3",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Statutory Deductions"}),(0,ds.jsx)("div",{className:"space-y-1",children:Object.entries((null===(ge=Je.deductions_breakdown)||void 0===ge?void 0:ge.statutory)||{}).map(e=>{let[t,s]=e;return s>0&&(0,ds.jsxs)("div",{className:"flex justify-between text-sm p-2 bg-red-50 rounded",children:[(0,ds.jsx)("span",{className:"capitalize",children:t.replace(/_/g," ")}),(0,ds.jsx)("span",{className:"font-medium text-red-600",children:Ds(s)})]},t)})})]}),Object.values((null===(ye=Je.deductions_breakdown)||void 0===ye?void 0:ye.attendance_based)||{}).some(e=>e>0)&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Attendance-based Deductions"}),(0,ds.jsx)("div",{className:"space-y-1",children:Object.entries((null===(je=Je.deductions_breakdown)||void 0===je?void 0:je.attendance_based)||{}).map(e=>{let[t,s]=e;return s>0&&(0,ds.jsxs)("div",{className:"flex justify-between text-sm p-2 bg-orange-50 rounded",children:[(0,ds.jsx)("span",{className:"capitalize",children:t.replace(/_/g," ")}),(0,ds.jsx)("span",{className:"font-medium text-orange-600",children:Ds(s)})]},t)})})]})]})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Qe(null),children:"Close"})})]})}),(0,ds.jsx)(eo,{open:Nt,onOpenChange:_t,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add Custom Deduction Rule"}),(0,ds.jsx)(oo,{children:"Define conditions and actions for automatic deductions"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Rule Name"}),(0,ds.jsx)(vn,{value:kt.name,onChange:e=>St(u(u({},kt),{},{name:e.target.value})),placeholder:"e.g., Excessive Late Arrivals Penalty"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(vn,{value:kt.description,onChange:e=>St(u(u({},kt),{},{description:e.target.value})),placeholder:"Brief description of the rule"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Condition Type"}),(0,ds.jsxs)(yE,{value:kt.condition_type,onValueChange:e=>St(u(u({},kt),{},{condition_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"late_count",children:"Late Arrivals"}),(0,ds.jsx)(kE,{value:"absent_count",children:"Total Absents"}),(0,ds.jsx)(kE,{value:"absent_without_leave",children:"Unapproved Absents"}),(0,ds.jsx)(kE,{value:"early_departure_count",children:"Early Departures"}),(0,ds.jsx)(kE,{value:"half_day_count",children:"Half Days"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Operator"}),(0,ds.jsxs)(yE,{value:kt.condition_operator,onValueChange:e=>St(u(u({},kt),{},{condition_operator:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"greater_than",children:"> Greater than"}),(0,ds.jsx)(kE,{value:"greater_equals",children:">= Greater or equal"}),(0,ds.jsx)(kE,{value:"equals",children:"= Equals"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Threshold"}),(0,ds.jsx)(vn,{type:"number",value:kt.condition_threshold,onChange:e=>St(u(u({},kt),{},{condition_threshold:Number(e.target.value)}))})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Action Type"}),(0,ds.jsxs)(yE,{value:kt.action_type,onValueChange:e=>St(u(u({},kt),{},{action_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"percentage_deduction",children:"% of Gross"}),(0,ds.jsx)(kE,{value:"fixed_deduction",children:"Fixed Amount (\u20b9)"}),(0,ds.jsx)(kE,{value:"half_day_deduction",children:"Half Day per Occurrence"}),(0,ds.jsx)(kE,{value:"full_day_deduction",children:"Full Day per Occurrence"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"percentage_deduction"===kt.action_type?"Percentage (%)":"fixed_deduction"===kt.action_type?"Amount (\u20b9)":"Multiplier"}),(0,ds.jsx)(vn,{type:"number",value:kt.action_value,onChange:e=>St(u(u({},kt),{},{action_value:Number(e.target.value)}))})]})]}),(0,ds.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,ds.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,ds.jsx)("strong",{children:"Rule Preview:"})," If ",kt.condition_type.replace(/_/g," ")," is ",kt.condition_operator.replace(/_/g," ")," ",kt.condition_threshold,", then deduct ","percentage_deduction"===kt.action_type?"".concat(kt.action_value,"% of gross salary"):"fixed_deduction"===kt.action_type?"\u20b9".concat(kt.action_value):"".concat(kt.action_value," ").concat(kt.action_type.replace(/_/g," "))]})})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>_t(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(kt.name)try{(await fetch("".concat(eM,"/payroll/custom-rules"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(kt)})).ok?(ts.success("Custom rule added"),_t(!1),St({name:"",description:"",condition_type:"late_count",condition_threshold:3,condition_operator:"greater_than",action_type:"percentage_deduction",action_value:5,apply_per_occurrence:!1}),ys()):ts.error("Failed to add rule")}catch(e){ts.error("Failed to add rule")}else ts.error("Please enter a rule name")},children:"Add Rule"})]})]})}),(0,ds.jsx)(eo,{open:Ct,onOpenChange:Et,children:(0,ds.jsxs)(no,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(pA,{className:"w-5 h-5"}),"Edit Salary Structure"]}),(0,ds.jsxs)(oo,{children:[null===Tt||void 0===Tt?void 0:Tt.employee_name," (",null===Tt||void 0===Tt?void 0:Tt.emp_code,")"]})]}),(0,ds.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Fixed Components (Earnings)"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"basic",children:"BASIC"}),(0,ds.jsx)(vn,{id:"basic",type:"number",value:Pt.basic,onChange:e=>Dt(u(u({},Pt),{},{basic:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"da",children:"DA"}),(0,ds.jsx)(vn,{id:"da",type:"number",value:Pt.da,onChange:e=>Dt(u(u({},Pt),{},{da:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"hra",children:"HRA"}),(0,ds.jsx)(vn,{id:"hra",type:"number",value:Pt.hra,onChange:e=>Dt(u(u({},Pt),{},{hra:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"conveyance",children:"Conveyance"}),(0,ds.jsx)(vn,{id:"conveyance",type:"number",value:Pt.conveyance,onChange:e=>Dt(u(u({},Pt),{},{conveyance:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"grade_pay",children:"Grade Pay"}),(0,ds.jsx)(vn,{id:"grade_pay",type:"number",value:Pt.grade_pay,onChange:e=>Dt(u(u({},Pt),{},{grade_pay:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"other_allowance",children:"Other Allowance"}),(0,ds.jsx)(vn,{id:"other_allowance",type:"number",value:Pt.other_allowance,onChange:e=>Dt(u(u({},Pt),{},{other_allowance:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"medical_allowance",children:"Medical/Spl. Allow"}),(0,ds.jsx)(vn,{id:"medical_allowance",type:"number",value:Pt.medical_allowance,onChange:e=>Dt(u(u({},Pt),{},{medical_allowance:parseFloat(e.target.value)||0})),placeholder:"0"})]})]}),(0,ds.jsx)("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:"Total Fixed Salary:"}),(0,ds.jsx)("span",{className:"font-bold text-lg",children:Ds(parseFloat(Pt.basic||0)+parseFloat(Pt.da||0)+parseFloat(Pt.hra||0)+parseFloat(Pt.conveyance||0)+parseFloat(Pt.grade_pay||0)+parseFloat(Pt.other_allowance||0)+parseFloat(Pt.medical_allowance||0))})]})})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Deduction Configuration"}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{id:"epf_applicable",checked:Pt.epf_applicable,onCheckedChange:e=>Dt(u(u({},Pt),{},{epf_applicable:e}))}),(0,ds.jsx)(_n,{htmlFor:"epf_applicable",children:"EPF Applicable"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{id:"esi_applicable",checked:Pt.esi_applicable,onCheckedChange:e=>Dt(u(u({},Pt),{},{esi_applicable:e}))}),(0,ds.jsx)(_n,{htmlFor:"esi_applicable",children:"ESI Applicable"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{id:"sewa_applicable",checked:Pt.sewa_applicable,onCheckedChange:e=>Dt(u(u({},Pt),{},{sewa_applicable:e}))}),(0,ds.jsx)(_n,{htmlFor:"sewa_applicable",children:"SEWA Applicable"})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Fixed Deductions"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"sewa_advance",children:"SEWA Advance"}),(0,ds.jsx)(vn,{id:"sewa_advance",type:"number",value:Pt.sewa_advance,onChange:e=>Dt(u(u({},Pt),{},{sewa_advance:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"other_deduction",children:"Other Deduction"}),(0,ds.jsx)(vn,{id:"other_deduction",type:"number",value:Pt.other_deduction,onChange:e=>Dt(u(u({},Pt),{},{other_deduction:parseFloat(e.target.value)||0})),placeholder:"0"})]})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{htmlFor:"reason",children:"Reason for Change"}),(0,ds.jsx)(vn,{id:"reason",value:Pt.reason,onChange:e=>Dt(u(u({},Pt),{},{reason:e.target.value})),placeholder:"Enter reason for salary change..."})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Et(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(Tt){Ot(!0);try{const e=parseFloat(Pt.basic||0)+parseFloat(Pt.da||0)+parseFloat(Pt.hra||0)+parseFloat(Pt.conveyance||0)+parseFloat(Pt.grade_pay||0)+parseFloat(Pt.other_allowance||0)+parseFloat(Pt.medical_allowance||0),t=u(u({},Pt),{},{total_fixed:e,emp_code:Tt.emp_code,employee_name:Tt.employee_name}),s=await fetch("".concat(eM,"/payroll/employee/").concat(Tt.employee_id,"/salary"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(t)}),a=await s.json();s.ok?(a.request?(ts.success("Salary change request submitted for approval"),_s()):(ts.success("Salary structure updated successfully"),Ns(qe)),Et(!1)):ts.error(a.detail||"Failed to update salary")}catch(e){ts.error("Failed to save salary structure")}finally{Ot(!1)}}},disabled:Rt,children:[Rt?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(gA,{className:"w-4 h-4 mr-2"}),"super_admin"===(null===Oe||void 0===Oe?void 0:Oe.role)?"Save Changes":"Submit for Approval"]})]})]})}),Mt.length>0&&gs&&(0,ds.jsxs)(Pn,{className:"fixed bottom-4 right-4 w-80 shadow-lg border-amber-200 bg-amber-50 z-50",children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)(Rn,{className:"text-sm flex items-center gap-2 text-amber-800",children:[(0,ds.jsx)(ik,{className:"w-4 h-4"}),"Pending Salary Changes (",Mt.length,")"]})}),(0,ds.jsx)(Mn,{className:"pt-0",children:(0,ds.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Mt.slice(0,3).map(e=>(0,ds.jsxs)("div",{className:"bg-white p-2 rounded border text-sm",children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["By ",e.requested_by_name]}),(0,ds.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,ds.jsx)(fn,{size:"sm",className:"h-7 text-xs",onClick:()=>(async e=>{try{const t=await fetch("".concat(eM,"/payroll/salary-change-requests/").concat(e,"/approve"),{method:"PUT",headers:nk(),credentials:"include"});if(t.ok)ts.success("Salary change approved"),_s(),Ns(qe);else{const e=await t.json();ts.error(e.detail||"Failed to approve")}}catch(t){ts.error("Failed to approve salary change")}})(e.request_id),children:"Approve"}),(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>(async e=>{const t=prompt("Enter rejection reason (optional):");try{const s=await fetch("".concat(eM,"/payroll/salary-change-requests/").concat(e,"/reject"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({reason:t})});if(s.ok)ts.success("Salary change rejected"),_s();else{const e=await s.json();ts.error(e.detail||"Failed to reject")}}catch(s){ts.error("Failed to reject salary change")}})(e.request_id),children:"Reject"})]})]},e.request_id))})})]}),(0,ds.jsx)(eo,{open:zt,onOpenChange:Bt,children:(0,ds.jsxs)(no,{className:"max-w-2xl",children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(p_,{className:"w-5 h-5"}),"Salary Change History"]})}),(0,ds.jsx)("div",{className:"max-h-96 overflow-y-auto",children:Lt.length>0?(0,ds.jsx)("div",{className:"space-y-4",children:Lt.map((e,t)=>{var s,a;return(0,ds.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium",children:["Changed by: ",e.changed_by_name]}),e.approved_by_name&&(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:["Approved by: ",e.approved_by_name]})]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:new Date(e.changed_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,ds.jsxs)("p",{className:"text-sm text-slate-600 mb-2",children:["Reason: ",e.reason||"Not specified"]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ds.jsxs)("div",{className:"bg-red-50 p-2 rounded",children:[(0,ds.jsx)("p",{className:"text-red-700 font-medium",children:"Previous"}),(0,ds.jsxs)("p",{children:["Total: ",Ds((null===(s=e.old_salary)||void 0===s?void 0:s.total_fixed)||0)]})]}),(0,ds.jsxs)("div",{className:"bg-green-50 p-2 rounded",children:[(0,ds.jsx)("p",{className:"text-green-700 font-medium",children:"New"}),(0,ds.jsxs)("p",{children:["Total: ",Ds((null===(a=e.new_salary)||void 0===a?void 0:a.total_fixed)||0)]})]})]})]},e.history_id||t)})}):(0,ds.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,ds.jsx)(p_,{className:"w-12 h-12 mx-auto mb-2 text-slate-300"}),"No salary change history found"]})})]})}),(0,ds.jsx)(eo,{open:Ut,onOpenChange:Vt,children:(0,ds.jsxs)(no,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(M_,{className:"w-5 h-5 text-primary"}),"Payroll Details - ",Ht&&"".concat(Rs(Ht.month)," ").concat(Ht.year)]}),(0,ds.jsxs)(fn,{onClick:async()=>{if(qt&&qt.payslips)try{var e,t,a,n,r,l,i,o;const c=await Promise.resolve().then(s.bind(s,238)),d=qt.payslips.map(e=>{const t=e.fixed_components||{},s=e.attendance||{},a=e.earnings||{},n=e.deductions||{};return{"Emp Code":e.emp_code||e.employee_id,"Name of Employees":e.employee_name||"-",BASIC:t.basic||e.basic||0,DA:t.da||0,HRA:t.hra||e.hra||0,Conveyance:t.conveyance||0,"GRADE PAY":t.grade_pay||0,"OTHER ALLOW":t.other_allowance||0,"Med./Spl. Allow":t.medical_allowance||0,"Total Salary (FIXED)":t.total_fixed||e.basic+e.hra+(e.special_allowance||0),"Work from office":s.office_days||e.present_days||0,"Sunday + Holiday Leave Days":s.sundays_holidays||0,"Leave Days":s.leave_days||e.lwp_days||0,"Work from Home @50%":s.wfh_days||0,"Late Deduction":a.late_deduction||0,"Basic+DA (Earned)":a.basic_da_earned||e.basic||0,"HRA (Earned)":a.hra_earned||e.hra||0,"Conveyance (Earned)":a.conveyance_earned||0,"GRADE PAY (Earned)":a.grade_pay_earned||0,"OTHER ALLOW (Earned)":a.other_allowance_earned||0,"Med./Spl. Allow (Earned)":a.medical_allowance_earned||e.special_allowance||0,"Total Earned Days":s.total_earned_days||e.paid_days||0,"Total Salary Earned":e.gross_salary||0,"EPF Employees":n.epf||e.pf_employee||0,"ESI Employees":n.esi||e.esi_employee||0,SEWA:n.sewa||e.sewa||0,"Sewa Advance":n.sewa_advance||e.sewa_advance||0,"Other Deduction":n.other_deduction||e.other_deduction||0,"Total Deduction":e.total_deductions||0,"NET PAYABLE":e.net_salary||0}}),u={"Emp Code":"TOTALS","Name of Employees":"".concat((null===(e=qt.summary)||void 0===e?void 0:e.total_employees)||d.length," Employees"),BASIC:d.reduce((e,t)=>e+(t.BASIC||0),0),DA:d.reduce((e,t)=>e+(t.DA||0),0),HRA:d.reduce((e,t)=>e+(t.HRA||0),0),Conveyance:d.reduce((e,t)=>e+(t.Conveyance||0),0),"GRADE PAY":d.reduce((e,t)=>e+(t["GRADE PAY"]||0),0),"OTHER ALLOW":d.reduce((e,t)=>e+(t["OTHER ALLOW"]||0),0),"Med./Spl. Allow":d.reduce((e,t)=>e+(t["Med./Spl. Allow"]||0),0),"Total Salary (FIXED)":d.reduce((e,t)=>e+(t["Total Salary (FIXED)"]||0),0),"Work from office":"","Sunday + Holiday Leave Days":"","Leave Days":"","Work from Home @50%":"","Late Deduction":d.reduce((e,t)=>e+(t["Late Deduction"]||0),0),"Basic+DA (Earned)":d.reduce((e,t)=>e+(t["Basic+DA (Earned)"]||0),0),"HRA (Earned)":d.reduce((e,t)=>e+(t["HRA (Earned)"]||0),0),"Conveyance (Earned)":d.reduce((e,t)=>e+(t["Conveyance (Earned)"]||0),0),"GRADE PAY (Earned)":d.reduce((e,t)=>e+(t["GRADE PAY (Earned)"]||0),0),"OTHER ALLOW (Earned)":d.reduce((e,t)=>e+(t["OTHER ALLOW (Earned)"]||0),0),"Med./Spl. Allow (Earned)":d.reduce((e,t)=>e+(t["Med./Spl. Allow (Earned)"]||0),0),"Total Earned Days":"","Total Salary Earned":(null===(t=qt.summary)||void 0===t?void 0:t.total_gross)||d.reduce((e,t)=>e+(t["Total Salary Earned"]||0),0),"EPF Employees":(null===(a=qt.summary)||void 0===a?void 0:a.total_pf)||d.reduce((e,t)=>e+(t["EPF Employees"]||0),0),"ESI Employees":(null===(n=qt.summary)||void 0===n?void 0:n.total_esi)||d.reduce((e,t)=>e+(t["ESI Employees"]||0),0),SEWA:d.reduce((e,t)=>e+(t.SEWA||0),0),"Sewa Advance":d.reduce((e,t)=>e+(t["Sewa Advance"]||0),0),"Other Deduction":d.reduce((e,t)=>e+(t["Other Deduction"]||0),0),"Total Deduction":(null===(r=qt.summary)||void 0===r?void 0:r.total_deductions)||d.reduce((e,t)=>e+(t["Total Deduction"]||0),0),"NET PAYABLE":(null===(l=qt.summary)||void 0===l?void 0:l.total_net)||d.reduce((e,t)=>e+(t["NET PAYABLE"]||0),0)};d.push({}),d.push(u);const h=c.utils.json_to_sheet(d),m=c.utils.book_new();c.utils.book_append_sheet(m,h,"Salary Structure");const p=18,f=Object.keys(d[0]||{}).map(()=>({wch:p}));h["!cols"]=f;const x=Rs((null===(i=qt.payroll)||void 0===i?void 0:i.month)||rt),v=(null===(o=qt.payroll)||void 0===o?void 0:o.year)||it,g="Payroll_".concat(x,"_").concat(v,".xlsx");c.writeFile(m,g),ts.success("Exported to ".concat(g))}catch(c){console.error("Export error:",c),ts.error("Failed to export payroll")}else ts.error("No payroll data to export")},className:"gap-2",disabled:!qt,"data-testid":"export-payroll-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export to Excel"]})]}),(0,ds.jsx)(oo,{children:Ht&&(0,ds.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,ds.jsx)(tk,{className:Os[Ht.status],children:Ht.status}),(0,ds.jsxs)("span",{className:"text-slate-600",children:[(null===qt||void 0===qt||null===(be=qt.summary)||void 0===be?void 0:be.total_employees)||0," employees"]})]})})]}),Gt?(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):qt?(0,ds.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,ds.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Total Gross"}),(0,ds.jsx)("p",{className:"text-lg font-bold text-blue-800",children:Ds(null===(we=qt.summary)||void 0===we?void 0:we.total_gross)})]}),(0,ds.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"Total Deductions"}),(0,ds.jsx)("p",{className:"text-lg font-bold text-red-800",children:Ds(null===(Ne=qt.summary)||void 0===Ne?void 0:Ne.total_deductions)})]}),(0,ds.jsxs)("div",{className:"bg-emerald-50 p-3 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-emerald-600 font-medium",children:"Total Net Pay"}),(0,ds.jsx)("p",{className:"text-lg font-bold text-emerald-800",children:Ds(null===(_e=qt.summary)||void 0===_e?void 0:_e.total_net)})]}),(0,ds.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"PF + ESI + PT"}),(0,ds.jsx)("p",{className:"text-lg font-bold text-purple-800",children:Ds(((null===(ke=qt.summary)||void 0===ke?void 0:ke.total_pf)||0)+((null===(Se=qt.summary)||void 0===Se?void 0:Se.total_esi)||0)+((null===(Ce=qt.summary)||void 0===Ce?void 0:Ce.total_pt)||0))})]})]}),(0,ds.jsx)("div",{className:"flex-1 overflow-auto border rounded-lg",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{className:"sticky top-0 bg-slate-50 z-10",children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{className:"w-12",children:"#"}),(0,ds.jsx)(gS,{children:"Emp Code"}),(0,ds.jsx)(gS,{children:"Employee Name"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{className:"text-center",children:"Days"}),(0,ds.jsx)(gS,{className:"text-right",children:"Gross"}),(0,ds.jsx)(gS,{className:"text-right",children:"Deductions"}),(0,ds.jsx)(gS,{className:"text-right",children:"Net Pay"}),(0,ds.jsx)(gS,{className:"text-right w-16",children:"Edit"})]})}),(0,ds.jsxs)(xS,{children:[null===(Ee=qt.payslips)||void 0===Ee?void 0:Ee.map((e,t)=>{var s;return(0,ds.jsxs)(vS,{"data-testid":"payslip-row-".concat(t),children:[(0,ds.jsx)(yS,{className:"text-slate-500",children:t+1}),(0,ds.jsx)(yS,{className:"font-medium",children:e.emp_code||e.employee_id}),(0,ds.jsx)(yS,{children:e.employee_name||"-"}),(0,ds.jsx)(yS,{className:"text-slate-600",children:e.department||"-"}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsxs)("span",{className:"text-sm",children:[e.paid_days||0,"/",e.working_days||26]})}),(0,ds.jsx)(yS,{className:"text-right font-medium",children:Ds(e.gross_salary)}),(0,ds.jsx)(yS,{className:"text-right text-red-600",children:Ds(e.total_deductions)}),(0,ds.jsx)(yS,{className:"text-right font-semibold text-emerald-600",children:Ds(e.net_salary)}),(0,ds.jsx)(yS,{className:"text-right",children:"locked"!==(null===(s=qt.payroll)||void 0===s?void 0:s.status)&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{ps(e),xs({attendance:e.attendance||{office_days:e.present_days||0,sundays_holidays:0,leave_days:e.lwp_days||0,wfh_days:0,late_count:0}}),hs(!0)})(e),"data-testid":"edit-payslip-".concat(t),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})})})]},e.payslip_id||t)}),(!qt.payslips||0===qt.payslips.length)&&(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:9,className:"text-center py-8 text-slate-500",children:"No payslips found for this payroll run"})})]})]})})]}):(0,ds.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,ds.jsx)(ik,{className:"w-12 h-12 mx-auto mb-2 text-slate-300"}),"No payroll data available"]})]})}),(0,ds.jsx)(eo,{open:Jt,onOpenChange:Qt,children:(0,ds.jsxs)(no,{className:"max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add SEWA Advance"}),(0,ds.jsx)(oo,{children:"Configure a SEWA advance for an employee with monthly deductions"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee *"}),(0,ds.jsxs)(yE,{value:Zt.employee_id,onValueChange:e=>es(u(u({},Zt),{},{employee_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:ss.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name," (",e.emp_code,")"]},e.employee_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Total Amount to Recover *"}),(0,ds.jsx)(vn,{type:"number",value:Zt.total_amount,onChange:e=>es(u(u({},Zt),{},{total_amount:parseFloat(e.target.value)||0})),placeholder:"e.g., 42000"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Monthly Deduction Amount *"}),(0,ds.jsx)(vn,{type:"number",value:Zt.monthly_amount,onChange:e=>es(u(u({},Zt),{},{monthly_amount:parseFloat(e.target.value)||0})),placeholder:"e.g., 3500"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Duration (Months)"}),(0,ds.jsx)(vn,{type:"number",value:Zt.duration_months||Math.ceil(Zt.total_amount/(Zt.monthly_amount||1)),onChange:e=>es(u(u({},Zt),{},{duration_months:parseInt(e.target.value)||0})),placeholder:"Auto-calculated"}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["Estimated: ",Math.ceil(Zt.total_amount/(Zt.monthly_amount||1))," months"]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Reason"}),(0,ds.jsx)(vn,{value:Zt.reason,onChange:e=>es(u(u({},Zt),{},{reason:e.target.value})),placeholder:"e.g., SEWA service advance"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>Qt(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(!Zt.employee_id||Zt.total_amount<=0||Zt.monthly_amount<=0)ts.error("Please fill all required fields");else try{const e=await fetch("".concat(eM,"/payroll/sewa-advances"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u(u({},Zt),{},{start_month:rt,start_year:it}))});if(e.ok)ts.success("SEWA Advance created"),Qt(!1),es({employee_id:"",total_amount:0,monthly_amount:0,duration_months:0,reason:""}),js();else{const t=await e.json();ts.error(t.detail||"Failed to create SEWA advance")}}catch(e){ts.error("Failed to create SEWA advance")}},children:"Create SEWA Advance"})]})]})}),(0,ds.jsx)(eo,{open:ls,onOpenChange:is,children:(0,ds.jsxs)(no,{className:"max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add One-time Deduction"}),(0,ds.jsxs)(oo,{children:["Add a deduction for ",Rs(rt)," ",it]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee *"}),(0,ds.jsxs)(yE,{value:os.employee_id,onValueChange:e=>cs(u(u({},os),{},{employee_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:ss.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name," (",e.emp_code,")"]},e.employee_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:os.category,onValueChange:e=>cs(u(u({},os),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"loan_emi",children:"Loan EMI"}),(0,ds.jsx)(kE,{value:"advance_recovery",children:"Advance Recovery"}),(0,ds.jsx)(kE,{value:"penalty",children:"Penalty"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Amount *"}),(0,ds.jsx)(vn,{type:"number",value:os.amount,onChange:e=>cs(u(u({},os),{},{amount:parseFloat(e.target.value)||0})),placeholder:"e.g., 5000"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Reason"}),(0,ds.jsx)(vn,{value:os.reason,onChange:e=>cs(u(u({},os),{},{reason:e.target.value})),placeholder:"e.g., Salary advance recovery"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>is(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(!os.employee_id||os.amount<=0)ts.error("Please fill all required fields");else try{const e=await fetch("".concat(eM,"/payroll/one-time-deductions"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u(u({},os),{},{month:rt,year:it}))});if(e.ok)ts.success("Deduction added"),is(!1),cs({employee_id:"",amount:0,reason:"",category:"other"}),bs();else{const t=await e.json();ts.error(t.detail||"Failed to add deduction")}}catch(e){ts.error("Failed to add deduction")}},children:"Add Deduction"})]})]})}),(0,ds.jsx)(eo,{open:us,onOpenChange:hs,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit Payslip"}),(0,ds.jsx)(oo,{children:ms&&"Editing payslip for ".concat(ms.employee_name||ms.emp_code)})]}),ms&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-600",children:"Adjust attendance values below. The salary will be recalculated automatically."}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Office Days"}),(0,ds.jsx)(vn,{type:"number",value:(null===(Te=fs.attendance)||void 0===Te?void 0:Te.office_days)||0,onChange:e=>xs(u(u({},fs),{},{attendance:u(u({},fs.attendance),{},{office_days:parseFloat(e.target.value)||0})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Sundays + Holidays"}),(0,ds.jsx)(vn,{type:"number",value:(null===(Ae=fs.attendance)||void 0===Ae?void 0:Ae.sundays_holidays)||0,onChange:e=>xs(u(u({},fs),{},{attendance:u(u({},fs.attendance),{},{sundays_holidays:parseFloat(e.target.value)||0})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Leave Days"}),(0,ds.jsx)(vn,{type:"number",value:(null===(Pe=fs.attendance)||void 0===Pe?void 0:Pe.leave_days)||0,onChange:e=>xs(u(u({},fs),{},{attendance:u(u({},fs.attendance),{},{leave_days:parseFloat(e.target.value)||0})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"WFH Days"}),(0,ds.jsx)(vn,{type:"number",value:(null===(De=fs.attendance)||void 0===De?void 0:De.wfh_days)||0,onChange:e=>xs(u(u({},fs),{},{attendance:u(u({},fs.attendance),{},{wfh_days:parseFloat(e.target.value)||0})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Late Count"}),(0,ds.jsx)(vn,{type:"number",value:(null===(Re=fs.attendance)||void 0===Re?void 0:Re.late_count)||0,onChange:e=>xs(u(u({},fs),{},{attendance:u(u({},fs.attendance),{},{late_count:parseInt(e.target.value)||0})}))})]})]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Note: Changes will only apply if the payroll is not locked."})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>hs(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(ms)try{const e=await fetch("".concat(eM,"/payroll/payslips/").concat(ms.payslip_id),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({recalculate:!0,attendance:fs.attendance})});if(e.ok)ts.success("Payslip updated"),hs(!1),Ht&&Es(Ht.payroll_id);else{const t=await e.json();ts.error(t.detail||"Failed to update payslip")}}catch(e){ts.error("Failed to update payslip")}},children:"Recalculate & Save"})]})]})})]})},sM=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],aM=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],nM=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],rM=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],lM=["__scopeSlider"],iM=["__scopeSlider"],oM=["__scopeSlider","index","name"],cM=["__scopeSlider","value"];var dM=["PageUp","PageDown"],uM=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hM={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},mM="Slider",[pM,fM,xM]=gv(mM),[vM,gM]=Kn(mM,[xM]),[yM,jM]=vM(mM),bM=a.forwardRef((e,t)=>{const{name:s,min:n=0,max:r=100,step:i=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[n],value:m,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:x=!1,form:v}=e,g=l(e,sM),y=a.useRef(new Set),j=a.useRef(0),b="horizontal"===o?_M:kM,[w=[],N]=tr({prop:m,defaultProp:h,onChange:e=>{var t;null===(t=[...y.current][j.current])||void 0===t||t.focus(),p(e)}}),_=a.useRef(w);function k(e,t){let{commit:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const a=function(e){return(String(e).split(".")[1]||"").length}(i),l=function(e,t){const s=Math.pow(10,t);return Math.round(e*s)/s}(Math.round((e-n)/i)*i+n,a),o=hN(l,[n,r]);N(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const a=[...e];return a[s]=t,a.sort((e,t)=>e-t)}(e,o,t);if(function(e,t){if(t>0){const s=function(e){return e.slice(0,-1).map((t,s)=>e[s+1]-t)}(e);return Math.min(...s)>=t}return!0}(a,d*i)){j.current=a.indexOf(o);const t=String(a)!==String(e);return t&&s&&f(a),t?a:e}return e})}return(0,ds.jsx)(yM,{scope:e.__scopeSlider,name:s,disabled:c,min:n,max:r,valueIndexToChangeRef:j,thumbs:y.current,values:w,orientation:o,form:v,children:(0,ds.jsx)(pM.Provider,{scope:e.__scopeSlider,children:(0,ds.jsx)(pM.Slot,{scope:e.__scopeSlider,children:(0,ds.jsx)(b,u(u({"aria-disabled":c,"data-disabled":c?"":void 0},g),{},{ref:t,onPointerDown:qn(g.onPointerDown,()=>{c||(_.current=w)}),min:n,max:r,inverted:x,onSlideStart:c?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const s=e.map(e=>Math.abs(e-t)),a=Math.min(...s);return s.indexOf(a)}(w,e);k(e,t)},onSlideMove:c?void 0:function(e){k(e,j.current)},onSlideEnd:c?void 0:function(){const e=_.current[j.current];w[j.current]!==e&&f(w)},onHomeKeyDown:()=>!c&&k(n,0,{commit:!0}),onEndKeyDown:()=>!c&&k(r,w.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:s}=e;if(!c){const e=dM.includes(t.key)||t.shiftKey&&uM.includes(t.key)?10:1,a=j.current;k(w[a]+i*e*s,a,{commit:!0})}}}))})})})});bM.displayName=mM;var[wM,NM]=vM(mM,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_M=a.forwardRef((e,t)=>{const{min:s,max:n,dir:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h}=e,m=l(e,aM),[p,f]=a.useState(null),x=Rs(t,e=>f(e)),v=a.useRef(void 0),g=Nv(r),y="ltr"===g,j=y&&!i||!y&&i;function b(e){const t=v.current||p.getBoundingClientRect(),a=FM([0,t.width],j?[s,n]:[n,s]);return v.current=t,a(e-t.left)}return(0,ds.jsx)(wM,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:(0,ds.jsx)(SM,u(u({dir:g,"data-orientation":"horizontal"},m),{},{ref:x,style:u(u({},m.style),{},{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=b(e.clientX);null===o||void 0===o||o(t)},onSlideMove:e=>{const t=b(e.clientX);null===c||void 0===c||c(t)},onSlideEnd:()=>{v.current=void 0,null===d||void 0===d||d()},onStepKeyDown:e=>{const t=hM[j?"from-left":"from-right"].includes(e.key);null===h||void 0===h||h({event:e,direction:t?-1:1})}}))})}),kM=a.forwardRef((e,t)=>{const{min:s,max:n,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d}=e,h=l(e,nM),m=a.useRef(null),p=Rs(t,m),f=a.useRef(void 0),x=!r;function v(e){const t=f.current||m.current.getBoundingClientRect(),a=FM([0,t.height],x?[n,s]:[s,n]);return f.current=t,a(e-t.top)}return(0,ds.jsx)(wM,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:(0,ds.jsx)(SM,u(u({"data-orientation":"vertical"},h),{},{ref:p,style:u(u({},h.style),{},{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=v(e.clientY);null===i||void 0===i||i(t)},onSlideMove:e=>{const t=v(e.clientY);null===o||void 0===o||o(t)},onSlideEnd:()=>{f.current=void 0,null===c||void 0===c||c()},onStepKeyDown:e=>{const t=hM[x?"from-bottom":"from-top"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}}))})}),SM=a.forwardRef((e,t)=>{const{__scopeSlider:s,onSlideStart:a,onSlideMove:n,onSlideEnd:r,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:c}=e,d=l(e,rM),h=jM(mM,s);return(0,ds.jsx)(cr.span,u(u({},d),{},{ref:t,onKeyDown:qn(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):dM.concat(uM).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:qn(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():a(e)}),onPointerMove:qn(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)}),onPointerUp:qn(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})}))}),CM="SliderTrack",EM=a.forwardRef((e,t)=>{const{__scopeSlider:s}=e,a=l(e,lM),n=jM(CM,s);return(0,ds.jsx)(cr.span,u(u({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},a),{},{ref:t}))});EM.displayName=CM;var TM="SliderRange",AM=a.forwardRef((e,t)=>{const{__scopeSlider:s}=e,n=l(e,iM),r=jM(TM,s),i=NM(TM,s),o=Rs(t,a.useRef(null)),c=r.values.length,d=r.values.map(e=>MM(e,r.min,r.max)),h=c>1?Math.min(...d):0,m=100-Math.max(...d);return(0,ds.jsx)(cr.span,u(u({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},n),{},{ref:o,style:u(u({},e.style),{},{[i.startEdge]:h+"%",[i.endEdge]:m+"%"})}))});AM.displayName=TM;var PM="SliderThumb",DM=a.forwardRef((e,t)=>{const s=fM(e.__scopeSlider),[n,r]=a.useState(null),l=Rs(t,e=>r(e)),i=a.useMemo(()=>n?s().findIndex(e=>e.ref.current===n):-1,[s,n]);return(0,ds.jsx)(RM,u(u({},e),{},{ref:l,index:i}))}),RM=a.forwardRef((e,t)=>{const{__scopeSlider:s,index:n,name:r}=e,i=l(e,oM),o=jM(PM,s),c=NM(PM,s),[d,h]=a.useState(null),m=Rs(t,e=>h(e)),p=!d||(o.form||!!d.closest("form")),f=yy(d),x=o.values[n],v=void 0===x?0:MM(x,o.min,o.max),g=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(n,o.values.length),y=null===f||void 0===f?void 0:f[c.size],j=y?function(e,t,s){const a=e/2,n=FM([0,50],[0,a]);return(a-n(t)*s)*s}(y,v,c.direction):0;return a.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),(0,ds.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:"calc(".concat(v,"% + ").concat(j,"px)")},children:[(0,ds.jsx)(pM.ItemSlot,{scope:e.__scopeSlider,children:(0,ds.jsx)(cr.span,u(u({role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":x,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},i),{},{ref:m,style:void 0===x?{display:"none"}:e.style,onFocus:qn(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})}))}),p&&(0,ds.jsx)(OM,{name:null!==r&&void 0!==r?r:o.name?o.name+(o.values.length>1?"[]":""):void 0,form:o.form,value:x},n)]})});DM.displayName=PM;var OM=a.forwardRef((e,t)=>{let{__scopeSlider:s,value:n}=e,r=l(e,cM);const i=a.useRef(null),o=Rs(i,t),c=SS(n);return a.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(c!==n&&s){const t=new Event("input",{bubbles:!0});s.call(e,n),e.dispatchEvent(t)}},[c,n]),(0,ds.jsx)(cr.input,u(u({style:{display:"none"}},r),{},{ref:o,defaultValue:n}))});function MM(e,t,s){return hN(100/(s-t)*(e-t),[0,100])}function FM(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(s-e[0])}}OM.displayName="RadioBubbleInput";var LM=bM,IM=EM,zM=AM,BM=DM;const UM=["className"],VM=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,UM);return(0,ds.jsxs)(LM,u(u({ref:t,className:hn("relative flex w-full touch-none select-none items-center",s)},a),{},{children:[(0,ds.jsx)(IM,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,ds.jsx)(zM,{className:"absolute h-full bg-primary"})}),(0,ds.jsx)(BM,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}))});VM.displayName=LM.displayName;const HM="https://shardahrms.com/api",WM=()=>{var e,t,s,n,r,l,i,o,c,d,h,m,p,f,x,v,g,y,j;const{user:b}=Cs(),[w,N]=(0,a.useState)([]),[_,k]=(0,a.useState)([]),[S,C]=(0,a.useState)([]),[E,T]=(0,a.useState)(!0),[A,P]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[O,M]=(0,a.useState)(!1),[F,L]=(0,a.useState)(!1),[I,z]=(0,a.useState)({name:"",description:"",period_type:"quarterly"}),[B,U]=(0,a.useState)(!1),[V,H]=(0,a.useState)(null),[W,q]=(0,a.useState)([]),[Y,G]=(0,a.useState)({title:"",description:"",target_date:"",priority:"medium"}),[K,$]=(0,a.useState)("quarterly"),[X,J]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(null),[ee,te]=(0,a.useState)({}),[se,ae]=(0,a.useState)([]),[ne,re]=(0,a.useState)(null),[le,ie]=(0,a.useState)(null),[oe,ce]=(0,a.useState)(!1),de="super_admin"===(null===b||void 0===b?void 0:b.role)||"hr_admin"===(null===b||void 0===b?void 0:b.role),ue="manager"===(null===b||void 0===b?void 0:b.role),he=de||ue;(0,a.useEffect)(()=>{me()},[]);const me=async()=>{try{const e=[fetch("".concat(HM,"/performance/templates"),{credentials:"include",headers:nk()}),fetch("".concat(HM,"/performance/my-kpi"),{credentials:"include",headers:nk()}),fetch("".concat(HM,"/performance/goals"),{credentials:"include",headers:nk()})];he&&e.push(fetch("".concat(HM,"/performance/team-performance"),{credentials:"include",headers:nk()}));const t=await Promise.all(e),[s,a,n,r]=t;s.ok&&N(await s.json()),a.ok&&k(await a.json()),n.ok&&C(await n.json()),r&&r.ok&&ae(await r.json())}catch(e){console.error("Error fetching performance data:",e)}finally{T(!1)}},pe=e=>{const t=new Date;let s,a;switch(e){case"daily":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=s;break;case"weekly":s=new Date(t),s.setDate(t.getDate()-t.getDay()),a=new Date(s),a.setDate(s.getDate()+6);break;case"monthly":s=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"quarterly":default:s=new Date(t.getFullYear(),3*Math.floor(t.getMonth()/3),1),a=new Date(s.getFullYear(),s.getMonth()+3,0);break;case"half_yearly":s=new Date(t.getFullYear(),t.getMonth()<6?0:6,1),a=new Date(s.getFullYear(),s.getMonth()+6,0);break;case"yearly":s=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),11,31)}return{periodStart:s,periodEnd:a}},fe={draft:"bg-slate-100 text-slate-700",submitted:"bg-blue-100 text-blue-700",under_review:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700"},xe={low:"bg-slate-100 text-slate-600",medium:"bg-blue-100 text-blue-700",high:"bg-red-100 text-red-700"};return E?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"performance-page",children:[(0,ds.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Performance"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Performance & KPI"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Track your performance and goals"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]})}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(y_,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:_.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"KPI Records"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:S.filter(e=>"completed"===e.status).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Goals Completed"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:S.filter(e=>"in_progress"===e.status).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"In Progress"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(PA,{className:"w-5 h-5 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:_.length>0&&_[0].final_score?_[0].final_score.toFixed(1):"-"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Latest Score"})]})]})})})]}),(0,ds.jsxs)(cA,{defaultValue:"kpi",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsx)(uA,{value:"kpi","data-testid":"tab-kpi",children:"My KPI"}),(0,ds.jsx)(uA,{value:"goals","data-testid":"tab-goals",children:"Goals"}),he&&(0,ds.jsx)(uA,{value:"team","data-testid":"tab-team",children:"Team Performance"}),de&&(0,ds.jsx)(uA,{value:"templates","data-testid":"tab-templates",children:"Templates"})]}),(0,ds.jsx)(hA,{value:"kpi",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(y_,{className:"w-5 h-5 text-primary"}),"KPI Records"]}),(0,ds.jsx)(On,{children:"Your performance assessments"})]}),(0,ds.jsxs)(eo,{open:A,onOpenChange:P,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"create-kpi-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"New KPI"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create KPI Record"}),(0,ds.jsx)(oo,{children:"Start a new KPI assessment"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"KPI Template"}),(0,ds.jsxs)(yE,{value:V||"",onValueChange:H,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select template"})}),(0,ds.jsx)(_E,{children:w.length>0?w.map(e=>(0,ds.jsx)(kE,{value:e.template_id,children:e.name},e.template_id)):(0,ds.jsx)(kE,{value:"none",disabled:!0,children:"No templates available"})})]}),0===w.length&&(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"Please create a KPI template first in the Templates tab"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Period Type"}),(0,ds.jsxs)(yE,{value:K,onValueChange:$,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"daily",children:"Daily"}),(0,ds.jsx)(kE,{value:"weekly",children:"Weekly"}),(0,ds.jsx)(kE,{value:"monthly",children:"Monthly"}),(0,ds.jsx)(kE,{value:"quarterly",children:"Quarterly"}),(0,ds.jsx)(kE,{value:"half_yearly",children:"Half Yearly"}),(0,ds.jsx)(kE,{value:"yearly",children:"Yearly"})]})]})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Selected Period"}),(0,ds.jsx)("p",{className:"text-sm font-medium",children:(()=>{const{periodStart:e,periodEnd:t}=pe(K);return"".concat(e.toLocaleDateString("en-IN")," - ").concat(t.toLocaleDateString("en-IN"))})()})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(V)try{const{periodStart:e,periodEnd:t}=pe(K),s=await fetch("".concat(HM,"/performance/kpi"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({template_id:V,period_type:K,period_start:e.toISOString().split("T")[0],period_end:t.toISOString().split("T")[0],responses:W})});if(s.ok)ts.success("KPI created successfully"),P(!1),H(null),q([]),$("quarterly"),me();else{const e=await s.json();ts.error(e.detail||"Failed to create KPI")}}catch(e){ts.error("Failed to create KPI")}else ts.error("Please select a KPI template")},children:"Create"})]})]})]})]})}),(0,ds.jsx)(Mn,{children:_.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:_.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg","data-testid":"kpi-".concat(e.kpi_id),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(R_,{className:"w-6 h-6 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-slate-900",children:[e.period_type.charAt(0).toUpperCase()+e.period_type.slice(1)," Review"]}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.period_start," to ",e.period_end]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[void 0!==e.final_score&&null!==e.final_score&&(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsxs)("p",{className:"text-lg font-bold text-primary",children:[e.final_score.toFixed(1),"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Score"})]}),(0,ds.jsx)(tk,{className:fe[e.status],children:e.status}),"draft"===e.status&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{let t=[];if(e.template_id)try{const s=await fetch("".concat(HM,"/performance/templates/").concat(e.template_id),{credentials:"include",headers:nk()});s.ok&&(t=(await s.json()).questions||[])}catch(n){console.error("Error fetching template:",n)}const s=e.responses||[],a={};t.forEach((e,t)=>{const n=s.find(t=>t.question_id===e.question_id);a[e.question_id]=n?{score:n.score||0,comments:n.comments||"",selected_option:n.selected_option||""}:{score:0,comments:"",selected_option:""}}),Z(u(u({},e),{},{questions:t})),te(a)})(e),className:"gap-1",children:[(0,ds.jsx)(pA,{className:"w-3 h-3"}),"Fill"]}),(0,ds.jsx)(fn,{size:"sm",onClick:()=>(async e=>{try{const t=await fetch("".concat(HM,"/performance/kpi/").concat(e,"/submit"),{method:"PUT",credentials:"include"});if(t.ok)ts.success("KPI submitted for review"),me();else{const e=await t.json();ts.error(e.detail||"Failed to submit KPI")}}catch(t){ts.error("Failed to submit KPI")}})(e.kpi_id),children:"Submit"})]})]})]},e.kpi_id))}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(y_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No KPI records yet"}),(0,ds.jsx)(fn,{onClick:()=>P(!0),children:"Create First KPI"})]})})]})}),(0,ds.jsx)(hA,{value:"goals",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(Zk,{className:"w-5 h-5 text-primary"}),"My Goals"]}),(0,ds.jsx)(On,{children:"Track your objectives and progress"})]}),(0,ds.jsxs)(eo,{open:D,onOpenChange:R,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"create-goal-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Goal"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create Goal"}),(0,ds.jsx)(oo,{children:"Set a new objective"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title"}),(0,ds.jsx)(vn,{value:Y.title,onChange:e=>G(u(u({},Y),{},{title:e.target.value})),placeholder:"Goal title"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:Y.description,onChange:e=>G(u(u({},Y),{},{description:e.target.value})),placeholder:"Describe your goal...",rows:3})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Target Date"}),(0,ds.jsx)(vn,{type:"date",value:Y.target_date,onChange:e=>G(u(u({},Y),{},{target_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Priority"}),(0,ds.jsxs)(yE,{value:Y.priority,onValueChange:e=>G(u(u({},Y),{},{priority:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"low",children:"Low"}),(0,ds.jsx)(kE,{value:"medium",children:"Medium"}),(0,ds.jsx)(kE,{value:"high",children:"High"})]})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(Y.title)try{const e=await fetch("".concat(HM,"/performance/goals"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(Y)});if(e.ok)ts.success("Goal created"),R(!1),G({title:"",description:"",target_date:"",priority:"medium"}),me();else{const t=await e.json();ts.error(t.detail||"Failed to create goal")}}catch(e){ts.error("Failed to create goal")}else ts.error("Please enter a goal title")},children:"Create"})]})]})]})]})}),(0,ds.jsx)(Mn,{children:S.length>0?(0,ds.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg","data-testid":"goal-".concat(e.goal_id),children:[(0,ds.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,ds.jsx)(tk,{className:xe[e.priority],children:e.priority})]}),e.description&&(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,ds.jsx)(tk,{variant:"outline",className:"completed"===e.status?"bg-emerald-50 text-emerald-700":"",children:"completed"===e.status?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Yk,{className:"w-3 h-3 mr-1"}),"Completed"]}):"".concat(e.progress,"%")})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(Bk,{value:e.progress,className:"h-2"}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)(VM,{value:[e.progress],onValueChange:t=>{let[s]=t;return(async(e,t)=>{try{await fetch("".concat(HM,"/performance/goals/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({progress:t,status:100===t?"completed":"in_progress"})}),me()}catch(s){console.error("Error updating goal:",s)}})(e.goal_id,s)},max:100,step:5,className:"flex-1"}),e.target_date&&(0,ds.jsxs)("span",{className:"text-xs text-slate-500",children:["Due: ",new Date(e.target_date).toLocaleDateString("en-IN")]})]})]})]},e.goal_id))}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(Zk,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No goals set"}),(0,ds.jsx)(fn,{onClick:()=>R(!0),children:"Add First Goal"})]})})]})}),de&&(0,ds.jsx)(hA,{value:"templates",children:(0,ds.jsx)("div",{className:"space-y-6",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"KPI Templates"}),(0,ds.jsx)(On,{children:"Create and manage KPI templates for employee assessments"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(eo,{open:O,onOpenChange:M,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2",children:[(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Upload Excel Template"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Upload KPI Template"}),(0,ds.jsx)(oo,{children:"Upload an Excel file with your custom KPI template"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[(0,ds.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",className:"hidden",id:"template-upload",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;U(!0);const a=new FormData;a.append("file",s);try{const e=await fetch("".concat(HM,"/performance/templates/upload"),{method:"POST",credentials:"include",body:a});if(e.ok)ts.success("Template uploaded successfully"),M(!1),me();else{const t=await e.json();ts.error(t.detail||"Failed to upload template")}}catch(n){ts.error("Failed to upload template")}finally{U(!1)}}}),(0,ds.jsxs)("label",{htmlFor:"template-upload",className:"cursor-pointer",children:[(0,ds.jsx)(w_,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Click to upload Excel file"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:".xlsx, .xls, or .csv"})]})]}),(0,ds.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Template Format:"}),(0,ds.jsxs)("ul",{className:"text-xs text-slate-500 space-y-1",children:[(0,ds.jsx)("li",{children:"\u2022 Column A: Question/KPI Name"}),(0,ds.jsx)("li",{children:"\u2022 Column B: Description"}),(0,ds.jsx)("li",{children:"\u2022 Column C: Max Points"}),(0,ds.jsx)("li",{children:"\u2022 Column D: Category (optional)"})]})]}),(0,ds.jsxs)(fn,{variant:"outline",className:"w-full gap-2",onClick:()=>{const e=document.createElement("a");e.href="".concat(HM,"/performance/templates/sample"),e.download="kpi_template_sample.xlsx",e.click()},children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Download Sample Template"]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>M(!1),children:"Cancel"})})]})]}),(0,ds.jsxs)(eo,{open:F,onOpenChange:L,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Create Template"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create KPI Template"}),(0,ds.jsx)(oo,{children:"Create a new KPI assessment template"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Template Name"}),(0,ds.jsx)(vn,{value:I.name,onChange:e=>z(u(u({},I),{},{name:e.target.value})),placeholder:"Q1 Performance Review"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:I.description,onChange:e=>z(u(u({},I),{},{description:e.target.value})),placeholder:"Describe the template...",rows:3})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Period Type"}),(0,ds.jsxs)(yE,{value:I.period_type,onValueChange:e=>z(u(u({},I),{},{period_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"monthly",children:"Monthly"}),(0,ds.jsx)(kE,{value:"quarterly",children:"Quarterly"}),(0,ds.jsx)(kE,{value:"half_yearly",children:"Half Yearly"}),(0,ds.jsx)(kE,{value:"yearly",children:"Yearly"})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(I.name)try{(await fetch("".concat(HM,"/performance/templates"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(I)})).ok?(ts.success("Template created"),L(!1),z({name:"",description:"",period_type:"quarterly"}),me()):ts.error("Failed to create template")}catch(e){ts.error("Failed to create template")}else ts.error("Please enter template name")},children:"Create"})]})]})]})]})]})}),(0,ds.jsx)(Mn,{children:w.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:w.map(e=>{var t;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(w_,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[(null===(t=e.questions)||void 0===t?void 0:t.length)||0," questions \u2022 ",e.total_points||100," points",e.uploaded_from_excel&&(0,ds.jsx)(tk,{variant:"outline",className:"ml-2 text-xs",children:"Excel Import"})]})]})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsx)(fn,{variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("a");t.href="".concat(HM,"/performance/templates/").concat(e.template_id,"/download"),t.download="".concat(e.name,".xlsx"),t.click()},children:(0,ds.jsx)(Kk,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{variant:"outline",size:"sm",onClick:()=>J(u({},e)),children:"Edit"}),(0,ds.jsx)(fn,{variant:"ghost",size:"sm",className:"text-red-600",onClick:async()=>{if(window.confirm("Delete this template?"))try{await fetch("".concat(HM,"/performance/templates/").concat(e.template_id),{method:"DELETE",credentials:"include"}),ts.success("Template deleted"),me()}catch(t){ts.error("Failed to delete")}},children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})]},e.template_id)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(w_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No templates created yet"}),(0,ds.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>M(!0),className:"gap-2",children:[(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Upload Excel"]}),(0,ds.jsxs)(fn,{onClick:()=>L(!0),className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Create Manually"]})]})]})})]})})}),he&&(0,ds.jsx)(hA,{value:"team",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"}),"Team Performance History"]}),(0,ds.jsx)(On,{children:"View performance records for all employees"})]}),(0,ds.jsxs)(tk,{variant:"outline",children:[se.length," Employees"]})]})}),(0,ds.jsx)(Mn,{children:se.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:se.map(e=>{var t;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",onClick:()=>(async e=>{ce(!0);try{const t=await fetch("".concat(HM,"/performance/employee-performance/").concat(e),{credentials:"include",headers:nk()});if(t.ok){const s=await t.json();ie(s),re(e)}else ts.error("Failed to fetch employee performance")}catch(t){ts.error("Failed to fetch employee performance")}finally{ce(!1)}})(e.employee_id),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)("span",{className:"text-lg font-bold text-primary",children:(null===(t=e.employee_name)||void 0===t?void 0:t.charAt(0))||"?"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.employee_name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.department," \u2022 ",e.designation]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ds.jsxs)("div",{className:"text-center",children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-slate-900",children:e.total_kpis}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total KPIs"})]}),(0,ds.jsxs)("div",{className:"text-center",children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-emerald-600",children:e.approved_kpis}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Approved"})]}),(0,ds.jsxs)("div",{className:"text-center",children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-amber-600",children:e.pending_kpis}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Pending"})]}),(0,ds.jsx)("div",{className:"text-center min-w-[60px]",children:null!==e.average_score?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("p",{className:"text-lg font-bold ".concat(e.average_score>=70?"text-emerald-600":e.average_score>=50?"text-amber-600":"text-red-600"),children:[e.average_score,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Avg Score"})]}):(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"No score"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",children:(0,ds.jsx)(xA,{className:"w-4 h-4"})})]})]},e.employee_id)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(k_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No employee performance data available"})]})})]})})]}),(0,ds.jsx)(eo,{open:!!ne,onOpenChange:()=>{re(null),ie(null)},children:(0,ds.jsxs)(no,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"}),"Employee Performance History"]}),(0,ds.jsxs)(oo,{children:[null===le||void 0===le||null===(e=le.employee)||void 0===e?void 0:e.name," - ",null===le||void 0===le||null===(t=le.employee)||void 0===t?void 0:t.department]})]}),oe?(0,ds.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):le&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("div",{className:"p-4 bg-slate-50 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-semibold",children:null===(s=le.employee)||void 0===s?void 0:s.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[null===(n=le.employee)||void 0===n?void 0:n.designation," \u2022 ",null===(r=le.employee)||void 0===r?void 0:r.department]}),(0,ds.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Employee Code: ",null===(l=le.employee)||void 0===l?void 0:l.employee_code]})]}),(0,ds.jsxs)("div",{className:"text-right",children:[null!==(null===(i=le.statistics)||void 0===i?void 0:i.average_score)&&(0,ds.jsxs)("div",{className:"text-3xl font-bold ".concat(le.statistics.average_score>=70?"text-emerald-600":le.statistics.average_score>=50?"text-amber-600":"text-red-600"),children:[le.statistics.average_score,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Average Score"})]})]})}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,ds.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===(o=le.statistics)||void 0===o?void 0:o.total_kpis)||0}),(0,ds.jsx)("p",{className:"text-xs text-blue-600",children:"Total KPIs"})]}),(0,ds.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(null===(c=le.statistics)||void 0===c?void 0:c.approved_kpis)||0}),(0,ds.jsx)("p",{className:"text-xs text-emerald-600",children:"Approved"})]}),(0,ds.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg text-center",children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[(null===(d=le.statistics)||void 0===d||null===(h=d.highest_score)||void 0===h?void 0:h.toFixed(1))||"-","%"]}),(0,ds.jsx)("p",{className:"text-xs text-purple-600",children:"Highest Score"})]}),(0,ds.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg text-center",children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-amber-600",children:[(null===(m=le.statistics)||void 0===m?void 0:m.completed_goals)||0,"/",(null===(p=le.statistics)||void 0===p?void 0:p.total_goals)||0]}),(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"Goals Completed"})]})]}),(null===(f=le.score_trend)||void 0===f?void 0:f.length)>0&&(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm font-medium mb-3",children:"Score Trend"}),(0,ds.jsx)("div",{className:"flex items-end justify-between gap-2 h-24",children:le.score_trend.map((e,t)=>{var s,a;return(0,ds.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,ds.jsx)("div",{className:"w-full rounded-t ".concat(e.score>=70?"bg-emerald-500":e.score>=50?"bg-amber-500":"bg-red-500"),style:{height:"".concat(Math.max(e.score,10),"%")}}),(0,ds.jsxs)("p",{className:"text-xs mt-1 font-medium",children:[null===(s=e.score)||void 0===s?void 0:s.toFixed(0),"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 capitalize",children:null===(a=e.period)||void 0===a?void 0:a.substring(0,3)})]},t)})})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium mb-2",children:"KPI History"}),(0,ds.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(null===(x=le.kpis)||void 0===x?void 0:x.length)>0?le.kpis.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium text-sm capitalize",children:[e.period_type," Review"]}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:[e.period_start," to ",e.period_end]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[void 0!==e.final_score&&null!==e.final_score&&(0,ds.jsxs)("span",{className:"font-bold ".concat(e.final_score>=70?"text-emerald-600":e.final_score>=50?"text-amber-600":"text-red-600"),children:[e.final_score.toFixed(1),"%"]}),(0,ds.jsx)(tk,{className:fe[e.status],children:e.status})]})]},e.kpi_id)):(0,ds.jsx)("p",{className:"text-sm text-slate-400 text-center py-4",children:"No KPI records"})})]}),(null===(v=le.goals)||void 0===v?void 0:v.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-medium mb-2",children:"Goals"}),(0,ds.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:le.goals.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["Target: ",e.target_date]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-20 bg-slate-200 rounded-full h-2",children:(0,ds.jsx)("div",{className:"bg-primary rounded-full h-2",style:{width:"".concat(e.progress||0,"%")}})}),(0,ds.jsxs)("span",{className:"text-sm font-medium",children:[e.progress||0,"%"]})]})]},e.goal_id))})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{re(null),ie(null)},children:"Close"})})]})}),(0,ds.jsx)(eo,{open:!!X,onOpenChange:()=>J(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit KPI Template"}),(0,ds.jsx)(oo,{children:"Modify template details and questions"})]}),X&&(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Template Name"}),(0,ds.jsx)(vn,{value:X.name||"",onChange:e=>J(u(u({},X),{},{name:e.target.value})),placeholder:"Template name"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Period Type"}),(0,ds.jsxs)(yE,{value:X.period_type||"quarterly",onValueChange:e=>J(u(u({},X),{},{period_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"daily",children:"Daily"}),(0,ds.jsx)(kE,{value:"weekly",children:"Weekly"}),(0,ds.jsx)(kE,{value:"monthly",children:"Monthly"}),(0,ds.jsx)(kE,{value:"quarterly",children:"Quarterly"}),(0,ds.jsx)(kE,{value:"half_yearly",children:"Half Yearly"}),(0,ds.jsx)(kE,{value:"yearly",children:"Yearly"})]})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:X.description||"",onChange:e=>J(u(u({},X),{},{description:e.target.value})),placeholder:"Template description",rows:2})]}),(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(_n,{className:"text-base",children:["Questions (",(null===(g=X.questions)||void 0===g?void 0:g.length)||0,")"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>{const e={question_id:"q_".concat(Date.now()),question:"",max_points:10,answer_type:"score",options:[]};J(u(u({},X),{},{questions:[...X.questions||[],e]}))},className:"gap-1",children:[(0,ds.jsx)(CE,{className:"w-3 h-3"}),"Add Question"]})]}),(0,ds.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:(X.questions||[]).map((e,t)=>(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,ds.jsx)("div",{className:"flex-1 space-y-2",children:(0,ds.jsx)(vn,{value:e.question,onChange:e=>{const s=[...X.questions];s[t]=u(u({},s[t]),{},{question:e.target.value}),J(u(u({},X),{},{questions:s}))},placeholder:"Enter question text"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>{const e=X.questions.filter((e,s)=>s!==t);J(u(u({},X),{},{questions:e}))},children:(0,ds.jsx)(Gi,{className:"w-4 h-4"})})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Max Points"}),(0,ds.jsx)(vn,{type:"number",value:e.max_points,onChange:e=>{const s=[...X.questions];s[t]=u(u({},s[t]),{},{max_points:Number(e.target.value)}),J(u(u({},X),{},{questions:s}))}})]}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Answer Type"}),(0,ds.jsxs)(yE,{value:e.answer_type||"score",onValueChange:e=>{const s=[...X.questions];s[t]=u(u({},s[t]),{},{answer_type:e}),J(u(u({},X),{},{questions:s}))},children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"score",children:"Score (0-Max)"}),(0,ds.jsx)(kE,{value:"dropdown",children:"Dropdown Options"}),(0,ds.jsx)(kE,{value:"text",children:"Text Response"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Category"}),(0,ds.jsx)(vn,{value:e.category||"",onChange:e=>{const s=[...X.questions];s[t]=u(u({},s[t]),{},{category:e.target.value}),J(u(u({},X),{},{questions:s}))},placeholder:"e.g., Skills"})]})]}),"dropdown"===e.answer_type&&(0,ds.jsxs)("div",{className:"space-y-2 p-2 bg-white rounded border",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Dropdown Options"}),(0,ds.jsxs)(fn,{size:"sm",variant:"ghost",className:"h-6 text-xs",onClick:()=>{const e=[...X.questions],s=e[t].options||[];s.push({label:"",value:s.length,points:0}),e[t]=u(u({},e[t]),{},{options:s}),J(u(u({},X),{},{questions:e}))},children:[(0,ds.jsx)(CE,{className:"w-3 h-3 mr-1"}),"Add Option"]})]}),(e.options||[]).map((e,s)=>(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(vn,{value:e.label,onChange:a=>{const n=[...X.questions];n[t].options[s]=u(u({},e),{},{label:a.target.value}),J(u(u({},X),{},{questions:n}))},placeholder:"Option text",className:"flex-1"}),(0,ds.jsx)(vn,{type:"number",value:e.points||0,onChange:a=>{const n=[...X.questions];n[t].options[s]=u(u({},e),{},{points:Number(a.target.value)}),J(u(u({},X),{},{questions:n}))},placeholder:"Points",className:"w-20"}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-500 h-8 w-8 p-0",onClick:()=>{const e=[...X.questions];e[t].options=e[t].options.filter((e,t)=>t!==s),J(u(u({},X),{},{questions:e}))},children:(0,ds.jsx)(Gi,{className:"w-3 h-3"})})]},s))]})]},e.question_id||t))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>J(null),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(X)try{(await fetch("".concat(HM,"/performance/templates/").concat(X.template_id),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(X)})).ok?(ts.success("Template updated"),J(null),me()):ts.error("Failed to update template")}catch(e){ts.error("Failed to update template")}},children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:!!Q,onOpenChange:()=>{Z(null),te({})},children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Fill KPI Assessment"}),(0,ds.jsxs)(oo,{children:[(null===Q||void 0===Q||null===(y=Q.period_type)||void 0===y?void 0:y.charAt(0).toUpperCase())+(null===Q||void 0===Q||null===(j=Q.period_type)||void 0===j?void 0:j.slice(1))," Review: ",null===Q||void 0===Q?void 0:Q.period_start," to ",null===Q||void 0===Q?void 0:Q.period_end]})]}),Q&&(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[Q.questions&&Q.questions.length>0?Q.questions.map((e,t)=>{var s,a,n,r,l,i,o;return(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg border space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.question}),e.category&&(0,ds.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Category: ",e.category]})]}),(0,ds.jsxs)(tk,{variant:"outline",children:["Max: ",e.max_points," pts"]})]}),"dropdown"===e.answer_type&&(null===(s=e.options)||void 0===s?void 0:s.length)>0?(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-sm",children:"Select Answer"}),(0,ds.jsxs)(yE,{value:(null===(a=ee[e.question_id])||void 0===a?void 0:a.selected_option)||"",onValueChange:t=>{const s=e.options.find(e=>e.label===t);te(u(u({},ee),{},{[e.question_id]:u(u({},ee[e.question_id]),{},{selected_option:t,score:(null===s||void 0===s?void 0:s.points)||0})}))},children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select an option"})}),(0,ds.jsx)(_E,{children:e.options.map((e,t)=>(0,ds.jsxs)(kE,{value:e.label,children:[e.label," (",e.points," pts)"]},t))})]})]}):"text"===e.answer_type?(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-sm",children:"Your Response"}),(0,ds.jsx)(kA,{value:(null===(n=ee[e.question_id])||void 0===n?void 0:n.comments)||"",onChange:t=>te(u(u({},ee),{},{[e.question_id]:u(u({},ee[e.question_id]),{},{comments:t.target.value})})),placeholder:"Enter your response...",rows:2}),(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsxs)(_n,{className:"text-sm",children:["Score (0-",e.max_points,")"]}),(0,ds.jsx)(vn,{type:"number",min:"0",max:e.max_points,value:(null===(r=ee[e.question_id])||void 0===r?void 0:r.score)||0,onChange:t=>te(u(u({},ee),{},{[e.question_id]:u(u({},ee[e.question_id]),{},{score:Math.min(Number(t.target.value),e.max_points)})}))})]})]}):(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"text-sm",children:["Score (0-",e.max_points,")"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)(vn,{type:"range",min:"0",max:e.max_points,value:(null===(l=ee[e.question_id])||void 0===l?void 0:l.score)||0,onChange:t=>te(u(u({},ee),{},{[e.question_id]:u(u({},ee[e.question_id]),{},{score:Number(t.target.value)})})),className:"flex-1"}),(0,ds.jsxs)("span",{className:"w-16 text-center font-bold text-primary",children:[(null===(i=ee[e.question_id])||void 0===i?void 0:i.score)||0,"/",e.max_points]})]}),(0,ds.jsx)(kA,{value:(null===(o=ee[e.question_id])||void 0===o?void 0:o.comments)||"",onChange:t=>te(u(u({},ee),{},{[e.question_id]:u(u({},ee[e.question_id]),{},{comments:t.target.value})})),placeholder:"Add comments (optional)",rows:2})]})]},e.question_id||t)}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(y_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No questions found for this KPI template"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Please contact HR to set up the KPI template questions"})]}),Q.questions&&Q.questions.length>0&&(0,ds.jsx)("div",{className:"p-4 bg-primary/5 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)("span",{className:"font-medium",children:"Current Score"}),(0,ds.jsx)("span",{className:"text-xl font-bold text-primary",children:(()=>{const e=Object.values(ee).reduce((e,t)=>e+(t.score||0),0),t=Q.questions.reduce((e,t)=>e+t.max_points,0);return t>0?"".concat((e/t*100).toFixed(1),"%"):"0%"})()})]})})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{Z(null),te({})},children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(!Q)return;const e=Q.questions.map(e=>{var t,s,a;return{question_id:e.question_id,question:e.question,score:(null===(t=ee[e.question_id])||void 0===t?void 0:t.score)||0,max_points:e.max_points,comments:(null===(s=ee[e.question_id])||void 0===s?void 0:s.comments)||"",selected_option:(null===(a=ee[e.question_id])||void 0===a?void 0:a.selected_option)||""}}),t=e.reduce((e,t)=>e+t.score,0),s=e.reduce((e,t)=>e+t.max_points,0),a=s>0?t/s*100:0;try{const t=await fetch("".concat(HM,"/performance/kpi/").concat(Q.kpi_id),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({responses:e,final_score:a})});if(t.ok)ts.success("KPI responses saved"),Z(null),te({}),me();else{const e=await t.json();ts.error(e.detail||"Failed to save responses")}}catch(n){ts.error("Failed to save KPI responses")}},className:"gap-1",children:[(0,ds.jsx)(gA,{className:"w-4 h-4"}),"Save Responses"]})]})]})})]})},qM=Yi("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),YM=Yi("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),GM=Yi("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),KM=Yi("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),$M=Yi("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),XM=Yi("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),JM=Yi("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),QM="https://shardahrms.com/api",ZM=()=>{const{user:e,getAuthHeaders:t}=Cs(),[s,n]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[h,m]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),[x,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)("all"),[j,b]=(0,a.useState)("all"),[w,N]=(0,a.useState)(""),[_,k]=(0,a.useState)("inventory"),[S,C]=(0,a.useState)(!1),[E,T]=(0,a.useState)(!1),[A,P]=(0,a.useState)(null),[D,R]=(0,a.useState)([]),[O,M]=(0,a.useState)(""),[F,L]=(0,a.useState)({name:"",asset_tag:"",category:"laptop",brand:"",model:"",serial_number:"",purchase_date:"",purchase_cost:"",condition:"good"}),[I,z]=(0,a.useState)({category:"laptop",description:"",justification:""}),[B,U]=(0,a.useState)(null),V="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"it_admin"===(null===e||void 0===e?void 0:e.role)||"hr_executive"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{H(),V&&(async()=>{try{const e=await fetch("".concat(QM,"/assets/employees/list"),{credentials:"include",headers:t()});e.ok&&R(await e.json())}catch(e){console.error("Error fetching employees:",e)}})()},[g,j,w]);const H=async()=>{try{var e,s;const a=[fetch("".concat(QM,"/my-assets"),{credentials:"include",headers:t()}),fetch("".concat(QM,"/asset-requests"),{credentials:"include",headers:t()})];if(V){let e="".concat(QM,"/assets?");"all"!==g&&(e+="asset_type=".concat(g,"&")),"all"!==j&&(e+="status=".concat(j,"&")),w&&(e+="search=".concat(encodeURIComponent(w),"&")),a.push(fetch(e,{credentials:"include",headers:t()}));let s="".concat(QM,"/assets/employee-assignments?");w&&(s+="search=".concat(encodeURIComponent(w),"&")),a.push(fetch(s,{credentials:"include",headers:t()}))}const r=await Promise.all(a);if(r[0].ok&&o(await r[0].json()),r[1].ok&&d(await r[1].json()),V&&null!==(e=r[2])&&void 0!==e&&e.ok){const e=await r[2].json();n(e.assets||[])}if(V&&null!==(s=r[3])&&void 0!==s&&s.ok){const e=await r[3].json();l(e.records||[])}}catch(a){console.error("Error fetching assets:",a)}finally{m(!1)}},W=e=>{P(e),M(""),T(!0)},q={laptop:$k,mobile:Xk,monitor:qM,vehicle:YM,other:C_},Y={available:"bg-emerald-100 text-emerald-700",assigned:"bg-blue-100 text-blue-700",maintenance:"bg-amber-100 text-amber-700",disposed:"bg-slate-100 text-slate-600"};return h?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"assets-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Assets"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Asset Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage company assets and equipment"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(eo,{open:x,onOpenChange:v,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2","data-testid":"request-asset-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Request Asset"]})}),(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Request Asset"}),(0,ds.jsx)(oo,{children:"Submit a request for equipment"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:I.category,onValueChange:e=>z(u(u({},I),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"laptop",children:"Laptop"}),(0,ds.jsx)(kE,{value:"mobile",children:"Mobile Phone"}),(0,ds.jsx)(kE,{value:"monitor",children:"Monitor"}),(0,ds.jsx)(kE,{value:"furniture",children:"Furniture"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:I.description,onChange:e=>z(u(u({},I),{},{description:e.target.value})),placeholder:"Describe what you need...",rows:3})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Justification"}),(0,ds.jsx)(kA,{value:I.justification,onChange:e=>z(u(u({},I),{},{justification:e.target.value})),placeholder:"Why do you need this?",rows:2})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(I.description)try{const e=await fetch("".concat(QM,"/asset-requests"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(I)});if(e.ok)ts.success("Request submitted"),v(!1),z({category:"laptop",description:"",justification:""}),H();else{const t=await e.json();ts.error(t.detail||"Failed to submit request")}}catch(e){ts.error("Failed to submit request")}else ts.error("Please describe your request")},children:"Submit Request"})]})]})]}),V&&(0,ds.jsxs)(eo,{open:p,onOpenChange:f,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"add-asset-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Asset"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Add New Asset"})}),(0,ds.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Asset Name *"}),(0,ds.jsx)(vn,{value:F.name,onChange:e=>L(u(u({},F),{},{name:e.target.value})),placeholder:"MacBook Pro 14"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Asset Tag *"}),(0,ds.jsx)(vn,{value:F.asset_tag,onChange:e=>L(u(u({},F),{},{asset_tag:e.target.value})),placeholder:"AST-001"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:F.category,onValueChange:e=>L(u(u({},F),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"laptop",children:"Laptop"}),(0,ds.jsx)(kE,{value:"mobile",children:"Mobile"}),(0,ds.jsx)(kE,{value:"monitor",children:"Monitor"}),(0,ds.jsx)(kE,{value:"furniture",children:"Furniture"}),(0,ds.jsx)(kE,{value:"vehicle",children:"Vehicle"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Brand"}),(0,ds.jsx)(vn,{value:F.brand,onChange:e=>L(u(u({},F),{},{brand:e.target.value})),placeholder:"Apple"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Model"}),(0,ds.jsx)(vn,{value:F.model,onChange:e=>L(u(u({},F),{},{model:e.target.value})),placeholder:"M3 Pro"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Serial Number"}),(0,ds.jsx)(vn,{value:F.serial_number,onChange:e=>L(u(u({},F),{},{serial_number:e.target.value})),placeholder:"ABC123XYZ"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Purchase Date"}),(0,ds.jsx)(vn,{type:"date",value:F.purchase_date,onChange:e=>L(u(u({},F),{},{purchase_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Purchase Cost (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",value:F.purchase_cost,onChange:e=>L(u(u({},F),{},{purchase_cost:e.target.value})),placeholder:"150000"})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(F.name&&F.asset_tag)try{const e=await fetch("".concat(QM,"/assets"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(F)});if(e.ok)ts.success("Asset created"),f(!1),L({name:"",asset_tag:"",category:"laptop",brand:"",model:"",serial_number:"",purchase_date:"",purchase_cost:"",condition:"good"}),H();else{const t=await e.json();ts.error(t.detail||"Failed to create asset")}}catch(e){ts.error("Failed to create asset")}else ts.error("Please fill required fields")},children:"Add Asset"})]})]})]})]})]}),(0,ds.jsxs)(cA,{defaultValue:V?"inventory":"my-assets",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsx)(uA,{value:"my-assets","data-testid":"tab-my-assets",children:"My Assets"}),(0,ds.jsx)(uA,{value:"requests","data-testid":"tab-requests",children:"My Requests"}),V&&(0,ds.jsx)(uA,{value:"inventory","data-testid":"tab-inventory",children:"Asset Inventory"}),V&&(0,ds.jsx)(uA,{value:"assignments","data-testid":"tab-assignments",children:"Employee Summary"})]}),V&&(0,ds.jsx)(hA,{value:"inventory",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(C_,{className:"w-5 h-5 text-primary"}),"Asset Inventory"]}),(0,ds.jsx)(On,{children:"All assets in the system"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsxs)(yE,{value:g,onValueChange:y,children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{placeholder:"Type"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Types"}),(0,ds.jsx)(kE,{value:"mobile",children:"Mobile"}),(0,ds.jsx)(kE,{value:"laptop",children:"Laptop"}),(0,ds.jsx)(kE,{value:"system",children:"Desktop"}),(0,ds.jsx)(kE,{value:"printer",children:"Printer"})]})]}),(0,ds.jsxs)(yE,{value:j,onValueChange:b,children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{placeholder:"Status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"assigned",children:"Assigned"}),(0,ds.jsx)(kE,{value:"available",children:"Available"})]})]}),(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search assets...",value:w,onChange:e=>N(e.target.value),className:"pl-9 w-52"})]}),(0,ds.jsx)(fn,{variant:"outline",size:"sm",onClick:H,children:(0,ds.jsx)(SE,{className:"w-4 h-4"})})]})]})}),(0,ds.jsx)(Mn,{children:s.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Asset Tag"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{children:"Description"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"Assigned To"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:s.map(e=>(0,ds.jsxs)(vS,{"data-testid":"asset-".concat(e.asset_id),children:[(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.asset_tag}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)(tk,{variant:"outline",className:"capitalize gap-1",children:["laptop"===e.asset_type&&(0,ds.jsx)($k,{className:"w-3 h-3"}),"system"===e.asset_type&&(0,ds.jsx)(qM,{className:"w-3 h-3"}),"mobile"===e.asset_type&&(0,ds.jsx)(Xk,{className:"w-3 h-3"}),"printer"===e.asset_type&&(0,ds.jsx)(vA,{className:"w-3 h-3"}),e.asset_type]})}),(0,ds.jsx)(yS,{className:"max-w-48 truncate",title:e.description,children:e.description}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"assigned"===e.status?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-700",children:e.status})}),(0,ds.jsx)(yS,{children:e.assigned_to_name||e.emp_code||"-"}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(e=>{P(e),C(!0)})(e),title:"Edit",children:(0,ds.jsx)(pA,{className:"w-4 h-4"})}),"assigned"===e.status?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>W(e),title:"Reassign",children:(0,ds.jsx)(GM,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{if(confirm("Return this asset to inventory?"))try{(await fetch("".concat(QM,"/assets/").concat(e,"/unassign"),{method:"PUT",credentials:"include",headers:t()})).ok?(ts.success("Asset returned to inventory"),H()):ts.error("Failed to unassign asset")}catch(s){ts.error("Failed to unassign asset")}})(e.asset_id),title:"Unassign",children:(0,ds.jsx)(KM,{className:"w-4 h-4"})})]}):(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>W(e),title:"Assign",children:(0,ds.jsx)($M,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this asset?"))try{(await fetch("".concat(QM,"/assets/").concat(e),{method:"DELETE",credentials:"include",headers:t()})).ok?(ts.success("Asset deleted successfully"),H()):ts.error("Failed to delete asset")}catch(s){ts.error("Failed to delete asset")}})(e.asset_id),title:"Delete",children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})})]},e.asset_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(C_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:"No assets found"}),(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"Import assets via Bulk Import or add manually"})]})})]})}),V&&(0,ds.jsx)(hA,{value:"assignments",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(C_,{className:"w-5 h-5 text-primary"}),"Employee Asset Summary"]}),(0,ds.jsx)(On,{children:"Overview of assets assigned to each employee"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by name or code...",value:w,onChange:e=>N(e.target.value),className:"pl-9 w-64","data-testid":"search-employee-assets"})]}),(0,ds.jsx)(fn,{variant:"outline",size:"sm",onClick:H,children:(0,ds.jsx)(SE,{className:"w-4 h-4"})})]})]})}),(0,ds.jsx)(Mn,{children:r.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Emp Code"}),(0,ds.jsx)(gS,{children:"Employee Name"}),(0,ds.jsx)(gS,{children:"SIM/Mobile No"}),(0,ds.jsx)(gS,{children:"Assets Count"}),(0,ds.jsx)(gS,{children:"Assigned Assets"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:r.map(e=>{var s,a;return(0,ds.jsxs)(vS,{"data-testid":"emp-summary-".concat(e.emp_code),children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.emp_code}),(0,ds.jsx)(yS,{children:e.employee_name||"-"}),(0,ds.jsx)(yS,{children:e.sim_mobile_no?(0,ds.jsxs)("span",{className:"flex items-center gap-1 text-sm",children:[(0,ds.jsx)(TE,{className:"w-3 h-3"}),e.sim_mobile_no]}):"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.assets_count||0})}),(0,ds.jsx)(yS,{className:"max-w-72",children:(0,ds.jsxs)("div",{className:"flex flex-wrap gap-1",children:[null===(s=e.assigned_assets)||void 0===s?void 0:s.slice(0,4).map((e,t)=>(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs capitalize",children:["laptop"===e.asset_type&&(0,ds.jsx)($k,{className:"w-3 h-3 mr-1"}),"system"===e.asset_type&&(0,ds.jsx)(qM,{className:"w-3 h-3 mr-1"}),"mobile"===e.asset_type&&(0,ds.jsx)(Xk,{className:"w-3 h-3 mr-1"}),"printer"===e.asset_type&&(0,ds.jsx)(vA,{className:"w-3 h-3 mr-1"}),e.asset_type]},t)),(null===(a=e.assigned_assets)||void 0===a?void 0:a.length)>4&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:["+",e.assigned_assets.length-4," more"]}),(!e.assigned_assets||0===e.assigned_assets.length)&&(0,ds.jsx)("span",{className:"text-slate-400 text-sm",children:"No assets"})]})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>(async e=>{if(confirm("Delete this employee assignment and unassign all their assets?"))try{(await fetch("".concat(QM,"/assets/employee-assignments/").concat(e),{method:"DELETE",credentials:"include",headers:t()})).ok?(ts.success("Employee assignment deleted"),H()):ts.error("Failed to delete assignment")}catch(s){ts.error("Failed to delete assignment")}})(e.emp_code),title:"Delete & Unassign All",children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})})]},e.emp_code)})})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(C_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:"No employee asset assignments found"}),(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"Import assets via Bulk Import \u2192 Assets template"})]})})]})}),(0,ds.jsx)(hA,{value:"my-assets",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(C_,{className:"w-5 h-5 text-primary"}),"Assigned Assets"]}),(0,ds.jsx)(On,{children:"Equipment assigned to you"})]}),(0,ds.jsxs)(Mn,{children:[i.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:i.map(e=>{const t=q[e.category]||C_;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(t,{className:"w-6 h-6 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.asset_tag," \u2022 ",e.brand," ",e.model]})]})]}),(0,ds.jsx)(tk,{className:Y.assigned,children:"Assigned"})]},e.asset_id)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(C_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No assets assigned to you"})]}),"}"]})]})}),(0,ds.jsx)(hA,{value:"requests",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Asset Requests"})}),(0,ds.jsx)(Mn,{children:c.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900 capitalize",children:e.category}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,ds.jsx)(tk,{className:"approved"===e.status?"bg-emerald-100 text-emerald-700":"rejected"===e.status?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700",children:e.status})]},e.request_id))}):(0,ds.jsx)("div",{className:"text-center py-8",children:(0,ds.jsx)("p",{className:"text-slate-500",children:"No asset requests"})})})]})})]}),(0,ds.jsx)(eo,{open:!!B,onOpenChange:()=>U(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(null===B||void 0===B?void 0:B.category)&&q[B.category]&&a.createElement(q[B.category],{className:"w-5 h-5 text-primary"}),null===B||void 0===B?void 0:B.name]}),(0,ds.jsx)(oo,{children:"Asset Details"})]}),B&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(tk,{className:Y[B.status],children:B.status}),(0,ds.jsx)(tk,{variant:"outline",className:"capitalize",children:B.condition})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(XM,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Asset Tag"})]}),(0,ds.jsx)("p",{className:"font-mono font-medium",children:B.asset_tag})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(JM,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Serial Number"})]}),(0,ds.jsx)("p",{className:"font-mono font-medium",children:B.serial_number||"-"})]})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Brand & Model"}),(0,ds.jsxs)("p",{className:"font-medium",children:[B.brand||"-"," ",B.model||""]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(v_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Purchase Date"})]}),(0,ds.jsx)("p",{className:"font-medium",children:B.purchase_date?new Date(B.purchase_date).toLocaleDateString("en-IN"):"-"})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(bA,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Purchase Cost"})]}),(0,ds.jsx)("p",{className:"font-medium",children:B.purchase_cost?"\u20b9".concat(B.purchase_cost.toLocaleString("en-IN")):"-"})]})]}),B.warranty_expiry&&(0,ds.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-amber-600 mb-1",children:"Warranty Expiry"}),(0,ds.jsx)("p",{className:"font-medium text-amber-700",children:new Date(B.warranty_expiry).toLocaleDateString("en-IN")})]}),B.assigned_to&&(0,ds.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"Assigned To"}),(0,ds.jsx)("p",{className:"font-medium text-blue-700",children:B.assigned_to}),B.assigned_date&&(0,ds.jsxs)("p",{className:"text-xs text-blue-500 mt-1",children:["Since ",new Date(B.assigned_date).toLocaleDateString("en-IN")]})]}),B.notes&&(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Notes"}),(0,ds.jsx)("p",{className:"text-sm text-slate-700",children:B.notes})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>U(null),children:"Close"})})]})}),(0,ds.jsx)(eo,{open:S,onOpenChange:C,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit Asset"}),(0,ds.jsx)(oo,{children:"Update asset details"})]}),A&&(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Asset Tag"}),(0,ds.jsx)(vn,{value:A.asset_tag||"",onChange:e=>P(u(u({},A),{},{asset_tag:e.target.value})),placeholder:"SDPL/SALES/L/01"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Asset Type"}),(0,ds.jsxs)(yE,{value:A.asset_type||"laptop",onValueChange:e=>P(u(u({},A),{},{asset_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"mobile",children:"Mobile & Charger"}),(0,ds.jsx)(kE,{value:"laptop",children:"Laptop"}),(0,ds.jsx)(kE,{value:"system",children:"Desktop/System"}),(0,ds.jsx)(kE,{value:"printer",children:"Printer"}),(0,ds.jsx)(kE,{value:"scanner",children:"Scanner"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:A.description||"",onChange:e=>P(u(u({},A),{},{description:e.target.value})),placeholder:"Dell Laptop (RAM 8GB, i5 Processor)",rows:3})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(A)try{(await fetch("".concat(QM,"/assets/").concat(A.asset_id),{method:"PUT",headers:u({"Content-Type":"application/json"},t()),credentials:"include",body:JSON.stringify({description:A.description,asset_tag:A.asset_tag,asset_type:A.asset_type})})).ok?(ts.success("Asset updated successfully"),C(!1),H()):ts.error("Failed to update asset")}catch(e){ts.error("Failed to update asset")}},children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:E,onOpenChange:T,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"assigned"===(null===A||void 0===A?void 0:A.status)?"Reassign Asset":"Assign Asset"}),(0,ds.jsx)(oo,{children:A&&(0,ds.jsxs)("span",{className:"block mt-2",children:["Asset: ",(0,ds.jsx)("strong",{children:A.description}),(0,ds.jsx)("br",{}),"Tag: ",(0,ds.jsx)("code",{className:"bg-slate-100 px-1 rounded",children:A.asset_tag})]})})]}),(0,ds.jsx)("div",{className:"space-y-4 py-4",children:(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Select Employee"}),(0,ds.jsxs)(yE,{value:O,onValueChange:M,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select an employee..."})}),(0,ds.jsx)(_E,{children:D.map(e=>(0,ds.jsxs)(kE,{value:e.emp_code,children:[e.emp_code," - ",e.name]},e.emp_code))})]})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(A&&O)try{const e=D.find(e=>e.emp_code===O);(await fetch("".concat(QM,"/assets/").concat(A.asset_id,"/reassign"),{method:"PUT",headers:u({"Content-Type":"application/json"},t()),credentials:"include",body:JSON.stringify({emp_code:O,employee_name:(null===e||void 0===e?void 0:e.name)||O})})).ok?(ts.success("Asset reassigned successfully"),T(!1),H()):ts.error("Failed to reassign asset")}catch(e){ts.error("Failed to reassign asset")}else ts.error("Please select an employee")},children:"assigned"===(null===A||void 0===A?void 0:A.status)?"Reassign":"Assign"})]})]})})]})},eF=Yi("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),tF=Yi("hotel",[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),sF=Yi("fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),aF="https://shardahrms.com/api",nF=()=>{var e,t,s;const{user:n}=Cs(),[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)("all"),[x,v]=(0,a.useState)("all"),[g,y]=(0,a.useState)({title:"",category:"travel",amount:"",expense_date:"",description:""}),[j,b]=(0,a.useState)("all"),[w,N]=(0,a.useState)([]),[_,k]=(0,a.useState)(null),S="super_admin"===(null===n||void 0===n?void 0:n.role)||"hr_admin"===(null===n||void 0===n?void 0:n.role)||"finance"===(null===n||void 0===n?void 0:n.role)||"manager"===(null===n||void 0===n?void 0:n.role);(0,a.useEffect)(()=>{E(),S&&C()},[p,x,j]);const C=async()=>{try{const e=await fetch("".concat(aF,"/employees"),{credentials:"include",headers:nk()});e.ok&&N(await e.json())}catch(e){console.error("Error fetching employees:",e)}},E=async()=>{try{let e="".concat(aF,"/expenses?");"all"!==p&&(e+="status=".concat(p,"&")),"all"!==x&&(e+="category=".concat(x,"&")),"all"!==j&&(e+="employee_id=".concat(j,"&"));const[t,s]=await Promise.all([fetch(e,{credentials:"include",headers:nk()}),fetch("".concat(aF,"/expense-categories"),{credentials:"include",headers:nk()})]);t.ok&&l(await t.json()),s.ok&&o(await s.json())}catch(e){console.error("Error fetching expenses:",e)}finally{d(!1)}},T=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),A={travel:YM,food:eF,accommodation:tF,client_entertainment:k_,fuel:sF,other:E_},P={pending:{icon:p_,color:"bg-amber-100 text-amber-700",label:"Pending"},approved:{icon:Yk,color:"bg-emerald-100 text-emerald-700",label:"Approved"},rejected:{icon:TA,color:"bg-red-100 text-red-700",label:"Rejected"},reimbursed:{icon:bA,color:"bg-blue-100 text-blue-700",label:"Reimbursed"}},D=r.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.amount,0),R=r.filter(e=>"approved"===e.status).reduce((e,t)=>e+(t.approved_amount||t.amount),0);return c?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"expenses-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Expenses"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Expense Claims"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Submit and track expense reimbursements"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)(eo,{open:h,onOpenChange:m,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"new-expense-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"New Expense"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Submit Expense Claim"}),(0,ds.jsx)(oo,{children:"Fill in the expense details for reimbursement"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:g.title,onChange:e=>y(u(u({},g),{},{title:e.target.value})),placeholder:"Client meeting travel"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:g.category,onValueChange:e=>y(u(u({},g),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:i.map(e=>(0,ds.jsx)(kE,{value:e.code,children:e.name},e.code))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Amount (\u20b9) *"}),(0,ds.jsx)(vn,{type:"number",value:g.amount,onChange:e=>y(u(u({},g),{},{amount:e.target.value})),placeholder:"5000"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Expense Date *"}),(0,ds.jsx)(vn,{type:"date",value:g.expense_date,onChange:e=>y(u(u({},g),{},{expense_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:g.description,onChange:e=>y(u(u({},g),{},{description:e.target.value})),placeholder:"Details about the expense...",rows:3})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Receipt"}),(0,ds.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-6 text-center hover:border-primary/50 cursor-pointer transition-colors",children:[(0,ds.jsx)(fA,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Click to upload receipt"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"PNG, JPG up to 5MB"})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(g.title&&g.amount&&g.expense_date)try{const e=await fetch("".concat(aF,"/expenses"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u(u({},g),{},{amount:parseFloat(g.amount)}))});if(e.ok)ts.success("Expense claim submitted"),m(!1),y({title:"",category:"travel",amount:"",expense_date:"",description:""}),E();else{const t=await e.json();ts.error(t.detail||"Failed to submit expense")}}catch(e){ts.error("Failed to submit expense")}else ts.error("Please fill all required fields")},children:"Submit Claim"})]})]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-slate-900",children:T(D)}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Pending"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-slate-900",children:T(R)}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Approved"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(E_,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-slate-900",children:r.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Claims"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(bA,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-lg font-bold text-slate-900",children:T(r.reduce((e,t)=>e+t.amount,0))}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Claimed"})]})]})})})]}),(0,ds.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ds.jsxs)(yE,{value:p,onValueChange:f,children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{placeholder:"All Status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"pending",children:"Pending"}),(0,ds.jsx)(kE,{value:"approved",children:"Approved"}),(0,ds.jsx)(kE,{value:"rejected",children:"Rejected"}),(0,ds.jsx)(kE,{value:"reimbursed",children:"Reimbursed"})]})]}),(0,ds.jsxs)(yE,{value:x,onValueChange:v,children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{placeholder:"All Categories"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Categories"}),i.map(e=>(0,ds.jsx)(kE,{value:e.code,children:e.name},e.code))]})]}),S&&(0,ds.jsxs)(yE,{value:j,onValueChange:b,children:[(0,ds.jsx)(bE,{className:"w-48",children:(0,ds.jsx)(jE,{placeholder:"All Employees"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Employees"}),w.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(E_,{className:"w-5 h-5 text-primary"}),"Expense Claims"]})}),(0,ds.jsx)(Mn,{children:r.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:r.map(e=>{const t=P[e.status]||P.pending,s=t.icon,a=A[e.category]||E_;return(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-slate-50 rounded-lg gap-4 cursor-pointer hover:bg-slate-100 transition-colors","data-testid":"expense-".concat(e.claim_id),onClick:()=>k(e),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-white border flex items-center justify-center",children:(0,ds.jsx)(a,{className:"w-6 h-6 text-slate-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,ds.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[(0,ds.jsx)("span",{className:"capitalize",children:e.category.replace("_"," ")}),(0,ds.jsx)("span",{children:"\u2022"}),(0,ds.jsx)("span",{children:new Date(e.expense_date).toLocaleDateString("en-IN")})]}),e.description&&(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:e.description})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:T(e.amount)}),e.approved_amount&&e.approved_amount!==e.amount&&(0,ds.jsxs)("p",{className:"text-xs text-emerald-600",children:["Approved: ",T(e.approved_amount)]})]}),(0,ds.jsxs)(tk,{className:t.color,children:[(0,ds.jsx)(s,{className:"w-3 h-3 mr-1"}),t.label]}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),k(e)},children:(0,ds.jsx)(xA,{className:"w-4 h-4"})}),S&&"pending"===e.status&&e.employee_id!==(null===n||void 0===n?void 0:n.employee_id)&&(0,ds.jsxs)("div",{className:"flex gap-2",onClick:e=>e.stopPropagation(),children:[(0,ds.jsxs)(fn,{size:"sm",onClick:()=>(async e=>{try{(await fetch("".concat(aF,"/expenses/").concat(e,"/approve"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({})})).ok&&(ts.success("Expense approved"),E())}catch(t){ts.error("Failed to approve expense")}})(e.claim_id),className:"gap-1",children:[(0,ds.jsx)(Yk,{className:"w-3 h-3"}),"Approve"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{const t=window.prompt("Enter rejection reason:");if(t)try{(await fetch("".concat(aF,"/expenses/").concat(e,"/reject"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({reason:t})})).ok&&(ts.success("Expense rejected"),E())}catch(s){ts.error("Failed to reject expense")}})(e.claim_id),className:"gap-1 text-red-600",children:[(0,ds.jsx)(TA,{className:"w-3 h-3"}),"Reject"]})]})]})]},e.claim_id)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(E_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No expense claims"}),(0,ds.jsx)(fn,{onClick:()=>m(!0),children:"Submit First Expense"})]})})]}),(0,ds.jsx)(eo,{open:!!_,onOpenChange:()=>k(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[(0,ds.jsx)(E_,{className:"w-5 h-5 text-primary"}),"Expense Details"]}),(0,ds.jsx)(oo,{children:null===_||void 0===_?void 0:_.title})]}),_&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(tk,{className:null===(e=P[_.status])||void 0===e?void 0:e.color,children:null===(t=P[_.status])||void 0===t?void 0:t.label}),(0,ds.jsx)(tk,{variant:"outline",className:"capitalize",children:null===(s=_.category)||void 0===s?void 0:s.replace("_"," ")})]}),(0,ds.jsxs)("div",{className:"p-4 bg-primary/5 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Claimed Amount"}),(0,ds.jsx)("p",{className:"text-2xl font-bold text-primary",children:T(_.amount)}),_.approved_amount&&_.approved_amount!==_.amount&&(0,ds.jsxs)("p",{className:"text-sm text-emerald-600 mt-1",children:["Approved: ",T(_.approved_amount)]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(v_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Expense Date"})]}),(0,ds.jsx)("p",{className:"font-medium",children:new Date(_.expense_date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(p_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Submitted"})]}),(0,ds.jsx)("p",{className:"font-medium",children:_.created_at?new Date(_.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-"})]})]}),_.description&&(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(M_,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Description"})]}),(0,ds.jsx)("p",{className:"text-sm text-slate-700",children:_.description})]}),S&&_.employee_id&&(0,ds.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(sk,{className:"w-4 h-4 text-blue-400"}),(0,ds.jsx)("p",{className:"text-xs text-blue-600",children:"Employee ID"})]}),(0,ds.jsx)("p",{className:"font-medium text-blue-700",children:_.employee_id})]}),"approved"===_.status&&_.approved_by&&(0,ds.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-emerald-600 mb-1",children:"Approved By"}),(0,ds.jsx)("p",{className:"font-medium text-emerald-700",children:_.approved_by}),_.approved_at&&(0,ds.jsxs)("p",{className:"text-xs text-emerald-500 mt-1",children:["on ",new Date(_.approved_at).toLocaleDateString("en-IN")]})]}),"rejected"===_.status&&(0,ds.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),(0,ds.jsx)("p",{className:"text-sm text-red-700",children:_.rejection_reason||"No reason provided"})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>k(null),children:"Close"})})]})})]})},rF=Yi("file-warning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),lF="https://shardahrms.com/api",iF=()=>{var e,t,s,n;const{user:r}=Cs(),[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)((new Date).getMonth()+1),[x,v]=(0,a.useState)((new Date).getFullYear()),[g,y]=(0,a.useState)(null),j="super_admin"===(null===r||void 0===r?void 0:r.role)||"hr_admin"===(null===r||void 0===r?void 0:r.role),b=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],w=[],N=(new Date).getFullYear();for(let a=N-2;a<=N+1;a++)w.push(a);const _=(e,t)=>{if(!t||0===t.length)return;const s=[["Row Number","Error Description"].join(","),...t.map(e=>"".concat(e.row,',"').concat(e.error.replace(/"/g,'""'),'"'))].join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="".concat(e,"_import_errors_").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),r.remove()},k=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(e),c(null);const a=new FormData;a.append("file",t),"attendance"===e&&(a.append("month",s.month||p),a.append("year",s.year||x));try{const t=nk(),s=await fetch("".concat(lF,"/import/").concat(e),{method:"POST",credentials:"include",headers:{Authorization:t.Authorization},body:a}),l=await s.json();if(s.ok){var n;const t={type:e,typeName:(null===(n=C.find(t=>t.id===e))||void 0===n?void 0:n.title)||e,success:!0,imported:l.imported,errors:l.errors||[],total:l.total_rows,info:l.info};c(t),u(!0),l.errors&&l.errors.length>0&&setTimeout(()=>{_(e,l.errors)},500)}else{var r;c({type:e,typeName:(null===(r=C.find(t=>t.id===e))||void 0===r?void 0:r.title)||e,success:!1,error:l.detail||"Import failed",imported:0,errors:[],total:0}),u(!0)}}catch(l){console.error("Upload error:",l),ts.error("Failed to upload file. Please check your connection and try again.")}finally{i(null)}},S=async e=>{try{let t="".concat(lF,"/import/export/").concat(e);"attendance"===e&&(t+="?month=".concat(p,"&year=").concat(x));const s=await fetch(t,{credentials:"include"});if(s.ok){const t=await s.blob(),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="".concat(e,"_export_").concat((new Date).toISOString().split("T")[0],".xlsx"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),n.remove(),ts.success("Export downloaded")}else ts.error("Failed to export data")}catch(t){ts.error("Failed to export data")}};if(!j)return(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(AA,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-600",children:"You don't have permission to access this page"})]});const C=[{id:"employees",title:"Employee Data",description:"Import employee profiles with personal and employment details",icon:k_,color:"bg-blue-100 text-blue-700",fields:["emp_code","first_name","last_name","email","phone","department_code","joining_date"],format:"Excel (.xlsx)"},{id:"attendance",title:"Attendance Records",description:"Bulk upload monthly attendance data (P/A/L/H/WFH)",icon:p_,color:"bg-emerald-100 text-emerald-700",fields:["Emp Code","Name","Day 1-31 (P/A/L/H/WFH)"],format:"Excel (.xlsx)",hasMonthYear:!0},{id:"salary",title:"Salary Structures",description:"Import salary details with all components and deductions",icon:bA,color:"bg-purple-100 text-purple-700",fields:["Emp Code","BASIC","DA","HRA","EPF","ESI","NET PAYABLE"],format:"Excel (.xlsx)"},{id:"leave-balance",title:"Leave Balances",description:"Import current leave balances (CL, SL, EL, Comp Off)",icon:f_,color:"bg-amber-100 text-amber-700",fields:["Emp ID","Name","Casual Leave","Sick Leave","Earned Leave","Comp Off"],format:"Excel (.xlsx)"},{id:"assets",title:"Employee Assets",description:"Import employee assets (Mobile, Laptop, System, Printer, SIM)",icon:C_,color:"bg-teal-100 text-teal-700",fields:["Empl.Code","NAME","ASSETS OF SDPL NUMBER","TAG","MOBILE & CHARGER","LAPTOP","SYSTEM","PRINTER","SIM(MOBILE NO)"],format:"Excel (.xlsx)"}];return(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"bulk-import-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Bulk Import & Export"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Import data from Excel files or export existing data"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2",onClick:()=>S("employees"),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export Employees"]}),(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2",onClick:()=>S("salary"),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export Salaries"]})]})]}),(0,ds.jsx)(Pn,{className:"border-blue-200 bg-blue-50",children:(0,ds.jsx)(Mn,{className:"py-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(v_,{className:"w-5 h-5 text-blue-600"}),(0,ds.jsx)("span",{className:"font-medium text-blue-900",children:"Attendance Period:"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:p.toString(),onValueChange:e=>f(parseInt(e)),children:[(0,ds.jsx)(bE,{className:"w-36 bg-white",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:b.map(e=>(0,ds.jsx)(kE,{value:e.value.toString(),children:e.label},e.value))})]}),(0,ds.jsxs)(yE,{value:x.toString(),onValueChange:e=>v(parseInt(e)),children:[(0,ds.jsx)(bE,{className:"w-24 bg-white",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:w.map(e=>(0,ds.jsx)(kE,{value:e.toString(),children:e},e))})]})]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>S("attendance"),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export Attendance"]})]})})}),(0,ds.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:C.map(e=>{const t=e.icon;return(0,ds.jsxs)(Pn,{className:"overflow-hidden","data-testid":"import-".concat(e.id),children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.color," flex items-center justify-center"),children:(0,ds.jsx)(t,{className:"w-5 h-5"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:e.title}),(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs mt-1",children:[(0,ds.jsx)(w_,{className:"w-3 h-3 mr-1"}),e.format]})]})]}),(0,ds.jsx)(On,{children:e.description})]}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.fields.slice(0,4).map(e=>(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:e},e)),e.fields.length>4&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:["+",e.fields.length-4," more"]})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",size:"sm",className:"flex-1 gap-2",onClick:()=>(async e=>{try{let t="".concat(lF,"/import/templates/").concat(e);"attendance"===e&&(t+="?month=".concat(p,"&year=").concat(x));const s=nk(),a=await fetch(t,{credentials:"include",headers:s});if(a.ok){const t=await a.blob(),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s;const r=a.headers.get("Content-Disposition");let l="".concat(e,"_template.xlsx");if(r){const e=r.match(/filename=(.+)/);e&&(l=e[1])}n.download=l,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),n.remove(),ts.success("Template downloaded")}else ts.error("Failed to download template")}catch(t){ts.error("Failed to download template")}})(e.id),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Template"]}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("input",{type:"file",accept:".csv,.xlsx",className:"hidden",id:"upload-".concat(e.id),onChange:t=>(async(e,t)=>{var s;const a=null===(s=t.target.files)||void 0===s?void 0:s[0];if(!a)return;const n=a.name.toLowerCase().substring(a.name.lastIndexOf("."));if([".csv",".xlsx"].includes(n)){if("attendance"===e)return y(a),m(!0),void(t.target.value="");await k(e,a),t.target.value=""}else ts.error("Please upload a CSV or Excel (.xlsx) file")})(e.id,t),disabled:null!==l}),(0,ds.jsx)("label",{htmlFor:"upload-".concat(e.id),children:(0,ds.jsx)(fn,{size:"sm",className:"w-full gap-2",disabled:null!==l,asChild:!0,children:(0,ds.jsxs)("span",{children:[l===e.id?(0,ds.jsx)(Sx,{className:"w-4 h-4 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4"}),l===e.id?"Uploading...":"Upload"]})})})]})]})]})]},e.id)})}),(0,ds.jsx)(eo,{open:d,onOpenChange:u,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{className:"flex items-center gap-2",children:null!==o&&void 0!==o&&o.success?(null===o||void 0===o||null===(e=o.errors)||void 0===e?void 0:e.length)>0?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-500"}),"Import Completed with Errors"]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Yk,{className:"w-5 h-5 text-green-500"}),"Import Successful"]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Gi,{className:"w-5 h-5 text-red-500"}),"Import Failed"]})}),(0,ds.jsxs)(oo,{children:[null===o||void 0===o?void 0:o.typeName," import results"]})]}),(0,ds.jsx)("div",{className:"py-4",children:null!==o&&void 0!==o&&o.success?(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:o.total}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Records"})]}),(0,ds.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-green-600",children:o.imported}),(0,ds.jsx)("p",{className:"text-xs text-green-600",children:"Imported"})]}),(0,ds.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null===(t=o.errors)||void 0===t?void 0:t.length)||0}),(0,ds.jsx)("p",{className:"text-xs text-red-600",children:"Errors"})]})]}),o.info&&"employees"===o.type&&(0,ds.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,ds.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\ud83d\udd10 ",o.info]}),(0,ds.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Employees should change their password on first login."})]}),(null===(s=o.errors)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("h4",{className:"font-medium text-sm text-slate-700 flex items-center gap-2",children:[(0,ds.jsx)(rF,{className:"w-4 h-4 text-amber-500"}),"Error Details"]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",className:"gap-1 text-xs",onClick:()=>_(o.type,o.errors),children:[(0,ds.jsx)(Kk,{className:"w-3 h-3"}),"Download Error Report"]})]}),(0,ds.jsx)("div",{className:"border rounded-lg max-h-48 overflow-y-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{className:"w-20",children:"Row"}),(0,ds.jsx)(gS,{children:"Error"})]})}),(0,ds.jsxs)(xS,{children:[o.errors.slice(0,10).map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.row}),(0,ds.jsx)(yS,{className:"text-sm text-red-600",children:e.error})]},t)),o.errors.length>10&&(0,ds.jsx)(vS,{children:(0,ds.jsxs)(yS,{colSpan:2,className:"text-center text-slate-500 text-sm",children:["... and ",o.errors.length-10," more errors (see downloaded report)"]})})]})]})}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[(0,ds.jsx)(Yk,{className:"w-3 h-3 text-green-500"}),"Error report has been automatically downloaded"]})]}),0===(null===(n=o.errors)||void 0===n?void 0:n.length)&&(0,ds.jsxs)("div",{className:"text-center py-4 bg-green-50 rounded-lg",children:[(0,ds.jsx)(Yk,{className:"w-10 h-10 text-green-500 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-green-700 font-medium",children:"All records imported successfully!"})]})]}):(0,ds.jsxs)("div",{className:"text-center py-6 bg-red-50 rounded-lg",children:[(0,ds.jsx)(AA,{className:"w-10 h-10 text-red-500 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-red-700 font-medium",children:null===o||void 0===o?void 0:o.error}),(0,ds.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Please check your file and try again"})]})}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{onClick:()=>{u(!1)},children:"Close"})})]})}),(0,ds.jsx)(eo,{open:h,onOpenChange:m,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Select Attendance Period"}),(0,ds.jsx)(oo,{children:"Choose the month and year for this attendance data"})]}),(0,ds.jsxs)("div",{className:"py-4 space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Month"}),(0,ds.jsxs)(yE,{value:p.toString(),onValueChange:e=>f(parseInt(e)),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:b.map(e=>(0,ds.jsx)(kE,{value:e.value.toString(),children:e.label},e.value))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Year"}),(0,ds.jsxs)(yE,{value:x.toString(),onValueChange:e=>v(parseInt(e)),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:w.map(e=>(0,ds.jsx)(kE,{value:e.toString(),children:e},e))})]})]})]}),g&&(0,ds.jsx)("div",{className:"p-3 bg-slate-50 rounded-lg",children:(0,ds.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,ds.jsx)(w_,{className:"w-4 h-4 inline mr-2"}),"File: ",g.name]})})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{m(!1),y(null)},children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{g&&(m(!1),await k("attendance",g,{month:p,year:x}),y(null))},disabled:!g,children:[(0,ds.jsx)(fA,{className:"w-4 h-4 mr-2"}),"Upload Attendance"]})]})]})})]})},oF="https://shardahrms.com/api",cF=()=>{var e,t;const{user:s}=Cs(),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[f,x]=(0,a.useState)("department"),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),b="super_admin"===(null===s||void 0===s?void 0:s.role)||"hr_admin"===(null===s||void 0===s?void 0:s.role),[w,N]=(0,a.useState)({name:"",code:"",description:"",address:"",city:"",state:"",pincode:"",grade:"",band:""});(0,a.useEffect)(()=>{_()},[]);const _=async()=>{try{const e=nk(),[t,s,a]=await Promise.all([fetch("".concat(oF,"/departments"),{credentials:"include",headers:e}),fetch("".concat(oF,"/designations"),{credentials:"include",headers:e}),fetch("".concat(oF,"/locations"),{credentials:"include",headers:e})]);t.ok&&r(await t.json()),s.ok&&i(await s.json()),a.ok&&c(await a.json())}catch(e){console.error("Error fetching master data:",e)}finally{h(!1)}},k=()=>{N({name:"",code:"",description:"",address:"",city:"",state:"",pincode:"",grade:"",band:""}),g(null)},S=e=>{x(e),k(),p(!0)},C=(e,t)=>{x(e),g(t),N({name:t.name||"",code:t.code||"",description:t.description||"",address:t.address||"",city:t.city||"",state:t.state||"",pincode:t.pincode||"",grade:t.grade||"",band:t.band||""}),p(!0)};if(!b)return(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(AA,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-600",children:"You don't have permission to access this page"})]});if(d)return(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})});const E={department:{title:"Department",icon:F_},designation:{title:"Designation",icon:T_},location:{title:"Location",icon:Jk}};return(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"master-setup-page",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Master Setup"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage organizational structure and master data"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(F_,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:n.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Departments"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(T_,{className:"w-5 h-5 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:l.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Designations"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Jk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:o.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Locations"})]})]})})})]}),(0,ds.jsxs)(cA,{defaultValue:"departments",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsxs)(uA,{value:"departments",className:"gap-2","data-testid":"tab-departments",children:[(0,ds.jsx)(F_,{className:"w-4 h-4"}),"Departments"]}),(0,ds.jsxs)(uA,{value:"designations",className:"gap-2","data-testid":"tab-designations",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),"Designations"]}),(0,ds.jsxs)(uA,{value:"locations",className:"gap-2","data-testid":"tab-locations",children:[(0,ds.jsx)(Jk,{className:"w-4 h-4"}),"Locations"]})]}),(0,ds.jsx)(hA,{value:"departments",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Departments"}),(0,ds.jsx)(On,{children:"Manage company departments"})]}),(0,ds.jsxs)(fn,{className:"gap-2",onClick:()=>S("department"),"data-testid":"add-department-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Department"]})]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Name"}),(0,ds.jsx)(gS,{children:"Code"}),(0,ds.jsx)(gS,{children:"Description"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:n.length>0?n.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.name}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.code})}),(0,ds.jsx)(yS,{className:"text-slate-500",children:e.description||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.is_active?"Active":"Inactive"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",onClick:()=>C("department",e),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})})})]},e.department_id)):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:5,className:"text-center py-8 text-slate-500",children:'No departments found. Click "Add Department" to create one.'})})})]})})]})}),(0,ds.jsx)(hA,{value:"designations",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Designations"}),(0,ds.jsx)(On,{children:"Manage job titles and grades"})]}),(0,ds.jsxs)(fn,{className:"gap-2",onClick:()=>S("designation"),"data-testid":"add-designation-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Designation"]})]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Name"}),(0,ds.jsx)(gS,{children:"Code"}),(0,ds.jsx)(gS,{children:"Grade"}),(0,ds.jsx)(gS,{children:"Band"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:l.length>0?l.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.name}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.code})}),(0,ds.jsx)(yS,{children:e.grade||"-"}),(0,ds.jsx)(yS,{children:e.band||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.is_active?"Active":"Inactive"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",onClick:()=>C("designation",e),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})})})]},e.designation_id)):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:6,className:"text-center py-8 text-slate-500",children:'No designations found. Click "Add Designation" to create one.'})})})]})})]})}),(0,ds.jsx)(hA,{value:"locations",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Locations"}),(0,ds.jsx)(On,{children:"Manage office locations"})]}),(0,ds.jsxs)(fn,{className:"gap-2",onClick:()=>S("location"),"data-testid":"add-location-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Location"]})]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Name"}),(0,ds.jsx)(gS,{children:"Code"}),(0,ds.jsx)(gS,{children:"City"}),(0,ds.jsx)(gS,{children:"State"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:o.length>0?o.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.name}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.code})}),(0,ds.jsx)(yS,{children:e.city||"-"}),(0,ds.jsx)(yS,{children:e.state||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.is_active?"Active":"Inactive"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",onClick:()=>C("location",e),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})})})]},e.location_id)):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:6,className:"text-center py-8 text-slate-500",children:'No locations found. Click "Add Location" to create one.'})})})]})})]})})]}),(0,ds.jsx)(eo,{open:m,onOpenChange:p,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-2",children:[a.createElement((null===(e=E[f])||void 0===e?void 0:e.icon)||F_,{className:"w-5 h-5 text-primary"}),v?"Edit":"Add"," ",null===(t=E[f])||void 0===t?void 0:t.title]}),(0,ds.jsx)(oo,{children:v?"Update the details below":"Fill in the details to create a new entry"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Name *"}),(0,ds.jsx)(vn,{value:w.name,onChange:e=>N(u(u({},w),{},{name:e.target.value})),placeholder:"e.g., Engineering","data-testid":"input-name"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Code *"}),(0,ds.jsx)(vn,{value:w.code,onChange:e=>N(u(u({},w),{},{code:e.target.value.toUpperCase()})),placeholder:"e.g., ENG","data-testid":"input-code"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:w.description,onChange:e=>N(u(u({},w),{},{description:e.target.value})),placeholder:"Optional description...",rows:2})]}),"location"===f&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Address"}),(0,ds.jsx)(vn,{value:w.address,onChange:e=>N(u(u({},w),{},{address:e.target.value})),placeholder:"Street address"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"City"}),(0,ds.jsx)(vn,{value:w.city,onChange:e=>N(u(u({},w),{},{city:e.target.value})),placeholder:"Mumbai"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"State"}),(0,ds.jsx)(vn,{value:w.state,onChange:e=>N(u(u({},w),{},{state:e.target.value})),placeholder:"Maharashtra"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Pincode"}),(0,ds.jsx)(vn,{value:w.pincode,onChange:e=>N(u(u({},w),{},{pincode:e.target.value})),placeholder:"400001",maxLength:6})]})]}),"designation"===f&&(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Grade"}),(0,ds.jsx)(vn,{value:w.grade,onChange:e=>N(u(u({},w),{},{grade:e.target.value})),placeholder:"e.g., L5"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Band"}),(0,ds.jsx)(vn,{value:w.band,onChange:e=>N(u(u({},w),{},{band:e.target.value})),placeholder:"e.g., B2"})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(w.name&&w.code){j(!0);try{const e="department"===f?"departments":"designation"===f?"designations":"locations";let t={name:w.name,code:w.code,description:w.description};"location"===f?t=u(u({},t),{},{address:w.address,city:w.city,state:w.state,pincode:w.pincode}):"designation"===f&&(t=u(u({},t),{},{grade:w.grade,band:w.band}));const s=null!==v,a=(null===v||void 0===v?void 0:v.department_id)||(null===v||void 0===v?void 0:v.designation_id)||(null===v||void 0===v?void 0:v.location_id),n=s?"".concat(oF,"/").concat(e,"/").concat(a):"".concat(oF,"/").concat(e),r=s?"PUT":"POST",l=await fetch(n,{method:r,headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(t)});if(l.ok)ts.success("".concat(f.charAt(0).toUpperCase()+f.slice(1)," ").concat(s?"updated":"created"," successfully")),p(!1),k(),_();else{const e=await l.json();ts.error(e.detail||"Failed to ".concat(s?"update":"create"))}}catch(e){ts.error("Failed to save")}finally{j(!1)}}else ts.error("Name and Code are required")},disabled:y,"data-testid":"submit-btn",children:y?"Saving...":v?"Update":"Create"})]})]})})]})},dF=["__scopeCheckbox","onKeyDown","onClick"],uF=["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],hF=["__scopeCheckbox","forceMount"],mF=["__scopeCheckbox"];var pF="Checkbox",[fF,xF]=Kn(pF),[vF,gF]=fF(pF);function yF(e){const{__scopeCheckbox:t,checked:s,children:n,defaultChecked:r,disabled:l,form:i,name:o,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:m}=e,[p,f]=tr({prop:s,defaultProp:null!==r&&void 0!==r&&r,onChange:c,caller:pF}),[x,v]=a.useState(null),[g,y]=a.useState(null),j=a.useRef(!1),b=!x||(!!i||!!x.closest("form")),w={checked:p,disabled:l,setChecked:f,control:x,setControl:v,name:o,form:i,value:h,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:!EF(r)&&r,isFormControl:b,bubbleInput:g,setBubbleInput:y};return(0,ds.jsx)(vF,u(u({scope:t},w),{},{children:CF(m)?m(w):n}))}var jF="CheckboxTrigger",bF=a.forwardRef((e,t)=>{let{__scopeCheckbox:s,onKeyDown:n,onClick:r}=e,i=l(e,dF);const{control:o,value:c,disabled:d,checked:h,required:m,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:v,bubbleInput:g}=gF(jF,s),y=Rs(t,p),j=a.useRef(h);return a.useEffect(()=>{const e=null===o||void 0===o?void 0:o.form;if(e){const t=()=>f(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,f]),(0,ds.jsx)(cr.button,u(u({type:"button",role:"checkbox","aria-checked":EF(h)?"mixed":h,"aria-required":m,"data-state":TF(h),"data-disabled":d?"":void 0,disabled:d,value:c},i),{},{ref:y,onKeyDown:qn(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:qn(r,e=>{f(e=>!!EF(e)||!e),g&&v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}))});bF.displayName=jF;var wF=a.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:a,checked:n,defaultChecked:r,required:i,disabled:o,value:c,onCheckedChange:d,form:h}=e,m=l(e,uF);return(0,ds.jsx)(yF,{__scopeCheckbox:s,checked:n,defaultChecked:r,disabled:o,required:i,onCheckedChange:d,name:a,form:h,value:c,internal_do_not_use_render:e=>{let{isFormControl:a}=e;return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(bF,u(u({},m),{},{ref:t,__scopeCheckbox:s})),a&&(0,ds.jsx)(SF,{__scopeCheckbox:s})]})}})});wF.displayName=pF;var NF="CheckboxIndicator",_F=a.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:a}=e,n=l(e,hF),r=gF(NF,s);return(0,ds.jsx)(Mr,{present:a||EF(r.checked)||!0===r.checked,children:(0,ds.jsx)(cr.span,u(u({"data-state":TF(r.checked),"data-disabled":r.disabled?"":void 0},n),{},{ref:t,style:u({pointerEvents:"none"},e.style)}))})});_F.displayName=NF;var kF="CheckboxBubbleInput",SF=a.forwardRef((e,t)=>{let{__scopeCheckbox:s}=e,n=l(e,mF);const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:c,required:d,disabled:h,name:m,value:p,form:f,bubbleInput:x,setBubbleInput:v}=gF(kF,s),g=Rs(t,v),y=SS(o),j=yy(r);a.useEffect(()=>{const e=x;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,a=!i.current;if(y!==o&&s){const t=new Event("click",{bubbles:a});e.indeterminate=EF(o),s.call(e,!EF(o)&&o),e.dispatchEvent(t)}},[x,y,o,i]);const b=a.useRef(!EF(o)&&o);return(0,ds.jsx)(cr.input,u(u({type:"checkbox","aria-hidden":!0,defaultChecked:null!==c&&void 0!==c?c:b.current,required:d,disabled:h,name:m,value:p,form:f},n),{},{tabIndex:-1,ref:g,style:u(u(u({},n.style),j),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function CF(e){return"function"===typeof e}function EF(e){return"indeterminate"===e}function TF(e){return EF(e)?"indeterminate":e?"checked":"unchecked"}SF.displayName=kF;const AF=["className"],PF=a.forwardRef((e,t)=>{let{className:s}=e,a=l(e,AF);return(0,ds.jsx)(wF,u(u({ref:t,className:hn("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s)},a),{},{children:(0,ds.jsx)(_F,{className:hn("flex items-center justify-center text-current"),children:(0,ds.jsx)(Xw,{className:"h-4 w-4"})})}))});PF.displayName=wF.displayName;const DF=Yi("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),RF=Yi("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),OF=Yi("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),MF=Yi("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),FF=Yi("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),LF="https://shardahrms.com/api",IF=()=>{var e,t,s,n,r,l,i,o,c,d;const{user:h}=Cs(),m="super_admin"===(null===h||void 0===h?void 0:h.role)||"hr_admin"===(null===h||void 0===h?void 0:h.role)||"hr_executive"===(null===h||void 0===h?void 0:h.role),[p,f]=(0,a.useState)([]),[x,v]=(0,a.useState)([]),[g,y]=(0,a.useState)(!0),[j,b]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[_,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[E,T]=(0,a.useState)(null),[A,P]=(0,a.useState)(null),[D,R]=(0,a.useState)(null),[O,M]=(0,a.useState)(null),[F,L]=(0,a.useState)({}),[I,z]=(0,a.useState)({title:"",description:"",start_date:"",end_date:"",allow_self_nomination:!0,anonymous:!0,min_reviewers:3}),[B,U]=(0,a.useState)({target_employee_id:"",reviewer_ids:[]}),V=(0,a.useCallback)(async()=>{y(!0);try{const[e,t]=await Promise.all([fetch("".concat(LF,"/helpdesk/feedback-cycles"),{headers:nk(),credentials:"include"}),fetch("".concat(LF,"/employees"),{headers:nk(),credentials:"include"})]);e.ok&&f(await e.json()),t.ok&&v(await t.json())}catch(aI){console.error(aI)}finally{y(!1)}},[]);(0,a.useEffect)(()=>{V()},[V]);const H=async(e,t)=>{try{await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({status:t})}),ts.success("Cycle ".concat(t)),V()}catch(s){ts.error("Failed to update")}},W=async e=>{try{const t=await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(e,"/my-assignments"),{headers:nk(),credentials:"include"});t.ok&&P(await t.json())}catch(t){ts.error("Failed to fetch")}},q=e=>{const t={draft:"bg-slate-100 text-slate-700",active:"bg-emerald-100 text-emerald-700",closed:"bg-red-100 text-red-700"};return t[e]||t.draft};return(0,ds.jsxs)("div",{className:"space-y-4","data-testid":"feedback-tab",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h3",{className:"text-lg font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"360-Degree Feedback"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Peer feedback cycles for professional growth"})]}),m&&(0,ds.jsxs)(fn,{onClick:()=>b(!0),"data-testid":"create-feedback-cycle-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-2"})," New Cycle"]})]}),g?(0,ds.jsx)("div",{className:"space-y-3",children:[...Array(3)].map((e,t)=>(0,ds.jsx)("div",{className:"h-20 skeleton rounded-xl"},t))}):0===p.length?(0,ds.jsxs)(Pn,{className:"p-8 text-center",children:[(0,ds.jsx)(y_,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No feedback cycles yet"})]}):(0,ds.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,ds.jsx)(Pn,{className:"interactive-card !p-4","data-testid":"cycle-".concat(e.cycle_id),children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)("h4",{className:"font-semibold text-slate-900",children:e.title}),(0,ds.jsx)(tk,{className:q(e.status),children:e.status})]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:e.description}),(0,ds.jsx)("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:m?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(k_,{className:"w-3 h-3"})," ",e.total_assignments||0," assignments"]}),(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(Yk,{className:"w-3 h-3"})," ",e.completed_assignments||0," completed"]})]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(p_,{className:"w-3 h-3"})," ",e.my_pending||0," pending"]}),(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(Yk,{className:"w-3 h-3"})," ",e.my_completed||0," done"]})]})})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,ds.jsxs)(ds.Fragment,{children:["draft"===e.status&&(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>H(e.cycle_id,"active"),children:"Activate"}),"active"===e.status&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>{T(e),N(!0)},children:[(0,ds.jsx)($M,{className:"w-3.5 h-3.5 mr-1"})," Assign"]}),(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>H(e.cycle_id,"closed"),children:"Close"})]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>{T(e),(async e=>{try{const t=await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(e,"/analytics"),{headers:nk(),credentials:"include"});t.ok&&R(await t.json())}catch(t){ts.error("Failed to fetch analytics")}})(e.cycle_id),C(!0)},children:[(0,ds.jsx)(R_,{className:"w-3.5 h-3.5 mr-1"})," Analytics"]}),"draft"===e.status&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(e),{method:"DELETE",headers:nk(),credentials:"include"}),ts.success("Cycle deleted"),V()}catch(t){ts.error("Failed to delete")}})(e.cycle_id),children:(0,ds.jsx)(dk,{className:"w-3.5 h-3.5 text-red-500"})})]}),!m&&"active"===e.status&&e.my_pending>0&&(0,ds.jsxs)(fn,{size:"sm",onClick:()=>{W(e.cycle_id),k(!0)},children:[(0,ds.jsx)(FF,{className:"w-3.5 h-3.5 mr-1"})," Give Feedback"]})]})]})},e.cycle_id))}),(0,ds.jsx)(eo,{open:j,onOpenChange:b,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create Feedback Cycle"}),(0,ds.jsx)(oo,{children:"Set up a new 360-degree peer review round"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-2",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:I.title,onChange:e=>z(u(u({},I),{},{title:e.target.value})),placeholder:"Q1 2026 Peer Review"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:I.description,onChange:e=>z(u(u({},I),{},{description:e.target.value})),placeholder:"Quarterly peer feedback for all teams",rows:2})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Date"}),(0,ds.jsx)(vn,{type:"date",value:I.start_date,onChange:e=>z(u(u({},I),{},{start_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Date"}),(0,ds.jsx)(vn,{type:"date",value:I.end_date,onChange:e=>z(u(u({},I),{},{end_date:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{children:"Anonymous Feedback"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"Reviewer identity hidden from employee"})]}),(0,ds.jsx)(JA,{checked:I.anonymous,onCheckedChange:e=>z(u(u({},I),{},{anonymous:e}))})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{children:"Allow Self-Nomination"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"Employees can nominate their own reviewers"})]}),(0,ds.jsx)(JA,{checked:I.allow_self_nomination,onCheckedChange:e=>z(u(u({},I),{},{allow_self_nomination:e}))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(I.title)try{(await fetch("".concat(LF,"/helpdesk/feedback-cycles"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(I)})).ok&&(ts.success("Feedback cycle created"),b(!1),V())}catch(nI){ts.error("Failed to create")}else ts.error("Title is required")},children:"Create Cycle"})]})]})}),(0,ds.jsx)(eo,{open:w,onOpenChange:N,children:(0,ds.jsxs)(no,{className:"max-w-lg max-h-[80vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Assign Reviewers"}),(0,ds.jsxs)(oo,{children:['Select who reviews whom in "',null===E||void 0===E?void 0:E.title,'"']})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-2",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee Being Reviewed *"}),(0,ds.jsxs)(yE,{value:B.target_employee_id,onValueChange:e=>U(u(u({},B),{},{target_employee_id:e,reviewer_ids:[]})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:x.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))})]})]}),B.target_employee_id&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{children:["Select Reviewers (",B.reviewer_ids.length," selected)"]}),(0,ds.jsx)("div",{className:"max-h-48 overflow-y-auto border rounded-lg divide-y",children:x.filter(e=>e.employee_id!==B.target_employee_id).map(e=>(0,ds.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-slate-50 cursor-pointer",children:[(0,ds.jsx)("input",{type:"checkbox",checked:B.reviewer_ids.includes(e.employee_id),onChange:()=>{return t=e.employee_id,void U(e=>u(u({},e),{},{reviewer_ids:e.reviewer_ids.includes(t)?e.reviewer_ids.filter(e=>e!==t):[...e.reviewer_ids,t]}));var t},className:"rounded border-slate-300"}),(0,ds.jsxs)("span",{className:"text-sm",children:[e.first_name," ",e.last_name]}),e.department&&(0,ds.jsx)("span",{className:"text-xs text-slate-400 ml-auto",children:e.department})]},e.employee_id))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(B.target_employee_id&&0!==B.reviewer_ids.length)try{const e=await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(E.cycle_id,"/assign"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(B)});if(e.ok){const t=await e.json();ts.success(t.message),N(!1),U({target_employee_id:"",reviewer_ids:[]})}}catch(e){ts.error("Failed to assign")}else ts.error("Select target employee and reviewers")},disabled:!B.target_employee_id||0===B.reviewer_ids.length,children:["Assign ",B.reviewer_ids.length," Reviewers"]})]})]})}),(0,ds.jsx)(eo,{open:_,onOpenChange:e=>{k(e),e||(M(null),L({}))},children:(0,ds.jsxs)(no,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:O?"Feedback for ".concat(O.target_name):"Your Feedback Assignments"}),(null===A||void 0===A||null===(e=A.cycle)||void 0===e?void 0:e.anonymous)&&(0,ds.jsx)(tk,{variant:"outline",className:"w-fit",children:(0,ds.jsx)("span",{className:"text-xs",children:"Anonymous"})})]}),!O&&A?(0,ds.jsxs)("div",{className:"space-y-2 py-2",children:[null===(t=A.assignments)||void 0===t?void 0:t.filter(e=>"pending"===e.status).map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-slate-50 cursor-pointer",onClick:()=>M(e),children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.target_name}),(0,ds.jsxs)("p",{className:"text-xs text-slate-400",children:[e.target_department," ",e.target_designation&&"- ".concat(e.target_designation)]})]}),(0,ds.jsx)($w,{className:"w-4 h-4 text-slate-400"})]},e.assignment_id)),0===(null===(s=A.assignments)||void 0===s?void 0:s.filter(e=>"pending"===e.status).length)&&(0,ds.jsx)("p",{className:"text-center py-6 text-slate-400",children:"All feedback submitted!"})]}):O&&A?(0,ds.jsxs)("div",{className:"space-y-5 py-2",children:[null===(n=A.cycle.questions)||void 0===n?void 0:n.map((e,t)=>(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"text-sm",children:[(0,ds.jsx)(tk,{variant:"outline",className:"mr-2 text-[10px]",children:e.category||"Q".concat(t+1)}),e.text]}),"rating"===e.type?(0,ds.jsxs)("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(t=>(0,ds.jsx)("button",{type:"button",onClick:()=>L(u(u({},F),{},{[e.question_id]:t})),className:"w-10 h-10 rounded-lg border-2 font-bold text-sm transition-all ".concat(F[e.question_id]===t?"bg-primary text-white border-primary shadow-lg shadow-primary/20":F[e.question_id]>t?"bg-primary/10 text-primary border-primary/30":"bg-white text-slate-400 border-slate-200 hover:border-primary/30"),children:t},t)),(0,ds.jsx)("span",{className:"self-center ml-2 text-xs text-slate-400",children:F[e.question_id]?"".concat(F[e.question_id],"/5"):"Rate 1-5"})]}):(0,ds.jsx)(kA,{rows:3,placeholder:"Your feedback...",value:F[e.question_id]||"",onChange:t=>L(u(u({},F),{},{[e.question_id]:t.target.value}))})]},e.question_id)),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{M(null),L({})},children:"Back"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(!O)return;const e=Object.entries(F).map(e=>{let[t,s]=e;return"number"===typeof s?{question_id:t,rating:s}:{question_id:t,answer:s}});try{(await fetch("".concat(LF,"/helpdesk/feedback-cycles/").concat(A.cycle.cycle_id,"/submit"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({assignment_id:O.assignment_id,answers:e})})).ok&&(ts.success("Feedback submitted"),k(!1),L({}),W(A.cycle.cycle_id))}catch(t){ts.error("Failed to submit")}},children:[(0,ds.jsx)(FF,{className:"w-4 h-4 mr-2"})," Submit Feedback"]})]})]}):null]})}),(0,ds.jsx)(eo,{open:S,onOpenChange:C,children:(0,ds.jsxs)(no,{className:"max-w-3xl max-h-[85vh] overflow-y-auto",children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)(io,{children:["Feedback Analytics \u2014 ",null===E||void 0===E?void 0:E.title]})}),D?(0,ds.jsxs)("div",{className:"space-y-6 py-2",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,ds.jsxs)("div",{className:"premium-stat stat-blue",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:null===(r=D.summary)||void 0===r?void 0:r.total_assignments}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Assignments"})]}),(0,ds.jsxs)("div",{className:"premium-stat stat-emerald",children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:null===(l=D.summary)||void 0===l?void 0:l.completed}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Completed"})]}),(0,ds.jsxs)("div",{className:"premium-stat stat-amber",children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-slate-800",children:[null===(i=D.summary)||void 0===i?void 0:i.completion_rate,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Completion Rate"})]})]}),(null===(o=D.question_summaries)||void 0===o?void 0:o.filter(e=>"rating"===e.type).length)>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Category Scores"})}),(0,ds.jsx)(Mn,{className:"space-y-3",children:D.question_summaries.filter(e=>"rating"===e.type).map(e=>(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ds.jsx)("span",{className:"font-medium",children:e.category||e.question_text}),(0,ds.jsxs)("span",{className:"font-bold text-primary",children:[e.average||"-","/5"]})]}),(0,ds.jsx)("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,ds.jsx)(Nx.div,{className:"h-full bg-primary rounded-full",initial:{width:0},animate:{width:"".concat((e.average||0)/5*100,"%")},transition:{duration:.8,delay:.1}})})]},e.question_id))})]}),(null===(c=D.employee_summaries)||void 0===c?void 0:c.length)>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Employee Rankings"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-2",children:D.employee_summaries.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50",children:[(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500",children:t+1}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:e.department})]}),(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsx)("p",{className:"text-sm font-bold text-primary",children:e.avg_score||"-"}),(0,ds.jsxs)("p",{className:"text-xs text-slate-400",children:[e.total_completed,"/",e.total_assigned]})]})]},e.employee_id))})})]}),null===(d=D.question_summaries)||void 0===d?void 0:d.filter(e=>{var t;return"long_text"===e.type&&(null===(t=e.responses)||void 0===t?void 0:t.length)>0}).map(e=>(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:e.category||e.question_text})}),(0,ds.jsx)(Mn,{className:"space-y-2 max-h-40 overflow-y-auto",children:e.responses.map((e,t)=>(0,ds.jsxs)("p",{className:"text-sm p-2.5 bg-slate-50 rounded-lg border border-slate-100",children:['"',e,'"']},t))})]},e.question_id))]}):(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]})})]})},zF="https://shardahrms.com/api",BF=e=>{var t,s,n,r,l,i,o,c,d,u,h,m,p;let{surveyId:f,isOpen:x,onClose:v}=e;const[g,y]=(0,a.useState)(null),[j,b]=(0,a.useState)(!0);(0,a.useEffect)(()=>{x&&f&&w()},[x,f]);const w=async()=>{b(!0);try{const e=await fetch("".concat(zF,"/helpdesk/surveys/").concat(f,"/analytics/detailed"),{headers:nk(),credentials:"include"});e.ok?y(await e.json()):ts.error("Failed to load analytics")}catch(nI){ts.error("Failed to load analytics")}finally{b(!1)}};if(!x)return null;const N=["bg-primary","bg-emerald-500","bg-amber-500","bg-rose-500","bg-purple-500","bg-cyan-500"];return(0,ds.jsx)(eo,{open:x,onOpenChange:v,children:(0,ds.jsxs)(no,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(io,{className:"text-xl",children:(null===g||void 0===g||null===(t=g.survey)||void 0===t?void 0:t.title)||"Survey Analytics"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:null===g||void 0===g||null===(s=g.survey)||void 0===s?void 0:s.description})]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:()=>{window.open("".concat(zF,"/helpdesk/surveys/").concat(f,"/export"),"_blank")},"data-testid":"export-survey-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-2"})," Export"]})]})}),j?(0,ds.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,ds.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):g?(0,ds.jsxs)("div",{className:"space-y-6 mt-2",children:[(0,ds.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Recipients",value:(null===(n=g.summary)||void 0===n?void 0:n.total_recipients)||0,icon:k_,color:"blue"},{label:"Responses",value:(null===(r=g.summary)||void 0===r?void 0:r.total_responses)||0,icon:Yk,color:"emerald"},{label:"Response Rate",value:"".concat((null===(l=g.summary)||void 0===l?void 0:l.response_rate)||0,"%"),icon:R_,color:"amber"},{label:"Overall Score",value:null!==(i=g.summary)&&void 0!==i&&i.overall_score?"".concat(g.summary.overall_score,"/5"):"N/A",icon:Zk,color:"purple"}].map((e,t)=>(0,ds.jsx)(Nx.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.08*t},children:(0,ds.jsxs)("div",{className:"premium-stat stat-".concat(e.color),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(e.icon,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("span",{className:"text-xs font-medium text-slate-500",children:e.label})]}),(0,ds.jsx)("p",{className:"text-xl font-bold text-slate-800",children:e.value})]})},t))}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"pt-5",children:(0,ds.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ds.jsxs)("div",{className:"relative w-24 h-24",children:[(0,ds.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-24 h-24 -rotate-90",children:[(0,ds.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"hsl(220 14% 95%)",strokeWidth:"8",fill:"none"}),(0,ds.jsx)(Nx.circle,{cx:"50",cy:"50",r:"40",stroke:"hsl(243 75% 49%)",strokeWidth:"8",fill:"none",strokeDasharray:"".concat(((null===(o=g.summary)||void 0===o?void 0:o.response_rate)||0)/100*251.2," 251.2"),strokeLinecap:"round",initial:{strokeDasharray:"0 251.2"},animate:{strokeDasharray:"".concat(((null===(c=g.summary)||void 0===c?void 0:c.response_rate)||0)/100*251.2," 251.2")},transition:{duration:1,ease:"easeOut"}})]}),(0,ds.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ds.jsxs)("span",{className:"text-lg font-bold",children:[(null===(d=g.summary)||void 0===d?void 0:d.response_rate)||0,"%"]})})]}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Response Rate"}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(u=g.summary)||void 0===u?void 0:u.total_responses," of ",null===(h=g.summary)||void 0===h?void 0:h.total_recipients," responded"]}),(null===(m=g.summary)||void 0===m?void 0:m.started)&&(0,ds.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Started: ",new Date(g.summary.started).toLocaleDateString()]})]})]})})}),Object.keys(g.department_breakdown||{}).length>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Department Response Breakdown"})}),(0,ds.jsx)(Mn,{className:"space-y-2",children:Object.entries(g.department_breakdown).sort((e,t)=>t[1].count-e[1].count).map((e,t)=>{var s;let[a,n]=e;return(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"text-sm w-28 truncate font-medium",children:a}),(0,ds.jsx)("div",{className:"flex-1 h-7 bg-slate-100 rounded-lg overflow-hidden",children:(0,ds.jsx)(Nx.div,{className:"h-full ".concat(N[t%N.length]," rounded-lg flex items-center px-2"),initial:{width:0},animate:{width:"".concat(Math.max(n.count/((null===(s=g.summary)||void 0===s?void 0:s.total_responses)||1)*100,8),"%")},transition:{duration:.6,delay:.05*t},children:(0,ds.jsx)("span",{className:"text-xs font-bold text-white",children:n.count})})})]},a)})})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("h3",{className:"font-semibold text-sm text-slate-700",children:"Question Breakdown"}),null===(p=g.question_analytics)||void 0===p?void 0:p.map((e,t)=>{var s,a,n,r,l,i,o,c,d,u;return(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"pt-4 space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ds.jsxs)("p",{className:"font-medium text-sm flex-1",children:["Q",t+1,": ",e.question_text]}),(0,ds.jsxs)(tk,{variant:"outline",className:"text-[10px] shrink-0 ml-2",children:[e.total_responses," responses"]})]}),"rating"!==e.type&&"nps"!==e.type&&"satisfaction"!==e.type||null===(s=e.analytics)||void 0===s||!s.average?"single_choice"===e.type||"multiple_choice"===e.type||"yes_no"===e.type?(0,ds.jsx)("div",{className:"space-y-2",children:Object.entries((null===(a=e.analytics)||void 0===a?void 0:a.option_counts)||{}).sort((e,t)=>t[1]-e[1]).map((t,s)=>{let[a,n]=t;const r=e.total_responses>0?Math.round(n/e.total_responses*100):0;return(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"text-sm w-28 truncate",children:a}),(0,ds.jsx)("div",{className:"flex-1 h-6 bg-slate-100 rounded-lg overflow-hidden",children:(0,ds.jsx)(Nx.div,{className:"h-full ".concat(N[s%N.length]," rounded-lg"),initial:{width:0},animate:{width:"".concat(r,"%")},transition:{duration:.5,delay:.05*s}})}),(0,ds.jsxs)("span",{className:"text-xs font-semibold w-14 text-right",children:[n," (",r,"%)"]})]},a)})}):(0,ds.jsxs)("div",{className:"space-y-1.5 max-h-32 overflow-y-auto",children:[null===(n=e.analytics)||void 0===n||null===(r=n.responses)||void 0===r?void 0:r.slice(0,8).map((e,t)=>(0,ds.jsxs)("p",{className:"text-sm p-2 bg-slate-50 rounded-lg border border-slate-100 italic",children:['"',e,'"']},t)),((null===(l=e.analytics)||void 0===l?void 0:l.total_text)||(null===(i=e.analytics)||void 0===i||null===(o=i.responses)||void 0===o?void 0:o.length)||0)>8&&(0,ds.jsxs)("p",{className:"text-xs text-slate-400 text-center",children:["+",((null===(c=e.analytics)||void 0===c?void 0:c.total_text)||(null===(d=e.analytics)||void 0===d||null===(u=d.responses)||void 0===u?void 0:u.length))-8," more responses"]})]}):(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsx)("div",{className:"flex items-center gap-3",children:(0,ds.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,ds.jsx)(Zk,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),(0,ds.jsx)("span",{className:"text-2xl font-bold",children:e.analytics.average}),(0,ds.jsxs)("span",{className:"text-slate-400 text-sm",children:["/ ","nps"===e.type?10:5]})]})}),(0,ds.jsx)("div",{className:"flex items-end gap-1.5 h-16",children:Object.entries(e.analytics.distribution||{}).sort((e,t)=>Number(e[0])-Number(t[0])).map(t=>{let[s,a]=t;const n=e.total_responses>0?a/e.total_responses*100:0;return(0,ds.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,ds.jsx)(Nx.div,{className:"w-full bg-primary/80 rounded-t-md",style:{minHeight:4},initial:{height:4},animate:{height:"".concat(Math.max(.6*n,4),"px")},transition:{duration:.5,delay:.05*Number(s)}}),(0,ds.jsx)("span",{className:"text-[10px] font-semibold text-slate-500",children:s}),(0,ds.jsx)("span",{className:"text-[9px] text-slate-400",children:a})]},s)})}),Object.keys(e.dept_breakdown||{}).length>0&&(0,ds.jsxs)("div",{className:"pt-2 border-t",children:[(0,ds.jsx)("p",{className:"text-xs font-medium text-slate-400 mb-1.5",children:"By Department"}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.dept_breakdown).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,s]=e;return(0,ds.jsxs)("span",{className:"text-xs px-2 py-1 bg-slate-50 rounded-md border",children:[t,": ",(0,ds.jsx)("strong",{children:s})]},t)})})]})]})]})},e.question_id)})]}),Object.keys(g.response_timeline||{}).length>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsx)(Rn,{className:"text-sm",children:"Response Timeline"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"flex items-end gap-2 h-20",children:Object.entries(g.response_timeline).map((e,t)=>{let[s,a]=e;const n=Math.max(...Object.values(g.response_timeline)),r=n>0?a/n*100:0;return(0,ds.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",title:"".concat(s,": ").concat(a," responses"),children:[(0,ds.jsx)(Nx.div,{className:"w-full bg-primary/70 rounded-t",initial:{height:0},animate:{height:"".concat(Math.max(.6*r,4),"px")},transition:{duration:.4,delay:.03*t}}),(0,ds.jsx)("span",{className:"text-[9px] text-slate-400 -rotate-45 origin-top-left whitespace-nowrap",children:new Date(s).toLocaleDateString("en",{month:"short",day:"numeric"})})]},s)})})})]})]}):null]})})},UF="https://shardahrms.com/api",VF=()=>{var e,t,s,n,r,l,i,o,c,d;const{user:h}=Cs(),[m,p]=(0,a.useState)(!0),[f,x]=(0,a.useState)("complaints"),[v,g]=(0,a.useState)([]),[y,j]=(0,a.useState)("all"),[b,w]=(0,a.useState)(!1),[N,_]=(0,a.useState)(null),[k,S]=(0,a.useState)({category:"general",subject:"",description:"",priority:"medium",is_anonymous:!1}),[C,E]=(0,a.useState)([]),[T,A]=(0,a.useState)(!1),[P,D]=(0,a.useState)(null),[R,O]=(0,a.useState)({title:"",description:"",category:"general",is_anonymous:!1}),[M,F]=(0,a.useState)(""),[L,I]=(0,a.useState)([]),[z,B]=(0,a.useState)(!1),[U,V]=(0,a.useState)(null),[H,W]=(0,a.useState)({builtin_templates:[],saved_templates:[]}),[q,Y]=(0,a.useState)({title:"",description:"",survey_type:"custom",is_anonymous:!1,is_mandatory:!1,allow_edit:!0,target_type:"all",target_employees:[],target_departments:[],target_locations:[],questions:[],end_date:""}),[G,K]=(0,a.useState)(null),[$,X]=(0,a.useState)(null),[J,Q]=(0,a.useState)([]),[Z,ee]=(0,a.useState)([]),[te,se]=(0,a.useState)([]),[ae,ne]=(0,a.useState)(""),[re,le]=(0,a.useState)(!1),[ie,oe]=(0,a.useState)(null),[ce,de]=(0,a.useState)({}),ue="super_admin"===(null===h||void 0===h?void 0:h.role)||"hr_admin"===(null===h||void 0===h?void 0:h.role)||"hr_executive"===(null===h||void 0===h?void 0:h.role),he="super_admin"===(null===h||void 0===h?void 0:h.role);(0,a.useEffect)(()=>{me()},[f]);const me=async()=>{p(!0);try{"complaints"===f?await pe():"suggestions"===f?await xe():"surveys"===f&&(await ve(),ue&&await ge())}finally{p(!1)}},pe=async()=>{try{let e="".concat(UF,"/grievances?");"all"!==y&&(e+="status=".concat(y));const t=await fetch(e,{credentials:"include",headers:nk()});t.ok&&g(await t.json())}catch(e){console.error("Error:",e)}},fe=async(e,t)=>{try{(await fetch("".concat(UF,"/grievances/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({status:t})})).ok&&(ts.success("Status updated"),pe(),_(null))}catch(s){ts.error("Failed to update status")}},xe=async()=>{try{const e=await fetch("".concat(UF,"/helpdesk/suggestions"),{credentials:"include",headers:nk()});e.ok&&E(await e.json())}catch(e){console.error("Error:",e)}},ve=async()=>{try{const e=await fetch("".concat(UF,"/helpdesk/surveys"),{credentials:"include",headers:nk()});e.ok&&I(await e.json())}catch(e){console.error("Error:",e)}},ge=async()=>{try{const[e,t,s,a]=await Promise.all([fetch("".concat(UF,"/helpdesk/survey-templates"),{credentials:"include",headers:nk()}),fetch("".concat(UF,"/helpdesk/departments"),{credentials:"include",headers:nk()}),fetch("".concat(UF,"/helpdesk/locations"),{credentials:"include",headers:nk()}),fetch("".concat(UF,"/helpdesk/employees-for-selection"),{credentials:"include",headers:nk()})]);e.ok&&W(await e.json()),t.ok&&ee(await t.json()),s.ok&&se(await s.json()),a.ok&&Q(await a.json())}catch(e){console.error("Error:",e)}},[ye,je]=(0,a.useState)(null),be=()=>{Y({title:"",description:"",survey_type:"custom",is_anonymous:!1,is_mandatory:!1,allow_edit:!0,target_type:"all",target_employees:[],target_departments:[],target_locations:[],questions:[],end_date:""})},we=(e,t,s)=>{const a=[...q.questions];a[e]=u(u({},a[e]),{},{[t]:s}),Y(u(u({},q),{},{questions:a}))},Ne=e=>({draft:"bg-slate-100 text-slate-700",scheduled:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-600",open:"bg-amber-100 text-amber-700",in_progress:"bg-blue-100 text-blue-700",resolved:"bg-green-100 text-green-700",submitted:"bg-blue-100 text-blue-700",under_review:"bg-amber-100 text-amber-700",acknowledged:"bg-green-100 text-green-700",implemented:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700"}[e]||"bg-slate-100 text-slate-700"),_e=e=>({low:"bg-slate-100 text-slate-600",medium:"bg-amber-100 text-amber-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"}[e]||"bg-slate-100 text-slate-600"),ke=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-";return(0,ds.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Helpdesk"}),(0,ds.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:[(0,ds.jsx)(b_,{className:"w-7 h-7 text-primary"}),"Helpdesk"]}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Complaints, suggestions, and surveys"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)(fn,{variant:"outline",onClick:me,children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2"})," Refresh"]})]}),(0,ds.jsxs)(cA,{value:f,onValueChange:x,children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsxs)(uA,{value:"complaints",className:"gap-2",children:[(0,ds.jsx)(ik,{className:"w-4 h-4"})," Complaints"]}),(0,ds.jsxs)(uA,{value:"suggestions",className:"gap-2",children:[(0,ds.jsx)(DF,{className:"w-4 h-4"})," Suggestions"]}),(0,ds.jsxs)(uA,{value:"surveys",className:"gap-2",children:[(0,ds.jsx)(RF,{className:"w-4 h-4"})," Surveys"]}),(0,ds.jsxs)(uA,{value:"feedback",className:"gap-2",children:[(0,ds.jsx)(y_,{className:"w-4 h-4"})," 360 Feedback"]})]}),(0,ds.jsx)(hA,{value:"complaints",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Complaints & Tickets"}),(0,ds.jsx)(On,{children:"Submit and track workplace issues"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:y,onValueChange:j,children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"open",children:"Open"}),(0,ds.jsx)(kE,{value:"in_progress",children:"In Progress"}),(0,ds.jsx)(kE,{value:"resolved",children:"Resolved"}),(0,ds.jsx)(kE,{value:"closed",children:"Closed"})]})]}),(0,ds.jsxs)(fn,{onClick:()=>w(!0),children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," New Ticket"]})]})]})}),(0,ds.jsx)(Mn,{children:v.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Ticket ID"}),(0,ds.jsx)(gS,{children:"Subject"}),(0,ds.jsx)(gS,{children:"Category"}),(0,ds.jsx)(gS,{children:"Priority"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"Submitted"}),(0,ds.jsx)(gS,{children:"Actions"})]})}),(0,ds.jsx)(xS,{children:v.map(e=>{var t,s;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-mono text-sm",children:e.ticket_id}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.subject}),e.is_anonymous&&(0,ds.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,ds.jsx)(kx,{className:"w-3 h-3"})," Anonymous"]})]})}),(0,ds.jsx)(yS,{className:"capitalize",children:null===(t=e.category)||void 0===t?void 0:t.replace("_"," ")}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:_e(e.priority),children:e.priority})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:Ne(e.status),children:null===(s=e.status)||void 0===s?void 0:s.replace("_"," ")})}),(0,ds.jsx)(yS,{className:"text-slate-500 text-sm",children:ke(e.created_at)}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>_(e),children:(0,ds.jsx)(xA,{className:"w-4 h-4"})})})]},e.ticket_id)})})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(ik,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No tickets found"})]})})]})}),(0,ds.jsx)(hA,{value:"suggestions",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Anonymous Suggestions"}),(0,ds.jsxs)(On,{children:["Submit ideas and suggestions ",!he&&"(anonymous to HR)"]})]}),(0,ds.jsxs)(fn,{onClick:()=>A(!0),children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," New Suggestion"]})]})}),(0,ds.jsx)(Mn,{children:C.length>0?(0,ds.jsx)("div",{className:"space-y-4",children:C.map(e=>{var t;return(0,ds.jsx)(Pn,{className:"border",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ds.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("h3",{className:"font-semibold",children:e.title}),(0,ds.jsx)(tk,{className:Ne(e.status),children:null===(t=e.status)||void 0===t?void 0:t.replace("_"," ")}),e.is_anonymous&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:[(0,ds.jsx)(kx,{className:"w-3 h-3 mr-1"})," Anonymous"]})]}),(0,ds.jsx)("p",{className:"text-slate-600 text-sm",children:e.description}),(0,ds.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,ds.jsx)("span",{children:ke(e.created_at)}),he&&e.submitter_name&&(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(sk,{className:"w-3 h-3"})," ",e.submitter_name]})]}),e.hr_response&&(0,ds.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"HR Response:"}),(0,ds.jsx)("p",{className:"text-sm text-blue-700",children:e.hr_response}),(0,ds.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["- ",e.hr_responded_by_name," on ",ke(e.hr_responded_at)]})]})]}),ue&&!e.hr_response&&(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>D(e),children:[(0,ds.jsx)(lk,{className:"w-4 h-4 mr-1"})," Respond"]})]})})},e.suggestion_id)})}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(DF,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No suggestions yet"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Be the first to share an idea!"})]})})]})}),(0,ds.jsx)(hA,{value:"surveys",className:"space-y-4",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:ue?"Survey Management":"My Surveys"}),(0,ds.jsx)(On,{children:ue?"Create and manage employee surveys":"Surveys assigned to you"})]}),ue&&(0,ds.jsxs)(fn,{onClick:()=>B(!0),children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," Create Survey"]})]})}),(0,ds.jsx)(Mn,{children:L.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Title"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{children:"Status"}),ue&&(0,ds.jsx)(gS,{children:"Responses"}),(0,ds.jsx)(gS,{children:"Deadline"}),(0,ds.jsx)(gS,{children:"Actions"})]})}),(0,ds.jsx)(xS,{children:L.map(e=>{var t,s;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.title}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:null===(t=e.description)||void 0===t?void 0:t.slice(0,50)})]})}),(0,ds.jsx)(yS,{className:"capitalize",children:(0,ds.jsx)(tk,{variant:"outline",children:null===(s=e.survey_type)||void 0===s?void 0:s.replace("_"," ")})}),(0,ds.jsxs)(yS,{children:[(0,ds.jsx)(tk,{className:Ne(e.status),children:e.status}),!ue&&e.my_status&&(0,ds.jsx)(tk,{className:"ml-1 ".concat("completed"===e.my_status?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:e.my_status})]}),ue&&(0,ds.jsxs)(yS,{children:[(0,ds.jsx)("span",{className:"font-medium",children:e.total_responses||0}),(0,ds.jsxs)("span",{className:"text-slate-400",children:["/",e.total_recipients||0]}),(0,ds.jsxs)("span",{className:"text-xs text-slate-500 ml-1",children:["(",e.response_rate||0,"%)"]})]}),(0,ds.jsx)(yS,{className:"text-slate-500 text-sm",children:e.end_date?ke(e.end_date):"No deadline"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)("div",{className:"flex gap-1",children:ue?(0,ds.jsxs)(ds.Fragment,{children:["draft"===e.status&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{(await fetch("".concat(UF,"/helpdesk/surveys/").concat(e,"/activate"),{method:"POST",headers:nk(),credentials:"include"})).ok&&(ts.success("Survey activated and notifications sent"),ve())}catch(t){ts.error("Failed to activate survey")}})(e.survey_id),title:"Activate",children:(0,ds.jsx)(ZO,{className:"w-4 h-4 text-green-600"})}),"active"===e.status&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{(await fetch("".concat(UF,"/helpdesk/surveys/").concat(e,"/close"),{method:"POST",headers:nk(),credentials:"include"})).ok&&(ts.success("Survey closed"),ve())}catch(t){ts.error("Failed to close survey")}})(e.survey_id),title:"Close",children:(0,ds.jsx)(Gi,{className:"w-4 h-4 text-amber-600"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>je(e.survey_id),title:"View Results",children:(0,ds.jsx)(R_,{className:"w-4 h-4 text-blue-600"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{(await fetch("".concat(UF,"/helpdesk/surveys/").concat(e,"/duplicate"),{method:"POST",headers:nk(),credentials:"include"})).ok&&(ts.success("Survey duplicated"),ve())}catch(t){ts.error("Failed to duplicate survey")}})(e.survey_id),title:"Duplicate",children:(0,ds.jsx)(OF,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(async e=>{if(window.confirm("Delete this survey and all responses?"))try{(await fetch("".concat(UF,"/helpdesk/surveys/").concat(e),{method:"DELETE",headers:nk(),credentials:"include"})).ok&&(ts.success("Survey deleted"),ve())}catch(t){ts.error("Failed to delete survey")}})(e.survey_id),title:"Delete",children:(0,ds.jsx)(dk,{className:"w-4 h-4 text-red-600"})})]}):"active"===e.status&&"completed"!==e.my_status&&(0,ds.jsxs)(fn,{size:"sm",onClick:()=>(async e=>{if(oe(e),de({}),e.my_response){var t;const s={};null===(t=e.my_response.answers)||void 0===t||t.forEach(e=>{s[e.question_id]=e}),de(s)}le(!0)})(e),children:[(0,ds.jsx)(M_,{className:"w-4 h-4 mr-1"})," Take Survey"]})})})]},e.survey_id)})})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(RF,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:ue?"No surveys created yet":"No surveys assigned to you"})]})})]})}),(0,ds.jsx)(hA,{value:"feedback",className:"space-y-4",children:(0,ds.jsx)(IF,{})})]}),(0,ds.jsx)(BF,{surveyId:ye,isOpen:!!ye,onClose:()=>je(null)}),(0,ds.jsx)(eo,{open:b,onOpenChange:w,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Submit a Complaint"}),(0,ds.jsx)(oo,{children:"Report an issue or concern"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:k.category,onValueChange:e=>S(u(u({},k),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"general",children:"General Query"}),(0,ds.jsx)(kE,{value:"payroll",children:"Payroll Issue"}),(0,ds.jsx)(kE,{value:"leave",children:"Leave Related"}),(0,ds.jsx)(kE,{value:"harassment",children:"Harassment"}),(0,ds.jsx)(kE,{value:"workplace",children:"Workplace Concern"}),(0,ds.jsx)(kE,{value:"benefits",children:"Benefits & Insurance"}),(0,ds.jsx)(kE,{value:"it_support",children:"IT Support"}),(0,ds.jsx)(kE,{value:"policy",children:"Policy Clarification"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Priority"}),(0,ds.jsxs)(yE,{value:k.priority,onValueChange:e=>S(u(u({},k),{},{priority:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"low",children:"Low"}),(0,ds.jsx)(kE,{value:"medium",children:"Medium"}),(0,ds.jsx)(kE,{value:"high",children:"High"}),(0,ds.jsx)(kE,{value:"critical",children:"Critical"})]})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Subject *"}),(0,ds.jsx)(vn,{value:k.subject,onChange:e=>S(u(u({},k),{},{subject:e.target.value})),placeholder:"Brief description of the issue"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description *"}),(0,ds.jsx)(kA,{value:k.description,onChange:e=>S(u(u({},k),{},{description:e.target.value})),placeholder:"Provide details...",rows:4})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(PF,{checked:k.is_anonymous,onCheckedChange:e=>S(u(u({},k),{},{is_anonymous:e}))}),(0,ds.jsx)(_n,{className:"text-sm",children:"Submit anonymously"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(k.subject&&k.description)try{(await fetch("".concat(UF,"/grievances"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(k)})).ok&&(ts.success("Ticket submitted"),w(!1),S({category:"general",subject:"",description:"",priority:"medium",is_anonymous:!1}),pe())}catch(e){ts.error("Failed to submit ticket")}else ts.error("Please fill required fields")},children:"Submit Ticket"})]})]})}),(0,ds.jsx)(eo,{open:!!N,onOpenChange:()=>_(null),children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)(io,{children:["Ticket: ",null===N||void 0===N?void 0:N.ticket_id]})}),N&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Category"}),(0,ds.jsx)("p",{className:"capitalize",children:null===(e=N.category)||void 0===e?void 0:e.replace("_"," ")})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Priority"}),(0,ds.jsx)(tk,{className:_e(N.priority),children:N.priority})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Status"}),(0,ds.jsx)(tk,{className:Ne(N.status),children:N.status})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Submitted"}),(0,ds.jsx)("p",{children:ke(N.created_at)})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Subject"}),(0,ds.jsx)("p",{className:"font-medium",children:N.subject})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Description"}),(0,ds.jsx)("p",{className:"text-slate-700",children:N.description})]}),N.resolution&&(0,ds.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,ds.jsx)(_n,{className:"text-green-700",children:"Resolution"}),(0,ds.jsx)("p",{className:"text-green-800",children:N.resolution})]}),ue&&"closed"!==N.status&&(0,ds.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:["open"===N.status&&(0,ds.jsx)(fn,{size:"sm",onClick:()=>fe(N.ticket_id,"in_progress"),children:"Mark In Progress"}),"in_progress"===N.status&&(0,ds.jsx)(fn,{size:"sm",onClick:()=>fe(N.ticket_id,"resolved"),children:"Mark Resolved"}),(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>fe(N.ticket_id,"closed"),children:"Close Ticket"})]})]})]})}),(0,ds.jsx)(eo,{open:T,onOpenChange:A,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Submit a Suggestion"}),(0,ds.jsx)(oo,{children:"Share your ideas to improve the workplace"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:R.category,onValueChange:e=>O(u(u({},R),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"general",children:"General"}),(0,ds.jsx)(kE,{value:"process",children:"Process Improvement"}),(0,ds.jsx)(kE,{value:"workplace",children:"Workplace"}),(0,ds.jsx)(kE,{value:"benefits",children:"Benefits"}),(0,ds.jsx)(kE,{value:"culture",children:"Culture"}),(0,ds.jsx)(kE,{value:"technology",children:"Technology"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:R.title,onChange:e=>O(u(u({},R),{},{title:e.target.value})),placeholder:"Brief title for your suggestion"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description *"}),(0,ds.jsx)(kA,{value:R.description,onChange:e=>O(u(u({},R),{},{description:e.target.value})),placeholder:"Explain your suggestion in detail...",rows:4})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(PF,{checked:R.is_anonymous,onCheckedChange:e=>O(u(u({},R),{},{is_anonymous:e}))}),(0,ds.jsx)(_n,{className:"text-sm",children:"Submit anonymously (visible only to super admin)"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(R.title&&R.description)try{(await fetch("".concat(UF,"/helpdesk/suggestions"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(R)})).ok&&(ts.success("Suggestion submitted"),A(!1),O({title:"",description:"",category:"general",is_anonymous:!1}),xe())}catch(e){ts.error("Failed to submit suggestion")}else ts.error("Please fill required fields")},children:"Submit Suggestion"})]})]})}),(0,ds.jsx)(eo,{open:!!P,onOpenChange:()=>D(null),children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Respond to Suggestion"})}),P&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("h3",{className:"font-medium",children:P.title}),(0,ds.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:P.description})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Your Response"}),(0,ds.jsx)(kA,{value:M,onChange:e=>F(e.target.value),placeholder:"Enter your response...",rows:4}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"This response will only be visible to the submitter"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>D(null),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(M)try{(await fetch("".concat(UF,"/helpdesk/suggestions/").concat(P.suggestion_id,"/respond"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({response:M,status:"acknowledged"})})).ok&&(ts.success("Response sent"),D(null),F(""),xe())}catch(e){ts.error("Failed to send response")}else ts.error("Please enter a response")},children:"Send Response"})]})]})}),(0,ds.jsx)(eo,{open:z,onOpenChange:B,children:(0,ds.jsxs)(no,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Create Survey"}),(0,ds.jsx)(oo,{children:"Design and configure your survey"})]}),(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start from Template (optional)"}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(t=H.builtin_templates)||void 0===t?void 0:t.map(e=>(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>{return t=e,Y(u(u({},q),{},{title:t.title||t.template_name,description:t.description||"",survey_type:t.survey_type,questions:t.questions.map(e=>u(u({},e),{},{question_id:"q_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,6))}))})),void ts.success("Template loaded");var t},children:e.template_name},e.template_id))})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Survey Title *"}),(0,ds.jsx)(vn,{value:q.title,onChange:e=>Y(u(u({},q),{},{title:e.target.value})),placeholder:"e.g., Employee Satisfaction Survey Q1"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Survey Type"}),(0,ds.jsxs)(yE,{value:q.survey_type,onValueChange:e=>Y(u(u({},q),{},{survey_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"poll",children:"Poll"}),(0,ds.jsx)(kE,{value:"text",children:"Text Survey"}),(0,ds.jsx)(kE,{value:"satisfaction",children:"Satisfaction Survey"}),(0,ds.jsx)(kE,{value:"engagement",children:"Employee Engagement"}),(0,ds.jsx)(kE,{value:"colleague_feedback",children:"Colleague/360 Feedback"}),(0,ds.jsx)(kE,{value:"pulse",children:"Pulse Check"}),(0,ds.jsx)(kE,{value:"custom",children:"Custom"})]})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:q.description,onChange:e=>Y(u(u({},q),{},{description:e.target.value})),placeholder:"Explain the purpose of this survey...",rows:2})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:q.is_anonymous,onCheckedChange:e=>Y(u(u({},q),{},{is_anonymous:e}))}),(0,ds.jsx)(_n,{className:"text-sm",children:"Anonymous responses"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:q.is_mandatory,onCheckedChange:e=>Y(u(u({},q),{},{is_mandatory:e}))}),(0,ds.jsx)(_n,{className:"text-sm",children:"Mandatory"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(JA,{checked:q.allow_edit,onCheckedChange:e=>Y(u(u({},q),{},{allow_edit:e}))}),(0,ds.jsx)(_n,{className:"text-sm",children:"Allow editing responses"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Deadline"}),(0,ds.jsx)(vn,{type:"date",value:q.end_date,onChange:e=>Y(u(u({},q),{},{end_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-3 p-4 border rounded-lg",children:[(0,ds.jsx)(_n,{className:"font-medium",children:"Target Audience"}),(0,ds.jsxs)(yE,{value:q.target_type,onValueChange:e=>Y(u(u({},q),{},{target_type:e,target_employees:[],target_departments:[],target_locations:[]})),children:[(0,ds.jsx)(bE,{className:"w-48",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Employees"}),(0,ds.jsx)(kE,{value:"selected",children:"Select Individuals"}),(0,ds.jsx)(kE,{value:"department",children:"By Department"}),(0,ds.jsx)(kE,{value:"location",children:"By Location"})]})]}),"selected"===q.target_type&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(vn,{placeholder:"Search employees...",value:ae,onChange:e=>ne(e.target.value)}),(0,ds.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded p-2",children:J.filter(e=>{var t;return""===ae||"".concat(e.first_name," ").concat(e.last_name).toLowerCase().includes(ae.toLowerCase())||(null===(t=e.emp_code)||void 0===t?void 0:t.toLowerCase().includes(ae.toLowerCase()))}).slice(0,20).map(e=>(0,ds.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,ds.jsx)(PF,{checked:q.target_employees.includes(e.employee_id),onCheckedChange:t=>{Y(u(u({},q),{},t?{target_employees:[...q.target_employees,e.employee_id]}:{target_employees:q.target_employees.filter(t=>t!==e.employee_id)}))}}),(0,ds.jsxs)("span",{className:"text-sm",children:[e.first_name," ",e.last_name," (",e.emp_code,")"]})]},e.employee_id))}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:[q.target_employees.length," selected"]})]}),"department"===q.target_type&&(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:Z.map(e=>(0,ds.jsxs)(fn,{size:"sm",variant:q.target_departments.includes(e.department_id)?"default":"outline",onClick:()=>{q.target_departments.includes(e.department_id)?Y(u(u({},q),{},{target_departments:q.target_departments.filter(t=>t!==e.department_id)})):Y(u(u({},q),{},{target_departments:[...q.target_departments,e.department_id]}))},children:[(0,ds.jsx)(F_,{className:"w-3 h-3 mr-1"})," ",e.name]},e.department_id))}),"location"===q.target_type&&(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:te.map(e=>(0,ds.jsxs)(fn,{size:"sm",variant:q.target_locations.includes(e.location)?"default":"outline",onClick:()=>{q.target_locations.includes(e.location)?Y(u(u({},q),{},{target_locations:q.target_locations.filter(t=>t!==e.location)})):Y(u(u({},q),{},{target_locations:[...q.target_locations,e.location]}))},children:[(0,ds.jsx)(Jk,{className:"w-3 h-3 mr-1"})," ",e.location]},e.location))})]}),(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)(_n,{className:"font-medium",children:["Questions (",q.questions.length,")"]}),(0,ds.jsxs)(fn,{size:"sm",onClick:()=>{const e={question_id:"q_".concat(Date.now()),type:"rating",text:"",scale:5,options:[],required:!0};Y(u(u({},q),{},{questions:[...q.questions,e]}))},children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"})," Add Question"]})]}),q.questions.map((e,t)=>{var s;return(0,ds.jsx)(Pn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ds.jsxs)("span",{className:"text-sm font-medium text-slate-500",children:["Q",t+1]}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>(e=>{const t=q.questions.filter((t,s)=>s!==e);Y(u(u({},q),{},{questions:t}))})(t),children:(0,ds.jsx)(dk,{className:"w-4 h-4 text-red-500"})})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,ds.jsx)("div",{className:"col-span-3",children:(0,ds.jsx)(vn,{value:e.text,onChange:e=>we(t,"text",e.target.value),placeholder:"Enter question text..."})}),(0,ds.jsxs)(yE,{value:e.type,onValueChange:e=>we(t,"type",e),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"rating",children:"Rating (1-5)"}),(0,ds.jsx)(kE,{value:"nps",children:"NPS (0-10)"}),(0,ds.jsx)(kE,{value:"single_choice",children:"Single Choice"}),(0,ds.jsx)(kE,{value:"multiple_choice",children:"Multiple Choice"}),(0,ds.jsx)(kE,{value:"yes_no",children:"Yes/No"}),(0,ds.jsx)(kE,{value:"text",children:"Short Text"}),(0,ds.jsx)(kE,{value:"long_text",children:"Long Text"})]})]})]}),("single_choice"===e.type||"multiple_choice"===e.type)&&(0,ds.jsxs)("div",{className:"space-y-1",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Options (comma-separated)"}),(0,ds.jsx)(vn,{value:(null===(s=e.options)||void 0===s?void 0:s.join(", "))||"",onChange:e=>we(t,"options",e.target.value.split(",").map(e=>e.trim())),placeholder:"Option 1, Option 2, Option 3..."})]})]})},e.question_id)}),0===q.questions.length&&(0,ds.jsxs)("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[(0,ds.jsx)(RF,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500 text-sm",children:"No questions added yet"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:'Click "Add Question" or load a template'})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{B(!1),be()},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(q.title&&0!==q.questions.length)try{(await fetch("".concat(UF,"/helpdesk/surveys"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(u(u({},q),{},{status:"draft"}))})).ok&&(ts.success("Survey created as draft"),B(!1),be(),ve())}catch(e){ts.error("Failed to create survey")}else ts.error("Please add a title and at least one question")},children:"Create Survey (Draft)"})]})]})}),(0,ds.jsx)(eo,{open:!!U&&!!$,onOpenChange:()=>{V(null),X(null)},children:(0,ds.jsxs)(no,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{children:["Survey Results: ",null===U||void 0===U?void 0:U.title]}),(0,ds.jsxs)(oo,{children:[(null===$||void 0===$||null===(s=$.summary)||void 0===s?void 0:s.total_responses)||0," of ",(null===$||void 0===$||null===(n=$.summary)||void 0===n?void 0:n.total_recipients)||0," responses (",(null===$||void 0===$||null===(r=$.summary)||void 0===r?void 0:r.response_rate)||0,"%)"]})]}),$&&(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,ds.jsxs)(Pn,{className:"p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Total Recipients"}),(0,ds.jsx)("p",{className:"text-2xl font-bold",children:(null===(l=$.summary)||void 0===l?void 0:l.total_recipients)||0})]}),(0,ds.jsxs)(Pn,{className:"p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Responses"}),(0,ds.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===(i=$.summary)||void 0===i?void 0:i.total_responses)||0})]}),(0,ds.jsxs)(Pn,{className:"p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Response Rate"}),(0,ds.jsxs)("p",{className:"text-2xl font-bold",children:[(null===(o=$.summary)||void 0===o?void 0:o.response_rate)||0,"%"]})]}),(0,ds.jsxs)(Pn,{className:"p-4",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Status"}),(0,ds.jsx)(tk,{className:Ne(null===U||void 0===U?void 0:U.status),children:null===U||void 0===U?void 0:U.status})]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("h3",{className:"font-semibold",children:"Question Breakdown"}),null===(c=$.question_analytics)||void 0===c?void 0:c.map((e,t)=>{var s,a,n,r,l,i,o;return(0,ds.jsx)(Pn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between",children:[(0,ds.jsxs)("p",{className:"font-medium",children:["Q",t+1,": ",e.question_text]}),(0,ds.jsxs)(tk,{variant:"outline",children:[e.total_responses," responses"]})]}),"rating"===e.type||"nps"===e.type||"satisfaction"===e.type?(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(Zk,{className:"w-5 h-5 text-amber-500"}),(0,ds.jsx)("span",{className:"text-2xl font-bold",children:(null===(s=e.analytics)||void 0===s?void 0:s.average)||0}),(0,ds.jsxs)("span",{className:"text-slate-500",children:["/ ","nps"===e.type?10:5]})]}),(0,ds.jsx)("div",{className:"flex gap-1",children:Object.entries((null===(a=e.analytics)||void 0===a?void 0:a.distribution)||{}).sort((e,t)=>Number(e[0])-Number(t[0])).map(t=>{let[s,a]=t;return(0,ds.jsxs)("div",{className:"text-center",children:[(0,ds.jsx)("div",{className:"w-8 bg-slate-200 rounded-t",style:{height:"".concat(a/e.total_responses*60,"px")}}),(0,ds.jsx)("span",{className:"text-xs",children:s})]},s)})})]}):"single_choice"===e.type||"multiple_choice"===e.type||"yes_no"===e.type?(0,ds.jsx)("div",{className:"space-y-2",children:Object.entries((null===(n=e.analytics)||void 0===n?void 0:n.option_counts)||{}).map(t=>{let[s,a]=t;return(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-32 text-sm truncate",children:s}),(0,ds.jsx)("div",{className:"flex-1 h-6 bg-slate-100 rounded overflow-hidden",children:(0,ds.jsx)("div",{className:"h-full bg-primary",style:{width:"".concat(a/e.total_responses*100,"%")}})}),(0,ds.jsxs)("span",{className:"text-sm font-medium w-16 text-right",children:[a," (",Math.round(a/e.total_responses*100),"%)"]})]},s)})}):(0,ds.jsxs)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[null===(r=e.analytics)||void 0===r||null===(l=r.responses)||void 0===l?void 0:l.slice(0,10).map((e,t)=>(0,ds.jsxs)("p",{className:"text-sm p-2 bg-slate-50 rounded",children:['"',e,'"']},t)),((null===(i=e.analytics)||void 0===i||null===(o=i.responses)||void 0===o?void 0:o.length)||0)>10&&(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["...and ",e.analytics.responses.length-10," more"]})]})]})},e.question_id)})]})]})]})}),(0,ds.jsx)(eo,{open:re,onOpenChange:le,children:(0,ds.jsxs)(no,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:null===ie||void 0===ie?void 0:ie.title}),(0,ds.jsx)(oo,{children:null===ie||void 0===ie?void 0:ie.description})]}),ie&&(0,ds.jsx)("div",{className:"space-y-6",children:null===(d=ie.questions)||void 0===d?void 0:d.map((e,t)=>{var s,a,n,r,l,i,o,c;return(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"font-medium",children:["Q",t+1,": ",e.text]}),"rating"===e.type&&(0,ds.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>{var s;return(0,ds.jsx)(fn,{size:"sm",variant:(null===(s=ce[e.question_id])||void 0===s?void 0:s.rating)===t?"default":"outline",onClick:()=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,rating:t}})),children:t},t)})}),"nps"===e.type&&(0,ds.jsx)("div",{className:"flex gap-1 flex-wrap",children:[0,1,2,3,4,5,6,7,8,9,10].map(t=>{var s;return(0,ds.jsx)(fn,{size:"sm",variant:(null===(s=ce[e.question_id])||void 0===s?void 0:s.rating)===t?"default":"outline",onClick:()=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,rating:t}})),className:"w-10",children:t},t)})}),"yes_no"===e.type&&(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{size:"sm",variant:"Yes"===(null===(s=ce[e.question_id])||void 0===s||null===(a=s.selected_options)||void 0===a?void 0:a[0])?"default":"outline",onClick:()=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,selected_options:["Yes"]}})),children:[(0,ds.jsx)(MF,{className:"w-4 h-4 mr-1"})," Yes"]}),(0,ds.jsx)(fn,{size:"sm",variant:"No"===(null===(n=ce[e.question_id])||void 0===n||null===(r=n.selected_options)||void 0===r?void 0:r[0])?"default":"outline",onClick:()=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,selected_options:["No"]}})),children:"No"})]}),"single_choice"===e.type&&(0,ds.jsx)("div",{className:"space-y-1",children:null===(l=e.options)||void 0===l?void 0:l.map(t=>{var s,a;return(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("input",{type:"radio",name:e.question_id,checked:(null===(s=ce[e.question_id])||void 0===s||null===(a=s.selected_options)||void 0===a?void 0:a[0])===t,onChange:()=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,selected_options:[t]}}))}),(0,ds.jsx)(_n,{className:"text-sm font-normal",children:t})]},t)})}),"multiple_choice"===e.type&&(0,ds.jsx)("div",{className:"space-y-1",children:null===(i=e.options)||void 0===i?void 0:i.map(t=>{var s,a;return(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(PF,{checked:null===(s=ce[e.question_id])||void 0===s||null===(a=s.selected_options)||void 0===a?void 0:a.includes(t),onCheckedChange:s=>{var a;const n=(null===(a=ce[e.question_id])||void 0===a?void 0:a.selected_options)||[],r=s?[...n,t]:n.filter(e=>e!==t);de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,selected_options:r}}))}}),(0,ds.jsx)(_n,{className:"text-sm font-normal",children:t})]},t)})}),"text"===e.type&&(0,ds.jsx)(vn,{value:(null===(o=ce[e.question_id])||void 0===o?void 0:o.answer)||"",onChange:t=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,answer:t.target.value}})),placeholder:"Your answer..."}),"long_text"===e.type&&(0,ds.jsx)(kA,{value:(null===(c=ce[e.question_id])||void 0===c?void 0:c.answer)||"",onChange:t=>de(u(u({},ce),{},{[e.question_id]:{question_id:e.question_id,answer:t.target.value}})),placeholder:"Your answer...",rows:3})]},e.question_id)})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>le(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{const e=Object.values(ce);try{(await fetch("".concat(UF,"/helpdesk/surveys/").concat(ie.survey_id,"/respond"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({answers:e})})).ok&&(ts.success("Response submitted"),le(!1),ve())}catch(t){ts.error("Failed to submit response")}},children:[(0,ds.jsx)(FF,{className:"w-4 h-4 mr-1"})," Submit Response"]})]})]})})]})},HF="https://shardahrms.com/api",WF=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[f,x]=(0,a.useState)({title:"",department_id:"",description:"",requirements:"",experience_min:0,experience_max:5,vacancies:1}),[v,g]=(0,a.useState)({cover_letter:""}),y="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"hr_executive"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{j()},[]);const j=async()=>{try{const[e,t,a]=await Promise.all([fetch("".concat(HF,"/recruitment/jobs"),{credentials:"include",headers:nk()}),fetch("".concat(HF,"/recruitment/applications"),{credentials:"include",headers:nk()}),fetch("".concat(HF,"/departments"),{credentials:"include",headers:nk()})]);e.ok&&s(await e.json()),t.ok&&r(await t.json()),a.ok&&i(await a.json())}catch(e){console.error("Error:",e)}finally{c(!1)}},b={draft:"bg-slate-100 text-slate-600",published:"bg-emerald-100 text-emerald-700",closed:"bg-red-100 text-red-700",on_hold:"bg-amber-100 text-amber-700"},w={applied:"bg-blue-100 text-blue-700",screening:"bg-amber-100 text-amber-700",interview:"bg-purple-100 text-purple-700",selected:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",withdrawn:"bg-slate-100 text-slate-600"},N=e=>{var t;return(null===(t=l.find(t=>t.department_id===e))||void 0===t?void 0:t.name)||e},_=e=>n.some(t=>t.job_id===e);return o?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"recruitment-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Recruitment"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Internal Jobs"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Browse and apply for internal opportunities"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),y&&(0,ds.jsxs)(eo,{open:d,onOpenChange:h,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"create-job-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Post New Job"]})}),(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Create Job Posting"})}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Job Title *"}),(0,ds.jsx)(vn,{value:f.title,onChange:e=>x(u(u({},f),{},{title:e.target.value})),placeholder:"Senior Software Engineer"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Department *"}),(0,ds.jsxs)(yE,{value:f.department_id,onValueChange:e=>x(u(u({},f),{},{department_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select"})}),(0,ds.jsx)(_E,{children:l.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Vacancies"}),(0,ds.jsx)(vn,{type:"number",value:f.vacancies,onChange:e=>x(u(u({},f),{},{vacancies:parseInt(e.target.value)})),min:1})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Min Experience (years)"}),(0,ds.jsx)(vn,{type:"number",value:f.experience_min,onChange:e=>x(u(u({},f),{},{experience_min:parseInt(e.target.value)})),min:0})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max Experience (years)"}),(0,ds.jsx)(vn,{type:"number",value:f.experience_max,onChange:e=>x(u(u({},f),{},{experience_max:parseInt(e.target.value)})),min:0})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:f.description,onChange:e=>x(u(u({},f),{},{description:e.target.value})),rows:3})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Requirements"}),(0,ds.jsx)(kA,{value:f.requirements,onChange:e=>x(u(u({},f),{},{requirements:e.target.value})),rows:3})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(f.title&&f.department_id)try{(await fetch("".concat(HF,"/recruitment/jobs"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(f)})).ok&&(ts.success("Job posting created"),h(!1),x({title:"",department_id:"",description:"",requirements:"",experience_min:0,experience_max:5,vacancies:1}),j())}catch(e){ts.error("Failed to create job")}else ts.error("Please fill required fields")},children:"Create Job"})]})]})]})]}),(0,ds.jsxs)(cA,{defaultValue:"jobs",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsxs)(uA,{value:"jobs",className:"gap-2","data-testid":"tab-jobs",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),"Open Positions"]}),(0,ds.jsxs)(uA,{value:"applications",className:"gap-2","data-testid":"tab-applications",children:[(0,ds.jsx)(M_,{className:"w-4 h-4"}),"My Applications"]})]}),(0,ds.jsx)(hA,{value:"jobs",children:(0,ds.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[t.filter(e=>"published"===e.status||y).map(e=>(0,ds.jsxs)(Pn,{className:"hover:shadow-md transition-shadow",children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:e.title}),(0,ds.jsxs)(On,{className:"flex items-center gap-2 mt-1",children:[(0,ds.jsx)("span",{children:N(e.department_id)}),e.location_id&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)("span",{children:"\u2022"}),(0,ds.jsx)(Jk,{className:"w-3 h-3"}),(0,ds.jsx)("span",{children:e.location_id})]})]})]}),(0,ds.jsx)(tk,{className:b[e.status],children:e.status})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2 mb-4",children:e.description}),(0,ds.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(p_,{className:"w-3 h-3"}),e.experience_min,"-",e.experience_max," yrs"]}),(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(k_,{className:"w-3 h-3"}),e.vacancies," opening",e.vacancies>1?"s":""]})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:["published"===e.status&&!_(e.job_id)&&(0,ds.jsxs)(fn,{size:"sm",className:"gap-1",onClick:()=>p(e),children:[(0,ds.jsx)(FF,{className:"w-3 h-3"}),"Apply"]}),_(e.job_id)&&(0,ds.jsx)(tk,{variant:"outline",children:"Applied"}),y&&"draft"===e.status&&(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{(await fetch("".concat(HF,"/recruitment/jobs/").concat(e,"/publish"),{method:"PUT",credentials:"include"})).ok&&(ts.success("Job published"),j())}catch(t){ts.error("Failed to publish")}})(e.job_id),children:"Publish"})]})]})]},e.job_id)),0===t.filter(e=>"published"===e.status||y).length&&(0,ds.jsx)(Pn,{className:"col-span-2",children:(0,ds.jsxs)(Mn,{className:"text-center py-12",children:[(0,ds.jsx)(T_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No job openings available"})]})})]})}),(0,ds.jsx)(hA,{value:"applications",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-lg",children:"My Applications"})}),(0,ds.jsx)(Mn,{children:n.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:n.map(e=>{const s=t.find(t=>t.job_id===e.job_id);return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:(null===s||void 0===s?void 0:s.title)||e.job_id}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:["Applied ",new Date(e.created_at).toLocaleDateString("en-IN")]})]}),(0,ds.jsx)(tk,{className:w[e.status],children:e.status})]},e.application_id)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No applications yet"})]})})]})})]}),(0,ds.jsx)(eo,{open:!!m,onOpenChange:()=>p(null),children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{children:["Apply for ",null===m||void 0===m?void 0:m.title]}),(0,ds.jsx)(oo,{children:"Submit your application for this internal position"})]}),(0,ds.jsx)("div",{className:"space-y-4 py-4",children:(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Cover Letter"}),(0,ds.jsx)(kA,{value:v.cover_letter,onChange:e=>g(u(u({},v),{},{cover_letter:e.target.value})),placeholder:"Why are you interested in this role?",rows:5})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>p(null),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:()=>(async e=>{try{const t=await fetch("".concat(HF,"/recruitment/applications"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({job_id:e,cover_letter:v.cover_letter})});if(t.ok)ts.success("Application submitted"),p(null),g({cover_letter:""}),j();else{const e=await t.json();ts.error(e.detail||"Failed to apply")}}catch(t){ts.error("Failed to apply")}})(null===m||void 0===m?void 0:m.job_id),children:"Submit Application"})]})]})})]})},qF=Yi("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),YF="https://shardahrms.com/api",GF=[{id:"pre_joining",name:"Pre-Joining",icon:M_,description:"Document collection and offer acceptance",tasks:["id_proof","pan_card","bank_details","address_proof","education_certs","offer_acceptance"]},{id:"day_1",name:"Day 1 Setup",icon:$k,description:"IT setup and workspace allocation",tasks:["id_card","laptop_assignment","email_setup","system_access","workstation"]},{id:"week_1",name:"Week 1 Training",icon:N_,description:"Mandatory trainings and introductions",tasks:["company_orientation","hr_policies","safety_training","department_intro","buddy_meeting"]},{id:"month_1",name:"Month 1 Review",icon:y_,description:"Initial feedback and goal setting",tasks:["mentor_checkin","initial_feedback","goal_setting","role_clarity"]},{id:"probation",name:"Probation Complete",icon:PA,description:"Performance evaluation and confirmation",tasks:["performance_review","confirmation_decision","final_feedback"]}],KF=()=>{var e;const{user:t}=Cs(),[s,n]=(0,a.useState)("pipeline"),[r,l]=(0,a.useState)(!0),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[x,v]=(0,a.useState)(null),[g,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[_,k]=(0,a.useState)([]),[S,C]=(0,a.useState)(!1),[E,T]=(0,a.useState)(""),[A,P]=(0,a.useState)("all"),[D,R]=(0,a.useState)({employee_id:"",joining_date:"",mentor_id:"",department_id:"",designation_id:""}),[O,M]=(0,a.useState)({requested_last_day:"",reason:"",reason_category:"personal"}),F="super_admin"===(null===t||void 0===t?void 0:t.role)||"hr_admin"===(null===t||void 0===t?void 0:t.role)||"hr_executive"===(null===t||void 0===t?void 0:t.role);(0,a.useEffect)(()=>{L()},[]);const L=async()=>{try{const e=nk(),[t,s,a,n,r]=await Promise.all([fetch("".concat(YF,"/employees"),{credentials:"include",headers:e}),fetch("".concat(YF,"/departments"),{credentials:"include",headers:e}),fetch("".concat(YF,"/designations"),{credentials:"include",headers:e}),fetch("".concat(YF,"/onboarding/records"),{credentials:"include",headers:e}),fetch("".concat(YF,"/onboarding/exit-requests"),{credentials:"include",headers:e})]);t.ok&&o(await t.json()),s.ok&&d(await s.json()),a.ok&&m(await a.json()),n.ok&&f(await n.json()),r.ok&&k(await r.json())}catch(e){console.error("Error fetching data:",e)}finally{l(!1)}},I=async(e,t)=>{try{const a=nk();var s;if((await fetch("".concat(YF,"/onboarding/records/").concat(e,"/stage"),{method:"PUT",headers:u({"Content-Type":"application/json"},a),credentials:"include",body:JSON.stringify({stage:t})})).ok)ts.success("Advanced to ".concat(null===(s=GF.find(e=>e.id===t))||void 0===s?void 0:s.name)),L()}catch(a){ts.error("Failed to advance stage")}},z=e=>{if(!e.tasks||0===e.tasks.length)return 0;const t=e.tasks.filter(e=>e.completed).length;return Math.round(t/e.tasks.length*100)},B=p.filter(e=>{var t,s;const a=!E||(null===(t=e.employee_name)||void 0===t?void 0:t.toLowerCase().includes(E.toLowerCase()))||(null===(s=e.emp_code)||void 0===s?void 0:s.toLowerCase().includes(E.toLowerCase())),n="all"===A||e.current_stage===A;return a&&n}),U=e=>{const t=c.find(t=>t.department_id===e);return(null===t||void 0===t?void 0:t.name)||e};return r?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"onboarding-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Onboarding"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Onboarding & Exit Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage employee onboarding journey and exit processes"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[F&&(0,ds.jsxs)(fn,{onClick:()=>y(!0),"data-testid":"start-onboarding-btn",children:[(0,ds.jsx)($M,{className:"w-4 h-4 mr-2"}),"Start Onboarding"]}),(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>C(!0),"data-testid":"request-exit-btn",children:[(0,ds.jsx)(H_,{className:"w-4 h-4 mr-2"}),"Request Exit"]})]})]}),F&&(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)($M,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"active"===e.status).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Active Onboarding"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"pre_joining"===e.current_stage).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Pre-Joining"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"completed"===e.status).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Completed"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,ds.jsx)(H_,{className:"w-5 h-5 text-red-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:_.filter(e=>"pending"===e.status).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Exit Requests"})]})]})})})]}),(0,ds.jsxs)(cA,{value:s,onValueChange:n,children:[(0,ds.jsxs)(dA,{className:"mb-4",children:[(0,ds.jsxs)(uA,{value:"pipeline",className:"gap-2",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Pipeline"]}),F&&(0,ds.jsxs)(uA,{value:"all-records",className:"gap-2",children:[(0,ds.jsx)(M_,{className:"w-4 h-4"}),"All Records"]}),(0,ds.jsxs)(uA,{value:"exit-requests",className:"gap-2",children:[(0,ds.jsx)(H_,{className:"w-4 h-4"}),"Exit Requests"]})]}),(0,ds.jsx)(hA,{value:"pipeline",children:(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,ds.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by name or code...",value:E,onChange:e=>T(e.target.value),className:"pl-9"})]}),(0,ds.jsxs)(yE,{value:A,onValueChange:P,children:[(0,ds.jsx)(bE,{className:"w-[180px]",children:(0,ds.jsx)(jE,{placeholder:"Filter by stage"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Stages"}),GF.map(e=>(0,ds.jsx)(kE,{value:e.id,children:e.name},e.id))]})]})]})})}),(0,ds.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 overflow-x-auto",children:GF.map((e,t)=>{const s=B.filter(t=>t.current_stage===e.id&&"active"===t.status),a=e.icon;return(0,ds.jsxs)("div",{className:"min-w-[250px]",children:[(0,ds.jsxs)("div",{className:"bg-slate-100 rounded-lg p-3 mb-3",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ds.jsx)(a,{className:"w-4 h-4 text-slate-600"}),(0,ds.jsx)("span",{className:"font-semibold text-sm",children:e.name}),(0,ds.jsx)(tk,{variant:"secondary",className:"ml-auto",children:s.length})]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]}),(0,ds.jsxs)("div",{className:"space-y-3",children:[s.map(e=>(0,ds.jsx)(Pn,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>v(e),"data-testid":"onboarding-card-".concat(e.onboarding_id),children:(0,ds.jsxs)(Mn,{className:"p-4",children:[(0,ds.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]}),(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:[z(e),"%"]})]}),(0,ds.jsx)(Bk,{value:z(e),className:"h-1.5 mb-2"}),(0,ds.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,ds.jsxs)("span",{children:["Joined: ",e.joining_date]}),t<GF.length-1&&F&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs",onClick:s=>{s.stopPropagation(),I(e.onboarding_id,GF[t+1].id)},children:(0,ds.jsx)($w,{className:"w-3 h-3"})})]})]})},e.onboarding_id)),0===s.length&&(0,ds.jsx)("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No employees in this stage"})]})]},e.id)})})]})}),(0,ds.jsx)(hA,{value:"all-records",children:(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{children:"Joining Date"}),(0,ds.jsx)(gS,{children:"Current Stage"}),(0,ds.jsx)(gS,{children:"Progress"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:B.map(e=>{var t;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:U(e.department_id)}),(0,ds.jsx)(yS,{children:e.joining_date}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:(null===(t=GF.find(t=>t.id===e.current_stage))||void 0===t?void 0:t.name)||e.current_stage})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(Bk,{value:z(e),className:"w-20 h-2"}),(0,ds.jsxs)("span",{className:"text-xs text-slate-500",children:[z(e),"%"]})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"active"===e.status?"bg-blue-100 text-blue-700":"completed"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>v(e),children:[(0,ds.jsx)(xA,{className:"w-3 h-3 mr-1"}),"View"]})})]},e.onboarding_id)})})]})})})}),(0,ds.jsx)(hA,{value:"exit-requests",children:(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Request Date"}),(0,ds.jsx)(gS,{children:"Last Working Day"}),(0,ds.jsx)(gS,{children:"Reason"}),(0,ds.jsx)(gS,{children:"Status"}),F&&(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:_.length>0?_.map(e=>{var t;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:null===(t=e.created_at)||void 0===t?void 0:t.split("T")[0]}),(0,ds.jsx)(yS,{children:e.requested_last_day}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:e.reason_category})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"pending"===e.status?"bg-amber-100 text-amber-700":"approved"===e.status?"bg-emerald-100 text-emerald-700":"rejected"===e.status?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600",children:e.status})}),F&&(0,ds.jsx)(yS,{className:"text-right",children:"pending"===e.status&&(0,ds.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"text-emerald-600",children:"Approve"}),(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"text-red-600",children:"Reject"})]})})]},e.exit_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:F?6:5,className:"text-center py-8 text-slate-500",children:"No exit requests found"})})})]})})})})]}),(0,ds.jsx)(eo,{open:!!x,onOpenChange:()=>v(null),children:(0,ds.jsx)(no,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:x&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(sk,{className:"w-6 h-6 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{children:x.employee_name}),(0,ds.jsx)("p",{className:"text-sm font-normal text-slate-500",children:x.emp_code})]})]}),(0,ds.jsx)(oo,{children:"Onboarding progress and task management"})]}),(0,ds.jsxs)("div",{className:"py-4",children:[(0,ds.jsx)("div",{className:"flex items-center justify-between mb-4",children:GF.map((e,t)=>{const s=GF.findIndex(e=>e.id===x.current_stage),a=t<s,n=t===s,r=e.icon;return(0,ds.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat(a?"bg-emerald-500 text-white":n?"bg-primary text-white":"bg-slate-200 text-slate-400"),children:a?(0,ds.jsx)(Yk,{className:"w-5 h-5"}):(0,ds.jsx)(r,{className:"w-5 h-5"})}),(0,ds.jsx)("p",{className:"text-xs text-center ".concat(n?"font-semibold text-primary":"text-slate-500"),children:e.name}),t<GF.length-1&&(0,ds.jsx)("div",{className:"absolute h-0.5 w-full top-5 left-1/2 -z-10 ".concat(a?"bg-emerald-500":"bg-slate-200"),style:{width:"calc(100% - 40px)",marginLeft:"20px"}})]},e.id)})}),(0,ds.jsx)(Bk,{value:(V=x,(GF.findIndex(e=>e.id===V.current_stage)+1)/GF.length*100),className:"h-2"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,ds.jsx)(qF,{className:"w-4 h-4"}),"Onboarding Tasks"]}),(null===(e=x.tasks)||void 0===e?void 0:e.length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:x.tasks.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border ".concat(e.completed?"bg-emerald-50 border-emerald-200":"bg-white"),children:[(0,ds.jsx)(PF,{checked:e.completed,onCheckedChange:t=>(async(e,t,s)=>{try{const a=nk();(await fetch("".concat(YF,"/onboarding/records/").concat(e,"/tasks/").concat(t),{method:"PUT",headers:u({"Content-Type":"application/json"},a),credentials:"include",body:JSON.stringify({completed:s,completed_at:s?(new Date).toISOString():null})})).ok&&(ts.success(s?"Task completed":"Task marked incomplete"),L())}catch(a){ts.error("Failed to update task")}})(x.onboarding_id,e.task_id,t),disabled:!F&&e.assigned_to_hr}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("p",{className:"font-medium text-sm ".concat(e.completed?"line-through text-slate-400":""),children:e.title}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]}),(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:e.category}),e.completed&&e.completed_at&&(0,ds.jsx)("span",{className:"text-xs text-emerald-600",children:new Date(e.completed_at).toLocaleDateString()})]},t))}):(0,ds.jsx)("p",{className:"text-slate-500 text-sm text-center py-4",children:"No tasks assigned yet"})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>v(null),children:"Close"}),F&&"active"===x.status&&(0,ds.jsxs)(fn,{onClick:()=>{const e=GF.findIndex(e=>e.id===x.current_stage);e<GF.length-1&&I(x.onboarding_id,GF[e+1].id)},children:["Advance to Next Stage",(0,ds.jsx)($w,{className:"w-4 h-4 ml-1"})]})]})]})})}),(0,ds.jsx)(eo,{open:g,onOpenChange:y,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Start New Onboarding"}),(0,ds.jsx)(oo,{children:"Begin the onboarding process for a new employee"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee *"}),(0,ds.jsxs)(yE,{value:D.employee_id,onValueChange:e=>R(u(u({},D),{},{employee_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:i.filter(e=>!p.some(t=>t.employee_id===e.employee_id&&"active"===t.status)).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name," (",e.emp_code,")"]},e.employee_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Joining Date *"}),(0,ds.jsx)(vn,{type:"date",value:D.joining_date,onChange:e=>R(u(u({},D),{},{joining_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Mentor/Buddy (Optional)"}),(0,ds.jsxs)(yE,{value:D.mentor_id,onValueChange:e=>R(u(u({},D),{},{mentor_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select mentor"})}),(0,ds.jsx)(_E,{children:i.filter(e=>e.employee_id!==D.employee_id).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(D.employee_id&&D.joining_date)try{const e=nk(),t=await fetch("".concat(YF,"/onboarding/records"),{method:"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(D)});if(t.ok)ts.success("Onboarding started successfully"),y(!1),R({employee_id:"",joining_date:"",mentor_id:"",department_id:"",designation_id:""}),L();else{const e=await t.json();ts.error(e.detail||"Failed to start onboarding")}}catch(e){ts.error("Failed to start onboarding")}else ts.error("Please select employee and joining date")},children:[(0,ds.jsx)($M,{className:"w-4 h-4 mr-2"}),"Start Onboarding"]})]})]})}),(0,ds.jsx)(eo,{open:S,onOpenChange:C,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Request Exit"}),(0,ds.jsx)(oo,{children:"Submit your resignation or exit request"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Last Working Day *"}),(0,ds.jsx)(vn,{type:"date",value:O.requested_last_day,onChange:e=>M(u(u({},O),{},{requested_last_day:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Reason Category *"}),(0,ds.jsxs)(yE,{value:O.reason_category,onValueChange:e=>M(u(u({},O),{},{reason_category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"personal",children:"Personal Reasons"}),(0,ds.jsx)(kE,{value:"better_opportunity",children:"Better Opportunity"}),(0,ds.jsx)(kE,{value:"relocation",children:"Relocation"}),(0,ds.jsx)(kE,{value:"health",children:"Health Reasons"}),(0,ds.jsx)(kE,{value:"higher_education",children:"Higher Education"}),(0,ds.jsx)(kE,{value:"retirement",children:"Retirement"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Reason Details *"}),(0,ds.jsx)(kA,{value:O.reason,onChange:e=>M(u(u({},O),{},{reason:e.target.value})),placeholder:"Please provide details about your exit...",rows:4})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(O.requested_last_day&&O.reason)try{const e=nk(),t=await fetch("".concat(YF,"/onboarding/exit-requests"),{method:"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(O)});if(t.ok)ts.success("Exit request submitted"),C(!1),M({requested_last_day:"",reason:"",reason_category:"personal"}),L();else{const e=await t.json();ts.error(e.detail||"Failed to submit")}}catch(e){ts.error("Failed to submit exit request")}else ts.error("Please fill all required fields")},variant:"destructive",children:[(0,ds.jsx)(H_,{className:"w-4 h-4 mr-2"}),"Submit Request"]})]})]})})]});var V},$F="https://shardahrms.com/api",XF=()=>{var e,t,s,n,r,l,i,o,c,d,u;const{user:h}=Cs(),[m,p]=(0,a.useState)(null),[f,x]=(0,a.useState)(null),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[N,_]=(0,a.useState)(!0),[k,S]=(0,a.useState)((new Date).getFullYear()),C="super_admin"===(null===h||void 0===h?void 0:h.role)||"hr_admin"===(null===h||void 0===h?void 0:h.role)||"finance"===(null===h||void 0===h?void 0:h.role);(0,a.useEffect)(()=>{E()},[k]);const E=async()=>{_(!0);try{const[e,t,s,a,n]=await Promise.all([fetch("".concat($F,"/reports/headcount"),{credentials:"include",headers:nk()}),fetch("".concat($F,"/reports/attrition?year=").concat(k),{credentials:"include",headers:nk()}),fetch("".concat($F,"/reports/payroll-cost?year=").concat(k),{credentials:"include",headers:nk()}),fetch("".concat($F,"/reports/attendance"),{credentials:"include",headers:nk()}),fetch("".concat($F,"/reports/leave?year=").concat(k),{credentials:"include",headers:nk()})]);e.ok&&p(await e.json()),t.ok&&x(await t.json()),s.ok&&g(await s.json()),a.ok&&j(await a.json()),n.ok&&w(await n.json())}catch(e){console.error("Error:",e),ts.error("Failed to load reports")}finally{_(!1)}},T=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),A=e=>new Date(2e3,parseInt(e)-1,1).toLocaleString("en-IN",{month:"short"});return C?N?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Reports & Analytics"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Comprehensive HR analytics and insights"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:String(k),onValueChange:e=>S(Number(e)),children:[(0,ds.jsx)(bE,{className:"w-32",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"2024",children:"2024"}),(0,ds.jsx)(kE,{value:"2025",children:"2025"}),(0,ds.jsx)(kE,{value:"2026",children:"2026"})]})]}),(0,ds.jsxs)(fn,{variant:"outline",className:"gap-2",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export"]})]})]}),(0,ds.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{className:"border-l-4 border-l-blue-500",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Total Headcount"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(null===m||void 0===m?void 0:m.total_headcount)||0})]}),(0,ds.jsx)(k_,{className:"w-10 h-10 text-blue-500 opacity-50"})]})})}),(0,ds.jsx)(Pn,{className:"border-l-4 border-l-red-500",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Attrition Rate"}),(0,ds.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[(null===f||void 0===f?void 0:f.attrition_rate)||0,"%"]})]}),(0,ds.jsx)(SA,{className:"w-10 h-10 text-red-500 opacity-50"})]})})}),(0,ds.jsx)(Pn,{className:"border-l-4 border-l-emerald-500",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Avg Attendance"}),(0,ds.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[(null===y||void 0===y?void 0:y.avg_attendance_rate)||0,"%"]})]}),(0,ds.jsx)(v_,{className:"w-10 h-10 text-emerald-500 opacity-50"})]})})}),(0,ds.jsx)(Pn,{className:"border-l-4 border-l-purple-500",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Payroll Cost"}),(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:T(null===v||void 0===v?void 0:v.total_gross)})]}),(0,ds.jsx)(bA,{className:"w-10 h-10 text-purple-500 opacity-50"})]})})})]}),(0,ds.jsxs)(cA,{defaultValue:"headcount",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border flex-wrap h-auto",children:[(0,ds.jsx)(uA,{value:"headcount",children:"Headcount"}),(0,ds.jsx)(uA,{value:"attrition",children:"Attrition"}),(0,ds.jsx)(uA,{value:"payroll",children:"Payroll Cost"}),(0,ds.jsx)(uA,{value:"attendance",children:"Attendance"}),(0,ds.jsx)(uA,{value:"leave",children:"Leave Analysis"})]}),(0,ds.jsx)(hA,{value:"headcount",children:(0,ds.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"By Department"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===m||void 0===m||null===(e=m.by_department)||void 0===e?void 0:e.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:e.department}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-32 h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,ds.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(e.count/m.total_headcount*100,"%")}})}),(0,ds.jsx)("span",{className:"text-sm font-medium w-8",children:e.count})]})]},t))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"By Designation"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===m||void 0===m||null===(t=m.by_designation)||void 0===t?void 0:t.slice(0,6).map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsx)("span",{className:"text-sm text-slate-600",children:e.designation}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-24 h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,ds.jsx)("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:"".concat(e.count/m.total_headcount*100,"%")}})}),(0,ds.jsx)("span",{className:"text-sm font-medium w-8",children:e.count})]})]},t))})})]}),(0,ds.jsxs)(Pn,{className:"lg:col-span-2",children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Joining Trend (Last 12 Months)"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"flex items-end gap-2 h-40",children:null===m||void 0===m||null===(s=m.joining_trend)||void 0===s?void 0:s.map((e,t)=>{var s;return(0,ds.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,ds.jsx)("div",{className:"w-full bg-primary/20 rounded-t",style:{height:"".concat(Math.max(10,e.count/Math.max(...m.joining_trend.map(e=>e.count))*100),"%")},children:(0,ds.jsx)("div",{className:"w-full h-full bg-primary rounded-t flex items-end justify-center pb-1",children:(0,ds.jsx)("span",{className:"text-xs text-white font-medium",children:e.count})})}),(0,ds.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:null===(s=e.month)||void 0===s?void 0:s.slice(5)})]},t)})})})]})]})}),(0,ds.jsx)(hA,{value:"attrition",children:(0,ds.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Exit Reasons"}),(0,ds.jsxs)(On,{children:["Total exits: ",null===f||void 0===f?void 0:f.total_exits]})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===f||void 0===f||null===(n=f.by_reason)||void 0===n?void 0:n.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("span",{className:"text-sm",children:e.reason}),(0,ds.jsx)("span",{className:"font-medium",children:e.count})]},t))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"By Tenure"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===f||void 0===f||null===(r=f.by_tenure)||void 0===r?void 0:r.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("span",{className:"text-sm",children:e.tenure}),(0,ds.jsx)("span",{className:"font-medium",children:e.count})]},t))})})]}),(0,ds.jsxs)(Pn,{className:"lg:col-span-2",children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Monthly Exit Trend"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"flex items-end gap-2 h-32",children:null===f||void 0===f||null===(l=f.monthly_trend)||void 0===l?void 0:l.map((e,t)=>(0,ds.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,ds.jsx)("div",{className:"w-full bg-red-100 rounded-t",style:{height:"".concat(Math.max(5,20*e.exits),"%")},children:(0,ds.jsx)("div",{className:"w-full h-full bg-red-500 rounded-t flex items-end justify-center pb-1",children:e.exits>0&&(0,ds.jsx)("span",{className:"text-xs text-white",children:e.exits})})}),(0,ds.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:A(e.month)})]},t))})})]})]})}),(0,ds.jsx)(hA,{value:"payroll",children:(0,ds.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-6 text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-2",children:"Total Gross Salary"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:T(null===v||void 0===v?void 0:v.total_gross)})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-6 text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-2",children:"Total Net Salary"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-emerald-600",children:T(null===v||void 0===v?void 0:v.total_net)})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-6 text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500 mb-2",children:"Average Salary"}),(0,ds.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:T(null===v||void 0===v?void 0:v.avg_salary)})]})}),(0,ds.jsxs)(Pn,{className:"lg:col-span-3",children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Cost by Department"})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{children:"Employees"}),(0,ds.jsx)(gS,{children:"Gross"}),(0,ds.jsx)(gS,{children:"Net"}),(0,ds.jsx)(gS,{children:"% of Total"})]})}),(0,ds.jsx)(xS,{children:null===v||void 0===v||null===(i=v.by_department)||void 0===i?void 0:i.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.department}),(0,ds.jsx)(yS,{children:e.employees}),(0,ds.jsx)(yS,{children:T(e.gross)}),(0,ds.jsx)(yS,{children:T(e.net)}),(0,ds.jsxs)(yS,{children:[Math.round(e.gross/v.total_gross*100),"%"]})]},t))})]})})]})]})}),(0,ds.jsx)(hA,{value:"attendance",children:(0,ds.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Status Breakdown"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===y||void 0===y||null===(o=y.by_status)||void 0===o?void 0:o.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-3 h-3 rounded-full ".concat({present:"bg-emerald-500",absent:"bg-red-500",late:"bg-amber-500",wfh:"bg-blue-500",half_day:"bg-purple-500"}[e.status]||"bg-slate-400")}),(0,ds.jsx)("span",{className:"text-sm capitalize",children:e.status})]}),(0,ds.jsx)("span",{className:"font-medium",children:e.count})]},t))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Top Late Comers"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"space-y-2",children:[null===y||void 0===y||null===(c=y.late_comers)||void 0===c?void 0:c.slice(0,5).map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("span",{className:"text-sm",children:e.name}),(0,ds.jsxs)("span",{className:"text-sm font-medium text-red-600",children:[e.late_count," days"]})]},t)),(!(null!==y&&void 0!==y&&y.late_comers)||0===y.late_comers.length)&&(0,ds.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No late comers data"})]})})]})]})}),(0,ds.jsx)(hA,{value:"leave",children:(0,ds.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Leave by Type"}),(0,ds.jsxs)(On,{children:["Total: ",null===b||void 0===b?void 0:b.total_requests," requests, ",null===b||void 0===b?void 0:b.total_days_taken," days"]})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===b||void 0===b||null===(d=b.by_type)||void 0===d?void 0:d.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("span",{className:"text-sm",children:e.type}),(0,ds.jsxs)("div",{className:"text-right",children:[(0,ds.jsxs)("span",{className:"font-medium",children:[e.count," requests"]}),(0,ds.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["(",e.days," days)"]})]})]},t))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Request Status"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===b||void 0===b||null===(u=b.by_status)||void 0===u?void 0:u.map((e,t)=>{var s,a;const n={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",cancelled:"bg-slate-100 text-slate-700"};return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-2 rounded",style:{backgroundColor:null===(s=n[e.status])||void 0===s||null===(a=s.split(" ")[0])||void 0===a?void 0:a.replace("bg-","")},children:[(0,ds.jsx)("span",{className:"text-sm capitalize px-2 py-1 rounded ".concat(n[e.status]),children:e.status}),(0,ds.jsx)("span",{className:"font-medium",children:e.count})]},t)})})})]})]})})]})]}):(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)("p",{className:"text-slate-500",children:"You don't have permission to view reports"})})},JF=Yi("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),QF="https://shardahrms.com/api",ZF=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)(!0),[n,r]=(0,a.useState)("workers"),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(null),[m,p]=(0,a.useState)({name:"",company_name:"",contact_person:"",email:"",phone:"",address:"",gst_number:"",pan_number:"",contract_start:"",contract_end:""}),[f,x]=(0,a.useState)([]),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)({name:"",phone:"",address:"",aadhar_number:"",emergency_contact_name:"",emergency_contact_phone:"",contractor_id:"",daily_wage:"",joining_date:"",contract_end_date:"",photo_url:""}),[N,_]=(0,a.useState)("profile"),[k,S]=(0,a.useState)([]),[C,E]=(0,a.useState)([]),[T,A]=(0,a.useState)((new Date).toISOString().slice(0,7)),[P,D]=(0,a.useState)((new Date).toISOString().slice(0,7)),[R,O]=(0,a.useState)(null),[M,F]=(0,a.useState)(!1),[L,I]=(0,a.useState)({document_type:"",file:null}),[z,B]=(0,a.useState)(!1);"super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||null===e||void 0===e||e.role;(0,a.useEffect)(()=>{U(),V()},[]),(0,a.useEffect)(()=>{v&&(H(),W(),q())},[v,T,P]);const U=async()=>{try{const e=await fetch("".concat(QF,"/labour/contractors"),{credentials:"include",headers:nk()});e.ok&&i(await e.json())}catch(e){console.error("Error fetching contractors:",e)}},V=async()=>{s(!0);try{const e=await fetch("".concat(QF,"/labour/workers"),{credentials:"include",headers:nk()});e.ok&&x(await e.json())}catch(e){console.error("Error fetching workers:",e)}finally{s(!1)}},H=async()=>{if(v)try{const[e,t]=T.split("-"),s=await fetch("".concat(QF,"/labour/attendance?worker_id=").concat(v.worker_id,"&month=").concat(t,"&year=").concat(e),{credentials:"include",headers:nk()});s.ok&&S(await s.json())}catch(e){console.error("Error fetching attendance:",e)}},W=async()=>{if(v)try{const e=await fetch("".concat(QF,"/labour/workers/").concat(v.worker_id,"/documents"),{credentials:"include",headers:nk()});e.ok?E(await e.json()):E([])}catch(e){E([])}},q=()=>{if(!v||!k.length)return void O(null);const e=parseFloat(v.daily_wage)||0,t=k.filter(e=>"present"===e.status||"half_day"===e.status).length,s=k.filter(e=>"half_day"===e.status).length,a=k.filter(e=>"absent"===e.status).length,n=t-.5*s,r=n*e;O({daily_wage:e,present_days:t,half_days:s,absent_days:a,total_working_days:n,gross_pay:r,deductions:0,net_pay:r})},Y=async()=>{if(b.name&&b.contractor_id&&b.daily_wage)try{const e=v&&!y?"".concat(QF,"/labour/workers/").concat(v.worker_id):"".concat(QF,"/labour/workers"),t=v&&!y?"PUT":"POST",s=await fetch(e,{method:t,headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(b)});if(s.ok){if(ts.success("PUT"===t?"Worker updated":"Worker added"),j(!1),w({name:"",phone:"",address:"",aadhar_number:"",emergency_contact_name:"",emergency_contact_phone:"",contractor_id:"",daily_wage:"",joining_date:"",contract_end_date:"",photo_url:""}),V(),v){const e=await s.json();g(e)}}else ts.error("Failed to save worker")}catch(e){ts.error("Failed to save worker")}else ts.error("Please fill required fields")},G=async()=>{if(v&&L.document_type&&L.file){B(!0);try{const e=new FormData;e.append("file",L.file),e.append("document_type",L.document_type),e.append("worker_id",v.worker_id);(await fetch("".concat(QF,"/labour/workers/").concat(v.worker_id,"/documents"),{method:"POST",headers:nk(),credentials:"include",body:e})).ok?(ts.success("Document uploaded"),F(!1),I({document_type:"",file:null}),W()):ts.error("Failed to upload document")}catch(e){ts.error("Failed to upload document")}finally{B(!1)}}else ts.error("Please select document type and file")},K=e=>{const t=l.find(t=>t.contractor_id===e);return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.company_name)||"Unknown"},$=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),X=()=>{const[e,t]=T.split("-").map(Number),s=new Date(e,t,0).getDate(),a=[];for(let n=1;n<=s;n++){const s="".concat(e,"-").concat(String(t).padStart(2,"0"),"-").concat(String(n).padStart(2,"0")),r=k.find(e=>e.date===s);a.push({date:s,day:n,status:(null===r||void 0===r?void 0:r.status)||null})}return a};var J,Q;return v?(0,ds.jsxs)("div",{className:"space-y-6 p-6","data-testid":"worker-detail-page",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>g(null),"data-testid":"back-to-workers-btn",children:[(0,ds.jsx)(QA,{className:"w-4 h-4 mr-1"}),"Back to Workers"]}),(0,ds.jsxs)("div",{className:"flex-1",children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:v.name}),(0,ds.jsxs)("p",{className:"text-slate-600",children:[K(v.contractor_id)," \u2022 \u20b9",v.daily_wage,"/day"]})]}),(0,ds.jsx)(tk,{className:"active"===v.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:v.status})]}),(0,ds.jsxs)(cA,{value:N,onValueChange:_,children:[(0,ds.jsxs)(dA,{children:[(0,ds.jsxs)(uA,{value:"profile",className:"gap-2","data-testid":"worker-tab-profile",children:[(0,ds.jsx)(sk,{className:"w-4 h-4"}),"Profile"]}),(0,ds.jsxs)(uA,{value:"attendance",className:"gap-2","data-testid":"worker-tab-attendance",children:[(0,ds.jsx)(p_,{className:"w-4 h-4"}),"Attendance"]}),(0,ds.jsxs)(uA,{value:"payroll",className:"gap-2","data-testid":"worker-tab-payroll",children:[(0,ds.jsx)(bA,{className:"w-4 h-4"}),"Payroll"]}),(0,ds.jsxs)(uA,{value:"documents",className:"gap-2","data-testid":"worker-tab-documents",children:[(0,ds.jsx)(M_,{className:"w-4 h-4"}),"Documents"]})]}),(0,ds.jsx)(hA,{value:"profile",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Personal Information"}),(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{var e,t;w({name:v.name||"",phone:v.phone||"",address:v.address||"",aadhar_number:v.aadhar_number||"",emergency_contact_name:v.emergency_contact_name||"",emergency_contact_phone:v.emergency_contact_phone||"",contractor_id:v.contractor_id||"",daily_wage:v.daily_wage||"",joining_date:(null===(e=v.joining_date)||void 0===e?void 0:e.split("T")[0])||"",contract_end_date:(null===(t=v.contract_end_date)||void 0===t?void 0:t.split("T")[0])||""}),j(!0)},children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-1"}),"Edit"]})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Full Name"}),(0,ds.jsx)("p",{className:"font-medium",children:v.name})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Phone"}),(0,ds.jsx)("p",{className:"font-medium",children:v.phone||"-"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Address"}),(0,ds.jsx)("p",{className:"font-medium",children:v.address||"-"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Aadhar Number"}),(0,ds.jsx)("p",{className:"font-medium",children:v.aadhar_number||"-"})]})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Contractor/Agency"}),(0,ds.jsx)("p",{className:"font-medium",children:K(v.contractor_id)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Daily Wage"}),(0,ds.jsx)("p",{className:"font-medium text-emerald-600",children:$(v.daily_wage)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Joining Date"}),(0,ds.jsx)("p",{className:"font-medium",children:(null===(J=v.joining_date)||void 0===J?void 0:J.split("T")[0])||"-"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Contract End Date"}),(0,ds.jsx)("p",{className:"font-medium",children:(null===(Q=v.contract_end_date)||void 0===Q?void 0:Q.split("T")[0])||"-"})]})]})]}),(v.emergency_contact_name||v.emergency_contact_phone)&&(0,ds.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,ds.jsx)("h4",{className:"font-medium mb-3",children:"Emergency Contact"}),(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Name"}),(0,ds.jsx)("p",{className:"font-medium",children:v.emergency_contact_name||"-"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Phone"}),(0,ds.jsx)("p",{className:"font-medium",children:v.emergency_contact_phone||"-"})]})]})]})]})]})}),(0,ds.jsx)(hA,{value:"attendance",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Attendance Record"}),(0,ds.jsx)(vn,{type:"month",value:T,onChange:e=>A(e.target.value),className:"w-[180px]","data-testid":"attendance-month-picker"})]})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,ds.jsx)("div",{className:"text-center text-sm font-medium text-slate-500 py-2",children:e},e)),Array.from({length:new Date(T+"-01").getDay()}).map((e,t)=>(0,ds.jsx)("div",{},"empty-".concat(t))),X().map(e=>{let{date:t,day:s,status:a}=e;return(0,ds.jsxs)("div",{className:"p-2 border rounded-lg text-center cursor-pointer transition-colors ".concat("present"===a?"bg-emerald-100 border-emerald-300":"half_day"===a?"bg-amber-100 border-amber-300":"absent"===a?"bg-red-100 border-red-300":"bg-slate-50 hover:bg-slate-100"),onClick:()=>{(async(e,t)=>{if(v)try{(await fetch("".concat(QF,"/labour/attendance"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({worker_id:v.worker_id,date:e,status:t,in_time:"present"===t?"09:00":null,out_time:"present"===t?"18:00":null})})).ok?(ts.success("Attendance marked"),H()):ts.error("Failed to mark attendance")}catch(s){ts.error("Failed to mark attendance")}})(t,a?"present"===a?"half_day":"half_day"===a?"absent":"present":"present")},"data-testid":"attendance-day-".concat(t),children:[(0,ds.jsx)("span",{className:"text-sm font-medium",children:s}),a&&(0,ds.jsxs)("div",{className:"text-xs mt-1",children:["present"===a&&(0,ds.jsx)(JF,{className:"w-3 h-3 mx-auto text-emerald-600"}),"half_day"===a&&(0,ds.jsx)("span",{className:"text-amber-600",children:"\xbd"}),"absent"===a&&(0,ds.jsx)(TA,{className:"w-3 h-3 mx-auto text-red-600"})]})]},t)})]}),(0,ds.jsxs)("div",{className:"flex justify-center gap-6 mt-6 pt-4 border-t",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-4 h-4 bg-emerald-100 border border-emerald-300 rounded"}),(0,ds.jsx)("span",{className:"text-sm",children:"Present"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-4 h-4 bg-amber-100 border border-amber-300 rounded"}),(0,ds.jsx)("span",{className:"text-sm",children:"Half Day"})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)("div",{className:"w-4 h-4 bg-red-100 border border-red-300 rounded"}),(0,ds.jsx)("span",{className:"text-sm",children:"Absent"})]})]})]})]})}),(0,ds.jsx)(hA,{value:"payroll",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Monthly Payroll"}),(0,ds.jsx)(vn,{type:"month",value:P,onChange:e=>{D(e.target.value),A(e.target.value)},className:"w-[180px]","data-testid":"payroll-month-picker"})]})}),(0,ds.jsx)(Mn,{children:R?(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Daily Wage"}),(0,ds.jsx)("p",{className:"text-xl font-bold",children:$(R.daily_wage)})]}),(0,ds.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-emerald-600",children:"Present Days"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-emerald-700",children:R.present_days})]}),(0,ds.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-amber-600",children:"Half Days"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-amber-700",children:R.half_days})]}),(0,ds.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg text-center",children:[(0,ds.jsx)("p",{className:"text-sm text-red-600",children:"Absent Days"}),(0,ds.jsx)("p",{className:"text-xl font-bold text-red-700",children:R.absent_days})]})]}),(0,ds.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,ds.jsx)("div",{className:"bg-slate-50 px-4 py-3 font-medium",children:"Payroll Calculation"}),(0,ds.jsxs)("div",{className:"p-4 space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between",children:[(0,ds.jsxs)("span",{children:["Working Days (",R.total_working_days," days \xd7 ",$(R.daily_wage),")"]}),(0,ds.jsx)("span",{className:"font-medium",children:$(R.gross_pay)})]}),(0,ds.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,ds.jsx)("span",{children:"Deductions"}),(0,ds.jsxs)("span",{children:["- ",$(R.deductions)]})]}),(0,ds.jsxs)("div",{className:"flex justify-between pt-3 border-t text-lg font-bold",children:[(0,ds.jsx)("span",{children:"Net Payable"}),(0,ds.jsx)("span",{className:"text-emerald-600",children:$(R.net_pay)})]})]})]})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(bA,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No attendance data for this month"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Mark attendance first to calculate payroll"})]})})]})}),(0,ds.jsx)(hA,{value:"documents",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Documents"}),(0,ds.jsxs)(fn,{onClick:()=>F(!0),"data-testid":"upload-document-btn",children:[(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload Document"]})]})}),(0,ds.jsx)(Mn,{children:C.length>0?(0,ds.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:C.map((e,t)=>{var s;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)(M_,{className:"w-8 h-8 text-slate-400"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium capitalize",children:null===(s=e.document_type)||void 0===s?void 0:s.replace(/_/g," ")}),(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["Uploaded ",new Date(e.uploaded_at).toLocaleDateString()]})]})]}),(0,ds.jsx)(fn,{variant:"outline",size:"sm",asChild:!0,children:(0,ds.jsx)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",children:(0,ds.jsx)(Kk,{className:"w-4 h-4"})})})]},t)})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No documents uploaded"}),(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>F(!0),children:"Upload First Document"})]})})]})})]}),(0,ds.jsx)(eo,{open:y,onOpenChange:j,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Edit Worker"})}),(0,ds.jsx)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Full Name *"}),(0,ds.jsx)(vn,{value:b.name,onChange:e=>w(u(u({},b),{},{name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Phone"}),(0,ds.jsx)(vn,{value:b.phone,onChange:e=>w(u(u({},b),{},{phone:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Aadhar Number"}),(0,ds.jsx)(vn,{value:b.aadhar_number,onChange:e=>w(u(u({},b),{},{aadhar_number:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Address"}),(0,ds.jsx)(kA,{value:b.address,onChange:e=>w(u(u({},b),{},{address:e.target.value})),rows:2})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contractor *"}),(0,ds.jsxs)(yE,{value:b.contractor_id,onValueChange:e=>w(u(u({},b),{},{contractor_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select contractor"})}),(0,ds.jsx)(_E,{children:l.map(e=>(0,ds.jsx)(kE,{value:e.contractor_id,children:e.name||e.company_name},e.contractor_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Daily Wage (\u20b9) *"}),(0,ds.jsx)(vn,{type:"number",value:b.daily_wage,onChange:e=>w(u(u({},b),{},{daily_wage:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Joining Date"}),(0,ds.jsx)(vn,{type:"date",value:b.joining_date,onChange:e=>w(u(u({},b),{},{joining_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contract End Date"}),(0,ds.jsx)(vn,{type:"date",value:b.contract_end_date,onChange:e=>w(u(u({},b),{},{contract_end_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Emergency Contact Name"}),(0,ds.jsx)(vn,{value:b.emergency_contact_name,onChange:e=>w(u(u({},b),{},{emergency_contact_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Emergency Contact Phone"}),(0,ds.jsx)(vn,{value:b.emergency_contact_phone,onChange:e=>w(u(u({},b),{},{emergency_contact_phone:e.target.value}))})]})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:Y,children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:M,onOpenChange:F,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Upload Document"})}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Document Type *"}),(0,ds.jsxs)(yE,{value:L.document_type,onValueChange:e=>I(u(u({},L),{},{document_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"aadhar",children:"Aadhar Card"}),(0,ds.jsx)(kE,{value:"pan",children:"PAN Card"}),(0,ds.jsx)(kE,{value:"photo",children:"Photo"}),(0,ds.jsx)(kE,{value:"bank_passbook",children:"Bank Passbook"}),(0,ds.jsx)(kE,{value:"contract",children:"Contract Agreement"}),(0,ds.jsx)(kE,{value:"safety_certificate",children:"Safety Certificate"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"File *"}),(0,ds.jsx)(vn,{type:"file",onChange:e=>{var t;return I(u(u({},L),{},{file:null===(t=e.target.files)||void 0===t?void 0:t[0]}))}})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:G,disabled:z,children:[z?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload"]})]})]})})]}):(0,ds.jsxs)("div",{className:"space-y-6 p-6","data-testid":"contract-labour-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Contract Labour Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage contractors, workers, attendance, and payroll"})]}),(0,ds.jsx)("div",{className:"flex gap-2",children:(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{U(),V()},children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1"}),"Refresh"]})})]}),(0,ds.jsxs)(cA,{value:n,onValueChange:r,children:[(0,ds.jsxs)(dA,{children:[(0,ds.jsxs)(uA,{value:"workers",className:"gap-2","data-testid":"main-tab-workers",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Workers (",f.length,")"]}),(0,ds.jsxs)(uA,{value:"contractors",className:"gap-2","data-testid":"main-tab-contractors",children:[(0,ds.jsx)(ak,{className:"w-4 h-4"}),"Contractors (",l.length,")"]})]}),(0,ds.jsx)(hA,{value:"workers",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Contract Workers"}),(0,ds.jsx)(On,{children:"Click on a worker to view full details"})]}),(0,ds.jsxs)(fn,{onClick:()=>{w({name:"",phone:"",address:"",aadhar_number:"",emergency_contact_name:"",emergency_contact_phone:"",contractor_id:"",daily_wage:"",joining_date:"",contract_end_date:"",photo_url:""}),g(null),j(!0)},"data-testid":"add-worker-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"}),"Add Worker"]})]})}),(0,ds.jsx)(Mn,{children:t?(0,ds.jsx)("div",{className:"flex justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):f.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Worker"}),(0,ds.jsx)(gS,{children:"Contractor"}),(0,ds.jsx)(gS,{children:"Daily Wage"}),(0,ds.jsx)(gS,{children:"Joining Date"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:f.map(e=>{var t;return(0,ds.jsxs)(vS,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>g(e),"data-testid":"worker-row-".concat(e.worker_id),children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.phone||"-"})]})}),(0,ds.jsx)(yS,{children:K(e.contractor_id)}),(0,ds.jsx)(yS,{className:"font-medium",children:$(e.daily_wage)}),(0,ds.jsx)(yS,{children:(null===(t=e.joining_date)||void 0===t?void 0:t.split("T")[0])||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"active"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:t=>{t.stopPropagation(),g(e)},children:[(0,ds.jsx)(xA,{className:"w-3 h-3 mr-1"}),"View"]})})]},e.worker_id)})})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(k_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No workers registered"}),(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>j(!0),children:"Add First Worker"})]})})]})}),(0,ds.jsx)(hA,{value:"contractors",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Contractors / Agencies"}),(0,ds.jsxs)(fn,{onClick:()=>{h(null),p({name:"",company_name:"",contact_person:"",email:"",phone:"",address:"",gst_number:"",pan_number:"",contract_start:"",contract_end:""}),c(!0)},"data-testid":"add-contractor-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"}),"Add Contractor"]})]})}),(0,ds.jsx)(Mn,{children:l.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Contractor"}),(0,ds.jsx)(gS,{children:"Contact Person"}),(0,ds.jsx)(gS,{children:"Phone"}),(0,ds.jsx)(gS,{children:"Contract Period"}),(0,ds.jsx)(gS,{children:"Workers"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:l.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.name||e.company_name}),e.company_name&&e.name&&(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.company_name})]})}),(0,ds.jsx)(yS,{children:e.contact_person||"-"}),(0,ds.jsx)(yS,{children:e.phone||"-"}),(0,ds.jsx)(yS,{children:e.contract_start&&e.contract_end?(0,ds.jsxs)("span",{className:"text-sm",children:[e.contract_start," to ",e.contract_end]}):"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)(tk,{variant:"outline",children:[f.filter(t=>t.contractor_id===e.contractor_id).length," workers"]})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>{h(e),p({name:e.name||"",company_name:e.company_name||"",contact_person:e.contact_person||"",email:e.email||"",phone:e.phone||"",address:e.address||"",gst_number:e.gst_number||"",pan_number:e.pan_number||"",contract_start:e.contract_start||"",contract_end:e.contract_end||""}),c(!0)},children:(0,ds.jsx)(pA,{className:"w-3 h-3"})})})]},e.contractor_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(ak,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No contractors registered"}),(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>c(!0),children:"Add First Contractor"})]})})]})})]}),(0,ds.jsx)(eo,{open:y&&!v,onOpenChange:j,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Add New Worker"})}),(0,ds.jsx)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Full Name *"}),(0,ds.jsx)(vn,{value:b.name,onChange:e=>w(u(u({},b),{},{name:e.target.value})),"data-testid":"worker-name-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Phone"}),(0,ds.jsx)(vn,{value:b.phone,onChange:e=>w(u(u({},b),{},{phone:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Aadhar Number"}),(0,ds.jsx)(vn,{value:b.aadhar_number,onChange:e=>w(u(u({},b),{},{aadhar_number:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Address"}),(0,ds.jsx)(kA,{value:b.address,onChange:e=>w(u(u({},b),{},{address:e.target.value})),rows:2})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contractor *"}),(0,ds.jsxs)(yE,{value:b.contractor_id,onValueChange:e=>w(u(u({},b),{},{contractor_id:e})),children:[(0,ds.jsx)(bE,{"data-testid":"worker-contractor-select",children:(0,ds.jsx)(jE,{placeholder:"Select contractor"})}),(0,ds.jsx)(_E,{children:l.map(e=>(0,ds.jsx)(kE,{value:e.contractor_id,children:e.name||e.company_name},e.contractor_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Daily Wage (\u20b9) *"}),(0,ds.jsx)(vn,{type:"number",value:b.daily_wage,onChange:e=>w(u(u({},b),{},{daily_wage:e.target.value})),"data-testid":"worker-wage-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Joining Date"}),(0,ds.jsx)(vn,{type:"date",value:b.joining_date,onChange:e=>w(u(u({},b),{},{joining_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contract End Date"}),(0,ds.jsx)(vn,{type:"date",value:b.contract_end_date,onChange:e=>w(u(u({},b),{},{contract_end_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Emergency Contact Name"}),(0,ds.jsx)(vn,{value:b.emergency_contact_name,onChange:e=>w(u(u({},b),{},{emergency_contact_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Emergency Contact Phone"}),(0,ds.jsx)(vn,{value:b.emergency_contact_phone,onChange:e=>w(u(u({},b),{},{emergency_contact_phone:e.target.value}))})]})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:Y,"data-testid":"save-worker-btn",children:"Add Worker"})]})]})}),(0,ds.jsx)(eo,{open:o,onOpenChange:c,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:d?"Edit Contractor":"Add Contractor"})}),(0,ds.jsx)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Name *"}),(0,ds.jsx)(vn,{value:m.name,onChange:e=>p(u(u({},m),{},{name:e.target.value})),"data-testid":"contractor-name-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Company Name"}),(0,ds.jsx)(vn,{value:m.company_name,onChange:e=>p(u(u({},m),{},{company_name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contact Person"}),(0,ds.jsx)(vn,{value:m.contact_person,onChange:e=>p(u(u({},m),{},{contact_person:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Phone"}),(0,ds.jsx)(vn,{value:m.phone,onChange:e=>p(u(u({},m),{},{phone:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Email"}),(0,ds.jsx)(vn,{type:"email",value:m.email,onChange:e=>p(u(u({},m),{},{email:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"GST Number"}),(0,ds.jsx)(vn,{value:m.gst_number,onChange:e=>p(u(u({},m),{},{gst_number:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,ds.jsx)(_n,{children:"Address"}),(0,ds.jsx)(kA,{value:m.address,onChange:e=>p(u(u({},m),{},{address:e.target.value})),rows:2})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contract Start"}),(0,ds.jsx)(vn,{type:"date",value:m.contract_start,onChange:e=>p(u(u({},m),{},{contract_start:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Contract End"}),(0,ds.jsx)(vn,{type:"date",value:m.contract_end,onChange:e=>p(u(u({},m),{},{contract_end:e.target.value}))})]})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{try{const e=d?"".concat(QF,"/labour/contractors/").concat(d.contractor_id):"".concat(QF,"/labour/contractors"),t=d?"PUT":"POST";(await fetch(e,{method:t,headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(m)})).ok?(ts.success(d?"Contractor updated":"Contractor added"),c(!1),h(null),p({name:"",company_name:"",contact_person:"",email:"",phone:"",address:"",gst_number:"",pan_number:"",contract_start:"",contract_end:""}),U()):ts.error("Failed to save contractor")}catch(e){ts.error("Failed to save contractor")}},"data-testid":"save-contractor-btn",children:d?"Save Changes":"Add Contractor"})]})]})})]})},eL=Yi("file-badge",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]]),tL=Yi("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),sL=Yi("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),aL="https://shardahrms.com/api",nL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)("all"),[m,p]=(0,a.useState)(""),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)({name:"",type:"",description:"",file:null}),y="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"hr_executive"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{j()},[d]);const j=async()=>{try{let e="".concat(aL,"/documents?");"all"!==d&&(e+="type=".concat(d));const[t,a]=await Promise.all([fetch(e,{credentials:"include",headers:nk()}),fetch("".concat(aL,"/document-types"),{credentials:"include",headers:nk()})]);t.ok&&s(await t.json()),a.ok&&r(await a.json())}catch(e){console.error("Error:",e)}finally{i(!1)}},b=async(e,t)=>{try{const s=await fetch("".concat(aL,"/documents/").concat(e,"/download"),{credentials:"include",headers:nk()});if(s.ok){const e=await s.blob(),a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t||"document",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),n.remove()}else ts.error("Failed to download")}catch(s){ts.error("Failed to download")}},w=e=>{var t;return(null===(t=n.find(t=>t.type_id===e||t.code===e))||void 0===t?void 0:t.name)||e},N=t.length,_=t.filter(e=>e.is_verified).length,k=t.filter(e=>!e.is_verified).length;return l?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"documents-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Documents"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Document Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Upload and manage employee documents"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)(eo,{open:o,onOpenChange:c,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2",children:[(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Upload Document"]})}),(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Upload Document"}),(0,ds.jsx)(oo,{children:"Add a new document to your profile"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Document Name *"}),(0,ds.jsx)(vn,{value:v.name,onChange:e=>g(u(u({},v),{},{name:e.target.value})),placeholder:"e.g., PAN Card"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Document Type *"}),(0,ds.jsxs)(yE,{value:v.type,onValueChange:e=>g(u(u({},v),{},{type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsx)(_E,{children:n.map(e=>(0,ds.jsxs)(kE,{value:e.type_id,children:[e.name," ",e.is_mandatory&&(0,ds.jsx)("span",{className:"text-red-500",children:"*"})]},e.type_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(vn,{value:v.description,onChange:e=>g(u(u({},v),{},{description:e.target.value})),placeholder:"Optional notes"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"File"}),(0,ds.jsx)(vn,{type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:e=>{var t;return g(u(u({},v),{},{file:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null}))}}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG, DOC up to 10MB"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(v.name&&v.type){x(!0);try{const e=new FormData;e.append("name",v.name),e.append("type",v.type),e.append("description",v.description||""),v.file&&e.append("file",v.file);const t=await fetch("".concat(aL,"/documents/upload"),{method:"POST",headers:nk(),credentials:"include",body:e});if(t.ok)ts.success("Document uploaded"),c(!1),g({name:"",type:"",description:"",file:null}),j();else{const e=await t.json().catch(()=>({}));ts.error(e.detail||"Failed to upload")}}catch(e){ts.error("Failed to upload")}finally{x(!1)}}else ts.error("Please fill required fields")},disabled:f,children:[f?(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4 mr-1"}),"Upload"]})]})]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(M_,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:N}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Documents"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:_}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Verified"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:k}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Pending Verification"})]})]})})})]}),(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ds.jsxs)("div",{className:"relative flex-1",children:[(0,ds.jsx)(V_,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search documents...",className:"pl-9",value:m,onChange:e=>p(e.target.value)})]}),(0,ds.jsxs)(yE,{value:d,onValueChange:h,children:[(0,ds.jsx)(bE,{className:"w-48",children:(0,ds.jsx)(jE,{placeholder:"All Types"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Types"}),n.map(e=>(0,ds.jsx)(kE,{value:e.type_id,children:e.name},e.type_id))]})]}),(0,ds.jsx)(fn,{variant:"outline",onClick:j,children:(0,ds.jsx)(SE,{className:"w-4 h-4"})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(M_,{className:"w-5 h-5 text-primary"}),"My Documents"]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Document"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{children:"Uploaded"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:t.length>0?t.filter(e=>{var t,s;return!m||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))}).map(e=>{const t=(s=e.type,{id_proof:eL,address_proof:M_,education:M_,pan_card:eL,aadhaar:eL,photo:tL}[s]||sL);var s;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center",children:(0,ds.jsx)(t,{className:"w-5 h-5 text-slate-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.name}),e.description&&(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{variant:"outline",children:w(e.type)})}),(0,ds.jsx)(yS,{className:"text-sm text-slate-500",children:e.uploaded_at?new Date(e.uploaded_at).toLocaleDateString("en-IN"):"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_verified?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700",children:e.is_verified?"Verified":"Pending"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-2",children:[e.file_name&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",title:"View",onClick:()=>b(e.document_id,e.file_name),children:(0,ds.jsx)(xA,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",title:"Download",onClick:()=>b(e.document_id,e.file_name),children:(0,ds.jsx)(Kk,{className:"w-4 h-4"})})]}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",title:"Delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this document?"))try{(await fetch("".concat(aL,"/documents/").concat(e),{method:"DELETE",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),credentials:"include"})).ok?(ts.success("Document deleted"),j()):ts.error("Failed to delete document")}catch(t){ts.error("Failed to delete")}})(e.document_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})}),y&&!e.is_verified&&(0,ds.jsx)(fn,{size:"sm",onClick:()=>(async e=>{try{(await fetch("".concat(aL,"/documents/").concat(e,"/verify"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})})).ok&&(ts.success("Document verified"),j())}catch(t){ts.error("Failed to verify")}})(e.document_id),children:"Verify"})]})})]},e.document_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsxs)(yS,{colSpan:5,className:"text-center py-8",children:[(0,ds.jsx)(M_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-4",children:"No documents uploaded"}),(0,ds.jsx)(fn,{onClick:()=>c(!0),children:"Upload First Document"})]})})})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Required Documents Checklist"}),(0,ds.jsx)(On,{children:"Mandatory documents for your profile"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:n.filter(e=>e.is_mandatory).map(e=>{var s;const a=t.some(t=>t.type===e.type_id),n=null===(s=t.find(t=>t.type===e.type_id))||void 0===s?void 0:s.is_verified;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,ds.jsx)(tk,{className:n?"bg-emerald-100 text-emerald-700":a?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700",children:n?"Verified":a?"Pending":"Missing"})]},e.type_id)})})})]})]})},rL=Yi("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]),lL="https://shardahrms.com/api",iL=()=>{var e;const{user:t}=Cs(),[s,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[h,m]=(0,a.useState)({reportType:"employee",columns:["employee_id","name","email","department","designation"],filters:{department_id:"all",location_id:"all",employment_status:"active",date_from:"",date_to:""},groupBy:"",sortBy:"name",sortOrder:"asc"}),p="super_admin"===(null===t||void 0===t?void 0:t.role)||"hr_admin"===(null===t||void 0===t?void 0:t.role)||"hr_executive"===(null===t||void 0===t?void 0:t.role);(0,a.useEffect)(()=>{f(),x()},[]);const f=async()=>{try{const e=await fetch("".concat(lL,"/departments"),{credentials:"include",headers:nk()});e.ok&&o(await e.json())}catch(e){console.error("Error:",e)}},x=()=>{const e=localStorage.getItem("nexus_saved_reports");e&&d(JSON.parse(e))},v=[{id:"employee",name:"Employee Directory",icon:"\ud83d\udc65"},{id:"attendance",name:"Attendance Report",icon:"\ud83d\udcc5"},{id:"leave",name:"Leave Report",icon:"\ud83c\udfd6\ufe0f"},{id:"payroll",name:"Payroll Report",icon:"\ud83d\udcb0"},{id:"headcount",name:"Headcount Analysis",icon:"\ud83d\udcca"},{id:"expense",name:"Expense Report",icon:"\ud83d\udcb3"}],g={employee:[{id:"employee_id",name:"Employee ID"},{id:"emp_code",name:"Employee Code"},{id:"name",name:"Full Name"},{id:"email",name:"Email"},{id:"phone",name:"Phone"},{id:"department",name:"Department"},{id:"designation",name:"Designation"},{id:"location",name:"Location"},{id:"joining_date",name:"Joining Date"},{id:"reporting_manager",name:"Reporting Manager"},{id:"employment_type",name:"Employment Type"},{id:"status",name:"Status"}],attendance:[{id:"employee_id",name:"Employee ID"},{id:"name",name:"Name"},{id:"date",name:"Date"},{id:"status",name:"Status"},{id:"first_in",name:"First In"},{id:"last_out",name:"Last Out"},{id:"total_hours",name:"Total Hours"},{id:"overtime",name:"Overtime"}],leave:[{id:"employee_id",name:"Employee ID"},{id:"name",name:"Name"},{id:"leave_type",name:"Leave Type"},{id:"start_date",name:"Start Date"},{id:"end_date",name:"End Date"},{id:"days",name:"Days"},{id:"status",name:"Status"},{id:"approved_by",name:"Approved By"}],payroll:[{id:"employee_id",name:"Employee ID"},{id:"name",name:"Name"},{id:"department",name:"Department"},{id:"basic",name:"Basic"},{id:"hra",name:"HRA"},{id:"allowances",name:"Allowances"},{id:"gross",name:"Gross"},{id:"deductions",name:"Deductions"},{id:"net_pay",name:"Net Pay"}],headcount:[{id:"department",name:"Department"},{id:"location",name:"Location"},{id:"count",name:"Employee Count"},{id:"percentage",name:"Percentage"}],expense:[{id:"claim_id",name:"Claim ID"},{id:"employee",name:"Employee"},{id:"category",name:"Category"},{id:"amount",name:"Amount"},{id:"date",name:"Date"},{id:"status",name:"Status"}]};return p?(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"report-builder-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Custom Report Builder"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Create and export custom HR reports"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{var e;const t={id:"rpt_".concat(Date.now()),name:"".concat(null===(e=v.find(e=>e.id===h.reportType))||void 0===e?void 0:e.name," - ").concat((new Date).toLocaleDateString()),config:u({},h),created_at:(new Date).toISOString()},s=[...c,t];d(s),localStorage.setItem("nexus_saved_reports",JSON.stringify(s)),ts.success("Report configuration saved")},className:"gap-2",children:[(0,ds.jsx)(gA,{className:"w-4 h-4"}),"Save Config"]}),(0,ds.jsxs)(fn,{onClick:async()=>{n(!0);try{let e="";switch(h.reportType){case"employee":default:e="/employees";break;case"attendance":e="/reports/attendance";break;case"leave":e="/reports/leave";break;case"headcount":e="/reports/headcount";break;case"expense":e="/reports/expense"}let t="".concat(lL).concat(e,"?");h.filters.department_id&&(t+="department_id=".concat(h.filters.department_id,"&")),h.filters.date_from&&(t+="start_date=".concat(h.filters.date_from,"&")),h.filters.date_to&&(t+="end_date=".concat(h.filters.date_to,"&"));const s=await fetch(t,{credentials:"include",headers:nk()});if(s.ok){const e=await s.json();l(Array.isArray(e)?e:e.by_department||e.daily||[e]),ts.success("Report generated")}else ts.error("Failed to generate report")}catch(e){console.error("Error:",e),ts.error("Failed to generate report")}finally{n(!1)}},disabled:s,className:"gap-2",children:[s?(0,ds.jsx)(SE,{className:"w-4 h-4 animate-spin"}):(0,ds.jsx)(ZO,{className:"w-4 h-4"}),"Generate"]})]})]}),(0,ds.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,ds.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(R_,{className:"w-4 h-4"}),"Report Type"]})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"grid grid-cols-2 gap-2",children:v.map(e=>(0,ds.jsxs)(fn,{variant:h.reportType===e.id?"default":"outline",className:"justify-start h-auto py-2 px-3",onClick:()=>{var t;return m(u(u({},h),{},{reportType:e.id,columns:(null===(t=g[e.id])||void 0===t?void 0:t.slice(0,5).map(e=>e.id))||[]}))},children:[(0,ds.jsx)("span",{className:"mr-2",children:e.icon}),(0,ds.jsx)("span",{className:"text-xs",children:e.name})]},e.id))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(rL,{className:"w-4 h-4"}),"Columns"]})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:null===(e=g[h.reportType])||void 0===e?void 0:e.map(e=>(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(PF,{id:e.id,checked:h.columns.includes(e.id),onCheckedChange:()=>(e=>{h.columns.includes(e)?m(u(u({},h),{},{columns:h.columns.filter(t=>t!==e)})):m(u(u({},h),{},{columns:[...h.columns,e]}))})(e.id)}),(0,ds.jsx)(_n,{htmlFor:e.id,className:"text-sm cursor-pointer",children:e.name})]},e.id))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-base flex items-center gap-2",children:[(0,ds.jsx)(EE,{className:"w-4 h-4"}),"Filters"]})}),(0,ds.jsxs)(Mn,{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"Department"}),(0,ds.jsxs)(yE,{value:h.filters.department_id,onValueChange:e=>m(u(u({},h),{},{filters:u(u({},h.filters),{},{department_id:e})})),children:[(0,ds.jsx)(bE,{className:"h-8",children:(0,ds.jsx)(jE,{placeholder:"All"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Departments"}),i.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"From Date"}),(0,ds.jsx)(vn,{type:"date",className:"h-8",value:h.filters.date_from,onChange:e=>m(u(u({},h),{},{filters:u(u({},h.filters),{},{date_from:e.target.value})}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{className:"text-xs",children:"To Date"}),(0,ds.jsx)(vn,{type:"date",className:"h-8",value:h.filters.date_to,onChange:e=>m(u(u({},h),{},{filters:u(u({},h.filters),{},{date_to:e.target.value})}))})]})]})]})]}),c.length>0&&(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsx)(Rn,{className:"text-base",children:"Saved Reports"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-2",children:c.slice(-5).map(e=>(0,ds.jsx)(fn,{variant:"ghost",className:"w-full justify-start text-xs h-8",onClick:()=>(e=>{m(e.config),ts.success("Report loaded")})(e),children:e.name},e.id))})})]})]}),(0,ds.jsx)("div",{className:"lg:col-span-2",children:(0,ds.jsxs)(Pn,{className:"h-full",children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(w_,{className:"w-5 h-5 text-primary"}),"Report Preview"]}),r&&r.length>0&&(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:()=>{if(!r||0===r.length)return void ts.error("No data to export");const e=h.columns.join(","),t=r.map(e=>h.columns.map(t=>{const s=e[t]||e[t.replace("_","")]||"";return"string"===typeof s&&s.includes(",")?'"'.concat(s,'"'):s}).join(",")).join("\n"),s="".concat(e,"\n").concat(t),a=new Blob([s],{type:"text/csv"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download="".concat(h.reportType,"_report_").concat((new Date).toISOString().split("T")[0],".csv"),l.click(),ts.success("Report exported")},className:"gap-2",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Export CSV"]})]}),r&&(0,ds.jsxs)(On,{children:[r.length," records found"]})]}),(0,ds.jsx)(Mn,{children:s?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):r&&r.length>0?(0,ds.jsxs)("div",{className:"overflow-x-auto",children:[(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsx)(vS,{className:"bg-slate-50",children:h.columns.map(e=>{var t,s;return(0,ds.jsx)(gS,{className:"text-xs whitespace-nowrap",children:(null===(t=g[h.reportType])||void 0===t||null===(s=t.find(t=>t.id===e))||void 0===s?void 0:s.name)||e},e)})})}),(0,ds.jsx)(xS,{children:r.slice(0,50).map((e,t)=>(0,ds.jsx)(vS,{children:h.columns.map(t=>(0,ds.jsx)(yS,{className:"text-sm",children:e[t]||e[t.replace("_","")]||"-"},t))},t))})]}),r.length>50&&(0,ds.jsxs)("p",{className:"text-xs text-slate-500 text-center mt-4",children:["Showing 50 of ",r.length," records. Export to see all."]})]}):(0,ds.jsxs)("div",{className:"text-center py-16",children:[(0,ds.jsx)(R_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:"No report generated yet"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"Configure your report and click Generate"})]})})]})})]})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(AA,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-600",children:"You don't have permission to access reports"})]})},oL="https://shardahrms.com/api",cL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(""),[d,h]=(0,a.useState)("all"),[m,p]=(0,a.useState)("all"),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[N,_]=(0,a.useState)({name:"",email:"",password:"",role:"employee"}),[k,S]=(0,a.useState)(""),C="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role),E="super_admin"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{T()},[d,m]);const T=async()=>{try{let e="".concat(oL,"/users?");"all"!==d&&(e+="role=".concat(d,"&")),"all"!==m&&(e+="status=".concat(m,"&"));const[t,a]=await Promise.all([fetch(e,{credentials:"include",headers:nk()}),fetch("".concat(oL,"/users/roles/list"),{credentials:"include",headers:nk()})]);if(t.ok){const e=await t.json();s(e.users||[])}a.ok&&r(await a.json())}catch(e){console.error("Error:",e)}finally{i(!1)}},A=async(e,t)=>{try{const s=t?"activate":"deactivate",a=await fetch("".concat(oL,"/users/").concat(e.user_id,"/").concat(s),{method:"PUT",credentials:"include"});if(a.ok)ts.success("User ".concat(t?"activated":"deactivated"," successfully")),T();else{const e=await a.json();ts.error(e.detail||"Failed to update user status")}}catch(s){ts.error("Failed to update user status")}},P=e=>{var t;return(null===(t=n.find(t=>t.role_id===e))||void 0===t?void 0:t.name)||e},D=t.filter(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(o.toLowerCase()))});return C?l?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in","data-testid":"user-management-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"User Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage system users and access"})]}),(0,ds.jsxs)(eo,{open:f,onOpenChange:x,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2","data-testid":"add-user-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add User"]})}),(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add New User"}),(0,ds.jsx)(oo,{children:"Create a new system user"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Full Name *"}),(0,ds.jsx)(vn,{value:N.name,onChange:e=>_(u(u({},N),{},{name:e.target.value})),placeholder:"John Doe"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Email *"}),(0,ds.jsx)(vn,{type:"email",value:N.email,onChange:e=>_(u(u({},N),{},{email:e.target.value})),placeholder:"john@shardahr.com"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Password *"}),(0,ds.jsx)(vn,{type:"password",value:N.password,onChange:e=>_(u(u({},N),{},{password:e.target.value})),placeholder:"Min 8 characters"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Role"}),(0,ds.jsxs)(yE,{value:N.role,onValueChange:e=>_(u(u({},N),{},{role:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:n.filter(e=>E||"super_admin"!==e.role_id).map(e=>(0,ds.jsx)(kE,{value:e.role_id,children:e.name},e.role_id))})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(N.name&&N.email&&N.password)try{const e=await fetch("".concat(oL,"/users"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(N)});if(e.ok)ts.success("User created successfully"),x(!1),_({name:"",email:"",password:"",role:"employee"}),T();else{const t=await e.json();ts.error(t.detail||"Failed to create user")}}catch(e){ts.error("Failed to create user")}else ts.error("Please fill all required fields")},children:"Create User"})]})]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:t.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Users"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(PE,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:t.filter(e=>e.is_active).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Active"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,ds.jsx)(D_,{className:"w-5 h-5 text-red-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:t.filter(e=>"super_admin"===e.role).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Admins"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(DE,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold",children:t.filter(e=>!e.is_active).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Inactive"})]})]})})})]}),(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ds.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search users...",value:o,onChange:e=>c(e.target.value),className:"pl-10"})]}),(0,ds.jsxs)(yE,{value:d,onValueChange:h,children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{placeholder:"All Roles"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Roles"}),n.map(e=>(0,ds.jsx)(kE,{value:e.role_id,children:e.name},e.role_id))]})]}),(0,ds.jsxs)(yE,{value:m,onValueChange:p,children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{placeholder:"All Status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"active",children:"Active"}),(0,ds.jsx)(kE,{value:"inactive",children:"Inactive"})]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"}),"System Users"]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"User"}),(0,ds.jsx)(gS,{children:"Email"}),(0,ds.jsx)(gS,{children:"Role"}),(0,ds.jsx)(gS,{children:"Employee ID"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:D.length>0?D.map(e=>{var t,s,a;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium text-primary",children:null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase()}),(0,ds.jsx)("span",{className:"font-medium",children:e.name})]})}),(0,ds.jsx)(yS,{className:"text-slate-500",children:e.email}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:(a=e.role,{super_admin:"bg-red-100 text-red-700",hr_admin:"bg-purple-100 text-purple-700",hr_executive:"bg-violet-100 text-violet-700",manager:"bg-blue-100 text-blue-700",finance:"bg-emerald-100 text-emerald-700",it_admin:"bg-amber-100 text-amber-700",employee:"bg-slate-100 text-slate-600"}[a]||"bg-slate-100 text-slate-600"),children:P(e.role)})}),(0,ds.jsx)(yS,{className:"font-mono text-sm text-slate-500",children:e.employee_id||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:e.is_active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700",children:e.is_active?"Active":"Inactive"})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)(lN,{children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsx)(fn,{variant:"ghost",size:"sm",children:(0,ds.jsx)(AE,{className:"w-4 h-4"})})}),(0,ds.jsxs)(oN,{align:"end",children:[(0,ds.jsx)(dN,{children:"Actions"}),(0,ds.jsx)(uN,{}),(0,ds.jsxs)(cN,{onClick:()=>{return _({name:(t=e).name,email:t.email,password:"",role:t.role}),void g(t);var t},children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-2"}),"Edit User"]}),(0,ds.jsxs)(cN,{onClick:()=>j(e),children:[(0,ds.jsx)(JO,{className:"w-4 h-4 mr-2"}),"Reset Password"]}),(0,ds.jsx)(uN,{}),e.is_active?(0,ds.jsxs)(cN,{onClick:()=>A(e,!1),children:[(0,ds.jsx)(DE,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):(0,ds.jsxs)(cN,{onClick:()=>A(e,!0),children:[(0,ds.jsx)(PE,{className:"w-4 h-4 mr-2"}),"Activate"]}),(0,ds.jsxs)(cN,{className:"text-red-600",onClick:()=>w(e),children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"}),"Delete User"]})]})]})})]},e.user_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:6,className:"text-center py-8 text-slate-500",children:"No users found"})})})]})})]}),(0,ds.jsx)(eo,{open:!!v,onOpenChange:()=>g(null),children:(0,ds.jsxs)(no,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Edit User"})}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Full Name"}),(0,ds.jsx)(vn,{value:N.name,onChange:e=>_(u(u({},N),{},{name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Email"}),(0,ds.jsx)(vn,{type:"email",value:N.email,onChange:e=>_(u(u({},N),{},{email:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Role"}),(0,ds.jsxs)(yE,{value:N.role,onValueChange:e=>_(u(u({},N),{},{role:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:n.filter(e=>E||"super_admin"!==e.role_id).map(e=>(0,ds.jsx)(kE,{value:e.role_id,children:e.name},e.role_id))})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>g(null),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(N.name&&N.email)try{const e=await fetch("".concat(oL,"/users/").concat(v.user_id),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({name:N.name,email:N.email,role:N.role})});if(e.ok)ts.success("User updated successfully"),g(null),T();else{const t=await e.json();ts.error(t.detail||"Failed to update user")}}catch(e){ts.error("Failed to update user")}else ts.error("Please fill required fields")},children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:!!y,onOpenChange:()=>j(null),children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Reset Password"}),(0,ds.jsxs)(oo,{children:["Set a new password for ",null===y||void 0===y?void 0:y.name]})]}),(0,ds.jsx)("div",{className:"space-y-4 py-4",children:(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"New Password"}),(0,ds.jsx)(vn,{type:"password",value:k,onChange:e=>S(e.target.value),placeholder:"Min 8 characters"})]})}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{j(null),S("")},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(!k||k.length<8)ts.error("Password must be at least 8 characters");else try{const e=await fetch("".concat(oL,"/users/").concat(y.user_id,"/reset-password"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({new_password:k})});if(e.ok)ts.success("Password reset successfully"),j(null),S("");else{const t=await e.json();ts.error(t.detail||"Failed to reset password")}}catch(e){ts.error("Failed to reset password")}},children:"Reset Password"})]})]})}),(0,ds.jsx)(kT,{open:!!b,onOpenChange:()=>w(null),children:(0,ds.jsxs)(ET,{children:[(0,ds.jsxs)(TT,{children:[(0,ds.jsx)(PT,{children:"Delete User"}),(0,ds.jsxs)(DT,{children:["Are you sure you want to delete ",null===b||void 0===b?void 0:b.name,"? This action cannot be undone."]})]}),(0,ds.jsxs)(AT,{children:[(0,ds.jsx)(OT,{children:"Cancel"}),(0,ds.jsx)(RT,{onClick:async()=>{try{const e=await fetch("".concat(oL,"/users/").concat(b.user_id),{method:"DELETE",credentials:"include"});if(e.ok)ts.success("User deleted successfully"),w(null),T();else{const t=await e.json();ts.error(t.detail||"Failed to delete user")}}catch(e){ts.error("Failed to delete user")}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(AA,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-600",children:"You don't have permission to access this page"})]})},dL=Yi("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),uL="https://shardahrms.com/api",hL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)({enrollments:[],certifications:[],skills:[]}),[l,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({name:"",description:"",category:"technical",trainer:"",start_date:"",end_date:"",location:"",max_participants:30}),[f,x]=(0,a.useState)({name:"",issuing_body:"",issue_date:"",expiry_date:"",credential_id:""}),v="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{g()},[]);const g=async()=>{try{const[e,t]=await Promise.all([fetch("".concat(uL,"/training/programs"),{credentials:"include",headers:nk()}),fetch("".concat(uL,"/training/my-training"),{credentials:"include",headers:nk()})]);e.ok&&s(await e.json()),t.ok&&r(await t.json())}catch(e){console.error("Error:",e)}finally{i(!1)}},y={upcoming:"bg-blue-100 text-blue-700",ongoing:"bg-emerald-100 text-emerald-700",completed:"bg-slate-100 text-slate-700",enrolled:"bg-blue-100 text-blue-700",cancelled:"bg-red-100 text-red-700"};return l?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Training & Development"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage training programs, certifications, and skills"})]}),v&&(0,ds.jsxs)(eo,{open:o,onOpenChange:c,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Program"]})}),(0,ds.jsxs)(no,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Create Training Program"})}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Program Name"}),(0,ds.jsx)(vn,{value:m.name,onChange:e=>p(u(u({},m),{},{name:e.target.value})),placeholder:"Leadership Workshop"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Category"}),(0,ds.jsxs)(yE,{value:m.category,onValueChange:e=>p(u(u({},m),{},{category:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"technical",children:"Technical"}),(0,ds.jsx)(kE,{value:"soft_skills",children:"Soft Skills"}),(0,ds.jsx)(kE,{value:"compliance",children:"Compliance"}),(0,ds.jsx)(kE,{value:"leadership",children:"Leadership"}),(0,ds.jsx)(kE,{value:"safety",children:"Safety"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Max Participants"}),(0,ds.jsx)(vn,{type:"number",value:m.max_participants,onChange:e=>p(u(u({},m),{},{max_participants:parseInt(e.target.value)}))})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Date"}),(0,ds.jsx)(vn,{type:"date",value:m.start_date,onChange:e=>p(u(u({},m),{},{start_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Date"}),(0,ds.jsx)(vn,{type:"date",value:m.end_date,onChange:e=>p(u(u({},m),{},{end_date:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Trainer"}),(0,ds.jsx)(vn,{value:m.trainer,onChange:e=>p(u(u({},m),{},{trainer:e.target.value})),placeholder:"John Smith"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:m.description,onChange:e=>p(u(u({},m),{},{description:e.target.value})),rows:3})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{try{(await fetch("".concat(uL,"/training/programs"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(m)})).ok?(ts.success("Program created"),c(!1),p({name:"",description:"",category:"technical",trainer:"",start_date:"",end_date:"",location:"",max_participants:30}),g()):ts.error("Failed to create program")}catch(e){ts.error("Failed to create program")}},children:"Create Program"})]})]})]})]}),(0,ds.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(dL,{className:"w-6 h-6 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:t.length}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Programs"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(JF,{className:"w-6 h-6 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:n.enrollments.filter(e=>"completed"===e.status).length}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Completed"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(PA,{className:"w-6 h-6 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:n.certifications.length}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Certifications"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(k_,{className:"w-6 h-6 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:n.skills.length}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Skills"})]})]})})]}),(0,ds.jsxs)(cA,{defaultValue:"programs",className:"space-y-4",children:[(0,ds.jsxs)(dA,{className:"bg-white border",children:[(0,ds.jsx)(uA,{value:"programs",children:"Training Programs"}),(0,ds.jsx)(uA,{value:"my-training",children:"My Training"}),(0,ds.jsx)(uA,{value:"certifications",children:"Certifications"})]}),(0,ds.jsx)(hA,{value:"programs",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Available Programs"})}),(0,ds.jsx)(Mn,{children:t.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:t.map(t=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,ds.jsx)(N_,{className:"w-6 h-6 text-primary"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:t.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[t.trainer," \u2022 ",t.start_date," to ",t.end_date]}),(0,ds.jsx)(tk,{className:y[t.status]||"bg-slate-100",children:t.status||"upcoming"})]})]}),(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>(async t=>{try{(await fetch("".concat(uL,"/training/enrollments"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({program_id:t,employee_id:e.employee_id})})).ok?(ts.success("Enrolled successfully"),g()):ts.error("Failed to enroll")}catch(s){ts.error("Failed to enroll")}})(t.program_id),children:"Enroll"})]},t.program_id))}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(N_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No training programs available"})]})})]})}),(0,ds.jsx)(hA,{value:"my-training",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"My Enrollments"})}),(0,ds.jsx)(Mn,{children:n.enrollments.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Program"}),(0,ds.jsx)(gS,{children:"Enrolled On"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{children:"Score"})]})}),(0,ds.jsx)(xS,{children:n.enrollments.map(e=>{var t;return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.program_id}),(0,ds.jsx)(yS,{children:null===(t=e.enrolled_at)||void 0===t?void 0:t.split("T")[0]}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:y[e.status],children:e.status})}),(0,ds.jsx)(yS,{children:e.score||"-"})]},e.enrollment_id)})})]}):(0,ds.jsx)("div",{className:"text-center py-8",children:(0,ds.jsx)("p",{className:"text-slate-500",children:"No enrollments yet"})})})]})}),(0,ds.jsx)(hA,{value:"certifications",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"flex flex-row items-center justify-between",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"My Certifications"}),(0,ds.jsxs)(eo,{open:d,onOpenChange:h,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{size:"sm",className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add"]})}),(0,ds.jsxs)(no,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Add Certification"})}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Certification Name"}),(0,ds.jsx)(vn,{value:f.name,onChange:e=>x(u(u({},f),{},{name:e.target.value})),placeholder:"AWS Solutions Architect"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Issuing Body"}),(0,ds.jsx)(vn,{value:f.issuing_body,onChange:e=>x(u(u({},f),{},{issuing_body:e.target.value})),placeholder:"Amazon Web Services"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Issue Date"}),(0,ds.jsx)(vn,{type:"date",value:f.issue_date,onChange:e=>x(u(u({},f),{},{issue_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Expiry Date"}),(0,ds.jsx)(vn,{type:"date",value:f.expiry_date,onChange:e=>x(u(u({},f),{},{expiry_date:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Credential ID"}),(0,ds.jsx)(vn,{value:f.credential_id,onChange:e=>x(u(u({},f),{},{credential_id:e.target.value}))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{try{(await fetch("".concat(uL,"/training/certifications"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(f)})).ok?(ts.success("Certification added"),h(!1),x({name:"",issuing_body:"",issue_date:"",expiry_date:"",credential_id:""}),g()):ts.error("Failed to add certification")}catch(e){ts.error("Failed to add certification")}},children:"Add Certification"})]})]})]})]}),(0,ds.jsx)(Mn,{children:n.certifications.length>0?(0,ds.jsx)("div",{className:"space-y-3",children:n.certifications.map(e=>(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(PA,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500",children:[e.issuing_body," \u2022 Expires: ",e.expiry_date||"Never"]})]})]}),e.verified?(0,ds.jsx)(tk,{className:"bg-emerald-100 text-emerald-700",children:"Verified"}):(0,ds.jsx)(tk,{variant:"outline",children:"Pending"})]},e.certification_id))}):(0,ds.jsx)("div",{className:"text-center py-8",children:(0,ds.jsx)("p",{className:"text-slate-500",children:"No certifications added"})})})]})})]})]})},mL="https://shardahrms.com/api",pL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,h]=(0,a.useState)("all"),[m,p]=(0,a.useState)({purpose:"",destination:"",start_date:"",end_date:"",travel_mode:"flight",estimated_budget:"",accommodation_required:!0,advance_required:!1,advance_amount:"",remarks:""}),f="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role)||"finance"===(null===e||void 0===e?void 0:e.role)||"manager"===(null===e||void 0===e?void 0:e.role);(0,a.useEffect)(()=>{x()},[d]);const x=async()=>{try{let e="".concat(mL,"/travel/requests?");"all"!==d&&(e+="status=".concat(d));const t=await fetch(e,{credentials:"include",headers:nk()});t.ok&&s(await t.json())}catch(e){console.error("Error:",e)}finally{r(!1)}},v=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),g={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",completed:"bg-blue-100 text-blue-700",cancelled:"bg-slate-100 text-slate-700"};if(n)return(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})});const y={pending:t.filter(e=>"pending"===e.status).length,approved:t.filter(e=>"approved"===e.status).length,total:t.length,budget:t.filter(e=>"approved"===e.status).reduce((e,t)=>e+(t.estimated_budget||0),0)};return(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Travel Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Request and manage business travel"})]}),(0,ds.jsxs)(eo,{open:l,onOpenChange:i,children:[(0,ds.jsx)(to,{asChild:!0,children:(0,ds.jsxs)(fn,{className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"New Travel Request"]})}),(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"New Travel Request"}),(0,ds.jsx)(oo,{children:"Submit a request for business travel"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Purpose of Travel *"}),(0,ds.jsx)(vn,{value:m.purpose,onChange:e=>p(u(u({},m),{},{purpose:e.target.value})),placeholder:"Client meeting, Conference, etc."})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Destination *"}),(0,ds.jsx)(vn,{value:m.destination,onChange:e=>p(u(u({},m),{},{destination:e.target.value})),placeholder:"City, Country"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Date *"}),(0,ds.jsx)(vn,{type:"date",value:m.start_date,onChange:e=>p(u(u({},m),{},{start_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Date"}),(0,ds.jsx)(vn,{type:"date",value:m.end_date,onChange:e=>p(u(u({},m),{},{end_date:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Travel Mode"}),(0,ds.jsxs)(yE,{value:m.travel_mode,onValueChange:e=>p(u(u({},m),{},{travel_mode:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"flight",children:"Flight"}),(0,ds.jsx)(kE,{value:"train",children:"Train"}),(0,ds.jsx)(kE,{value:"bus",children:"Bus"}),(0,ds.jsx)(kE,{value:"car",children:"Car/Cab"}),(0,ds.jsx)(kE,{value:"self",children:"Self Arranged"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Estimated Budget (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",value:m.estimated_budget,onChange:e=>p(u(u({},m),{},{estimated_budget:parseInt(e.target.value)}))})]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ds.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,ds.jsx)("input",{type:"checkbox",checked:m.accommodation_required,onChange:e=>p(u(u({},m),{},{accommodation_required:e.target.checked})),className:"rounded"}),(0,ds.jsx)("span",{className:"text-sm",children:"Accommodation Required"})]}),(0,ds.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,ds.jsx)("input",{type:"checkbox",checked:m.advance_required,onChange:e=>p(u(u({},m),{},{advance_required:e.target.checked})),className:"rounded"}),(0,ds.jsx)("span",{className:"text-sm",children:"Need Advance"})]})]}),m.advance_required&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Advance Amount (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",value:m.advance_amount,onChange:e=>p(u(u({},m),{},{advance_amount:parseInt(e.target.value)}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Remarks"}),(0,ds.jsx)(kA,{value:m.remarks,onChange:e=>p(u(u({},m),{},{remarks:e.target.value})),rows:2})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(m.purpose&&m.destination&&m.start_date)try{(await fetch("".concat(mL,"/travel/requests"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(m)})).ok?(ts.success("Travel request submitted"),i(!1),p({purpose:"",destination:"",start_date:"",end_date:"",travel_mode:"flight",estimated_budget:"",accommodation_required:!0,advance_required:!1,advance_amount:"",remarks:""}),x()):ts.error("Failed to submit request")}catch(e){ts.error("Failed to submit request")}else ts.error("Please fill required fields")},children:"Submit Request"})]})]})]})]}),(0,ds.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-6 h-6 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.pending}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Pending"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(JF,{className:"w-6 h-6 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.approved}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Approved"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(__,{className:"w-6 h-6 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.total}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Total Trips"})]})]})}),(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(bA,{className:"w-6 h-6 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:v(y.budget)}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Budget"})]})]})})]}),(0,ds.jsx)("div",{className:"flex gap-4",children:(0,ds.jsxs)(yE,{value:d,onValueChange:h,children:[(0,ds.jsx)(bE,{className:"w-40",children:(0,ds.jsx)(jE,{placeholder:"All Status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"pending",children:"Pending"}),(0,ds.jsx)(kE,{value:"approved",children:"Approved"}),(0,ds.jsx)(kE,{value:"rejected",children:"Rejected"}),(0,ds.jsx)(kE,{value:"completed",children:"Completed"})]})]})}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(__,{className:"w-5 h-5 text-primary"}),"Travel Requests"]})}),(0,ds.jsx)(Mn,{className:"p-0",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Purpose"}),(0,ds.jsx)(gS,{children:"Destination"}),(0,ds.jsx)(gS,{children:"Dates"}),(0,ds.jsx)(gS,{children:"Budget"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:t.length>0?t.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.purpose}),e.employee_name&&(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.employee_name})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ds.jsx)(Jk,{className:"w-3 h-3 text-slate-400"}),e.destination]})}),(0,ds.jsxs)(yS,{children:[(0,ds.jsx)("p",{className:"text-sm",children:e.start_date}),e.end_date&&(0,ds.jsxs)("p",{className:"text-xs text-slate-500",children:["to ",e.end_date]})]}),(0,ds.jsx)(yS,{children:v(e.estimated_budget)}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:g[e.status],children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>c(e),children:(0,ds.jsx)(xA,{className:"w-4 h-4"})}),f&&"pending"===e.status&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-emerald-600",onClick:()=>{c(e),(async e=>{try{(await fetch("".concat(mL,"/travel/requests/").concat(e,"/approve"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({approved_budget:null===o||void 0===o?void 0:o.estimated_budget})})).ok&&(ts.success("Travel approved"),c(null),x())}catch(t){ts.error("Failed to approve")}})(e.request_id)},children:(0,ds.jsx)(JF,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-600",onClick:()=>(async(e,t)=>{try{(await fetch("".concat(mL,"/travel/requests/").concat(e,"/reject"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({reason:t})})).ok&&(ts.success("Travel rejected"),c(null),x())}catch(s){ts.error("Failed to reject")}})(e.request_id,"Budget constraints"),children:(0,ds.jsx)(TA,{className:"w-4 h-4"})})]})]})})]},e.request_id)):(0,ds.jsx)(vS,{children:(0,ds.jsxs)(yS,{colSpan:6,className:"text-center py-8",children:[(0,ds.jsx)(__,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No travel requests found"})]})})})]})})]}),(0,ds.jsx)(eo,{open:!!o,onOpenChange:()=>c(null),children:(0,ds.jsxs)(no,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Travel Request Details"})}),o&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Purpose"}),(0,ds.jsx)("p",{className:"font-medium",children:o.purpose})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Destination"}),(0,ds.jsx)("p",{className:"font-medium",children:o.destination})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Travel Dates"}),(0,ds.jsxs)("p",{className:"font-medium",children:[o.start_date," - ",o.end_date||"TBD"]})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Mode"}),(0,ds.jsx)("p",{className:"font-medium capitalize",children:o.travel_mode})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Estimated Budget"}),(0,ds.jsx)("p",{className:"font-medium",children:v(o.estimated_budget)})]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Status"}),(0,ds.jsx)(tk,{className:g[o.status],children:o.status})]})]}),o.remarks&&(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Remarks"}),(0,ds.jsx)("p",{className:"text-sm",children:o.remarks})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})})]})},fL="https://shardahrms.com/api",xL=()=>{var e,t,s,n,r,l;const{user:i}=Cs(),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null),[y,j]=(0,a.useState)("all"),[b,w]=(0,a.useState)("my-tours"),[N,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[C,E]=(0,a.useState)(null),[T,A]=(0,a.useState)([]),[P,D]=(0,a.useState)([]),[R,O]=(0,a.useState)(!1),[M,F]=(0,a.useState)(""),[L,I]=(0,a.useState)({purpose:"",location:"",client_name:"",start_date:"",end_date:"",transport_mode:"bus",remarks:"",request_type:"tour"}),z="super_admin"===(null===i||void 0===i?void 0:i.role)||"hr_admin"===(null===i||void 0===i?void 0:i.role)||"finance"===(null===i||void 0===i?void 0:i.role)||"manager"===(null===i||void 0===i?void 0:i.role);(0,a.useEffect)(()=>{B(),U(),z&&(V(),H())},[y]);const B=async()=>{p(!0);try{let e="".concat(fL,"/travel/requests?");"all"!==y&&(e+="status=".concat(y));const t=await fetch(e,{credentials:"include",headers:nk()});t.ok&&c(await t.json())}catch(e){console.error("Error:",e)}finally{p(!1)}},U=async()=>{try{const e=await fetch("".concat(fL,"/travel/my-active-tour"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching tour status:",e)}},V=async()=>{try{const e=await fetch("".concat(fL,"/travel/field-employees"),{credentials:"include",headers:nk()});e.ok&&A(await e.json())}catch(e){console.error("Error fetching field employees:",e)}},H=async()=>{try{const e=await fetch("".concat(fL,"/employees"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();D(t.employees||t||[])}}catch(e){console.error("Error fetching employees:",e)}},W=async e=>{_(!0),S(null);try{var t;const a=await new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy})},e=>{t(e)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0}):t(new Error("Geolocation is not supported"))});E(a);let n="";try{const e=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(a.latitude,"&lon=").concat(a.longitude,"&format=json"));if(e.ok){var s;n=(null===(s=(await e.json()).display_name)||void 0===s?void 0:s.split(",").slice(0,3).join(", "))||""}}catch(nI){}const r=await fetch("".concat(fL,"/travel/remote-check-in"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({punch_type:e,latitude:a.latitude,longitude:a.longitude,location_name:n,tour_request_id:null===d||void 0===d||null===(t=d.tour)||void 0===t?void 0:t.request_id})});if(r.ok){const t=await r.json();ts.success("Remote ".concat(e," recorded at ").concat(t.time)),U()}else{const e=await r.json();ts.error(e.detail||"Failed to record check-in")}}catch(a){console.error("Check-in error:",a),1===a.code?S("Location permission denied. Please enable location access."):2===a.code?S("Unable to get location. Please try again."):3===a.code?S("Location request timed out. Please try again."):S(a.message||"Failed to get location"),ts.error("Failed to record check-in")}finally{_(!1)}},q=async e=>{try{(await fetch("".concat(fL,"/travel/requests/").concat(e,"/approve"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({approved_budget:null===v||void 0===v?void 0:v.estimated_budget})})).ok&&(ts.success("Tour approved"),g(null),B())}catch(t){ts.error("Failed to approve")}},Y=async e=>{const t=prompt("Enter rejection reason:");if(t)try{(await fetch("".concat(fL,"/travel/requests/").concat(e,"/reject"),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({reason:t})})).ok&&(ts.success("Tour rejected"),g(null),B())}catch(s){ts.error("Failed to reject")}},G=async(e,t)=>{try{(await fetch("".concat(fL,"/travel/field-employees/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({is_field_employee:t})})).ok&&(ts.success(t?"Employee marked as field employee":"Field employee status removed"),V(),O(!1),F(""))}catch(s){ts.error("Failed to update field employee status")}},K={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",ongoing:"bg-blue-100 text-blue-700",completed:"bg-slate-100 text-slate-700",rejected:"bg-red-100 text-red-700",cancelled:"bg-slate-100 text-slate-700"};return(0,ds.jsxs)("div",{className:"space-y-6 p-6","data-testid":"tour-management-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Tour Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage tour requests and remote check-ins"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>{B(),U()},children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1"}),"Refresh"]}),(0,ds.jsxs)(fn,{onClick:()=>x(!0),"data-testid":"new-tour-request-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"}),"New Tour Request"]})]})]}),(0,ds.jsxs)(cA,{value:b,onValueChange:w,children:[(0,ds.jsxs)(dA,{children:[(0,ds.jsxs)(uA,{value:"my-tours",className:"gap-2","data-testid":"tab-my-tours",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),"My Tours"]}),(0,ds.jsxs)(uA,{value:"remote-checkin",className:"gap-2","data-testid":"tab-remote-checkin",children:[(0,ds.jsx)(Hk,{className:"w-4 h-4"}),"Remote Check-in"]}),z&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(uA,{value:"all-requests",className:"gap-2","data-testid":"tab-all-requests",children:[(0,ds.jsx)(__,{className:"w-4 h-4"}),"All Requests"]}),(0,ds.jsxs)(uA,{value:"field-employees",className:"gap-2","data-testid":"tab-field-employees",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Field Employees"]})]})]}),(0,ds.jsx)(hA,{value:"my-tours",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"My Tour Requests"}),(0,ds.jsx)(On,{children:"View and track your tour requests"})]}),(0,ds.jsx)(Mn,{children:m?(0,ds.jsx)("div",{className:"flex justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):o.filter(e=>e.employee_id===(null===i||void 0===i?void 0:i.employee_id)).length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Purpose"}),(0,ds.jsx)(gS,{children:"Location"}),(0,ds.jsx)(gS,{children:"Dates"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:o.filter(e=>e.employee_id===(null===i||void 0===i?void 0:i.employee_id)).map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.purpose}),(0,ds.jsx)(yS,{children:e.location}),(0,ds.jsxs)(yS,{children:[e.start_date," ",e.end_date&&e.end_date!==e.start_date?"- ".concat(e.end_date):""]}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:K[e.status],children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>g(e),children:[(0,ds.jsx)(xA,{className:"w-3 h-3 mr-1"}),"View"]})})]},e.request_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(__,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No tour requests yet"}),(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>x(!0),children:"Create Tour Request"})]})})]})}),(0,ds.jsx)(hA,{value:"remote-checkin",children:(0,ds.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(Hk,{className:"w-5 h-5 text-primary"}),"GPS Remote Check-in"]}),(0,ds.jsx)(On,{children:"Record your attendance from your current location"})]}),(0,ds.jsx)(Mn,{className:"space-y-4",children:null!==d&&void 0!==d&&d.can_remote_checkin?(0,ds.jsxs)(ds.Fragment,{children:[(null===d||void 0===d?void 0:d.has_active_tour)&&(0,ds.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"font-medium text-blue-800",children:"Active Tour"}),(0,ds.jsxs)("p",{className:"text-sm text-blue-600",children:[null===(e=d.tour)||void 0===e?void 0:e.purpose," - ",null===(t=d.tour)||void 0===t?void 0:t.location]}),(0,ds.jsxs)("p",{className:"text-xs text-blue-500 mt-1",children:[null===(s=d.tour)||void 0===s?void 0:s.start_date," to ",null===(n=d.tour)||void 0===n?void 0:n.end_date]})]}),(null===d||void 0===d?void 0:d.is_field_employee)&&!(null!==d&&void 0!==d&&d.has_active_tour)&&(0,ds.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"font-medium text-purple-800",children:"Field Employee"}),(0,ds.jsx)("p",{className:"text-sm text-purple-600",children:"You can check-in from any location"})]}),k&&(0,ds.jsx)("div",{className:"p-3 bg-red-50 rounded-lg text-red-700 text-sm",children:k}),(0,ds.jsxs)("div",{className:"flex gap-4",children:[(0,ds.jsx)(fn,{className:"flex-1 h-16",onClick:()=>W("IN"),disabled:N,"data-testid":"remote-checkin-btn",children:N?(0,ds.jsx)(SE,{className:"w-5 h-5 animate-spin"}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Wk,{className:"w-5 h-5 mr-2"}),"Check IN"]})}),(0,ds.jsx)(fn,{className:"flex-1 h-16",variant:"outline",onClick:()=>W("OUT"),disabled:N,"data-testid":"remote-checkout-btn",children:N?(0,ds.jsx)(SE,{className:"w-5 h-5 animate-spin"}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(H_,{className:"w-5 h-5 mr-2"}),"Check OUT"]})})]}),C&&(0,ds.jsxs)("p",{className:"text-xs text-slate-500 text-center",children:["Last location: ",C.latitude.toFixed(6),", ",C.longitude.toFixed(6)]})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(Jk,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500 mb-2",children:"Remote check-in not available"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:"You must be on an approved tour or be a designated field employee"})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Today's Check-ins"}),(0,ds.jsx)(On,{children:"Your remote check-in history for today"})]}),(0,ds.jsx)(Mn,{children:(null===d||void 0===d||null===(r=d.todays_checkins)||void 0===r?void 0:r.length)>0?(0,ds.jsx)("div",{className:"space-y-3",children:d.todays_checkins.map((e,t)=>{var s,a,n,r,l;return(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:["IN"===e.punch_type?(0,ds.jsx)(Wk,{className:"w-5 h-5 text-emerald-600"}):(0,ds.jsx)(H_,{className:"w-5 h-5 text-amber-600"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.punch_type}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.time})]})]}),(0,ds.jsx)("div",{className:"text-right text-xs text-slate-500 max-w-[200px] truncate",children:(null===(s=e.location)||void 0===s?void 0:s.name)||"".concat(null===(a=e.location)||void 0===a||null===(n=a.latitude)||void 0===n?void 0:n.toFixed(4),", ").concat(null===(r=e.location)||void 0===r||null===(l=r.longitude)||void 0===l?void 0:l.toFixed(4))})]},t)})}):(0,ds.jsx)("p",{className:"text-center py-8 text-slate-500",children:"No check-ins recorded today"})})]})]})}),z&&(0,ds.jsx)(hA,{value:"all-requests",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"All Tour Requests"}),(0,ds.jsx)(On,{children:"Manage and approve tour requests"})]}),(0,ds.jsxs)(yE,{value:y,onValueChange:j,children:[(0,ds.jsx)(bE,{className:"w-[150px]",children:(0,ds.jsx)(jE,{placeholder:"Filter by status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All"}),(0,ds.jsx)(kE,{value:"pending",children:"Pending"}),(0,ds.jsx)(kE,{value:"approved",children:"Approved"}),(0,ds.jsx)(kE,{value:"ongoing",children:"Ongoing"}),(0,ds.jsx)(kE,{value:"completed",children:"Completed"}),(0,ds.jsx)(kE,{value:"rejected",children:"Rejected"})]})]})]})}),(0,ds.jsx)(Mn,{children:m?(0,ds.jsx)("div",{className:"flex justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):o.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Purpose"}),(0,ds.jsx)(gS,{children:"Location"}),(0,ds.jsx)(gS,{children:"Dates"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:o.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:e.employee_name}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:e.purpose}),(0,ds.jsx)(yS,{children:e.location}),(0,ds.jsxs)(yS,{children:[e.start_date,e.end_date&&e.end_date!==e.start_date&&" - ".concat(e.end_date)]}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:K[e.status],children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>g(e),children:(0,ds.jsx)(xA,{className:"w-3 h-3"})}),"pending"===e.status&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(fn,{size:"sm",onClick:()=>q(e.request_id),className:"bg-emerald-600 hover:bg-emerald-700",children:(0,ds.jsx)(JF,{className:"w-3 h-3"})}),(0,ds.jsx)(fn,{size:"sm",variant:"destructive",onClick:()=>Y(e.request_id),children:(0,ds.jsx)(TA,{className:"w-3 h-3"})})]})]})})]},e.request_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(__,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No tour requests found"})]})})]})}),z&&(0,ds.jsx)(hA,{value:"field-employees",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-5 h-5 text-primary"}),"Field Employees"]}),(0,ds.jsx)(On,{children:"Employees who can check-in remotely without tour approval"})]}),(0,ds.jsxs)(fn,{onClick:()=>O(!0),"data-testid":"add-field-employee-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"}),"Add Field Employee"]})]})}),(0,ds.jsx)(Mn,{children:T.length>0?(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Employee"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:T.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.emp_code})]})}),(0,ds.jsx)(yS,{children:e.department||"-"}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>G(e.employee_id,!1),className:"text-red-600",children:"Remove"})})]},e.employee_id))})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(k_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No field employees configured"}),(0,ds.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Field employees can use remote check-in without tour approval"})]})})]})})]}),(0,ds.jsx)(eo,{open:f,onOpenChange:x,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"New Tour Request"}),(0,ds.jsx)(oo,{children:"Submit a request for business travel"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Purpose *"}),(0,ds.jsx)(vn,{value:L.purpose,onChange:e=>I(u(u({},L),{},{purpose:e.target.value})),placeholder:"e.g., Client meeting, Site visit","data-testid":"tour-purpose"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Location/Destination *"}),(0,ds.jsx)(vn,{value:L.location,onChange:e=>I(u(u({},L),{},{location:e.target.value})),placeholder:"e.g., Mumbai, Delhi","data-testid":"tour-location"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Client Name (if applicable)"}),(0,ds.jsx)(vn,{value:L.client_name,onChange:e=>I(u(u({},L),{},{client_name:e.target.value})),placeholder:"Client or company name"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Date *"}),(0,ds.jsx)(vn,{type:"date",value:L.start_date,onChange:e=>I(u(u({},L),{},{start_date:e.target.value})),"data-testid":"tour-start-date"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Date"}),(0,ds.jsx)(vn,{type:"date",value:L.end_date,onChange:e=>I(u(u({},L),{},{end_date:e.target.value})),"data-testid":"tour-end-date"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Transport Mode"}),(0,ds.jsxs)(yE,{value:L.transport_mode,onValueChange:e=>I(u(u({},L),{},{transport_mode:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"bus",children:"Bus"}),(0,ds.jsx)(kE,{value:"train",children:"Train"}),(0,ds.jsx)(kE,{value:"flight",children:"Flight"}),(0,ds.jsx)(kE,{value:"car",children:"Car"}),(0,ds.jsx)(kE,{value:"self",children:"Self Arrangement"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Remarks"}),(0,ds.jsx)(kA,{value:L.remarks,onChange:e=>I(u(u({},L),{},{remarks:e.target.value})),placeholder:"Additional details...",rows:2})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(L.purpose&&L.location&&L.start_date)try{(await fetch("".concat(fL,"/travel/requests"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(L)})).ok?(ts.success("Tour request submitted"),x(!1),I({purpose:"",location:"",client_name:"",start_date:"",end_date:"",transport_mode:"bus",remarks:"",request_type:"tour"}),B()):ts.error("Failed to submit request")}catch(e){ts.error("Failed to submit request")}else ts.error("Please fill required fields")},"data-testid":"submit-tour-btn",children:"Submit Request"})]})]})}),(0,ds.jsx)(eo,{open:!!v,onOpenChange:()=>g(null),children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:"Tour Request Details"})}),v&&(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Employee"}),(0,ds.jsx)("p",{className:"font-medium",children:v.employee_name})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Status"}),(0,ds.jsx)(tk,{className:K[v.status],children:v.status})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Purpose"}),(0,ds.jsx)("p",{className:"font-medium",children:v.purpose})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Location"}),(0,ds.jsx)("p",{children:v.location})]}),v.client_name&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Client"}),(0,ds.jsx)("p",{children:v.client_name})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Start Date"}),(0,ds.jsx)("p",{children:v.start_date})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"End Date"}),(0,ds.jsx)("p",{children:v.end_date||v.start_date})]})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Transport"}),(0,ds.jsx)("p",{className:"capitalize",children:v.transport_mode})]}),v.remarks&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Remarks"}),(0,ds.jsx)("p",{className:"text-sm",children:v.remarks})]}),(null===(l=v.remote_checkins)||void 0===l?void 0:l.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-slate-500",children:"Remote Check-ins"}),(0,ds.jsx)("div",{className:"mt-2 space-y-2",children:v.remote_checkins.map((e,t)=>(0,ds.jsxs)("div",{className:"p-2 bg-slate-50 rounded text-sm",children:[(0,ds.jsx)("span",{className:"font-medium",children:e.punch_type})," at ",e.time," on ",e.date]},t))})]})]}),(0,ds.jsxs)(lo,{children:["pending"===(null===v||void 0===v?void 0:v.status)&&z&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>Y(v.request_id),children:[(0,ds.jsx)(TA,{className:"w-4 h-4 mr-1"}),"Reject"]}),(0,ds.jsxs)(fn,{onClick:()=>q(v.request_id),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,ds.jsx)(JF,{className:"w-4 h-4 mr-1"}),"Approve"]})]}),(0,ds.jsx)(fn,{variant:"outline",onClick:()=>g(null),children:"Close"})]})]})}),(0,ds.jsx)(eo,{open:R,onOpenChange:O,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add Field Employee"}),(0,ds.jsx)(oo,{children:"Select an employee to grant field employee status"})]}),(0,ds.jsxs)("div",{className:"py-4",children:[(0,ds.jsx)(_n,{children:"Select Employee"}),(0,ds.jsxs)(yE,{value:M,onValueChange:F,children:[(0,ds.jsx)(bE,{className:"mt-2","data-testid":"field-employee-select",children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:P.filter(e=>!T.find(t=>t.employee_id===e.employee_id)).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name," (",e.emp_code||e.employee_id,")"]},e.employee_id))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:()=>G(M,!0),disabled:!M,"data-testid":"confirm-field-employee-btn",children:"Add Field Employee"})]})]})})]})},vL=Yi("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),gL="https://shardahrms.com/api",yL=()=>{var e,t,s,n,r,l;const{user:i}=Cs(),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[v,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[N,_]=(0,a.useState)(1),[k,S]=(0,a.useState)(""),[C,E]=(0,a.useState)(!1),[T,A]=(0,a.useState)(null),[P,D]=(0,a.useState)("soft"),[R,O]=(0,a.useState)({date_from:"",date_to:"",department:"all",employee_id:"all",status:"all"}),M="super_admin"===(null===i||void 0===i?void 0:i.role)||"hr_admin"===(null===i||void 0===i?void 0:i.role);(0,a.useEffect)(()=>{M&&(F(),L())},[M]);const F=async()=>{try{const e=await fetch("".concat(gL,"/data-management/stats"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();c(t)}}catch(e){ts.error("Failed to fetch data statistics")}finally{h(!1)}},L=async()=>{try{const[e,t]=await Promise.all([fetch("".concat(gL,"/data-management/departments"),{credentials:"include",headers:nk()}),fetch("".concat(gL,"/data-management/employees-list"),{credentials:"include",headers:nk()})]);e.ok&&p(await e.json()),t.ok&&x(await t.json())}catch(e){console.error("Failed to fetch filter options:",e)}},I=e=>e.deleted_count>0?(0,ds.jsx)(tk,{variant:"outline",className:"text-amber-600",children:"Has Deleted"}):0===e.total_count?(0,ds.jsx)(tk,{variant:"outline",className:"text-slate-400",children:"Empty"}):(0,ds.jsx)(tk,{className:"bg-emerald-100 text-emerald-700",children:"Active"});return M?(0,ds.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:(0,ds.jsx)(I_,{className:"w-5 h-5 text-red-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Management"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Manage and delete data in bulk"})]})]}),(0,ds.jsx)("div",{className:"flex gap-2",children:(0,ds.jsxs)(fn,{variant:"outline",onClick:F,className:"gap-2",children:[(0,ds.jsx)(SE,{className:"w-4 h-4"}),"Refresh"]})})]}),(0,ds.jsx)(Pn,{className:"border-amber-200 bg-amber-50",children:(0,ds.jsxs)(Mn,{className:"flex items-start gap-3 py-4",children:[(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-amber-800",children:"Caution: Data Deletion"}),(0,ds.jsx)("p",{className:"text-sm text-amber-700",children:"Deleted data may be unrecoverable. Soft-deleted records can be restored, but hard-deleted records are permanently removed."})]})]})}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{children:"Data Overview"}),(0,ds.jsx)(On,{children:"View and manage all data types in the system"})]}),(0,ds.jsx)(Mn,{children:d?(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Data Type"}),(0,ds.jsx)(gS,{className:"text-center",children:"Total Records"}),(0,ds.jsx)(gS,{className:"text-center",children:"Active"}),(0,ds.jsx)(gS,{className:"text-center",children:"Deleted"}),(0,ds.jsx)(gS,{className:"text-center",children:"Status"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:o.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsxs)(yS,{children:[(0,ds.jsx)("div",{className:"font-medium",children:e.display_name}),(0,ds.jsx)("div",{className:"text-xs text-slate-400",children:e.collection})]}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)("span",{className:"font-semibold text-lg",children:e.total_count.toLocaleString()})}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)("span",{className:"text-emerald-600 font-medium",children:e.active_count.toLocaleString()})}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)("span",{className:"text-red-600 font-medium",children:e.deleted_count.toLocaleString()})}),(0,ds.jsx)(yS,{className:"text-center",children:I(e)}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)(lN,{children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsxs)(fn,{variant:"outline",size:"sm",className:"gap-1",children:["Actions",(0,ds.jsx)(dE,{className:"w-3 h-3"})]})}),(0,ds.jsxs)(oN,{align:"end",children:[(0,ds.jsxs)(cN,{onClick:()=>{return t=e.data_type,A(t),O({date_from:"",date_to:"",department:"all",employee_id:"all",status:"all"}),D("soft"),_(1),void g(!0);var t},children:[(0,ds.jsx)(EE,{className:"w-4 h-4 mr-2"}),"Bulk Delete with Filters"]}),(0,ds.jsxs)(cN,{onClick:()=>{return t=e.data_type,A(t),D("soft"),_(1),void j(!0);var t},className:"text-red-600",children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"}),"Delete All ",e.display_name]}),e.deleted_count>0&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(uN,{}),(0,ds.jsxs)(cN,{onClick:()=>(async e=>{try{const t=await fetch("".concat(gL,"/data-management/restore"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({data_type:e})}),s=await t.json();t.ok?(ts.success(s.message),F()):ts.error(s.detail||"Restore failed")}catch(t){ts.error("Failed to restore records")}})(e.data_type),children:[(0,ds.jsx)(KM,{className:"w-4 h-4 mr-2"}),"Restore Deleted (",e.deleted_count,")"]})]})]})]})})]},e.data_type))})]})})]}),(0,ds.jsxs)(Pn,{className:"border-red-200",children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-red-600 flex items-center gap-2",children:[(0,ds.jsx)(AA,{className:"w-5 h-5"}),"Danger Zone"]}),(0,ds.jsx)(On,{children:"Irreversible actions that affect all data"})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-red-800",children:"Delete Everything"}),(0,ds.jsx)("p",{className:"text-sm text-red-600",children:"Permanently delete all data in the system. User accounts will be preserved."})]}),(0,ds.jsxs)(fn,{variant:"destructive",onClick:()=>w(!0),className:"gap-2",children:[(0,ds.jsx)(dk,{className:"w-4 h-4"}),"Delete All Data"]})]})})]}),(0,ds.jsx)(eo,{open:v,onOpenChange:g,children:(0,ds.jsxs)(no,{className:"sm:max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{children:["Bulk Delete - ",null===(e=o.find(e=>e.data_type===T))||void 0===e?void 0:e.display_name]}),(0,ds.jsx)(oo,{children:1===N?"Configure filters and deletion type":"Confirm your deletion"})]}),1===N?(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Deletion Type"}),(0,ds.jsxs)(yE,{value:P,onValueChange:D,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"soft",children:"Soft Delete (Recoverable)"}),(0,ds.jsx)(kE,{value:"hard",children:"Hard Delete (Permanent)"})]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-1",children:[(0,ds.jsx)(v_,{className:"w-3 h-3"})," Date From"]}),(0,ds.jsx)(vn,{type:"date",value:R.date_from,onChange:e=>O(u(u({},R),{},{date_from:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date To"}),(0,ds.jsx)(vn,{type:"date",value:R.date_to,onChange:e=>O(u(u({},R),{},{date_to:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-1",children:[(0,ds.jsx)(ak,{className:"w-3 h-3"})," Department"]}),(0,ds.jsxs)(yE,{value:R.department,onValueChange:e=>O(u(u({},R),{},{department:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"All Departments"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Departments"}),m.map(e=>(0,ds.jsx)(kE,{value:e,children:e},e))]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-1",children:[(0,ds.jsx)(sk,{className:"w-3 h-3"})," Employee"]}),(0,ds.jsxs)(yE,{value:R.employee_id,onValueChange:e=>O(u(u({},R),{},{employee_id:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"All Employees"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Employees"}),f.map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.name," (",e.code,")"]},e.employee_id))]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Status"}),(0,ds.jsxs)(yE,{value:R.status,onValueChange:e=>O(u(u({},R),{},{status:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"All Statuses"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Statuses"}),(0,ds.jsx)(kE,{value:"pending",children:"Pending"}),(0,ds.jsx)(kE,{value:"approved",children:"Approved"}),(0,ds.jsx)(kE,{value:"rejected",children:"Rejected"}),(0,ds.jsx)(kE,{value:"completed",children:"Completed"}),(0,ds.jsx)(kE,{value:"cancelled",children:"Cancelled"})]})]})]})]}):(0,ds.jsxs)("div",{className:"py-6",children:[(0,ds.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,ds.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center",children:(0,ds.jsx)(AA,{className:"w-8 h-8 text-red-600"})})}),(0,ds.jsxs)("p",{className:"text-center text-slate-700 mb-4",children:["Are you sure you want to ",(0,ds.jsx)("strong",{children:"hard"===P?"permanently delete":"soft delete"})," the selected records?"]}),(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg text-sm",children:[(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Data Type:"})," ",null===(t=o.find(e=>e.data_type===T))||void 0===t?void 0:t.display_name]}),(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Delete Type:"})," ","hard"===P?"Permanent (Unrecoverable)":"Soft (Recoverable)"]}),R.date_from&&(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"From:"})," ",R.date_from]}),R.date_to&&(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"To:"})," ",R.date_to]}),R.department&&"all"!==R.department&&(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Department:"})," ",R.department]}),R.employee_id&&"all"!==R.employee_id&&(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Employee:"})," ",null===(s=f.find(e=>e.employee_id===R.employee_id))||void 0===s?void 0:s.name]}),R.status&&"all"!==R.status&&(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Status:"})," ",R.status]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{g(!1),_(1)},children:"Cancel"}),(0,ds.jsx)(fn,{variant:2===N?"destructive":"default",onClick:async()=>{if(1!==N){E(!0);try{const e=u(u({},R),{},{department:"all"===R.department?"":R.department,employee_id:"all"===R.employee_id?"":R.employee_id,status:"all"===R.status?"":R.status}),t=await fetch("".concat(gL,"/data-management/bulk-delete"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({data_type:T,delete_type:P,filters:e})}),s=await t.json();t.ok?(ts.success(s.message),g(!1),F()):ts.error(s.detail||"Delete failed")}catch(e){ts.error("Failed to delete records")}finally{E(!1),_(1)}}else _(2)},disabled:C,children:C?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"})," Processing..."]}):1===N?"Continue":(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"})," Confirm Delete"]})})]})]})}),(0,ds.jsx)(eo,{open:y,onOpenChange:j,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{children:["Delete All ",null===(n=o.find(e=>e.data_type===T))||void 0===n?void 0:n.display_name]}),(0,ds.jsx)(oo,{children:1===N?"Choose deletion type":"This action cannot be undone for hard deletes"})]}),1===N?(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsx)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:(0,ds.jsxs)("p",{className:"text-amber-800 font-medium",children:["Total records: ",null===(r=o.find(e=>e.data_type===T))||void 0===r?void 0:r.total_count.toLocaleString()]})}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Deletion Type"}),(0,ds.jsxs)(yE,{value:P,onValueChange:D,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"soft",children:"Soft Delete (Recoverable)"}),(0,ds.jsx)(kE,{value:"hard",children:"Hard Delete (Permanent)"})]})]})]})]}):(0,ds.jsxs)("div",{className:"py-6 text-center",children:[(0,ds.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:(0,ds.jsx)(AA,{className:"w-8 h-8 text-red-600"})}),(0,ds.jsxs)("p",{className:"text-slate-700 mb-2",children:["You are about to ",(0,ds.jsx)("strong",{children:"hard"===P?"permanently delete":"soft delete"})]}),(0,ds.jsxs)("p",{className:"text-2xl font-bold text-red-600 mb-4",children:[null===(l=o.find(e=>e.data_type===T))||void 0===l?void 0:l.total_count.toLocaleString()," records"]}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"hard"===P?"This action cannot be undone!":"Records can be restored later."})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{j(!1),_(1)},children:"Cancel"}),(0,ds.jsx)(fn,{variant:2===N?"destructive":"default",onClick:async()=>{if(1!==N){E(!0);try{const e=await fetch("".concat(gL,"/data-management/delete-all-type"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({data_type:T,delete_type:P})}),t=await e.json();e.ok?(ts.success(t.message),j(!1),F()):ts.error(t.detail||"Delete failed")}catch(e){ts.error("Failed to delete records")}finally{E(!1),_(1)}}else _(2)},disabled:C,children:C?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"})," Processing..."]}):1===N?"Continue":(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"})," Confirm Delete All"]})})]})]})}),(0,ds.jsx)(eo,{open:b,onOpenChange:w,children:(0,ds.jsxs)(no,{className:"sm:max-w-md",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsxs)(io,{className:"text-red-600 flex items-center gap-2",children:[(0,ds.jsx)(AA,{className:"w-5 h-5"}),"Delete All Data"]}),(0,ds.jsx)(oo,{children:"This will permanently delete ALL data in the system"})]}),(0,ds.jsxs)("div",{className:"py-4 space-y-4",children:[(0,ds.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,ds.jsx)("p",{className:"text-red-800 font-medium mb-2",children:"Warning: This action is irreversible!"}),(0,ds.jsxs)("ul",{className:"text-sm text-red-700 space-y-1",children:[(0,ds.jsx)("li",{children:"\u2022 All employees, attendance, leave records will be deleted"}),(0,ds.jsx)("li",{children:"\u2022 All payroll, KPI, and performance data will be deleted"}),(0,ds.jsx)("li",{children:"\u2022 All assets, expenses, training records will be deleted"}),(0,ds.jsx)("li",{children:"\u2022 User accounts will be preserved for login"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{children:["Type ",(0,ds.jsx)("span",{className:"font-mono font-bold",children:"DELETE ALL DATA"})," to confirm:"]}),(0,ds.jsx)(vn,{value:k,onChange:e=>S(e.target.value),placeholder:"Type here...",className:"DELETE ALL DATA"===k?"border-red-500":""})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{w(!1),S("")},children:"Cancel"}),(0,ds.jsx)(fn,{variant:"destructive",onClick:async()=>{if("DELETE ALL DATA"===k){E(!0);try{const e=await fetch("".concat(gL,"/data-management/delete-everything"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify({confirmation_text:k,delete_type:"hard"})}),t=await e.json();e.ok?(ts.success(t.message),w(!1),S(""),F()):ts.error(t.detail||"Delete failed")}catch(e){ts.error("Failed to delete all data")}finally{E(!1)}}else ts.error('Please type "DELETE ALL DATA" exactly to confirm')},disabled:C||"DELETE ALL DATA"!==k,children:C?(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"})," Deleting..."]}):(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"})," Delete Everything"]})})]})]})})]}):(0,ds.jsx)("div",{className:"p-6",children:(0,ds.jsx)(Pn,{children:(0,ds.jsxs)(Mn,{className:"flex flex-col items-center justify-center py-12",children:[(0,ds.jsx)(vL,{className:"w-16 h-16 text-red-500 mb-4"}),(0,ds.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Denied"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Only Admin and HR users can access Data Management."})]})})})},jL=Yi("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),bL=Yi("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wL=Yi("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),NL=Yi("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),_L=Yi("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),kL="https://shardahrms.com/api",SL=()=>{var e,t;const{user:s}=Cs(),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)("status"),[d,h]=(0,a.useState)(null),[m,p]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)({biometric_code:"",employee_id:""}),[N,_]=(0,a.useState)({syncFrequency:"3",lateThreshold:"09:45",autoSyncEnabled:!0}),[k,S]=(0,a.useState)("7"),[C,E]=(0,a.useState)(""),[T,A]=(0,a.useState)(""),P="super_admin"===(null===s||void 0===s?void 0:s.role)||"hr_admin"===(null===s||void 0===s?void 0:s.role);(0,a.useEffect)(()=>{P&&D()},[P]);const D=async()=>{r(!0);try{const e=nk(),[t,s,a]=await Promise.all([fetch("".concat(kL,"/biometric/sync/status"),{credentials:"include",headers:e}),fetch("".concat(kL,"/biometric/sync/unmatched-codes"),{credentials:"include",headers:e}),fetch("".concat(kL,"/employees"),{credentials:"include",headers:e})]);if(t.ok){const e=await t.json();h(e)}if(s.ok){const e=await s.json();p(e.unmatched_codes||[])}if(a.ok){const e=await a.json();g(e)}await R()}catch(e){console.error("Error fetching data:",e),ts.error("Failed to load API status")}finally{r(!1)}},R=async()=>{try{const e=nk(),t=await fetch("".concat(kL,"/employees"),{credentials:"include",headers:e});if(t.ok){const e=(await t.json()).filter(e=>e.emp_code).map(e=>({biometric_code:e.emp_code,employee_id:e.employee_id,employee_name:"".concat(e.first_name||""," ").concat(e.last_name||"").trim(),department:e.department||""}));x(e)}}catch(e){console.error("Error loading mappings:",e)}},O=async e=>{i(!0);try{const n=u({"Content-Type":"application/json"},nk());let r="".concat(kL,"/biometric/sync"),l={};if("recent"===e){const e=parseInt(k),t=(new Date).toISOString().split("T")[0];l={from_date:new Date(Date.now()-24*e*60*60*1e3).toISOString().split("T")[0],to_date:t}}else if("custom"===e){if(!C||!T)return ts.error("Please select both from and to dates"),void i(!1);l={from_date:C,to_date:T}}else"historical"===e?(r="".concat(kL,"/biometric/sync/historical"),l={days:365}):"refresh"===e&&(r="".concat(kL,"/biometric/sync/refresh-all"),l={days:365});const o=await fetch(r,{method:"POST",headers:n,credentials:"include",body:JSON.stringify(l)});if(o.ok){var t,s,a;const e=await o.json();ts.success("Sync completed! ".concat((null===(t=e.stats)||void 0===t?void 0:t.updated)||(null===(s=e.sync_result)||void 0===s||null===(a=s.stats)||void 0===a?void 0:a.updated)||0," records updated")),D()}else{const e=await o.json();ts.error(e.detail||"Sync failed")}}catch(n){console.error("Sync error:",n),ts.error("Failed to sync data")}finally{i(!1)}},M=e=>{if(!e)return"Never";return new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})};return P?n?(0,ds.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,ds.jsx)(SE,{className:"w-8 h-8 text-primary animate-spin"})}):(0,ds.jsxs)("div",{className:"space-y-6 p-6",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"API Manager"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage biometric API sync, mappings, and settings"})]}),(0,ds.jsx)("div",{className:"flex gap-2",children:(0,ds.jsxs)(fn,{variant:"outline",onClick:D,disabled:l,children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-2 ".concat(l?"animate-spin":"")}),"Refresh"]})})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===d||void 0===d||null===(e=d.last_sync_stats)||void 0===e?void 0:e.matched)||0}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Last Sync Matched"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:m.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Unmatched Codes"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(k_,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:f.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Mapped Employees"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(p_,{className:"w-5 h-5 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-sm font-bold text-slate-900",children:M(null===d||void 0===d?void 0:d.last_sync).split(",")[0]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Last Sync"})]})]})})})]}),(0,ds.jsxs)(cA,{value:o,onValueChange:c,children:[(0,ds.jsxs)(dA,{className:"mb-4",children:[(0,ds.jsxs)(uA,{value:"status",className:"gap-2",children:[(0,ds.jsx)(jL,{className:"w-4 h-4"}),"Sync Status"]}),(0,ds.jsxs)(uA,{value:"sync",className:"gap-2",children:[(0,ds.jsx)(bL,{className:"w-4 h-4"}),"Manual Sync"]}),(0,ds.jsxs)(uA,{value:"mappings",className:"gap-2",children:[(0,ds.jsx)(wL,{className:"w-4 h-4"}),"Code Mappings"]}),(0,ds.jsxs)(uA,{value:"unmatched",className:"gap-2",children:[(0,ds.jsx)(AA,{className:"w-4 h-4"}),"Unmatched (",m.length,")"]}),(0,ds.jsxs)(uA,{value:"logs",className:"gap-2",children:[(0,ds.jsx)(NL,{className:"w-4 h-4"}),"Sync Logs"]})]}),(0,ds.jsx)(hA,{value:"status",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(_L,{className:"w-5 h-5 text-emerald-500"}),"API Connection Status"]})}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between p-3 bg-emerald-50 rounded-lg",children:[(0,ds.jsx)("span",{className:"font-medium",children:"Biometric API"}),(0,ds.jsx)(tk,{className:"bg-emerald-100 text-emerald-700",children:"Connected"})]}),(0,ds.jsxs)("div",{className:"text-sm text-slate-600 space-y-2",children:[(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"API URL:"})," http://115.245.227.203:81"]}),(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Sync Frequency:"})," Every 3 hours"]}),(0,ds.jsxs)("p",{children:[(0,ds.jsx)("strong",{children:"Late Threshold:"})," 09:45 AM"]})]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(I_,{className:"w-5 h-5 text-blue-500"}),"Last Sync Summary"]})}),(0,ds.jsx)(Mn,{children:null!==d&&void 0!==d&&d.last_sync_stats?(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)("div",{className:"flex justify-between p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("span",{children:"Total Records"}),(0,ds.jsx)("span",{className:"font-bold",children:d.last_sync_stats.total||0})]}),(0,ds.jsxs)("div",{className:"flex justify-between p-2 bg-emerald-50 rounded",children:[(0,ds.jsx)("span",{children:"Matched"}),(0,ds.jsx)("span",{className:"font-bold text-emerald-600",children:d.last_sync_stats.matched||0})]}),(0,ds.jsxs)("div",{className:"flex justify-between p-2 bg-blue-50 rounded",children:[(0,ds.jsx)("span",{children:"Updated"}),(0,ds.jsx)("span",{className:"font-bold text-blue-600",children:d.last_sync_stats.updated||0})]}),(0,ds.jsxs)("div",{className:"flex justify-between p-2 bg-amber-50 rounded",children:[(0,ds.jsx)("span",{children:"Unmatched"}),(0,ds.jsx)("span",{className:"font-bold text-amber-600",children:d.last_sync_stats.unmatched||0})]})]}):(0,ds.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No sync data available"})})]})]})}),(0,ds.jsx)(hA,{value:"sync",children:(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Quick Sync Options"}),(0,ds.jsx)(On,{children:"Run a manual sync for specific time periods"})]}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsx)(_n,{children:"Sync Recent Days"}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:k,onValueChange:S,children:[(0,ds.jsx)(bE,{className:"w-[120px]",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"1",children:"1 Day"}),(0,ds.jsx)(kE,{value:"7",children:"7 Days"}),(0,ds.jsx)(kE,{value:"14",children:"14 Days"}),(0,ds.jsx)(kE,{value:"30",children:"30 Days"}),(0,ds.jsx)(kE,{value:"60",children:"60 Days"}),(0,ds.jsx)(kE,{value:"90",children:"90 Days"})]})]}),(0,ds.jsxs)(fn,{onClick:()=>O("recent"),disabled:l,className:"flex-1",children:[l?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(ZO,{className:"w-4 h-4 mr-2"}),"Sync Now"]})]})]}),(0,ds.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,ds.jsx)(_n,{children:"Custom Date Range"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"From"}),(0,ds.jsx)(vn,{type:"date",value:C,onChange:e=>E(e.target.value)})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"To"}),(0,ds.jsx)(vn,{type:"date",value:T,onChange:e=>A(e.target.value)})]})]}),(0,ds.jsxs)(fn,{onClick:()=>O("custom"),disabled:l,variant:"outline",className:"w-full",children:[l?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(v_,{className:"w-4 h-4 mr-2"}),"Sync Custom Range"]})]})]})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Advanced Actions"}),(0,ds.jsx)(On,{children:"Use these for troubleshooting or full resyncs"})]}),(0,ds.jsxs)(Mn,{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ds.jsx)(NL,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:"Historical Sync (1 Year)"}),(0,ds.jsx)("p",{className:"text-sm text-slate-600",children:"Sync all attendance data from the past year"})]})]}),(0,ds.jsxs)(fn,{onClick:()=>O("historical"),disabled:l,variant:"outline",className:"w-full",children:[l?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-2"}),"Run Historical Sync"]})]}),(0,ds.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ds.jsx)(SE,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:"Full Refresh"}),(0,ds.jsx)("p",{className:"text-sm text-slate-600",children:"Delete all synced data and re-sync from scratch"})]})]}),(0,ds.jsxs)(fn,{onClick:()=>O("refresh"),disabled:l,variant:"outline",className:"w-full border-amber-300 hover:bg-amber-100",children:[l?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(bL,{className:"w-4 h-4 mr-2"}),"Full Refresh (1 Year)"]})]}),(0,ds.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg space-y-3",children:[(0,ds.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ds.jsx)(p_,{className:"w-5 h-5 text-purple-600 mt-0.5"}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium",children:"Recalculate Late Status"}),(0,ds.jsx)("p",{className:"text-sm text-slate-600",children:"Re-apply 09:45 late threshold to all records"})]})]}),(0,ds.jsxs)(fn,{onClick:async()=>{i(!0);try{const e=u({"Content-Type":"application/json"},nk()),t=await fetch("".concat(kL,"/biometric/sync/recalculate-late"),{method:"POST",headers:e,credentials:"include"});if(t.ok){const e=await t.json();ts.success("Recalculated late status for ".concat(e.updated," records")),D()}else{const e=await t.json();ts.error(e.detail||"Recalculation failed")}}catch(e){ts.error("Failed to recalculate late status")}finally{i(!1)}},disabled:l,variant:"outline",className:"w-full border-purple-300 hover:bg-purple-100",children:[l?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(ik,{className:"w-4 h-4 mr-2"}),"Recalculate Late"]})]})]})]})]})}),(0,ds.jsx)(hA,{value:"mappings",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)("div",{className:"flex items-center justify-between",children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Employee Code Mappings"}),(0,ds.jsx)(On,{children:"Biometric device codes mapped to employees (via emp_code field)"})]})})}),(0,ds.jsxs)(Mn,{children:[(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Biometric Code"}),(0,ds.jsx)(gS,{children:"Employee Name"}),(0,ds.jsx)(gS,{children:"Department"}),(0,ds.jsx)(gS,{children:"Status"})]})}),(0,ds.jsx)(xS,{children:f.length>0?f.map(e=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-mono font-medium",children:e.biometric_code}),(0,ds.jsx)(yS,{children:e.employee_name}),(0,ds.jsx)(yS,{children:e.department||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)(tk,{className:"bg-emerald-100 text-emerald-700",children:[(0,ds.jsx)(wL,{className:"w-3 h-3 mr-1"}),"Mapped"]})})]},e.biometric_code)):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:4,className:"text-center py-8 text-slate-500",children:"No mappings found. Employee codes (emp_code) are used for mapping."})})})]})}),(0,ds.jsxs)("p",{className:"text-sm text-slate-500 mt-4",children:[(0,ds.jsx)("strong",{children:"Note:"})," Mapping is done via the employee's ",(0,ds.jsx)("code",{className:"bg-slate-100 px-1 rounded",children:"emp_code"})," field. To add a new mapping, update the employee's code to match their biometric device ID."]})]})]})}),(0,ds.jsx)(hA,{value:"unmatched",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-500"}),"Unmatched Employee Codes"]}),(0,ds.jsx)(On,{children:"These codes exist in the biometric system but have no matching employee in the database"})]}),(0,ds.jsxs)(tk,{variant:"outline",className:"text-amber-600 border-amber-300",children:[m.length," Unmatched"]})]})}),(0,ds.jsx)(Mn,{children:m.length>0?(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:m.map(e=>(0,ds.jsx)("div",{className:"p-2 bg-amber-50 rounded border border-amber-200 text-center",children:(0,ds.jsx)("span",{className:"font-mono text-sm font-medium text-amber-800",children:e})},e))}),(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("h4",{className:"font-medium mb-2",children:"How to fix:"}),(0,ds.jsxs)("ol",{className:"text-sm text-slate-600 list-decimal list-inside space-y-1",children:[(0,ds.jsxs)("li",{children:["Go to ",(0,ds.jsx)("strong",{children:"Employees"})," page"]}),(0,ds.jsx)("li",{children:"Find or create the employee"}),(0,ds.jsxs)("li",{children:["Set their ",(0,ds.jsx)("strong",{children:"Employee Code"})," to match the biometric code (e.g., F0001, S0019)"]}),(0,ds.jsx)("li",{children:"Run a sync to update attendance records"})]})]})]}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(Yk,{className:"w-12 h-12 text-emerald-500 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"All biometric codes are mapped!"})]})})]})}),(0,ds.jsx)(hA,{value:"logs",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"Recent Sync Logs"}),(0,ds.jsx)(On,{children:"History of sync operations"})]}),(0,ds.jsx)(Mn,{children:(null===d||void 0===d||null===(t=d.recent_logs)||void 0===t?void 0:t.length)>0?(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Time"}),(0,ds.jsx)(gS,{children:"Period"}),(0,ds.jsx)(gS,{className:"text-center",children:"Total"}),(0,ds.jsx)(gS,{className:"text-center",children:"Matched"}),(0,ds.jsx)(gS,{className:"text-center",children:"Updated"}),(0,ds.jsx)(gS,{className:"text-center",children:"Unmatched"}),(0,ds.jsx)(gS,{className:"text-center",children:"Errors"})]})}),(0,ds.jsx)(xS,{children:d.recent_logs.map((e,t)=>(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"text-sm",children:M(e.synced_at)}),(0,ds.jsxs)(yS,{className:"text-sm",children:[e.from_date," to ",e.to_date]}),(0,ds.jsx)(yS,{className:"text-center",children:e.total_records}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)(tk,{className:"bg-emerald-100 text-emerald-700",children:e.matched})}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)(tk,{className:"bg-blue-100 text-blue-700",children:e.updated})}),(0,ds.jsx)(yS,{className:"text-center",children:(0,ds.jsx)(tk,{className:"bg-amber-100 text-amber-700",children:e.unmatched})}),(0,ds.jsx)(yS,{className:"text-center",children:e.errors>0?(0,ds.jsx)(tk,{variant:"destructive",children:e.errors}):(0,ds.jsx)("span",{className:"text-slate-400",children:"0"})})]},e.sync_id||t))})]})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(NL,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No sync logs available"})]})})]})})]})]}):(0,ds.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,ds.jsx)(Pn,{className:"max-w-md",children:(0,ds.jsxs)(Mn,{className:"pt-6 text-center",children:[(0,ds.jsx)(ik,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Only Admin and HR users can manage API integrations."})]})})})},CL="https://shardahrms.com/api",EL=()=>{var e,t,s,n,r,l;const{user:i}=Cs(),[o,c]=(0,a.useState)("employee"),[d,h]=(0,a.useState)([]),[m,p]=(0,a.useState)(!0),[f,x]=(0,a.useState)(""),[v,g]=(0,a.useState)("all"),[y,j]=(0,a.useState)([]),[b,w]=(0,a.useState)(!0),[N,_]=(0,a.useState)(""),[k,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),[P,D]=(0,a.useState)(null),[R,O]=(0,a.useState)(!1),[M,F]=(0,a.useState)(!1),[L,I]=(0,a.useState)(!1),[z,B]=(0,a.useState)(null),[U,V]=(0,a.useState)({emp_code:"",insurance_date:"",amount:"",insurance_company:"",policy_number:"",coverage_type:"",accidental_insurance:!1,esic:!1,pmjjby:!1,start_date:"",end_date:"",notes:""}),[H,W]=(0,a.useState)({name_of_insurance:"",vehicle_no:"",insurance_company:"",date_of_issuance:"",due_date:"",notes:""}),[q,Y]=(0,a.useState)(null),[G,K]=(0,a.useState)(!1),[$,X]=(0,a.useState)(null),[J,Q]=(0,a.useState)(null),[Z,ee]=(0,a.useState)(!1),[te,se]=(0,a.useState)(null),ae="super_admin"===(null===i||void 0===i?void 0:i.role)||"hr_admin"===(null===i||void 0===i?void 0:i.role)||"hr_executive"===(null===i||void 0===i?void 0:i.role);(0,a.useEffect)(()=>{"employee"===o?ne():re()},[v,o]);const ne=async()=>{p(!0);try{const e=nk();let t="".concat(CL,"/insurance");"all"!==v&&(t+="?status=".concat(v));const s=await fetch(t,{credentials:"include",headers:e});if(s.ok){const e=await s.json();h(e)}}catch(e){console.error("Error fetching insurance records:",e),ts.error("Failed to fetch insurance records")}finally{p(!1)}},re=async()=>{w(!0);try{const e=nk(),t=await fetch("".concat(CL,"/business-insurance"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();j(e)}}catch(e){console.error("Error fetching business insurance records:",e),ts.error("Failed to fetch business insurance records")}finally{w(!1)}},le=()=>{V({emp_code:"",insurance_date:"",amount:"",insurance_company:"",policy_number:"",coverage_type:"",accidental_insurance:!1,esic:!1,pmjjby:!1,start_date:"",end_date:"",notes:""})},ie=()=>{W({name_of_insurance:"",vehicle_no:"",insurance_company:"",date_of_issuance:"",due_date:"",notes:""})},oe=d.filter(e=>{var t,s,a;return(null===(t=e.emp_code)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(s=e.employee_name)||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase()))||(null===(a=e.insurance_company)||void 0===a?void 0:a.toLowerCase().includes(f.toLowerCase()))}),ce=y.filter(e=>{var t,s,a;return(null===(t=e.name_of_insurance)||void 0===t?void 0:t.toLowerCase().includes(N.toLowerCase()))||(null===(s=e.vehicle_no)||void 0===s?void 0:s.toLowerCase().includes(N.toLowerCase()))||(null===(a=e.insurance_company)||void 0===a?void 0:a.toLowerCase().includes(N.toLowerCase()))}),de=d.reduce((e,t)=>e+(t.amount||0),0),ue=d.filter(e=>"active"===e.status).length,he=d.filter(e=>!0===e.esic).length;d.filter(e=>!0===e.pmjjby).length,new Set(d.map(e=>e.insurance_company).filter(Boolean));return m&&"employee"===o?(0,ds.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,ds.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Insurance"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage employee and business insurance records"})]})}),(0,ds.jsxs)(cA,{value:o,onValueChange:c,className:"space-y-6",children:[(0,ds.jsxs)(dA,{className:"grid w-full max-w-md grid-cols-2",children:[(0,ds.jsxs)(uA,{value:"employee",className:"gap-2","data-testid":"employee-insurance-tab",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Employee Insurance"]}),(0,ds.jsxs)(uA,{value:"business",className:"gap-2","data-testid":"business-insurance-tab",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),"Business Insurance"]})]}),(0,ds.jsxs)(hA,{value:"employee",className:"space-y-6",children:[ae&&(0,ds.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>E(!0),className:"gap-2","data-testid":"employee-bulk-upload-btn",children:[(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Bulk Upload"]}),(0,ds.jsxs)(fn,{onClick:()=>S(!0),className:"gap-2","data-testid":"employee-add-record-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Record"]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(D_,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:d.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Records"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:ue}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Active Policies"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,ds.jsx)(bA,{className:"w-5 h-5 text-purple-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:["\u20b9",(de/1e5).toFixed(1),"L"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Premium"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(F_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:he}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"ESIC Covered"})]})]})})})]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ds.jsxs)("div",{className:"relative flex-1",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by employee code, name, or company...",value:f,onChange:e=>x(e.target.value),className:"pl-10","data-testid":"employee-insurance-search"})]}),(0,ds.jsxs)(yE,{value:v,onValueChange:g,children:[(0,ds.jsx)(bE,{className:"w-40","data-testid":"employee-status-filter",children:(0,ds.jsx)(jE,{placeholder:"Status"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"active",children:"Active"}),(0,ds.jsx)(kE,{value:"expired",children:"Expired"}),(0,ds.jsx)(kE,{value:"cancelled",children:"Cancelled"})]})]})]})})}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Employee Insurance Records"}),(0,ds.jsxs)(On,{children:[oe.length," records found"]})]}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Emp Code"}),(0,ds.jsx)(gS,{children:"Employee Name"}),(0,ds.jsx)(gS,{className:"text-center",children:"ESIC"}),(0,ds.jsx)(gS,{className:"text-center",children:"PMJJBY"}),(0,ds.jsx)(gS,{className:"text-center",children:"Accidental"}),(0,ds.jsx)(gS,{children:"Date"}),(0,ds.jsx)(gS,{children:"Amount"}),(0,ds.jsx)(gS,{children:"Insurance Company"}),(0,ds.jsx)(gS,{children:"Policy No."}),(0,ds.jsx)(gS,{children:"Status"}),ae&&(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:oe.length>0?oe.map(e=>{var t;return(0,ds.jsxs)(vS,{"data-testid":"employee-insurance-row-".concat(e.insurance_id),children:[(0,ds.jsx)(yS,{className:"font-medium",children:e.emp_code}),(0,ds.jsx)(yS,{children:e.employee_name}),(0,ds.jsx)(yS,{className:"text-center",children:e.esic?(0,ds.jsx)(tk,{className:"bg-green-100 text-green-700",children:"YES"}):(0,ds.jsx)(tk,{className:"bg-slate-100 text-slate-500",children:"NO"})}),(0,ds.jsx)(yS,{className:"text-center",children:e.pmjjby?(0,ds.jsx)(tk,{className:"bg-blue-100 text-blue-700",children:"YES"}):(0,ds.jsx)(tk,{className:"bg-slate-100 text-slate-500",children:"NO"})}),(0,ds.jsx)(yS,{className:"text-center",children:e.accidental_insurance?(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600 mx-auto"}):(0,ds.jsx)(Gi,{className:"w-5 h-5 text-slate-300 mx-auto"})}),(0,ds.jsx)(yS,{children:e.insurance_date||"-"}),(0,ds.jsx)(yS,{children:e.amount?"\u20b9".concat(null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-IN")):"-"}),(0,ds.jsx)(yS,{children:e.insurance_company||"-"}),(0,ds.jsx)(yS,{children:e.policy_number||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:"active"===e.status?"bg-emerald-100 text-emerald-700":"expired"===e.status?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700",children:e.status})}),ae&&(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>{D(e),A(!0)},"data-testid":"edit-employee-insurance-".concat(e.insurance_id),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this insurance record?"))try{const t=nk(),s=await fetch("".concat(CL,"/insurance/").concat(e),{method:"DELETE",credentials:"include",headers:t});if(s.ok)ts.success("Insurance record deleted"),ne();else{const e=await s.json();ts.error(e.detail||"Failed to delete record")}}catch(t){ts.error("Failed to delete insurance record")}})(e.insurance_id),"data-testid":"delete-employee-insurance-".concat(e.insurance_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})})]},e.insurance_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:ae?11:10,className:"text-center py-8 text-slate-500",children:"No insurance records found"})})})]})})})]})]}),(0,ds.jsxs)(hA,{value:"business",className:"space-y-6",children:[ae&&(0,ds.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>F(!0),className:"gap-2","data-testid":"business-bulk-upload-btn",children:[(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Bulk Upload"]}),(0,ds.jsxs)(fn,{onClick:()=>O(!0),className:"gap-2","data-testid":"business-add-record-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Record"]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(T_,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Total Policies"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(YM,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.filter(e=>e.vehicle_no).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Vehicle Policies"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,ds.jsx)(AA,{className:"w-5 h-5 text-red-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:y.filter(e=>{if(!e.due_date)return!1;const t=new Date(e.due_date),s=new Date,a=Math.ceil((t-s)/864e5);return a<=30&&a>0}).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Due in 30 Days"})]})]})})})]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by insurance name, vehicle no, or company...",value:N,onChange:e=>_(e.target.value),className:"pl-10","data-testid":"business-insurance-search"})]})})}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",style:{fontFamily:"Manrope, sans-serif"},children:"Business Insurance Records"}),(0,ds.jsxs)(On,{children:[ce.length," records found"]})]}),(0,ds.jsx)(Mn,{children:b?(0,ds.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,ds.jsx)(SE,{className:"w-6 h-6 animate-spin text-primary"})}):(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(gS,{children:"Sl. No."}),(0,ds.jsx)(gS,{children:"Name of Insurance"}),(0,ds.jsx)(gS,{children:"Vehicle No."}),(0,ds.jsx)(gS,{children:"Insurance Company"}),(0,ds.jsx)(gS,{children:"Date of Issuance"}),(0,ds.jsx)(gS,{children:"Due Date"}),(0,ds.jsx)(gS,{children:"Status"}),ae&&(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:ce.length>0?ce.map((e,t)=>{const s=e.due_date?new Date(e.due_date):null,a=new Date,n=s?Math.ceil((s-a)/864e5):null,r=null!==n&&n<0,l=null!==n&&n<=30&&n>0;return(0,ds.jsxs)(vS,{"data-testid":"business-insurance-row-".concat(e.business_insurance_id),children:[(0,ds.jsx)(yS,{className:"font-medium",children:t+1}),(0,ds.jsx)(yS,{children:e.name_of_insurance}),(0,ds.jsx)(yS,{children:e.vehicle_no||"-"}),(0,ds.jsx)(yS,{children:e.insurance_company}),(0,ds.jsx)(yS,{children:e.date_of_issuance||"-"}),(0,ds.jsx)(yS,{children:(0,ds.jsx)("span",{className:l?"text-amber-600 font-medium":r?"text-red-600 font-medium":"",children:e.due_date||"-"})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:r?"bg-red-100 text-red-700":l?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700",children:r?"Expired":l?"Due Soon":"Active"})}),ae&&(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:()=>{B(e),I(!0)},"data-testid":"edit-business-insurance-".concat(e.business_insurance_id),children:(0,ds.jsx)(pA,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this business insurance record?"))try{const t=nk(),s=await fetch("".concat(CL,"/business-insurance/").concat(e),{method:"DELETE",credentials:"include",headers:t});if(s.ok)ts.success("Business insurance record deleted"),re();else{const e=await s.json();ts.error(e.detail||"Failed to delete record")}}catch(t){ts.error("Failed to delete business insurance record")}})(e.business_insurance_id),"data-testid":"delete-business-insurance-".concat(e.business_insurance_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})})]},e.business_insurance_id)}):(0,ds.jsx)(vS,{children:(0,ds.jsx)(yS,{colSpan:ae?8:7,className:"text-center py-8 text-slate-500",children:"No business insurance records found"})})})]})})})]})]})]}),(0,ds.jsx)(eo,{open:k,onOpenChange:S,children:(0,ds.jsxs)(no,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Add Employee Insurance Record"}),(0,ds.jsx)(oo,{children:"Enter insurance details for an employee (only Employee Code is required)"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee Code *"}),(0,ds.jsx)(vn,{placeholder:"e.g., S0003",value:U.emp_code,onChange:e=>V(u(u({},U),{},{emp_code:e.target.value})),"data-testid":"add-emp-code-input"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"esic",checked:U.esic,onChange:e=>V(u(u({},U),{},{esic:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary","data-testid":"add-esic-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"esic",className:"cursor-pointer text-sm font-medium",children:"ESIC"})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"pmjjby",checked:U.pmjjby,onChange:e=>V(u(u({},U),{},{pmjjby:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500","data-testid":"add-pmjjby-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"pmjjby",className:"cursor-pointer text-sm font-medium",children:"PMJJBY"})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"accidental_insurance",checked:U.accidental_insurance,onChange:e=>V(u(u({},U),{},{accidental_insurance:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"add-accidental-insurance-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"accidental_insurance",className:"cursor-pointer text-sm font-medium",children:"Accidental"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Insurance Date"}),(0,ds.jsx)(vn,{type:"date",value:U.insurance_date,onChange:e=>V(u(u({},U),{},{insurance_date:e.target.value})),"data-testid":"add-insurance-date-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Amount (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",placeholder:"50000",value:U.amount,onChange:e=>V(u(u({},U),{},{amount:e.target.value})),"data-testid":"add-amount-input"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Insurance Company"}),(0,ds.jsx)(vn,{placeholder:"e.g., LIC, HDFC Ergo",value:U.insurance_company,onChange:e=>V(u(u({},U),{},{insurance_company:e.target.value})),"data-testid":"add-insurance-company-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Policy Number"}),(0,ds.jsx)(vn,{placeholder:"Policy number",value:U.policy_number,onChange:e=>V(u(u({},U),{},{policy_number:e.target.value})),"data-testid":"add-policy-number-input"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Coverage Type"}),(0,ds.jsxs)(yE,{value:U.coverage_type,onValueChange:e=>V(u(u({},U),{},{coverage_type:e})),children:[(0,ds.jsx)(bE,{"data-testid":"add-coverage-type-select",children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"health",children:"Health"}),(0,ds.jsx)(kE,{value:"life",children:"Life"}),(0,ds.jsx)(kE,{value:"accident",children:"Accident"}),(0,ds.jsx)(kE,{value:"vehicle",children:"Vehicle"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Date"}),(0,ds.jsx)(vn,{type:"date",value:U.start_date,onChange:e=>V(u(u({},U),{},{start_date:e.target.value})),"data-testid":"add-start-date-input"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Date"}),(0,ds.jsx)(vn,{type:"date",value:U.end_date,onChange:e=>V(u(u({},U),{},{end_date:e.target.value})),"data-testid":"add-end-date-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Notes"}),(0,ds.jsx)(vn,{placeholder:"Additional notes...",value:U.notes,onChange:e=>V(u(u({},U),{},{notes:e.target.value})),"data-testid":"add-notes-input"})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{S(!1),le()},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(U.emp_code)try{const e=nk(),t=await fetch("".concat(CL,"/insurance"),{method:"POST",credentials:"include",headers:u(u({},e),{},{"Content-Type":"application/json"}),body:JSON.stringify(U)});if(t.ok)ts.success("Insurance record added successfully"),S(!1),le(),ne();else{const e=await t.json();ts.error(e.detail||"Failed to add record")}}catch(e){ts.error("Failed to add insurance record")}else ts.error("Please enter Employee Code")},"data-testid":"add-employee-insurance-submit",children:"Add Record"})]})]})}),(0,ds.jsx)(eo,{open:T,onOpenChange:A,children:(0,ds.jsxs)(no,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Edit Employee Insurance Record"}),(0,ds.jsxs)(oo,{children:[null===P||void 0===P?void 0:P.emp_code," - ",null===P||void 0===P?void 0:P.employee_name]})]}),P&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"edit_esic",checked:P.esic||!1,onChange:e=>D(u(u({},P),{},{esic:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary","data-testid":"edit-esic-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"edit_esic",className:"cursor-pointer text-sm font-medium",children:"ESIC"})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"edit_pmjjby",checked:P.pmjjby||!1,onChange:e=>D(u(u({},P),{},{pmjjby:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500","data-testid":"edit-pmjjby-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"edit_pmjjby",className:"cursor-pointer text-sm font-medium",children:"PMJJBY"})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"edit_accidental_insurance",checked:P.accidental_insurance||!1,onChange:e=>D(u(u({},P),{},{accidental_insurance:e.target.checked})),className:"w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"edit-accidental-insurance-checkbox"}),(0,ds.jsx)(_n,{htmlFor:"edit_accidental_insurance",className:"cursor-pointer text-sm font-medium",children:"Accidental"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Insurance Date"}),(0,ds.jsx)(vn,{type:"date",value:P.insurance_date||"",onChange:e=>D(u(u({},P),{},{insurance_date:e.target.value})),"data-testid":"edit-insurance-date-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Amount (\u20b9)"}),(0,ds.jsx)(vn,{type:"number",value:P.amount||"",onChange:e=>D(u(u({},P),{},{amount:parseFloat(e.target.value)||null})),"data-testid":"edit-amount-input"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Insurance Company"}),(0,ds.jsx)(vn,{value:P.insurance_company||"",onChange:e=>D(u(u({},P),{},{insurance_company:e.target.value})),"data-testid":"edit-insurance-company-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Policy Number"}),(0,ds.jsx)(vn,{value:P.policy_number||"",onChange:e=>D(u(u({},P),{},{policy_number:e.target.value})),"data-testid":"edit-policy-number-input"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Status"}),(0,ds.jsxs)(yE,{value:P.status||"active",onValueChange:e=>D(u(u({},P),{},{status:e})),children:[(0,ds.jsx)(bE,{"data-testid":"edit-status-select",children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"active",children:"Active"}),(0,ds.jsx)(kE,{value:"expired",children:"Expired"}),(0,ds.jsx)(kE,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Coverage Type"}),(0,ds.jsxs)(yE,{value:P.coverage_type||"",onValueChange:e=>D(u(u({},P),{},{coverage_type:e})),children:[(0,ds.jsx)(bE,{"data-testid":"edit-coverage-type-select",children:(0,ds.jsx)(jE,{placeholder:"Select type"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"health",children:"Health"}),(0,ds.jsx)(kE,{value:"life",children:"Life"}),(0,ds.jsx)(kE,{value:"accident",children:"Accident"}),(0,ds.jsx)(kE,{value:"vehicle",children:"Vehicle"}),(0,ds.jsx)(kE,{value:"other",children:"Other"})]})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Notes"}),(0,ds.jsx)(vn,{value:P.notes||"",onChange:e=>D(u(u({},P),{},{notes:e.target.value})),"data-testid":"edit-notes-input"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{A(!1),D(null)},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(P)try{const e=nk(),t=await fetch("".concat(CL,"/insurance/").concat(P.insurance_id),{method:"PUT",credentials:"include",headers:u(u({},e),{},{"Content-Type":"application/json"}),body:JSON.stringify(P)});if(t.ok)ts.success("Insurance record updated"),A(!1),D(null),ne();else{const e=await t.json();ts.error(e.detail||"Failed to update record")}}catch(e){ts.error("Failed to update insurance record")}},"data-testid":"edit-employee-insurance-submit",children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:C,onOpenChange:e=>{E(e),e||(Y(null),X(null))},children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Bulk Upload Employee Insurance Data"}),(0,ds.jsx)(oo,{children:"Upload an Excel file with employee insurance records"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Download Template"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Get the Excel template to fill in your data"})]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:async()=>{try{const e=nk(),t=await fetch("".concat(CL,"/import/templates/insurance"),{credentials:"include",headers:e});if(t.ok){const e=await t.blob(),s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="employee_insurance_template.xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),a.remove(),ts.success("Template downloaded")}else ts.error("Failed to download template")}catch(e){ts.error("Failed to download template")}},className:"gap-2","data-testid":"download-employee-template-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Template"]})]})}),(0,ds.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-6 text-center",children:[(0,ds.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{var t;return Y((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden",id:"employee-insurance-upload"}),(0,ds.jsxs)("label",{htmlFor:"employee-insurance-upload",className:"cursor-pointer",children:[(0,ds.jsx)(w_,{className:"w-12 h-12 mx-auto text-slate-400 mb-3"}),(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-700",children:q?q.name:"Click to upload or drag and drop"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excel (.xlsx) or CSV files"})]})]}),$&&(0,ds.jsxs)("div",{className:"p-4 rounded-lg ".concat((null===(e=$.errors)||void 0===e?void 0:e.length)>0?"bg-amber-50":"bg-emerald-50"),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null===(t=$.errors)||void 0===t?void 0:t.length)>0?(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-600"}):(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"}),(0,ds.jsxs)("span",{className:"font-medium",children:[$.imported," of ",$.total_rows," records imported"]})]}),(null===(s=$.errors)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)("div",{className:"text-sm text-amber-700 mt-2",children:[(0,ds.jsx)("p",{className:"font-medium",children:"Errors:"}),(0,ds.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[$.errors.slice(0,5).map((e,t)=>(0,ds.jsxs)("li",{children:["Row ",e.row,": ",e.error]},t)),$.errors.length>5&&(0,ds.jsxs)("li",{children:["...and ",$.errors.length-5," more errors"]})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{E(!1),Y(null),X(null)},children:"Close"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(q){K(!0);try{var e;const t=nk(),s=new FormData;s.append("file",q);const a=await fetch("".concat(CL,"/import/insurance"),{method:"POST",credentials:"include",headers:{Authorization:t.Authorization},body:s}),n=await a.json();X(n),n.imported>0?(ts.success("Successfully imported ".concat(n.imported," records")),ne()):(null===(e=n.errors)||void 0===e?void 0:e.length)>0&&ts.error("Import completed with ".concat(n.errors.length," errors"))}catch(t){ts.error("Upload failed")}finally{K(!1)}}else ts.error("Please select a file")},disabled:!q||G,className:"gap-2","data-testid":"upload-employee-insurance-btn",children:[G?(0,ds.jsx)(SE,{className:"w-4 h-4 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Upload"]})]})]})}),(0,ds.jsx)(eo,{open:R,onOpenChange:O,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Add Business Insurance Record"}),(0,ds.jsx)(oo,{children:"Enter details for a business insurance policy"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Name of Insurance *"}),(0,ds.jsx)(vn,{placeholder:"e.g., Fire Insurance, Vehicle Insurance",value:H.name_of_insurance,onChange:e=>W(u(u({},H),{},{name_of_insurance:e.target.value})),"data-testid":"add-business-name-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Vehicle No. (if applicable)"}),(0,ds.jsx)(vn,{placeholder:"e.g., MH01AB1234",value:H.vehicle_no,onChange:e=>W(u(u({},H),{},{vehicle_no:e.target.value})),"data-testid":"add-business-vehicle-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Name of Insurance Company *"}),(0,ds.jsx)(vn,{placeholder:"e.g., New India Assurance",value:H.insurance_company,onChange:e=>W(u(u({},H),{},{insurance_company:e.target.value})),"data-testid":"add-business-company-input"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date of Issuance"}),(0,ds.jsx)(vn,{type:"date",value:H.date_of_issuance,onChange:e=>W(u(u({},H),{},{date_of_issuance:e.target.value})),"data-testid":"add-business-issuance-date-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Due Date"}),(0,ds.jsx)(vn,{type:"date",value:H.due_date,onChange:e=>W(u(u({},H),{},{due_date:e.target.value})),"data-testid":"add-business-due-date-input"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Notes"}),(0,ds.jsx)(vn,{placeholder:"Additional notes...",value:H.notes,onChange:e=>W(u(u({},H),{},{notes:e.target.value})),"data-testid":"add-business-notes-input"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{O(!1),ie()},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(H.name_of_insurance&&H.insurance_company)try{const e=nk(),t=await fetch("".concat(CL,"/business-insurance"),{method:"POST",credentials:"include",headers:u(u({},e),{},{"Content-Type":"application/json"}),body:JSON.stringify(H)});if(t.ok)ts.success("Business insurance record added successfully"),O(!1),ie(),re();else{const e=await t.json();ts.error(e.detail||"Failed to add record")}}catch(e){ts.error("Failed to add business insurance record")}else ts.error("Please fill all required fields (Name of Insurance and Insurance Company)")},"data-testid":"add-business-insurance-submit",children:"Add Record"})]})]})}),(0,ds.jsx)(eo,{open:L,onOpenChange:I,children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Edit Business Insurance Record"}),(0,ds.jsx)(oo,{children:null===z||void 0===z?void 0:z.name_of_insurance})]}),z&&(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Name of Insurance"}),(0,ds.jsx)(vn,{value:z.name_of_insurance||"",onChange:e=>B(u(u({},z),{},{name_of_insurance:e.target.value})),"data-testid":"edit-business-name-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Vehicle No."}),(0,ds.jsx)(vn,{value:z.vehicle_no||"",onChange:e=>B(u(u({},z),{},{vehicle_no:e.target.value})),"data-testid":"edit-business-vehicle-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Insurance Company"}),(0,ds.jsx)(vn,{value:z.insurance_company||"",onChange:e=>B(u(u({},z),{},{insurance_company:e.target.value})),"data-testid":"edit-business-company-input"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date of Issuance"}),(0,ds.jsx)(vn,{type:"date",value:z.date_of_issuance||"",onChange:e=>B(u(u({},z),{},{date_of_issuance:e.target.value})),"data-testid":"edit-business-issuance-date-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Due Date"}),(0,ds.jsx)(vn,{type:"date",value:z.due_date||"",onChange:e=>B(u(u({},z),{},{due_date:e.target.value})),"data-testid":"edit-business-due-date-input"})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Notes"}),(0,ds.jsx)(vn,{value:z.notes||"",onChange:e=>B(u(u({},z),{},{notes:e.target.value})),"data-testid":"edit-business-notes-input"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{I(!1),B(null)},children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(z)try{const e=nk(),t=await fetch("".concat(CL,"/business-insurance/").concat(z.business_insurance_id),{method:"PUT",credentials:"include",headers:u(u({},e),{},{"Content-Type":"application/json"}),body:JSON.stringify(z)});if(t.ok)ts.success("Business insurance record updated"),I(!1),B(null),re();else{const e=await t.json();ts.error(e.detail||"Failed to update record")}}catch(e){ts.error("Failed to update business insurance record")}},"data-testid":"edit-business-insurance-submit",children:"Save Changes"})]})]})}),(0,ds.jsx)(eo,{open:M,onOpenChange:e=>{F(e),e||(Q(null),se(null))},children:(0,ds.jsxs)(no,{className:"max-w-lg",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{style:{fontFamily:"Manrope, sans-serif"},children:"Bulk Upload Business Insurance Data"}),(0,ds.jsx)(oo,{children:"Upload an Excel file with business insurance records"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-slate-900",children:"Download Template"}),(0,ds.jsx)("p",{className:"text-sm text-slate-500",children:"Get the Excel template matching your format"})]}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:async()=>{try{const e=nk(),t=await fetch("".concat(CL,"/import/templates/business-insurance"),{credentials:"include",headers:e});if(t.ok){const e=await t.blob(),s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="business_insurance_template.xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),a.remove(),ts.success("Template downloaded")}else ts.error("Failed to download template")}catch(e){ts.error("Failed to download template")}},className:"gap-2","data-testid":"download-business-template-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4"}),"Template"]})]})}),(0,ds.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-6 text-center",children:[(0,ds.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{var t;return Q((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden",id:"business-insurance-upload"}),(0,ds.jsxs)("label",{htmlFor:"business-insurance-upload",className:"cursor-pointer",children:[(0,ds.jsx)(w_,{className:"w-12 h-12 mx-auto text-slate-400 mb-3"}),(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-700",children:J?J.name:"Click to upload or drag and drop"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excel (.xlsx) or CSV files"})]})]}),te&&(0,ds.jsxs)("div",{className:"p-4 rounded-lg ".concat((null===(n=te.errors)||void 0===n?void 0:n.length)>0?"bg-amber-50":"bg-emerald-50"),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null===(r=te.errors)||void 0===r?void 0:r.length)>0?(0,ds.jsx)(AA,{className:"w-5 h-5 text-amber-600"}):(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-600"}),(0,ds.jsxs)("span",{className:"font-medium",children:[te.imported," of ",te.total_rows," records imported"]})]}),(null===(l=te.errors)||void 0===l?void 0:l.length)>0&&(0,ds.jsxs)("div",{className:"text-sm text-amber-700 mt-2",children:[(0,ds.jsx)("p",{className:"font-medium",children:"Errors:"}),(0,ds.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[te.errors.slice(0,5).map((e,t)=>(0,ds.jsxs)("li",{children:["Row ",e.row,": ",e.error]},t)),te.errors.length>5&&(0,ds.jsxs)("li",{children:["...and ",te.errors.length-5," more errors"]})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>{F(!1),Q(null),se(null)},children:"Close"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(J){ee(!0);try{var e;const t=nk(),s=new FormData;s.append("file",J);const a=await fetch("".concat(CL,"/import/business-insurance"),{method:"POST",credentials:"include",headers:{Authorization:t.Authorization},body:s}),n=await a.json();se(n),n.imported>0?(ts.success("Successfully imported ".concat(n.imported," records")),re()):(null===(e=n.errors)||void 0===e?void 0:e.length)>0&&ts.error("Import completed with ".concat(n.errors.length," errors"))}catch(t){ts.error("Upload failed")}finally{ee(!1)}}else ts.error("Please select a file")},disabled:!J||Z,className:"gap-2","data-testid":"upload-business-insurance-btn",children:[Z?(0,ds.jsx)(SE,{className:"w-4 h-4 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4"}),"Upload"]})]})]})})]})},TL=Yi("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),AL="https://shardahrms.com/api",PL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)((new Date).getFullYear().toString()),[f,x]=(0,a.useState)(null),[v,g]=(0,a.useState)({date:"",name:"",type:"public",is_half_day:!1}),y="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role),j=(new Date).getFullYear(),b=[j-1,j,j+1];(0,a.useEffect)(()=>{y&&w()},[y,m]);const w=async()=>{r(!0);try{const e=nk(),t=await fetch("".concat(AL,"/holidays?year=").concat(m),{credentials:"include",headers:e});if(t.ok){const e=await t.json();s(e)}}catch(e){console.error("Error fetching holidays:",e),ts.error("Failed to load holidays")}finally{r(!1)}},N=e=>{switch(e){case"public":return"bg-emerald-100 text-emerald-700";case"restricted":return"bg-amber-100 text-amber-700";case"optional":return"bg-blue-100 text-blue-700";default:return"bg-slate-100 text-slate-700"}};return y?(0,ds.jsxs)("div",{className:"space-y-6 p-6",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:"Manrope, sans-serif"},children:"Holiday Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage company holidays for attendance calculation"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(yE,{value:m,onValueChange:p,children:[(0,ds.jsx)(bE,{className:"w-[120px]",children:(0,ds.jsx)(jE,{})}),(0,ds.jsx)(_E,{children:b.map(e=>(0,ds.jsx)(kE,{value:e.toString(),children:e},e))})]}),(0,ds.jsxs)(fn,{onClick:()=>i(!0),className:"gap-2",children:[(0,ds.jsx)(CE,{className:"w-4 h-4"}),"Add Holiday"]})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,ds.jsx)(B_,{className:"w-5 h-5 text-emerald-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(e=>"public"===e.type).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Public Holidays"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,ds.jsx)(v_,{className:"w-5 h-5 text-amber-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(e=>"restricted"===e.type).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Restricted Holidays"})]})]})})}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ds.jsx)(v_,{className:"w-5 h-5 text-blue-600"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(e=>"optional"===e.type).length}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Optional Holidays"})]})]})})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{children:[(0,ds.jsxs)(Rn,{className:"text-lg",children:["Holidays for ",m]}),(0,ds.jsx)(On,{children:"These dates will be excluded from absent calculations"})]}),(0,ds.jsx)(Mn,{children:n?(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(SE,{className:"w-8 h-8 text-primary animate-spin mx-auto mb-2"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Loading holidays..."})]}):t.length>0?(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{children:"Date"}),(0,ds.jsx)(gS,{children:"Day"}),(0,ds.jsx)(gS,{children:"Holiday Name"}),(0,ds.jsx)(gS,{children:"Type"}),(0,ds.jsx)(gS,{className:"text-right",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:t.map(e=>{var t,s;const a=new Date(e.date);return(0,ds.jsxs)(vS,{children:[(0,ds.jsx)(yS,{className:"font-medium",children:a.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,ds.jsx)(yS,{children:a.toLocaleDateString("en-IN",{weekday:"long"})}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[e.name,e.is_half_day&&(0,ds.jsx)(tk,{className:"bg-amber-100 text-amber-700 text-xs",children:"Half Day"})]})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:N(e.type),children:(null===(t=e.type)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(s=e.type)||void 0===s?void 0:s.slice(1))})}),(0,ds.jsx)(yS,{className:"text-right",children:(0,ds.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,ds.jsx)(fn,{variant:"ghost",size:"sm",onClick:()=>(e=>{x(e),g({date:e.date,name:e.name,type:e.type||"public",is_half_day:e.is_half_day||!1}),c(!0)})(e),children:(0,ds.jsx)(TL,{className:"w-4 h-4"})}),(0,ds.jsx)(fn,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this holiday?"))try{const t=nk(),s=await fetch("".concat(AL,"/holidays/").concat(e),{method:"DELETE",headers:t,credentials:"include"});if(s.ok)ts.success("Holiday deleted successfully"),w();else{const e=await s.json();ts.error(e.detail||"Failed to delete holiday")}}catch(t){ts.error("Failed to delete holiday")}})(e.holiday_id),children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]})})]},e.holiday_id)})})]})}):(0,ds.jsxs)("div",{className:"text-center py-12",children:[(0,ds.jsx)(v_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsxs)("p",{className:"text-slate-500 mb-2",children:["No holidays added for ",m]}),(0,ds.jsx)("p",{className:"text-xs text-slate-400",children:'Click "Add Holiday" to add holidays'})]})})]}),(0,ds.jsx)(eo,{open:l,onOpenChange:i,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add Holiday"}),(0,ds.jsx)(oo,{children:"Add a new holiday to the calendar"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date"}),(0,ds.jsx)(vn,{type:"date",value:v.date,onChange:e=>g(u(u({},v),{},{date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Holiday Name"}),(0,ds.jsx)(vn,{placeholder:"e.g., Republic Day",value:v.name,onChange:e=>g(u(u({},v),{},{name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Type"}),(0,ds.jsxs)(yE,{value:v.type,onValueChange:e=>g(u(u({},v),{},{type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"public",children:"Public Holiday"}),(0,ds.jsx)(kE,{value:"restricted",children:"Restricted Holiday"}),(0,ds.jsx)(kE,{value:"optional",children:"Optional Holiday"})]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"is_half_day",checked:v.is_half_day,onChange:e=>g(u(u({},v),{},{is_half_day:e.target.checked})),className:"w-4 h-4 rounded border-gray-300"}),(0,ds.jsx)(_n,{htmlFor:"is_half_day",className:"text-sm font-normal",children:"Half-day holiday (employees work half day)"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(v.date&&v.name){h(!0);try{const e=u({"Content-Type":"application/json"},nk()),t=await fetch("".concat(AL,"/holidays"),{method:"POST",headers:e,credentials:"include",body:JSON.stringify(v)});if(t.ok)ts.success("Holiday added successfully"),i(!1),g({date:"",name:"",type:"public",is_half_day:!1}),w();else{const e=await t.json();ts.error(e.detail||"Failed to add holiday")}}catch(e){ts.error("Failed to add holiday")}finally{h(!1)}}else ts.error("Date and name are required")},disabled:d,children:[d?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(CE,{className:"w-4 h-4 mr-2"}),"Add Holiday"]})]})]})}),(0,ds.jsx)(eo,{open:o,onOpenChange:c,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit Holiday"}),(0,ds.jsx)(oo,{children:"Update holiday details"})]}),(0,ds.jsxs)("div",{className:"space-y-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date"}),(0,ds.jsx)(vn,{type:"date",value:v.date,onChange:e=>g(u(u({},v),{},{date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Holiday Name"}),(0,ds.jsx)(vn,{placeholder:"e.g., Republic Day",value:v.name,onChange:e=>g(u(u({},v),{},{name:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Type"}),(0,ds.jsxs)(yE,{value:v.type,onValueChange:e=>g(u(u({},v),{},{type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"public",children:"Public Holiday"}),(0,ds.jsx)(kE,{value:"restricted",children:"Restricted Holiday"}),(0,ds.jsx)(kE,{value:"optional",children:"Optional Holiday"})]})]})]}),(0,ds.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ds.jsx)("input",{type:"checkbox",id:"edit_is_half_day",checked:v.is_half_day||!1,onChange:e=>g(u(u({},v),{},{is_half_day:e.target.checked})),className:"w-4 h-4 rounded border-gray-300"}),(0,ds.jsx)(_n,{htmlFor:"edit_is_half_day",className:"text-sm font-normal",children:"Half-day holiday (employees work half day)"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(f&&v.date&&v.name){h(!0);try{const e=u({"Content-Type":"application/json"},nk()),t=await fetch("".concat(AL,"/holidays/").concat(f.holiday_id),{method:"PUT",headers:e,credentials:"include",body:JSON.stringify(v)});if(t.ok)ts.success("Holiday updated successfully"),c(!1),x(null),g({date:"",name:"",type:"public"}),w();else{const e=await t.json();ts.error(e.detail||"Failed to update holiday")}}catch(e){ts.error("Failed to update holiday")}finally{h(!1)}}else ts.error("Date and name are required")},disabled:d,children:[d?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(TL,{className:"w-4 h-4 mr-2"}),"Update Holiday"]})]})]})})]}):(0,ds.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,ds.jsx)(Pn,{className:"max-w-md",children:(0,ds.jsxs)(Mn,{className:"pt-6 text-center",children:[(0,ds.jsx)(ik,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,ds.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"Only Admin and HR users can manage holidays."})]})})})},DL=Yi("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),RL="https://shardahrms.com/api",OL=e=>{let{steps:t}=e;return t&&0!==t.length?(0,ds.jsxs)("div",{className:"space-y-3",children:[(0,ds.jsxs)(_n,{className:"text-blue-700 font-semibold flex items-center gap-2",children:[(0,ds.jsx)(DL,{className:"w-4 h-4"}),"Process Flow Chart"]}),(0,ds.jsx)("div",{className:"relative",children:t.map((e,s)=>(0,ds.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,ds.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-bold",children:e.step_number||s+1}),s<t.length-1&&(0,ds.jsx)("div",{className:"absolute left-4 ml-[-1px] w-0.5 bg-blue-200 h-full",style:{top:"".concat(100*s+32,"px"),height:"60px"}}),(0,ds.jsxs)("div",{className:"flex-1 bg-gradient-to-r from-blue-50 to-white border border-blue-100 rounded-lg p-3 shadow-sm",children:[(0,ds.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ds.jsx)("h4",{className:"font-semibold text-slate-800",children:e.step_name||"Step ".concat(s+1)}),e.responsible&&(0,ds.jsx)(tk,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200 text-xs",children:e.responsible})]}),(0,ds.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:e.description}),(e.input||e.output)&&(0,ds.jsxs)("div",{className:"flex gap-4 mt-2 text-xs",children:[e.input&&(0,ds.jsxs)("span",{className:"text-green-600",children:[(0,ds.jsx)("strong",{children:"Input:"})," ",e.input]}),e.output&&(0,ds.jsxs)("span",{className:"text-purple-600",children:[(0,ds.jsx)("strong",{children:"Output:"})," ",e.output]})]})]})]},s))})]}):null},ML=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)(!0),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)(null),[N,_]=(0,a.useState)(""),[k,S]=(0,a.useState)("all"),[C,E]=(0,a.useState)("all"),[T,A]=(0,a.useState)("all"),[P,D]=(0,a.useState)("none"),[R,O]=(0,a.useState)({title:"",description:"",sop_number:"",task_type:"",departments:[],designations:[],main_responsible:[],also_involved:[],file:null}),[M,F]=(0,a.useState)(!1),L="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role),I=(0,a.useCallback)(async()=>{s(!0);try{let e="".concat(RL,"/sop/list?");k&&"all"!==k&&(e+="department_id=".concat(k,"&")),C&&"all"!==C&&(e+="status=".concat(C,"&")),T&&"all"!==T&&(e+="owner_id=".concat(T,"&")),N&&(e+="search=".concat(encodeURIComponent(N),"&")),P&&"none"!==P&&(e+="group_by=".concat(P));const t=await fetch(e,{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();e.grouped?(i(e.groups),r([])):(r(e),i(null))}}catch(e){console.error("Error fetching SOPs:",e)}finally{s(!1)}},[k,C,T,N,P]);(0,a.useEffect)(()=>{I()},[I]),(0,a.useEffect)(()=>{z(),B(),U()},[]);const z=async()=>{try{const e=await fetch("".concat(RL,"/departments"),{credentials:"include",headers:nk()});e.ok&&c(await e.json())}catch(e){console.error("Error fetching departments:",e)}},B=async()=>{try{const e=await fetch("".concat(RL,"/designations"),{credentials:"include",headers:nk()});e.ok&&h(await e.json())}catch(e){console.error("Error fetching designations:",e)}},U=async()=>{try{const e=await fetch("".concat(RL,"/employees"),{credentials:"include",headers:nk()});if(e.ok){const t=await e.json();p(t.employees||t||[])}}catch(e){console.error("Error fetching employees:",e)}},V=async e=>{try{const t=await fetch("".concat(RL,"/sop/").concat(e.sop_id),{credentials:"include",headers:nk()});if(t.ok){const e=await t.json();w(e),O({title:e.title||"",description:e.description||"",sop_number:e.sop_number||"",task_type:e.task_type||"",status:e.status||"draft",departments:e.departments||[],designations:e.designations||[],main_responsible:e.main_responsible||[],also_involved:e.also_involved||[],file:null}),j(!0)}}catch(t){ts.error("Failed to load SOP details")}},H=e=>{window.open("".concat(RL,"/sop/").concat(e,"/download"),"_blank")},W=()=>{O({title:"",description:"",sop_number:"",task_type:"",departments:[],designations:[],main_responsible:[],also_involved:[],file:null}),w(null)},q=(e,t)=>{O(s=>u(u({},s),{},{[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t]}))},Y={draft:"bg-amber-100 text-amber-700",published:"bg-emerald-100 text-emerald-700",archived:"bg-slate-100 text-slate-600"},G=["Audit","Quality","Safety","Production","Maintenance","HR","Finance","IT","Other"],K=e=>{var t;let{sop:s}=e;return(0,ds.jsx)(Pn,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>V(s),children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(tk,{className:Y[s.status],children:s.status}),s.sop_number&&(0,ds.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:s.sop_number})]}),(0,ds.jsx)("h4",{className:"font-medium mt-2 truncate",children:s.title}),s.task_type&&(0,ds.jsx)(tk,{variant:"outline",className:"mt-1 text-xs",children:s.task_type}),(0,ds.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(null===(t=s.main_responsible_names)||void 0===t?void 0:t.length)>0&&(0,ds.jsxs)("span",{className:"text-xs text-blue-600",children:[(0,ds.jsx)(sk,{className:"w-3 h-3 inline mr-1"}),s.main_responsible_names[0]]})})]}),(0,ds.jsx)("div",{className:"flex gap-1",children:s.file_name&&(0,ds.jsx)(fn,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),H(s.sop_id)},children:(0,ds.jsx)(Kk,{className:"w-4 h-4"})})})]})})})},$=e=>{var t,s,a,n,r,l;let{isEdit:i=!1}=e;return(0,ds.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title"}),(0,ds.jsx)(vn,{value:R.title,onChange:e=>O(u(u({},R),{},{title:e.target.value})),placeholder:"SOP Title (auto-detected from file)","data-testid":"sop-title-input"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"SOP Number"}),(0,ds.jsx)(vn,{value:R.sop_number,onChange:e=>O(u(u({},R),{},{sop_number:e.target.value})),placeholder:"e.g., SDPL/SOP/8"})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Task Type / Category"}),(0,ds.jsxs)(yE,{value:R.task_type,onValueChange:e=>O(u(u({},R),{},{task_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select task type"})}),(0,ds.jsx)(_E,{children:G.map(e=>(0,ds.jsx)(kE,{value:e,children:e},e))})]})]}),i&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Status"}),(0,ds.jsxs)(yE,{value:R.status,onValueChange:e=>O(u(u({},R),{},{status:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"draft",children:"Draft"}),(0,ds.jsx)(kE,{value:"published",children:"Published"}),(0,ds.jsx)(kE,{value:"archived",children:"Archived"})]})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:R.description,onChange:e=>O(u(u({},R),{},{description:e.target.value})),placeholder:"Brief description...",rows:2})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Excel File"}),(0,ds.jsx)(vn,{type:"file",accept:".xlsx,.xls",onChange:e=>{var t;return O(u(u({},R),{},{file:null===(t=e.target.files)||void 0===t?void 0:t[0]}))},"data-testid":"sop-file-input"}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:"Upload SOP template - Process Owner and title will be auto-detected"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-2",children:[(0,ds.jsx)(F_,{className:"w-4 h-4"}),"Departments"]}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-2 max-h-[100px] overflow-y-auto p-2 border rounded-lg",children:o.map(e=>(0,ds.jsxs)(tk,{variant:R.departments.includes(e.department_id)?"default":"outline",className:"cursor-pointer",onClick:()=>q("departments",e.department_id),children:[e.name,R.departments.includes(e.department_id)&&(0,ds.jsx)(Gi,{className:"w-3 h-3 ml-1"})]},e.department_id))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-2 text-blue-700",children:[(0,ds.jsx)(sk,{className:"w-4 h-4"}),"Main Responsible / SOP Owner"]}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:'Auto-matched from "Process Owner" in Excel'}),(0,ds.jsx)(u_,{className:"h-[100px] border rounded-lg p-2",children:(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:m.filter(e=>!1!==e.is_active).slice(0,100).map(e=>(0,ds.jsxs)(tk,{variant:R.main_responsible.includes(e.employee_id)?"default":"outline",className:"cursor-pointer ".concat(R.main_responsible.includes(e.employee_id)?"bg-blue-600":""),onClick:()=>q("main_responsible",e.employee_id),children:[e.first_name," ",e.last_name,R.main_responsible.includes(e.employee_id)&&(0,ds.jsx)(Gi,{className:"w-3 h-3 ml-1"})]},e.employee_id))})})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Also Involved (Employees)"]}),(0,ds.jsx)(u_,{className:"h-[100px] border rounded-lg p-2",children:(0,ds.jsx)("div",{className:"flex flex-wrap gap-2",children:m.filter(e=>!1!==e.is_active&&!R.main_responsible.includes(e.employee_id)).slice(0,100).map(e=>(0,ds.jsxs)(tk,{variant:R.also_involved.includes(e.employee_id)?"default":"outline",className:"cursor-pointer",onClick:()=>q("also_involved",e.employee_id),children:[e.first_name," ",e.last_name,R.also_involved.includes(e.employee_id)&&(0,ds.jsx)(Gi,{className:"w-3 h-3 ml-1"})]},e.employee_id))})})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsxs)(_n,{className:"flex items-center gap-2",children:[(0,ds.jsx)(T_,{className:"w-4 h-4"}),"Target Designations"]}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-2 max-h-[100px] overflow-y-auto p-2 border rounded-lg",children:d.map(e=>(0,ds.jsxs)(tk,{variant:R.designations.includes(e.designation_id)?"default":"outline",className:"cursor-pointer ".concat(R.designations.includes(e.designation_id)?"bg-purple-600":""),onClick:()=>q("designations",e.designation_id),children:[e.name,R.designations.includes(e.designation_id)&&(0,ds.jsx)(Gi,{className:"w-3 h-3 ml-1"})]},e.designation_id))})]}),i&&(null===b||void 0===b||null===(t=b.preview_data)||void 0===t?void 0:t.length)>0&&(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"File Preview"}),(0,ds.jsx)("div",{className:"border rounded-lg overflow-x-auto max-h-[200px] overflow-y-auto",children:(0,ds.jsx)("table",{className:"w-full text-xs",children:(0,ds.jsx)("tbody",{children:b.preview_data.slice(0,20).map((e,t)=>(0,ds.jsx)("tr",{className:0===t?"bg-slate-100 font-medium":t%2===0?"bg-slate-50":"",children:e.slice(0,10).map((e,t)=>(0,ds.jsx)("td",{className:"px-2 py-1 border-b border-r whitespace-nowrap max-w-[150px] truncate",children:e||"-"},t))},t))})})})]}),i&&b&&(0,ds.jsxs)("div",{className:"space-y-4 border rounded-lg p-4 bg-blue-50/50",children:[(0,ds.jsx)(_n,{className:"text-blue-700 font-semibold",children:"AI Extracted Information"}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[b.process_owner&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Process Owner:"}),(0,ds.jsx)("p",{className:"font-medium",children:b.process_owner})]}),b.document_created_by&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Document Created By:"}),(0,ds.jsx)("p",{className:"font-medium",children:b.document_created_by})]}),b.parsed_department&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Detected Department:"}),(0,ds.jsx)("p",{className:"font-medium",children:b.parsed_department})]}),b.document_version&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500",children:"Document Version:"}),(0,ds.jsx)("p",{className:"font-medium",children:b.document_version})]})]}),b.purpose&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Purpose:"}),(0,ds.jsx)("p",{className:"text-sm bg-white p-2 rounded border mt-1",children:b.purpose})]}),b.scope&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Scope:"}),(0,ds.jsx)("p",{className:"text-sm bg-white p-2 rounded border mt-1",children:b.scope})]}),b.procedure_summary&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Procedure Summary:"}),(0,ds.jsx)("p",{className:"text-sm bg-white p-2 rounded border mt-1",children:b.procedure_summary})]}),b.input_requirements&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Input Requirements:"}),(0,ds.jsx)("p",{className:"text-sm bg-white p-2 rounded border mt-1",children:b.input_requirements})]}),b.output_deliverables&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Output/Deliverables:"}),(0,ds.jsx)("p",{className:"text-sm bg-white p-2 rounded border mt-1",children:b.output_deliverables})]}),(null===(s=b.responsible_persons)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Responsible Persons/Roles:"}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:b.responsible_persons.map((e,t)=>(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:e},t))})]}),(null===(a=b.stakeholders)||void 0===a?void 0:a.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Stakeholders:"}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:b.stakeholders.map((e,t)=>(0,ds.jsx)(tk,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 text-xs",children:e},t))})]}),(null===(n=b.key_activities)||void 0===n?void 0:n.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Key Activities:"}),(0,ds.jsx)("ul",{className:"text-sm list-disc list-inside mt-1 bg-white p-2 rounded border",children:b.key_activities.slice(0,10).map((e,t)=>(0,ds.jsx)("li",{children:e},t))})]}),(null===(r=b.reports)||void 0===r?void 0:r.length)>0&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"text-slate-500 text-sm",children:"Reports:"}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:b.reports.map((e,t)=>(0,ds.jsx)(tk,{variant:"secondary",className:"text-xs",children:e},t))})]})]}),i&&(null===b||void 0===b||null===(l=b.process_flow_steps)||void 0===l?void 0:l.length)>0&&(0,ds.jsx)("div",{className:"border rounded-lg p-4 bg-gradient-to-br from-slate-50 to-white",children:(0,ds.jsx)(OL,{steps:b.process_flow_steps})})]})};return(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"sop-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// SOPs"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Standard Operating Procedures"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage, search, and track SOPs by department, task, and owner"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:I,children:[(0,ds.jsx)(SE,{className:"w-4 h-4 mr-1"}),"Refresh"]}),L&&(0,ds.jsxs)(fn,{onClick:()=>{W(),g(!0)},"data-testid":"create-sop-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-1"}),"Upload SOP"]})]})]}),(0,ds.jsx)(Pn,{children:(0,ds.jsx)(Mn,{className:"pt-6",children:(0,ds.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,ds.jsxs)("div",{className:"relative",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search by title, SOP number, owner, content...",value:N,onChange:e=>_(e.target.value),className:"pl-10","data-testid":"sop-search-input"})]}),(0,ds.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ds.jsxs)("div",{className:"w-[180px]",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Department"}),(0,ds.jsxs)(yE,{value:k,onValueChange:S,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Departments"}),o.map(e=>(0,ds.jsx)(kE,{value:e.department_id,children:e.name},e.department_id))]})]})]}),(0,ds.jsxs)("div",{className:"w-[150px]",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Status"}),(0,ds.jsxs)(yE,{value:C,onValueChange:E,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"draft",children:"Draft"}),(0,ds.jsx)(kE,{value:"published",children:"Published"})]})]})]}),(0,ds.jsxs)("div",{className:"w-[180px]",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Owner"}),(0,ds.jsxs)(yE,{value:T,onValueChange:A,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Owners"}),m.filter(e=>!1!==e.is_active).slice(0,50).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))]})]})]}),(0,ds.jsxs)("div",{className:"w-[150px]",children:[(0,ds.jsx)(_n,{className:"text-xs text-slate-500",children:"Group By"}),(0,ds.jsxs)(yE,{value:P,onValueChange:D,children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"none",children:"No Grouping"}),(0,ds.jsx)(kE,{value:"department",children:"Department"}),(0,ds.jsx)(kE,{value:"owner",children:"Owner"}),(0,ds.jsx)(kE,{value:"task_type",children:"Task Type"}),(0,ds.jsx)(kE,{value:"status",children:"Status"})]})]})]})]})]})})}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(w_,{className:"w-5 h-5 text-primary"}),"SOPs (",l?Object.values(l).flat().length:n.length,")"]})}),(0,ds.jsx)(Mn,{children:t?(0,ds.jsx)("div",{className:"flex justify-center py-8",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):l?(0,ds.jsx)("div",{className:"space-y-6",children:Object.entries(l).map(e=>{let[t,s]=e;return(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ds.jsx)(S_,{className:"w-4 h-4 text-slate-500"}),(0,ds.jsx)("h3",{className:"font-semibold text-slate-700",children:t}),(0,ds.jsx)(tk,{variant:"outline",children:s.length})]}),(0,ds.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pl-6",children:s.map(e=>(0,ds.jsx)(K,{sop:e},e.sop_id))}),(0,ds.jsx)(Wn,{className:"mt-4"})]},t)})}):n.length>0?(0,ds.jsx)("div",{className:"overflow-x-auto",children:(0,ds.jsxs)(pS,{children:[(0,ds.jsx)(fS,{children:(0,ds.jsxs)(vS,{className:"bg-slate-50",children:[(0,ds.jsx)(gS,{className:"w-[120px]",children:"SOP Number"}),(0,ds.jsx)(gS,{className:"min-w-[180px]",children:"Title"}),(0,ds.jsx)(gS,{children:"Owner"}),(0,ds.jsx)(gS,{children:"Responsible"}),(0,ds.jsx)(gS,{children:"Stakeholders"}),(0,ds.jsx)(gS,{children:"Status"}),(0,ds.jsx)(gS,{className:"text-right w-[140px]",children:"Actions"})]})}),(0,ds.jsx)(xS,{children:n.map(e=>{var t,s,a;return(0,ds.jsxs)(vS,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>V(e),"data-testid":"sop-row-".concat(e.sop_id),children:[(0,ds.jsx)(yS,{className:"font-mono text-xs",children:e.sop_number||e.sop_id}),(0,ds.jsx)(yS,{children:(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.title}),e.task_type&&(0,ds.jsx)(tk,{variant:"outline",className:"text-xs mt-1",children:e.task_type})]})}),(0,ds.jsx)(yS,{children:e.process_owner?(0,ds.jsx)(tk,{className:"bg-blue-100 text-blue-700 text-xs max-w-[150px] truncate",children:e.process_owner.split(" ").slice(0,2).join(" ")}):(null===(t=e.main_responsible_names)||void 0===t?void 0:t.length)>0?(0,ds.jsx)(tk,{className:"bg-blue-100 text-blue-700 text-xs",children:e.main_responsible_names[0]}):(0,ds.jsx)("span",{className:"text-xs text-slate-400",children:"-"})}),(0,ds.jsx)(yS,{children:(null===(s=e.responsible_persons)||void 0===s?void 0:s.length)>0?(0,ds.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[180px]",children:[e.responsible_persons.slice(0,2).map((e,t)=>(0,ds.jsx)(tk,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200 text-xs",children:e.length>15?e.slice(0,15)+"...":e},t)),e.responsible_persons.length>2&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:["+",e.responsible_persons.length-2]})]}):(0,ds.jsx)("span",{className:"text-xs text-slate-400",children:"-"})}),(0,ds.jsx)(yS,{children:(null===(a=e.stakeholders)||void 0===a?void 0:a.length)>0?(0,ds.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[180px]",children:[e.stakeholders.slice(0,2).map((e,t)=>(0,ds.jsx)(tk,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 text-xs",children:e.length>12?e.slice(0,12)+"...":e},t)),e.stakeholders.length>2&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:["+",e.stakeholders.length-2]})]}):(0,ds.jsx)("span",{className:"text-xs text-slate-400",children:"-"})}),(0,ds.jsx)(yS,{children:(0,ds.jsx)(tk,{className:Y[e.status],children:e.status})}),(0,ds.jsx)(yS,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,ds.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>V(e),title:"Edit",children:(0,ds.jsx)(pA,{className:"w-3 h-3"})}),e.file_name&&(0,ds.jsx)(fn,{size:"sm",variant:"outline",onClick:()=>H(e.sop_id),title:"Download",children:(0,ds.jsx)(Kk,{className:"w-3 h-3"})}),L&&"draft"===e.status&&(0,ds.jsx)(fn,{size:"sm",onClick:()=>(async e=>{try{(await fetch("".concat(RL,"/sop/").concat(e,"/publish"),{method:"PUT",headers:nk(),credentials:"include"})).ok?(ts.success("SOP published"),I()):ts.error("Failed to publish SOP")}catch(t){ts.error("Failed to publish SOP")}})(e.sop_id),className:"bg-emerald-600 hover:bg-emerald-700",title:"Publish",children:(0,ds.jsx)(FF,{className:"w-3 h-3"})}),L&&(0,ds.jsx)(fn,{size:"sm",variant:"destructive",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this SOP?"))try{const t=await fetch("".concat(RL,"/sop/").concat(e),{method:"DELETE",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),credentials:"include"});if(t.ok)ts.success("SOP deleted"),I();else{const e=await t.json().catch(()=>({}));ts.error(e.detail||"Failed to delete SOP")}}catch(t){ts.error("Failed to delete SOP")}})(e.sop_id),title:"Delete",children:(0,ds.jsx)(dk,{className:"w-3 h-3"})})]})})]},e.sop_id)})})]})}):(0,ds.jsxs)("div",{className:"text-center py-8",children:[(0,ds.jsx)(w_,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No SOPs found"}),L&&(0,ds.jsx)(fn,{className:"mt-4",onClick:()=>g(!0),children:"Upload First SOP"})]})})]}),(0,ds.jsx)(eo,{open:v,onOpenChange:g,children:(0,ds.jsxs)(no,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Upload New SOP"}),(0,ds.jsx)(oo,{children:"Upload an Excel SOP file. Process Owner and title will be auto-detected from the template."})]}),(0,ds.jsx)($,{isEdit:!1}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{F(!0);const e=new FormData;R.title&&e.append("title",R.title),R.description&&e.append("description",R.description),R.task_type&&e.append("task_type",R.task_type),R.departments.forEach(t=>e.append("departments",t)),R.designations.forEach(t=>e.append("designations",t)),R.main_responsible.forEach(t=>e.append("main_responsible",t)),R.also_involved.forEach(t=>e.append("also_involved",t)),R.file&&e.append("file",R.file);try{const t=await fetch("".concat(RL,"/sop/create"),{method:"POST",headers:nk(),credentials:"include",body:e});if(t.ok){const e=await t.json();ts.success("SOP created successfully"),e.process_owner&&ts.info("Auto-detected Process Owner: ".concat(e.process_owner)),g(!1),W(),I()}else{const e=await t.json();ts.error(e.detail||"Failed to create SOP")}}catch(t){ts.error("Failed to create SOP")}finally{F(!1)}},disabled:M,"data-testid":"save-sop-btn",children:[M?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(fA,{className:"w-4 h-4 mr-2"}),"Upload SOP"]})]})]})}),(0,ds.jsx)(eo,{open:y,onOpenChange:j,children:(0,ds.jsxs)(no,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Edit SOP"}),(0,ds.jsxs)(oo,{children:[null===b||void 0===b?void 0:b.sop_id," \u2022 Version ",null===b||void 0===b?void 0:b.version]})]}),(0,ds.jsx)($,{isEdit:!0}),(0,ds.jsxs)(lo,{className:"flex flex-col sm:flex-row justify-between gap-2",children:[(0,ds.jsx)("div",{className:"flex gap-2",children:(null===b||void 0===b?void 0:b.file_name)&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>H(b.sop_id),children:[(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>(async e=>{x(!0);try{const t=await fetch("".concat(RL,"/sop/").concat(e,"/reparse"),{method:"POST",headers:u(u({},nk()),{},{"Content-Type":"application/json"}),credentials:"include"});if(t.ok){const e=await t.json();w(e),ts.success("SOP re-parsed with improved AI extraction")}else ts.error("Failed to re-parse SOP")}catch(t){ts.error("Failed to re-parse SOP")}finally{x(!1)}})(b.sop_id),disabled:f,title:"Re-extract data with improved AI",children:[f?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(KM,{className:"w-4 h-4 mr-2"}),"Re-parse AI"]})]})}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(!b)return;F(!0);const e=new FormData;e.append("title",R.title),e.append("description",R.description||""),e.append("sop_number",R.sop_number||""),e.append("task_type",R.task_type||""),e.append("status",R.status||"draft"),R.departments.forEach(t=>e.append("departments",t)),R.designations.forEach(t=>e.append("designations",t)),R.main_responsible.forEach(t=>e.append("main_responsible",t)),R.also_involved.forEach(t=>e.append("also_involved",t)),R.file&&e.append("file",R.file);try{(await fetch("".concat(RL,"/sop/").concat(b.sop_id),{method:"PUT",headers:nk(),credentials:"include",body:e})).ok?(ts.success("SOP updated successfully"),j(!1),W(),I()):ts.error("Failed to update SOP")}catch(t){ts.error("Failed to update SOP")}finally{F(!1)}},disabled:M,children:[M?(0,ds.jsx)(Sx,{className:"w-4 h-4 mr-2 animate-spin"}):(0,ds.jsx)(gA,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]})},FL=Yi("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),LL=Yi("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),IL=Yi("list-todo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),zL=Yi("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),BL="https://shardahrms.com/api",UL=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],VL=["January","February","March","April","May","June","July","August","September","October","November","December"],HL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)(new Date),[n,r]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[N,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)(!1),[T,A]=(0,a.useState)(null),[P,D]=(0,a.useState)(null),[R,O]=(0,a.useState)({title:"",description:"",due_date:"",due_time:"",priority:"medium",assigned_to:""}),[M,F]=(0,a.useState)({title:"",description:"",date:"",start_time:"",end_time:"",participants:[],meeting_link:"",location:""}),L=t.getMonth(),I=t.getFullYear();(0,a.useEffect)(()=>{z()},[L,I]);const z=async()=>{i(!0);try{const e=nk(),t="".concat(I,"-").concat(String(L+1).padStart(2,"0")),[s,a,n,r,l,i,o]=await Promise.all([fetch("".concat(BL,"/attendance?month=").concat(L+1,"&year=").concat(I),{credentials:"include",headers:e}),fetch("".concat(BL,"/leave/my-leaves?year=").concat(I),{credentials:"include",headers:e}),fetch("".concat(BL,"/holidays?year=").concat(I),{credentials:"include",headers:e}),fetch("".concat(BL,"/calendar/tasks?month=").concat(t),{credentials:"include",headers:e}),fetch("".concat(BL,"/calendar/meetings?month=").concat(t),{credentials:"include",headers:e}),fetch("".concat(BL,"/employees"),{credentials:"include",headers:e}),fetch("".concat(BL,"/events"),{credentials:"include",headers:e})]);s.ok&&c(await s.json()),a.ok&&h(await a.json()),n.ok&&p(await n.json()),r.ok&&x(await r.json()),l.ok&&g(await l.json()),i.ok&&j(await i.json()),o.ok&&w(await o.json())}catch(e){console.error("Error fetching calendar data:",e)}finally{i(!1)}},B=e=>{const t=e.toISOString().split("T")[0],s=e.getDay(),a=o.find(e=>e.date===t),n=d.find(t=>{const s=new Date(t.start_date),a=new Date(t.end_date);return e>=s&&e<=a}),r=m.find(e=>e.date===t),l=f.filter(e=>e.due_date===t),i=v.filter(e=>e.date===t),c="".concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),u=b.filter(e=>{try{const t=new Date(e.event_date);return"".concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))===c}catch(nI){return!1}});return{dateStr:t,isSunday:0===s,isToday:t===(new Date).toISOString().split("T")[0],attendance:a,leave:n,holiday:r,tasks:l,meetings:i,celebrations:u}},U=e=>{if(e.holiday)return(0,ds.jsx)(FL,{className:"w-3 h-3 text-purple-600"});if(e.leave)return(0,ds.jsx)(__,{className:"w-3 h-3 text-amber-600"});var t;if(e.attendance)switch(null===(t=e.attendance.status)||void 0===t?void 0:t.toLowerCase()){case"present":return(0,ds.jsx)(T_,{className:"w-3 h-3 text-emerald-600"});case"wfh":return(0,ds.jsx)(LL,{className:"w-3 h-3 text-blue-600"});case"absent":return(0,ds.jsx)(Gi,{className:"w-3 h-3 text-red-600"});case"tour":return(0,ds.jsx)(__,{className:"w-3 h-3 text-indigo-600"});default:return null}return null},V=async e=>{try{const t=nk();(await fetch("".concat(BL,"/calendar/tasks/").concat(e.task_id,"/toggle"),{method:"PUT",headers:u({},t),credentials:"include"})).ok&&z()}catch(t){ts.error("Failed to update task")}},H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;A(null),O({title:"",description:"",due_date:e||(new Date).toISOString().split("T")[0],due_time:"",priority:"medium",assigned_to:""}),_(!0)},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;D(null),F({title:"",description:"",date:e||(new Date).toISOString().split("T")[0],start_time:"",end_time:"",participants:[],meeting_link:"",location:""}),S(!0)},q=(()=>{const e=new Date(I,L,1),t=new Date(I,L+1,0).getDate(),s=e.getDay(),a=[],n=new Date(I,L,0).getDate();for(let l=s-1;l>=0;l--)a.push({date:n-l,isCurrentMonth:!1,fullDate:new Date(I,L-1,n-l)});for(let l=1;l<=t;l++)a.push({date:l,isCurrentMonth:!0,fullDate:new Date(I,L,l)});const r=42-a.length;for(let l=1;l<=r;l++)a.push({date:l,isCurrentMonth:!1,fullDate:new Date(I,L+1,l)});return a})(),Y={present:o.filter(e=>"present"===e.status).length,wfh:o.filter(e=>"wfh"===e.status).length,leave:d.filter(e=>{const t=new Date(e.start_date);return t.getMonth()===L&&t.getFullYear()===I&&"approved"===e.status}).length,late:o.filter(e=>e.is_late).length,tasks:f.length,meetings:v.length};return(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"my-calendar-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Calendar"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"My Calendar"}),(0,ds.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"View attendance, manage tasks, and schedule meetings"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)(fn,{variant:"outline",className:"rounded-lg",onClick:()=>H(),children:[(0,ds.jsx)(IL,{className:"w-4 h-4 mr-2"}),"Add Task"]}),(0,ds.jsxs)(fn,{className:"rounded-lg shadow-lg shadow-primary/20",onClick:()=>W(),children:[(0,ds.jsx)(zL,{className:"w-4 h-4 mr-2"}),"Schedule Meeting"]})]})]}),(0,ds.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3 stagger-children",children:[{label:"Present",value:Y.present,color:"emerald",icon:"\u25cf"},{label:"WFH",value:Y.wfh,color:"blue",icon:"\u25cf"},{label:"Leave",value:Y.leave,color:"amber",icon:"\u25cf"},{label:"Late",value:Y.late,color:"yellow",icon:"\u25cf"},{label:"Tasks",value:Y.tasks,color:"purple",icon:"\u25cf"},{label:"Meetings",value:Y.meetings,color:"indigo",icon:"\u25cf"}].map((e,t)=>(0,ds.jsxs)("div",{className:"premium-stat stat-".concat(e.color),children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:e.value}),(0,ds.jsx)("p",{className:"text-xs font-medium text-slate-500 mt-0.5",children:e.label})]},t))}),(0,ds.jsxs)(Pn,{className:"!rounded-2xl",children:[(0,ds.jsx)(Dn,{className:"pb-2",children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"rounded-lg",onClick:()=>{s(new Date(I,L-1,1))},children:(0,ds.jsx)(QA,{className:"w-5 h-5"})}),(0,ds.jsxs)("h2",{className:"text-lg font-bold min-w-[180px] text-center text-slate-800",style:{fontFamily:"Manrope, sans-serif"},children:[VL[L]," ",I]}),(0,ds.jsx)(fn,{variant:"ghost",size:"icon",className:"rounded-lg",onClick:()=>{s(new Date(I,L+1,1))},children:(0,ds.jsx)($w,{className:"w-5 h-5"})}),(0,ds.jsx)(fn,{variant:"outline",size:"sm",className:"rounded-lg text-xs font-semibold",onClick:()=>{s(new Date)},children:"Today"})]}),(0,ds.jsx)("div",{className:"hidden md:flex items-center gap-5 text-xs",children:[{label:"Present",color:"bg-emerald-400"},{label:"WFH",color:"bg-blue-400"},{label:"Leave",color:"bg-amber-400"},{label:"Holiday",color:"bg-purple-400"},{label:"Absent",color:"bg-red-400"}].map(e=>(0,ds.jsxs)("div",{className:"premium-legend",children:[(0,ds.jsx)("div",{className:"premium-legend-dot ".concat(e.color)}),e.label]},e.label))})]})}),(0,ds.jsx)(Mn,{children:l?(0,ds.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):(0,ds.jsxs)("div",{className:"premium-cal-grid",children:[UL.map(e=>(0,ds.jsx)("div",{className:"premium-cal-header ".concat("Sun"===e?"sunday":""),children:e},e)),q.map((e,t)=>{var s,a;const n=B(e.fullDate),l=e.isCurrentMonth?n.holiday?"holiday":n.leave?"leave":"present"===(null===(s=n.attendance)||void 0===s?void 0:s.status)?"present":"wfh"===(null===(a=n.attendance)||void 0===a?void 0:a.status)?"wfh":n.isSunday?"sunday":n.attendance&&!["present","wfh"].includes(n.attendance.status)?"absent":"":"inactive";return(0,ds.jsxs)("div",{onClick:()=>(e=>{e.isCurrentMonth&&(r(e.fullDate),E(!0))})(e),className:"premium-cal-cell ".concat(l," ").concat(n.isToday?"today":""),"data-testid":"calendar-day-".concat(n.dateStr),children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,ds.jsx)("span",{className:"cal-date-num ".concat(n.isSunday&&!n.isToday?"text-red-400":"text-slate-700"),children:e.date}),U(n)]}),e.isCurrentMonth&&(0,ds.jsxs)("div",{className:"space-y-1",children:[n.holiday&&(0,ds.jsx)("div",{className:"cal-event-chip holiday-chip",title:n.holiday.name,children:n.holiday.name}),n.leave&&(0,ds.jsx)("div",{className:"cal-event-chip leave-chip",children:n.leave.leave_type||"Leave"}),n.attendance&&n.attendance.first_in&&(0,ds.jsx)("div",{className:"text-[10px] text-slate-400 font-medium px-1",children:n.attendance.first_in}),n.tasks.slice(0,2).map((e,t)=>(0,ds.jsxs)("div",{className:"cal-event-chip task ".concat(e.completed?"opacity-40 line-through":""),children:[(0,ds.jsx)(IL,{className:"w-2.5 h-2.5"}),e.title]},t)),n.meetings.slice(0,1).map((e,t)=>(0,ds.jsxs)("div",{className:"cal-event-chip meeting",children:[(0,ds.jsx)(zL,{className:"w-2.5 h-2.5"}),e.start_time," ",e.title]},t)),n.celebrations&&n.celebrations.slice(0,1).map((e,t)=>(0,ds.jsxs)("div",{className:"cal-event-chip celebration",children:["birthday"===e.event_type?"\ud83c\udf82":"work_anniversary"===e.event_type?"\ud83c\udf1f":"\ud83d\udc9d"," ",e.employee_name||e.emp_code]},"cel-".concat(t))),(n.tasks.length>2||n.meetings.length>1)&&(0,ds.jsxs)("div",{className:"text-[10px] text-slate-400 font-medium px-1",children:["+",Math.max(0,n.tasks.length-2)+Math.max(0,n.meetings.length-1)," more"]})]})]},t)})]})})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(IL,{className:"w-5 h-5 text-purple-600"}),"My Tasks"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>H(),children:[(0,ds.jsx)(CE,{className:"w-3 h-3 mr-1"}),"Add"]})]})}),(0,ds.jsx)(Mn,{className:"space-y-2 max-h-[300px] overflow-y-auto",children:f.length>0?f.slice(0,10).map(e=>(0,ds.jsx)("div",{className:"p-3 rounded-lg border ".concat(e.completed?"bg-slate-50":"bg-white"),children:(0,ds.jsxs)("div",{className:"flex items-start gap-2",children:[(0,ds.jsx)(PF,{checked:e.completed,onCheckedChange:()=>V(e)}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("p",{className:"font-medium text-sm ".concat(e.completed?"line-through text-slate-400":""),children:e.title}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,ds.jsx)("span",{className:"text-xs text-slate-500",children:e.due_date}),(0,ds.jsx)(tk,{variant:"outline",className:"text-xs ".concat("high"===e.priority?"border-red-300 text-red-600":"low"===e.priority?"border-slate-300 text-slate-500":"border-amber-300 text-amber-600"),children:e.priority})]})]}),(0,ds.jsx)(fn,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>(async e=>{try{const t=nk();(await fetch("".concat(BL,"/calendar/tasks/").concat(e),{method:"DELETE",headers:u({},t),credentials:"include"})).ok&&(ts.success("Task deleted"),z())}catch(t){ts.error("Failed to delete task")}})(e.task_id),children:(0,ds.jsx)(dk,{className:"w-3 h-3 text-slate-400"})})]})},e.task_id)):(0,ds.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,ds.jsx)(IL,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,ds.jsx)("p",{children:"No tasks yet"})]})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(zL,{className:"w-5 h-5 text-indigo-600"}),"My Meetings"]}),(0,ds.jsxs)(fn,{size:"sm",variant:"outline",onClick:()=>W(),children:[(0,ds.jsx)(CE,{className:"w-3 h-3 mr-1"}),"Schedule"]})]})}),(0,ds.jsx)(Mn,{className:"space-y-2 max-h-[300px] overflow-y-auto",children:v.length>0?v.slice(0,10).map(e=>{var t;return(0,ds.jsx)("div",{className:"p-3 rounded-lg border bg-white",children:(0,ds.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-500",children:[(0,ds.jsx)(v_,{className:"w-3 h-3"}),e.date,(0,ds.jsx)(p_,{className:"w-3 h-3 ml-2"}),e.start_time," - ",e.end_time||"?"]}),(null===(t=e.participants)||void 0===t?void 0:t.length)>0&&(0,ds.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-slate-500",children:[(0,ds.jsx)(k_,{className:"w-3 h-3"}),e.participants.length," participants"]})]}),(0,ds.jsxs)("div",{className:"flex items-center gap-1",children:[e.meeting_link&&(0,ds.jsx)(fn,{size:"sm",variant:"outline",className:"h-7 text-xs",asChild:!0,children:(0,ds.jsxs)("a",{href:e.meeting_link,target:"_blank",rel:"noopener noreferrer",children:[(0,ds.jsx)(zL,{className:"w-3 h-3 mr-1"}),"Join"]})}),(0,ds.jsx)(fn,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>(async e=>{try{const t=nk();(await fetch("".concat(BL,"/calendar/meetings/").concat(e),{method:"DELETE",headers:u({},t),credentials:"include"})).ok&&(ts.success("Meeting cancelled"),z())}catch(t){ts.error("Failed to cancel meeting")}})(e.meeting_id),children:(0,ds.jsx)(dk,{className:"w-3 h-3 text-slate-400"})})]})]})},e.meeting_id)}):(0,ds.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,ds.jsx)(zL,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,ds.jsx)("p",{children:"No meetings scheduled"})]})})]})]}),(0,ds.jsx)(eo,{open:C,onOpenChange:E,children:(0,ds.jsx)(no,{className:"max-w-lg",children:n&&(()=>{const e=B(n);return(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsx)(io,{children:n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),(0,ds.jsxs)("div",{className:"space-y-4",children:[e.attendance&&(0,ds.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50",children:[(0,ds.jsx)("p",{className:"text-sm font-medium mb-2",children:"Attendance"}),(0,ds.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,ds.jsx)(tk,{children:e.attendance.status}),e.attendance.first_in&&(0,ds.jsxs)("span",{children:["In: ",e.attendance.first_in]}),e.attendance.last_out&&(0,ds.jsxs)("span",{children:["Out: ",e.attendance.last_out]}),e.attendance.is_late&&(0,ds.jsx)(tk,{variant:"destructive",children:"Late"})]})]}),e.holiday&&(0,ds.jsx)("div",{className:"p-3 rounded-lg bg-purple-50",children:(0,ds.jsxs)("p",{className:"text-sm font-medium text-purple-800",children:["\ud83c\udf89 ",e.holiday.name]})}),e.leave&&(0,ds.jsx)("div",{className:"p-3 rounded-lg bg-amber-50",children:(0,ds.jsxs)("p",{className:"text-sm font-medium text-amber-800",children:["\u2708\ufe0f ",e.leave.leave_type||"Leave"," - ",e.leave.status]})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Tasks"}),(0,ds.jsxs)(fn,{size:"sm",variant:"ghost",onClick:()=>{E(!1),H(e.dateStr)},children:[(0,ds.jsx)(CE,{className:"w-3 h-3 mr-1"}),"Add"]})]}),e.tasks.length>0?(0,ds.jsx)("div",{className:"space-y-2",children:e.tasks.map(e=>(0,ds.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded bg-slate-50",children:[(0,ds.jsx)(PF,{checked:e.completed,onCheckedChange:()=>V(e)}),(0,ds.jsx)("span",{className:"text-sm flex-1 ".concat(e.completed?"line-through text-slate-400":""),children:e.title})]},e.task_id))}):(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"No tasks"})]}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ds.jsx)("p",{className:"text-sm font-medium",children:"Meetings"}),(0,ds.jsxs)(fn,{size:"sm",variant:"ghost",onClick:()=>{E(!1),W(e.dateStr)},children:[(0,ds.jsx)(CE,{className:"w-3 h-3 mr-1"}),"Schedule"]})]}),e.meetings.length>0?(0,ds.jsx)("div",{className:"space-y-2",children:e.meetings.map(e=>(0,ds.jsxs)("div",{className:"p-2 rounded bg-indigo-50",children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-indigo-800",children:e.title}),(0,ds.jsxs)("p",{className:"text-xs text-indigo-600",children:[e.start_time," - ",e.end_time]})]},e.meeting_id))}):(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"No meetings"})]})]})]})})()})}),(0,ds.jsx)(eo,{open:N,onOpenChange:_,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:T?"Edit Task":"Create Task"}),(0,ds.jsx)(oo,{children:"Add a task to your calendar"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:R.title,onChange:e=>O(u(u({},R),{},{title:e.target.value})),placeholder:"Task title"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:R.description,onChange:e=>O(u(u({},R),{},{description:e.target.value})),placeholder:"Optional description",rows:2})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Due Date *"}),(0,ds.jsx)(vn,{type:"date",value:R.due_date,onChange:e=>O(u(u({},R),{},{due_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Time"}),(0,ds.jsx)(vn,{type:"time",value:R.due_time,onChange:e=>O(u(u({},R),{},{due_time:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Priority"}),(0,ds.jsxs)(yE,{value:R.priority,onValueChange:e=>O(u(u({},R),{},{priority:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"low",children:"Low"}),(0,ds.jsx)(kE,{value:"medium",children:"Medium"}),(0,ds.jsx)(kE,{value:"high",children:"High"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Assign To (Optional)"}),(0,ds.jsxs)(yE,{value:R.assigned_to||"self",onValueChange:e=>O(u(u({},R),{},{assigned_to:"self"===e?"":e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Self"})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"self",children:"Self"}),y.slice(0,50).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))]})]})]})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(R.title&&R.due_date)try{const e=nk(),t=T?"".concat(BL,"/calendar/tasks/").concat(T.task_id):"".concat(BL,"/calendar/tasks"),s=await fetch(t,{method:T?"PUT":"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(R)});if(s.ok)ts.success(T?"Task updated":"Task created"),_(!1),A(null),O({title:"",description:"",due_date:"",due_time:"",priority:"medium",assigned_to:""}),z();else{const e=await s.json();ts.error(e.detail||"Failed to save task")}}catch(e){ts.error("Failed to save task")}else ts.error("Please fill title and due date")},children:[T?"Update":"Create"," Task"]})]})]})}),(0,ds.jsx)(eo,{open:k,onOpenChange:S,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:P?"Edit Meeting":"Schedule Meeting"}),(0,ds.jsx)(oo,{children:"Create a meeting and invite participants"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Title *"}),(0,ds.jsx)(vn,{value:M.title,onChange:e=>F(u(u({},M),{},{title:e.target.value})),placeholder:"Meeting title"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Description"}),(0,ds.jsx)(kA,{value:M.description,onChange:e=>F(u(u({},M),{},{description:e.target.value})),placeholder:"Meeting agenda",rows:2})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date *"}),(0,ds.jsx)(vn,{type:"date",value:M.date,onChange:e=>F(u(u({},M),{},{date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Time *"}),(0,ds.jsx)(vn,{type:"time",value:M.start_time,onChange:e=>F(u(u({},M),{},{start_time:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Time"}),(0,ds.jsx)(vn,{type:"time",value:M.end_time,onChange:e=>F(u(u({},M),{},{end_time:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Meeting Link (Teams/Zoom)"}),(0,ds.jsx)(vn,{value:M.meeting_link,onChange:e=>F(u(u({},M),{},{meeting_link:e.target.value})),placeholder:"https://teams.microsoft.com/..."})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Location (Optional)"}),(0,ds.jsx)(vn,{value:M.location,onChange:e=>F(u(u({},M),{},{location:e.target.value})),placeholder:"Conference Room / Online"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(M.title&&M.date&&M.start_time)try{const e=nk(),t=P?"".concat(BL,"/calendar/meetings/").concat(P.meeting_id):"".concat(BL,"/calendar/meetings"),s=await fetch(t,{method:P?"PUT":"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(M)});if(s.ok)ts.success(P?"Meeting updated":"Meeting scheduled"),S(!1),D(null),F({title:"",description:"",date:"",start_time:"",end_time:"",participants:[],meeting_link:"",location:""}),z();else{const e=await s.json();ts.error(e.detail||"Failed to save meeting")}}catch(e){ts.error("Failed to save meeting")}else ts.error("Please fill required fields")},children:[(0,ds.jsx)(zL,{className:"w-4 h-4 mr-2"}),P?"Update":"Schedule"," Meeting"]})]})]})})]})},WL=Yi("list-checks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),qL=Yi("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),YL="https://shardahrms.com/api",GL=e=>{var t,s;let{meeting:a,onOpenDetail:n}=e;return(0,ds.jsx)(Pn,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>n(a),"data-testid":"meeting-card-".concat(a.meeting_id),children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("h3",{className:"font-semibold text-slate-900 truncate",children:a.subject}),(0,ds.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-slate-500",children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(v_,{className:"w-3.5 h-3.5"}),a.meeting_date]}),(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(p_,{className:"w-3.5 h-3.5"}),a.start_time]})]}),a.location&&(0,ds.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-slate-400",children:[(0,ds.jsx)(Jk,{className:"w-3 h-3"}),a.location]}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,ds.jsx)(k_,{className:"w-3.5 h-3.5 text-slate-400"}),(0,ds.jsxs)("span",{className:"text-xs text-slate-500",children:[(null===(t=a.participants)||void 0===t?void 0:t.length)||0," participants"]}),(null===(s=a.follow_up_points)||void 0===s?void 0:s.length)>0&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:[a.follow_up_points.filter(e=>"pending"===e.status).length," pending follow-ups"]})]})]}),(0,ds.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,ds.jsx)(tk,{className:"scheduled"===a.status?"bg-blue-100 text-blue-700":"completed"===a.status?"bg-emerald-100 text-emerald-700":"cancelled"===a.status?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700",children:a.status}),a.series_id&&a.previous_meeting_id&&(0,ds.jsxs)(tk,{variant:"outline",className:"text-xs",children:[(0,ds.jsx)(wL,{className:"w-3 h-3 mr-1"}),"Series"]})]})]})})})},KL=()=>{var e,t,s,n,r,l,i,o,c,d,h,m,p;const{user:f}=Cs(),[x,v]=(0,a.useState)(!0),[g,y]=(0,a.useState)("upcoming"),[j,b]=(0,a.useState)([]),[w,N]=(0,a.useState)([]),[_,k]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),[E,T]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[O,M]=(0,a.useState)(null),[F,L]=(0,a.useState)(""),[I,z]=(0,a.useState)("all"),[B,U]=(0,a.useState)({subject:"",meeting_date:"",start_time:"",end_time:"",location:"",participants:[],agenda_items:[],next_meeting_date:""}),[V,H]=(0,a.useState)(""),[W,q]=(0,a.useState)(""),[Y,G]=(0,a.useState)({content:"",assigned_to:""}),K="super_admin"===(null===f||void 0===f?void 0:f.role)||"hr_admin"===(null===f||void 0===f?void 0:f.role)||"hr_executive"===(null===f||void 0===f?void 0:f.role),$=(0,a.useCallback)(async()=>{v(!0);try{const e=nk(),[t,s]=await Promise.all([fetch("".concat(YL,"/meetings/list"),{credentials:"include",headers:e}),fetch("".concat(YL,"/employees"),{credentials:"include",headers:e})]);if(t.ok&&b(await t.json()),s.ok&&N(await s.json()),K){const t=await fetch("".concat(YL,"/meetings/analytics/overview"),{credentials:"include",headers:e});t.ok&&k(await t.json())}}catch(e){console.error("Error fetching meetings:",e),ts.error("Failed to load meetings")}finally{v(!1)}},[K]);(0,a.useEffect)(()=>{$()},[$]);const X=async e=>{try{const t=nk(),s=await fetch("".concat(YL,"/meetings/").concat(e),{credentials:"include",headers:t});if(s.ok){const e=await s.json();C(e)}}catch(t){console.error("Failed to fetch meeting details:",t)}},J=async e=>{await X(e.meeting_id),P(!0)},Q=()=>{M(null),U({subject:"",meeting_date:"",start_time:"",end_time:"",location:"",participants:[],agenda_items:[],next_meeting_date:""}),H("")},Z=()=>{V.trim()&&(U(e=>u(u({},e),{},{agenda_items:[...e.agenda_items,{item_id:"item_".concat(Date.now()),content:V,status:"pending"}]})),H(""))},ee=e=>{const t=w.find(t=>t.employee_id===e);return t?"".concat(t.first_name," ").concat(t.last_name):e},te=j.filter(e=>{var t;const s=null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(F.toLowerCase()),a="all"===I||e.status===I;return s&&a}),se=te.filter(e=>"scheduled"===e.status&&e.meeting_date>=(new Date).toISOString().split("T")[0]).sort((e,t)=>e.meeting_date.localeCompare(t.meeting_date)),ae=te.filter(e=>"completed"===e.status||e.meeting_date<(new Date).toISOString().split("T")[0]).sort((e,t)=>t.meeting_date.localeCompare(e.meeting_date));return(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"meetings-page",children:[(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Meetings"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Meeting Management"}),(0,ds.jsx)("p",{className:"text-slate-600 mt-1",children:"Track meetings, discussions, and follow-ups"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[160px]"})]}),(0,ds.jsxs)(fn,{onClick:()=>{Q(),T(!0)},"data-testid":"create-meeting-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-2"}),"New Meeting"]})]}),K&&_&&(0,ds.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ds.jsx)(Pn,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"p-2 rounded-lg bg-blue-200",children:(0,ds.jsx)(f_,{className:"w-5 h-5 text-blue-700"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:(null===(e=_.overview)||void 0===e?void 0:e.total_meetings)||0}),(0,ds.jsx)("p",{className:"text-xs text-blue-600",children:"Total Meetings"})]})]})})}),(0,ds.jsx)(Pn,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 border-emerald-200",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"p-2 rounded-lg bg-emerald-200",children:(0,ds.jsx)(Yk,{className:"w-5 h-5 text-emerald-700"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("p",{className:"text-2xl font-bold text-emerald-900",children:[(null===(t=_.overview)||void 0===t?void 0:t.followup_completion_rate)||0,"%"]}),(0,ds.jsx)("p",{className:"text-xs text-emerald-600",children:"Follow-up Rate"})]})]})})}),(0,ds.jsx)(Pn,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"p-2 rounded-lg bg-amber-200",children:(0,ds.jsx)(qk,{className:"w-5 h-5 text-amber-700"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-amber-900",children:(null===(s=_.overview)||void 0===s?void 0:s.avg_meetings_per_day)||0}),(0,ds.jsx)("p",{className:"text-xs text-amber-600",children:"Avg/Day"})]})]})})}),(0,ds.jsx)(Pn,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,ds.jsx)(Mn,{className:"p-4",children:(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"p-2 rounded-lg bg-purple-200",children:(0,ds.jsx)(y_,{className:"w-5 h-5 text-purple-700"})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:(null===(n=_.overview)||void 0===n?void 0:n.avg_days_between_followup_meetings)||0}),(0,ds.jsx)("p",{className:"text-xs text-purple-600",children:"Avg Days Between"})]})]})})})]}),(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,ds.jsxs)("div",{className:"relative flex-1",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search meetings...",value:F,onChange:e=>L(e.target.value),className:"pl-9"})]}),(0,ds.jsxs)(yE,{value:I,onValueChange:z,children:[(0,ds.jsxs)(bE,{className:"w-[150px]",children:[(0,ds.jsx)(EE,{className:"w-4 h-4 mr-2"}),(0,ds.jsx)(jE,{placeholder:"Status"})]}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Status"}),(0,ds.jsx)(kE,{value:"scheduled",children:"Scheduled"}),(0,ds.jsx)(kE,{value:"completed",children:"Completed"}),(0,ds.jsx)(kE,{value:"cancelled",children:"Cancelled"})]})]}),(0,ds.jsx)(fn,{variant:"outline",onClick:$,children:(0,ds.jsx)(SE,{className:"w-4 h-4"})})]}),(0,ds.jsxs)(cA,{value:g,onValueChange:y,children:[(0,ds.jsxs)(dA,{children:[(0,ds.jsxs)(uA,{value:"upcoming",children:["Upcoming (",se.length,")"]}),(0,ds.jsxs)(uA,{value:"past",children:["Past (",ae.length,")"]}),K&&(0,ds.jsx)(uA,{value:"analytics",children:"Analytics"})]}),(0,ds.jsx)(hA,{value:"upcoming",className:"mt-4",children:x?(0,ds.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ds.jsx)(SE,{className:"w-8 h-8 animate-spin text-primary"})}):se.length>0?(0,ds.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:se.map(e=>(0,ds.jsx)(GL,{meeting:e,onOpenDetail:J},e.meeting_id))}):(0,ds.jsx)(Pn,{className:"py-12",children:(0,ds.jsxs)(Mn,{className:"text-center",children:[(0,ds.jsx)(f_,{className:"w-12 h-12 mx-auto text-slate-300 mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No upcoming meetings"}),(0,ds.jsx)(fn,{variant:"outline",className:"mt-4",onClick:()=>T(!0),children:"Schedule a Meeting"})]})})}),(0,ds.jsx)(hA,{value:"past",className:"mt-4",children:ae.length>0?(0,ds.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ae.map(e=>(0,ds.jsx)(GL,{meeting:e,onOpenDetail:J},e.meeting_id))}):(0,ds.jsx)(Pn,{className:"py-12",children:(0,ds.jsxs)(Mn,{className:"text-center",children:[(0,ds.jsx)(NL,{className:"w-12 h-12 mx-auto text-slate-300 mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No past meetings"})]})})}),K&&(0,ds.jsx)(hA,{value:"analytics",className:"mt-4",children:_?(0,ds.jsxs)("div",{className:"space-y-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Meeting Frequency by Day"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"grid grid-cols-7 gap-2",children:Object.entries(_.day_frequency||{}).map(e=>{let[t,s]=e;return(0,ds.jsxs)("div",{className:"text-center p-3 rounded-lg bg-slate-50",children:[(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:t.slice(0,3)}),(0,ds.jsx)("p",{className:"text-xl font-bold text-slate-800",children:s})]},t)})})})]}),(0,ds.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Top Organizers"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===(r=_.top_organizers)||void 0===r?void 0:r.slice(0,5).map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center",children:t+1}),(0,ds.jsx)("span",{className:"text-sm font-medium",children:e.name||"Unknown"})]}),(0,ds.jsxs)(tk,{variant:"outline",children:[e.organized," meetings"]})]},e.employee_id))})})]}),(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{children:(0,ds.jsx)(Rn,{className:"text-lg",children:"Top Attendees"})}),(0,ds.jsx)(Mn,{children:(0,ds.jsx)("div",{className:"space-y-3",children:null===(l=_.top_attendees)||void 0===l?void 0:l.slice(0,5).map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ds.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ds.jsx)("span",{className:"w-6 h-6 rounded-full bg-emerald-600 text-white text-xs flex items-center justify-center",children:t+1}),(0,ds.jsx)("span",{className:"text-sm font-medium",children:e.name||"Unknown"})]}),(0,ds.jsxs)(tk,{variant:"outline",children:[e.attended," meetings"]})]},e.employee_id))})})]})]})]}):(0,ds.jsx)(Pn,{className:"py-12",children:(0,ds.jsxs)(Mn,{className:"text-center",children:[(0,ds.jsx)(R_,{className:"w-12 h-12 mx-auto text-slate-300 mb-4"}),(0,ds.jsx)("p",{className:"text-slate-500",children:"No analytics data available"})]})})})]}),(0,ds.jsx)(eo,{open:E,onOpenChange:T,children:(0,ds.jsxs)(no,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:O?"Edit Meeting":"Create New Meeting"}),(0,ds.jsx)(oo,{children:"Fill in the meeting details"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Subject *"}),(0,ds.jsx)(vn,{value:B.subject,onChange:e=>U(u(u({},B),{},{subject:e.target.value})),placeholder:"Meeting subject","data-testid":"meeting-subject-input"})]}),(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date *"}),(0,ds.jsx)(vn,{type:"date",value:B.meeting_date,onChange:e=>U(u(u({},B),{},{meeting_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Time *"}),(0,ds.jsx)(vn,{type:"time",value:B.start_time,onChange:e=>U(u(u({},B),{},{start_time:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Time"}),(0,ds.jsx)(vn,{type:"time",value:B.end_time,onChange:e=>U(u(u({},B),{},{end_time:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Location"}),(0,ds.jsx)(vn,{value:B.location,onChange:e=>U(u(u({},B),{},{location:e.target.value})),placeholder:"Conference room / Online"})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Participants"}),(0,ds.jsxs)(yE,{value:"",onValueChange:e=>{e&&!B.participants.includes(e)&&U(u(u({},B),{},{participants:[...B.participants,e]}))},children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Add participants"})}),(0,ds.jsx)(_E,{children:w.filter(e=>!B.participants.includes(e.employee_id)).slice(0,50).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))})]}),(0,ds.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:B.participants.map(e=>(0,ds.jsxs)(tk,{variant:"secondary",className:"gap-1",children:[ee(e),(0,ds.jsx)("button",{onClick:()=>U(u(u({},B),{},{participants:B.participants.filter(t=>t!==e)})),className:"ml-1 hover:text-red-500",children:"\xd7"})]},e))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Agenda / Things to Focus On"}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsx)(vn,{value:V,onChange:e=>H(e.target.value),placeholder:"Add agenda item",onKeyDown:e=>"Enter"===e.key&&Z()}),(0,ds.jsx)(fn,{type:"button",variant:"outline",onClick:Z,children:(0,ds.jsx)(CE,{className:"w-4 h-4"})})]}),(0,ds.jsx)("div",{className:"space-y-2 mt-2",children:B.agenda_items.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded",children:[(0,ds.jsx)(WL,{className:"w-4 h-4 text-slate-400"}),(0,ds.jsx)("span",{className:"flex-1 text-sm",children:e.content||e}),(0,ds.jsx)("button",{onClick:()=>(e=>{U(t=>u(u({},t),{},{agenda_items:t.agenda_items.filter((t,s)=>s!==e)}))})(t),className:"text-red-500 hover:text-red-700",children:(0,ds.jsx)(dk,{className:"w-4 h-4"})})]},t))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,ds.jsxs)(fn,{onClick:async()=>{if(B.subject&&B.meeting_date&&B.start_time)try{const e=nk(),t=O?"".concat(YL,"/meetings/").concat(O.meeting_id):"".concat(YL,"/meetings/create"),s=await fetch(t,{method:O?"PUT":"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(B)});if(s.ok)ts.success(O?"Meeting updated":"Meeting created"),T(!1),Q(),$();else{const e=await s.json();ts.error(e.detail||"Failed to save meeting")}}catch(e){ts.error("Failed to save meeting")}else ts.error("Please fill all required fields")},"data-testid":"save-meeting-btn",children:[O?"Update":"Create"," Meeting"]})]})]})}),(0,ds.jsx)(eo,{open:A,onOpenChange:P,children:(0,ds.jsx)(no,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:S&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(ro,{children:(0,ds.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)(io,{className:"text-xl",children:S.subject}),(0,ds.jsxs)(oo,{className:"mt-1 flex items-center gap-4",children:[(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(v_,{className:"w-4 h-4"}),S.meeting_date]}),(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(p_,{className:"w-4 h-4"}),S.start_time," - ",S.end_time||"?"]}),S.location&&(0,ds.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ds.jsx)(Jk,{className:"w-4 h-4"}),S.location]})]})]}),(0,ds.jsxs)(lN,{children:[(0,ds.jsx)(iN,{asChild:!0,children:(0,ds.jsx)(fn,{variant:"ghost",size:"icon",children:(0,ds.jsx)(qL,{className:"w-4 h-4"})})}),(0,ds.jsxs)(oN,{align:"end",children:[(0,ds.jsxs)(cN,{onClick:()=>{var e;P(!1),M(e=S),U({subject:e.subject,meeting_date:e.meeting_date,start_time:e.start_time,end_time:e.end_time||"",location:e.location||"",participants:e.participants||[],agenda_items:e.agenda_items||[],next_meeting_date:e.next_meeting_date||""}),T(!0)},children:[(0,ds.jsx)(pA,{className:"w-4 h-4 mr-2"}),"Edit Meeting"]}),(0,ds.jsxs)(cN,{onClick:()=>R(!0),children:[(0,ds.jsx)(Gk,{className:"w-4 h-4 mr-2"}),"Schedule Follow-up"]}),(0,ds.jsxs)(cN,{onClick:()=>(async e=>{if(confirm("Are you sure you want to cancel this meeting?"))try{const t=nk();(await fetch("".concat(YL,"/meetings/").concat(e),{method:"DELETE",headers:t,credentials:"include"})).ok?(ts.success("Meeting cancelled"),P(!1),$()):ts.error("Failed to cancel meeting")}catch(t){ts.error("Failed to cancel meeting")}})(S.meeting_id),className:"text-red-600",children:[(0,ds.jsx)(dk,{className:"w-4 h-4 mr-2"}),"Cancel Meeting"]})]})]})]})}),(0,ds.jsx)(u_,{className:"flex-1 pr-4",children:(0,ds.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(k_,{className:"w-4 h-4"}),"Participants (",(null===(i=S.participants)||void 0===i?void 0:i.length)||0,")"]}),(0,ds.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ds.jsxs)(tk,{variant:"outline",className:"bg-primary/10",children:[S.organizer_name||"Organizer"," (Organizer)"]}),null===(o=S.participant_details)||void 0===o?void 0:o.map(e=>(0,ds.jsx)(tk,{variant:"secondary",children:e.name},e.employee_id))]})]}),(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(WL,{className:"w-4 h-4"}),"Agenda / Things to Focus On"]}),(null===(c=S.agenda_items)||void 0===c?void 0:c.length)>0?(0,ds.jsx)("div",{className:"space-y-2",children:S.agenda_items.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded",children:[(0,ds.jsx)(Jw,{className:"w-3 h-3 text-slate-400"}),(0,ds.jsx)("span",{className:"text-sm",children:e.content||e}),e.from_previous_meeting&&(0,ds.jsx)(tk,{variant:"outline",className:"text-xs ml-auto",children:"From Previous"})]},t))}):(0,ds.jsx)("p",{className:"text-sm text-slate-400",children:"No agenda items"})]}),(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(lk,{className:"w-4 h-4"}),"Discussion Notes"]}),(0,ds.jsxs)("div",{className:"space-y-3",children:[null===(d=S.discussion_notes)||void 0===d?void 0:d.map((e,t)=>(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm",children:e.content}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-xs text-slate-500",children:[(0,ds.jsx)("span",{className:"font-medium",children:e.added_by_name}),(0,ds.jsx)("span",{children:"\u2022"}),(0,ds.jsx)("span",{children:new Date(e.timestamp).toLocaleString()}),e.edited_at&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)("span",{children:"\u2022"}),(0,ds.jsx)("span",{className:"italic",children:"edited"})]})]})]},t)),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsx)(kA,{placeholder:"Add a discussion note...",value:W,onChange:e=>q(e.target.value),rows:2,className:"flex-1"}),(0,ds.jsx)(fn,{onClick:async()=>{if(W.trim()&&S)try{const e=nk();(await fetch("".concat(YL,"/meetings/").concat(S.meeting_id,"/notes"),{method:"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify({content:W})})).ok?(ts.success("Note added"),q(""),await X(S.meeting_id)):ts.error("Failed to add note")}catch(e){ts.error("Failed to add note")}},disabled:!W.trim(),children:(0,ds.jsx)(FF,{className:"w-4 h-4"})})]})]})]}),(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(y_,{className:"w-4 h-4"}),"Follow-up Points for Next Meeting"]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[null===(h=S.follow_up_points)||void 0===h?void 0:h.map((e,t)=>(0,ds.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded",children:[(0,ds.jsx)("button",{onClick:()=>(async(e,t)=>{if(S)try{const s=nk();await fetch("".concat(YL,"/meetings/").concat(S.meeting_id,"/followups/").concat(e),{method:"PUT",headers:u({"Content-Type":"application/json"},s),credentials:"include",body:JSON.stringify({status:"completed"===t?"pending":"completed"})}),await X(S.meeting_id)}catch(s){ts.error("Failed to update follow-up")}})(e.followup_id,e.status),children:"completed"===e.status?(0,ds.jsx)(Yk,{className:"w-4 h-4 text-emerald-600"}):(0,ds.jsx)(Jw,{className:"w-4 h-4 text-slate-400"})}),(0,ds.jsx)("span",{className:"flex-1 text-sm ".concat("completed"===e.status?"line-through text-slate-400":""),children:e.content}),e.assigned_to&&(0,ds.jsx)(tk,{variant:"outline",className:"text-xs",children:ee(e.assigned_to)})]},t)),(0,ds.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,ds.jsx)(vn,{placeholder:"Add follow-up point...",value:Y.content,onChange:e=>G(u(u({},Y),{},{content:e.target.value})),className:"flex-1"}),(0,ds.jsxs)(yE,{value:Y.assigned_to,onValueChange:e=>G(u(u({},Y),{},{assigned_to:e})),children:[(0,ds.jsx)(bE,{className:"w-[150px]",children:(0,ds.jsx)(jE,{placeholder:"Assign to"})}),(0,ds.jsx)(_E,{children:w.slice(0,30).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name]},e.employee_id))})]}),(0,ds.jsx)(fn,{onClick:async()=>{if(Y.content.trim()&&S)try{const e=nk();(await fetch("".concat(YL,"/meetings/").concat(S.meeting_id,"/followups"),{method:"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify(Y)})).ok?(ts.success("Follow-up added"),G({content:"",assigned_to:""}),await X(S.meeting_id)):ts.error("Failed to add follow-up")}catch(e){ts.error("Failed to add follow-up")}},disabled:!Y.content.trim(),children:(0,ds.jsx)(CE,{className:"w-4 h-4"})})]})]})]}),(S.previous_meeting_info||S.next_meeting_info)&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(wL,{className:"w-4 h-4"}),"Meeting Series"]}),(0,ds.jsxs)("div",{className:"flex items-center gap-4",children:[S.previous_meeting_info&&(0,ds.jsxs)(fn,{variant:"outline",size:"sm",children:[(0,ds.jsx)($w,{className:"w-4 h-4 rotate-180 mr-1"}),"Previous: ",S.previous_meeting_info.meeting_date]}),S.next_meeting_info&&(0,ds.jsxs)(fn,{variant:"outline",size:"sm",children:["Next: ",S.next_meeting_info.meeting_date,(0,ds.jsx)($w,{className:"w-4 h-4 ml-1"})]})]})]})]}),(null===(m=S.activities)||void 0===m?void 0:m.length)>0&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(Wn,{}),(0,ds.jsxs)("div",{children:[(0,ds.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,ds.jsx)(NL,{className:"w-4 h-4"}),"Activity Log"]}),(0,ds.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:S.activities.slice(0,10).map((e,t)=>(0,ds.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,ds.jsx)("span",{className:"font-medium text-slate-700",children:e.user_name}),(0,ds.jsx)("span",{children:e.action}),e.field_changed&&(0,ds.jsxs)("span",{className:"text-slate-400",children:["(",e.field_changed,")"]}),(0,ds.jsx)("span",{className:"ml-auto",children:new Date(e.timestamp).toLocaleString()})]},t))})]})]})]})}),(0,ds.jsxs)(lo,{className:"mt-4",children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>P(!1),children:"Close"}),(0,ds.jsxs)(fn,{onClick:()=>R(!0),children:[(0,ds.jsx)(Gk,{className:"w-4 h-4 mr-2"}),"Schedule Follow-up"]})]})]})})}),(0,ds.jsx)(eo,{open:D,onOpenChange:R,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Schedule Follow-up Meeting"}),(0,ds.jsx)(oo,{children:"Follow-up points will be automatically added as agenda items"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date *"}),(0,ds.jsx)(vn,{type:"date",value:B.meeting_date,onChange:e=>U(u(u({},B),{},{meeting_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Start Time *"}),(0,ds.jsx)(vn,{type:"time",value:B.start_time,onChange:e=>U(u(u({},B),{},{start_time:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"End Time"}),(0,ds.jsx)(vn,{type:"time",value:B.end_time,onChange:e=>U(u(u({},B),{},{end_time:e.target.value}))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Location"}),(0,ds.jsx)(vn,{value:B.location,onChange:e=>U(u(u({},B),{},{location:e.target.value})),placeholder:(null===S||void 0===S?void 0:S.location)||"Conference room / Online"})]}),(null===S||void 0===S||null===(p=S.follow_up_points)||void 0===p?void 0:p.length)>0&&(0,ds.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,ds.jsx)("p",{className:"text-sm font-medium mb-2",children:"These follow-up points will become the agenda:"}),(0,ds.jsx)("ul",{className:"text-sm text-slate-600 space-y-1",children:S.follow_up_points.filter(e=>"completed"!==e.status).map((e,t)=>(0,ds.jsxs)("li",{className:"flex items-center gap-2",children:[(0,ds.jsx)(Jw,{className:"w-2 h-2"}),e.content]},t))})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(S)try{const e=nk(),t=await fetch("".concat(YL,"/meetings/").concat(S.meeting_id,"/schedule-followup"),{method:"POST",headers:u({"Content-Type":"application/json"},e),credentials:"include",body:JSON.stringify({meeting_date:B.meeting_date,start_time:B.start_time,end_time:B.end_time,location:B.location,participants:S.participants})});if(t.ok)ts.success("Follow-up meeting scheduled"),R(!1),Q(),$();else{const e=await t.json();ts.error(e.detail||"Failed to schedule follow-up")}}catch(e){ts.error("Failed to schedule follow-up")}},children:"Schedule Follow-up"})]})]})})]})},$L="https://shardahrms.com/api",XL={birthday:{label:"Birthday",icon:Qk,color:"amber"},work_anniversary:{label:"Work Anniversary",icon:Zk,color:"blue"},marriage_anniversary:{label:"Marriage Anniversary",icon:eS,color:"pink"},custom:{label:"Custom",icon:B_,color:"emerald"}},JL=()=>{const{user:e}=Cs(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(""),[m,p]=(0,a.useState)("all"),[f,x]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)({emp_code:"",event_type:"birthday",event_date:"",label:""}),N="super_admin"===(null===e||void 0===e?void 0:e.role)||"hr_admin"===(null===e||void 0===e?void 0:e.role),_=(0,a.useCallback)(async()=>{c(!0);try{const e=nk(),[t,a,n]=await Promise.all([fetch("".concat($L,"/events"),{headers:e,credentials:"include"}),fetch("".concat($L,"/employees"),{headers:e,credentials:"include"}),fetch("".concat($L,"/events/upcoming?days=30"),{headers:e,credentials:"include"})]);t.ok&&s(await t.json()),a.ok&&r(await a.json()),n.ok&&i(await n.json())}catch(aI){console.error(aI)}finally{c(!1)}},[]);(0,a.useEffect)(()=>{_()},[_]);const k=t.filter(e=>{var t,s;const a=!d||(null===(t=e.employee_name)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(s=e.emp_code)||void 0===s?void 0:s.toLowerCase().includes(d.toLowerCase())),n="all"===m||e.event_type===m;return a&&n}),S={total:t.length,birthdays:t.filter(e=>"birthday"===e.event_type).length,work:t.filter(e=>"work_anniversary"===e.event_type).length,marriage:t.filter(e=>"marriage_anniversary"===e.event_type).length,upcoming:l.length},C={hidden:{opacity:0,y:16},show:{opacity:1,y:0}};return(0,ds.jsxs)("div",{className:"space-y-6","data-testid":"events-management-page",children:[(0,ds.jsxs)(Nx.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,ds.jsxs)("div",{children:[(0,ds.jsx)("span",{className:"section-pill mono-accent",children:"// Events & Celebrations"}),(0,ds.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mt-2",style:{fontFamily:"Manrope, sans-serif"},children:"Employee Events"}),(0,ds.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Manage birthdays, anniversaries, and celebrations"}),(0,ds.jsx)("div",{className:"header-accent-line mt-3 max-w-[180px]"})]}),(0,ds.jsx)("div",{className:"flex gap-2",children:N&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsxs)(fn,{variant:"outline",onClick:()=>g(!0),"data-testid":"bulk-upload-btn",children:[(0,ds.jsx)(fA,{className:"w-4 h-4 mr-2"})," Bulk Upload"]}),(0,ds.jsxs)(fn,{onClick:()=>x(!0),"data-testid":"add-event-btn",children:[(0,ds.jsx)(CE,{className:"w-4 h-4 mr-2"})," Add Event"]})]})})]}),(0,ds.jsx)(Nx.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[{label:"Total Events",value:S.total,icon:v_,color:"slate"},{label:"Birthdays",value:S.birthdays,icon:Qk,color:"amber"},{label:"Work Anniv.",value:S.work,icon:Zk,color:"blue"},{label:"Marriage Anniv.",value:S.marriage,icon:eS,color:"pink"},{label:"Upcoming (30d)",value:S.upcoming,icon:p_,color:"emerald"}].map((e,t)=>(0,ds.jsx)(Nx.div,{variants:C,children:(0,ds.jsx)(Pn,{className:"stat-card",children:(0,ds.jsxs)(Mn,{className:"p-4 flex items-center gap-3",children:[(0,ds.jsx)("div",{className:"w-10 h-10 rounded-xl bg-".concat(e.color,"-100 flex items-center justify-center"),children:(0,ds.jsx)(e.icon,{className:"w-5 h-5 text-".concat(e.color,"-600")})}),(0,ds.jsxs)("div",{children:[(0,ds.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:e.value}),(0,ds.jsx)("p",{className:"text-xs text-slate-500",children:e.label})]})]})})},t))}),(0,ds.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ds.jsx)("div",{className:"lg:col-span-2",children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsx)(Dn,{className:"pb-3",children:(0,ds.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,ds.jsx)(Rn,{className:"text-lg",children:"All Events"}),(0,ds.jsxs)("div",{className:"flex gap-2",children:[(0,ds.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,ds.jsx)(V_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,ds.jsx)(vn,{placeholder:"Search employee...",className:"pl-9 h-9",value:d,onChange:e=>h(e.target.value),"data-testid":"events-search"})]}),(0,ds.jsxs)(yE,{value:m,onValueChange:p,children:[(0,ds.jsxs)(bE,{className:"w-[160px] h-9",children:[(0,ds.jsx)(EE,{className:"w-3 h-3 mr-1"}),(0,ds.jsx)(jE,{})]}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"all",children:"All Types"}),(0,ds.jsx)(kE,{value:"birthday",children:"Birthday"}),(0,ds.jsx)(kE,{value:"work_anniversary",children:"Work Anniversary"}),(0,ds.jsx)(kE,{value:"marriage_anniversary",children:"Marriage Anniversary"}),(0,ds.jsx)(kE,{value:"custom",children:"Custom"})]})]})]})]})}),(0,ds.jsx)(Mn,{children:o?(0,ds.jsx)("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>(0,ds.jsx)("div",{className:"h-14 skeleton rounded-lg"},t))}):k.length>0?(0,ds.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:k.map(e=>{const t=XL[e.event_type]||XL.custom,s=t.icon;return(0,ds.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-slate-50 transition-colors group","data-testid":"event-".concat(e.event_id),children:[(0,ds.jsx)("div",{className:"w-9 h-9 rounded-lg bg-".concat(t.color,"-100 flex items-center justify-center shrink-0"),children:(0,ds.jsx)(s,{className:"w-4 h-4 text-".concat(t.color,"-600")})}),(0,ds.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ds.jsx)("p",{className:"text-sm font-medium text-slate-800 truncate",children:e.employee_name||e.emp_code}),(0,ds.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,ds.jsx)(tk,{variant:"outline",className:"text-[10px] py-0",children:t.label}),(0,ds.jsx)("span",{className:"text-xs text-slate-400",children:e.event_date}),e.department&&(0,ds.jsx)("span",{className:"text-xs text-slate-400",children:e.department})]})]}),N&&(0,ds.jsx)(fn,{size:"icon",variant:"ghost",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(async e=>{try{(await fetch("".concat($L,"/events/").concat(e),{method:"DELETE",headers:nk(),credentials:"include"})).ok&&(ts.success("Event deleted"),_())}catch(t){ts.error("Failed to delete event")}})(e.event_id),children:(0,ds.jsx)(dk,{className:"w-3.5 h-3.5 text-slate-400"})})]},e.event_id)})}):(0,ds.jsxs)("div",{className:"empty-state",children:[(0,ds.jsx)(v_,{className:"empty-state-icon"}),(0,ds.jsx)("p",{className:"empty-state-title",children:"No events found"}),(0,ds.jsx)("p",{className:"empty-state-description",children:"Add employee events to track celebrations"})]})})]})}),(0,ds.jsx)("div",{children:(0,ds.jsxs)(Pn,{children:[(0,ds.jsxs)(Dn,{className:"pb-3",children:[(0,ds.jsxs)(Rn,{className:"text-lg flex items-center gap-2",children:[(0,ds.jsx)(B_,{className:"w-5 h-5 text-amber-500"})," Upcoming"]}),(0,ds.jsx)(On,{children:"Next 30 days"})]}),(0,ds.jsx)(Mn,{className:"space-y-2 max-h-[450px] overflow-y-auto",children:l.length>0?l.map(e=>{const t=XL[e.event_type]||XL.custom,s=t.icon;return(0,ds.jsxs)("div",{className:"p-3 rounded-lg bg-".concat(t.color,"-50 border border-").concat(t.color,"-100"),children:[(0,ds.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ds.jsx)(s,{className:"w-4 h-4 text-".concat(t.color,"-600")}),(0,ds.jsx)("p",{className:"text-sm font-medium text-".concat(t.color,"-900 truncate"),children:e.employee_name||e.emp_code})]}),(0,ds.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,ds.jsx)("span",{className:"text-xs text-".concat(t.color,"-600"),children:t.label}),(0,ds.jsxs)(tk,{variant:"outline",className:"text-[10px]",children:["in ",e.days_until,"d"]})]})]},e.event_id)}):(0,ds.jsx)("p",{className:"text-sm text-slate-400 text-center py-6",children:"No upcoming events"})})]})})]}),(0,ds.jsx)(eo,{open:f,onOpenChange:x,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Add Employee Event"}),(0,ds.jsx)(oo,{children:"Create a birthday, anniversary, or custom celebration"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Employee *"}),(0,ds.jsxs)(yE,{value:b.emp_code,onValueChange:e=>w(u(u({},b),{},{emp_code:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{placeholder:"Select employee"})}),(0,ds.jsx)(_E,{children:n.slice(0,100).map(e=>(0,ds.jsxs)(kE,{value:e.employee_id,children:[e.first_name," ",e.last_name," (",e.employee_id,")"]},e.employee_id))})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Event Type *"}),(0,ds.jsxs)(yE,{value:b.event_type,onValueChange:e=>w(u(u({},b),{},{event_type:e})),children:[(0,ds.jsx)(bE,{children:(0,ds.jsx)(jE,{})}),(0,ds.jsxs)(_E,{children:[(0,ds.jsx)(kE,{value:"birthday",children:"Birthday"}),(0,ds.jsx)(kE,{value:"work_anniversary",children:"Work Anniversary"}),(0,ds.jsx)(kE,{value:"marriage_anniversary",children:"Marriage Anniversary"}),(0,ds.jsx)(kE,{value:"custom",children:"Custom Event"})]})]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Date *"}),(0,ds.jsx)(vn,{type:"date",value:b.event_date,onChange:e=>w(u(u({},b),{},{event_date:e.target.value}))})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Label (Optional)"}),(0,ds.jsx)(vn,{value:b.label,onChange:e=>w(u(u({},b),{},{label:e.target.value})),placeholder:"e.g., Joined as Engineer"})]})]}),(0,ds.jsxs)(lo,{children:[(0,ds.jsx)(fn,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,ds.jsx)(fn,{onClick:async()=>{if(b.emp_code&&b.event_type&&b.event_date)try{const e=await fetch("".concat($L,"/events"),{method:"POST",headers:u({"Content-Type":"application/json"},nk()),credentials:"include",body:JSON.stringify(b)});if(e.ok)ts.success("Event created"),x(!1),w({emp_code:"",event_type:"birthday",event_date:"",label:""}),_();else{const t=await e.json();ts.error(t.detail||"Failed to create event")}}catch(nI){ts.error("Failed to create event")}else ts.error("Please fill all required fields")},children:"Create Event"})]})]})}),(0,ds.jsx)(eo,{open:v,onOpenChange:g,children:(0,ds.jsxs)(no,{children:[(0,ds.jsxs)(ro,{children:[(0,ds.jsx)(io,{children:"Bulk Upload Events"}),(0,ds.jsx)(oo,{children:"Upload an Excel file with employee events"})]}),(0,ds.jsxs)("div",{className:"space-y-4 py-4",children:[(0,ds.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg border border-dashed border-slate-300",children:[(0,ds.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Download the template, fill it out, and upload:"}),(0,ds.jsxs)(fn,{variant:"outline",size:"sm",onClick:()=>{window.open("".concat($L,"/events/template"),"_blank")},"data-testid":"download-template-btn",children:[(0,ds.jsx)(Kk,{className:"w-4 h-4 mr-2"})," Download Template"]})]}),(0,ds.jsxs)("div",{className:"space-y-2",children:[(0,ds.jsx)(_n,{children:"Upload Excel File"}),(0,ds.jsx)(vn,{type:"file",accept:".xlsx,.xls",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){j(!0);try{const e=new FormData;e.append("file",s);const t=await fetch("".concat($L,"/events/bulk-upload"),{method:"POST",headers:nk(),credentials:"include",body:e});if(t.ok){const e=await t.json();ts.success(e.message),g(!1),_()}else{const e=await t.json();ts.error(e.detail||"Upload failed")}}catch(a){ts.error("Upload failed")}finally{j(!1)}}},disabled:y,"data-testid":"upload-events-file"}),y&&(0,ds.jsx)("p",{className:"text-sm text-primary",children:"Uploading..."})]})]}),(0,ds.jsx)(lo,{children:(0,ds.jsx)(fn,{variant:"outline",onClick:()=>g(!1),children:"Close"})})]})})]})},QL=e=>{let{children:t}=e;const{user:s,loading:a}=Cs(),n=Ne();return a?(0,ds.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,ds.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,ds.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading..."})]})}):s?t:(0,ds.jsx)(Ge,{to:"/login",state:{from:n},replace:!0})},ZL=e=>{let{children:t}=e;const{user:s,loading:a}=Cs();return a?(0,ds.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,ds.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,ds.jsx)("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,ds.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading..."})]})}):s?(0,ds.jsx)(Ge,{to:"/dashboard",replace:!0}):t};function eI(){var e;return null!==(e=Ne().hash)&&void 0!==e&&e.includes("session_id=")?(0,ds.jsx)(Ax,{}):(0,ds.jsxs)(Je,{children:[(0,ds.jsx)($e,{path:"/",element:(0,ds.jsx)(ZL,{children:(0,ds.jsx)(Tx,{})})}),(0,ds.jsx)($e,{path:"/login",element:(0,ds.jsx)(ZL,{children:(0,ds.jsx)(Tx,{})})}),(0,ds.jsxs)($e,{path:"/dashboard",element:(0,ds.jsx)(QL,{children:(0,ds.jsx)(xk,{})}),children:[(0,ds.jsx)($e,{index:!0,element:(0,ds.jsx)(rS,{})}),(0,ds.jsx)($e,{path:"employees",element:(0,ds.jsx)(LT,{})}),(0,ds.jsx)($e,{path:"employees/:id",element:(0,ds.jsx)(jA,{})}),(0,ds.jsx)($e,{path:"employee/:employeeId",element:(0,ds.jsx)(NA,{})}),(0,ds.jsx)($e,{path:"attendance",element:(0,ds.jsx)(OA,{})}),(0,ds.jsx)($e,{path:"leave",element:(0,ds.jsx)(YO,{})}),(0,ds.jsx)($e,{path:"announcements",element:(0,ds.jsx)(XO,{})}),(0,ds.jsx)($e,{path:"payroll",element:(0,ds.jsx)(tM,{})}),(0,ds.jsx)($e,{path:"performance",element:(0,ds.jsx)(WM,{})}),(0,ds.jsx)($e,{path:"assets",element:(0,ds.jsx)(ZM,{})}),(0,ds.jsx)($e,{path:"expenses",element:(0,ds.jsx)(nF,{})}),(0,ds.jsx)($e,{path:"import",element:(0,ds.jsx)(iF,{})}),(0,ds.jsx)($e,{path:"master-setup",element:(0,ds.jsx)(cF,{})}),(0,ds.jsx)($e,{path:"helpdesk",element:(0,ds.jsx)(VF,{})}),(0,ds.jsx)($e,{path:"recruitment",element:(0,ds.jsx)(WF,{})}),(0,ds.jsx)($e,{path:"onboarding",element:(0,ds.jsx)(KF,{})}),(0,ds.jsx)($e,{path:"reports",element:(0,ds.jsx)(XF,{})}),(0,ds.jsx)($e,{path:"labour",element:(0,ds.jsx)(ZF,{})}),(0,ds.jsx)($e,{path:"documents",element:(0,ds.jsx)(nL,{})}),(0,ds.jsx)($e,{path:"report-builder",element:(0,ds.jsx)(iL,{})}),(0,ds.jsx)($e,{path:"user-management",element:(0,ds.jsx)(cL,{})}),(0,ds.jsx)($e,{path:"training",element:(0,ds.jsx)(hL,{})}),(0,ds.jsx)($e,{path:"travel",element:(0,ds.jsx)(pL,{})}),(0,ds.jsx)($e,{path:"tours",element:(0,ds.jsx)(xL,{})}),(0,ds.jsx)($e,{path:"tour-management",element:(0,ds.jsx)(xL,{})}),(0,ds.jsx)($e,{path:"data-management",element:(0,ds.jsx)(yL,{})}),(0,ds.jsx)($e,{path:"biometric",element:(0,ds.jsx)(SL,{})}),(0,ds.jsx)($e,{path:"insurance",element:(0,ds.jsx)(EL,{})}),(0,ds.jsx)($e,{path:"holidays",element:(0,ds.jsx)(PL,{})}),(0,ds.jsx)($e,{path:"sop",element:(0,ds.jsx)(ML,{})}),(0,ds.jsx)($e,{path:"my-calendar",element:(0,ds.jsx)(HL,{})}),(0,ds.jsx)($e,{path:"meetings",element:(0,ds.jsx)(KL,{})}),(0,ds.jsx)($e,{path:"events",element:(0,ds.jsx)(JL,{})}),(0,ds.jsx)($e,{path:"calendar",element:(0,ds.jsx)(HL,{})}),(0,ds.jsx)($e,{path:"settings",element:(0,ds.jsx)(QO,{})})]}),(0,ds.jsx)($e,{path:"*",element:(0,ds.jsx)(Ge,{to:"/login",replace:!0})})]})}const tI=function(){return(0,a.useEffect)(()=>{vs.isNativePlatform()&&document.body.classList.add("capacitor-app")},[]),(0,ds.jsx)(At,{children:(0,ds.jsxs)(As,{children:[(0,ds.jsx)(eI,{}),(0,ds.jsx)(us,{position:"top-right",richColors:!0})]})})};r.createRoot(document.getElementById("root")).render((0,ds.jsx)(tI,{}))})();
//# sourceMappingURL=main.e6de2d98.js.map